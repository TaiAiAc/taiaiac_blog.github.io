<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Git手动提交</title>
    <url>/taiaiac.gitee.io/2020/12/30/Git/Git%E6%89%8B%E5%8A%A8%E6%8F%90%E4%BA%A4/</url>
    <content><![CDATA[<p>如何用命令将本地项目上传到 git<br>1、（先进入项目文件夹）通过命令 git init 把这个目录变成 git 可以管理的仓库<br>git init</p>
<p>2、把文件添加到版本库中，使用命令 git add .添加到暂存区里面去，不要忘记后面的小数点“.”，意为添加文件夹下的所有文件<br>git add .</p>
<p>3、用命令 git commit 告诉 Git，把文件提交到仓库。引号内为提交说明<br>git commit -m ‘first commit’</p>
<p>4、关联到远程库<br>git remote add origin 你的远程库地址<br>如：<br>git remote add origin <a href="https://github.com/githubusername/demo.git">https://github.com/githubusername/demo.git</a></p>
<p>5、获取远程库与本地同步合并（如果远程库不为空必须做这一步，否则后面的提交会失败）<br>git pull –rebase origin master</p>
<p>6、把本地库的内容推送到远程，使用 git push 命令，实际上是把当前分支 master 推送到远程。执行此命令后会要求输入用户名、密码，验证通过后即开始上传。<br>git push -u origin master *、状态查询命令<br>git status</p>
<p>使用 git GUI 手动提交的流程<br>1、创建文件夹<br>2、在文件夹中创建文件，输入内容，否则不能上传<br>3、点击右键 git bash<br>4、在 gitee 上手动创建仓库，公开的，保存仓库的地址 1)登录<a href="https://gitee.com/">https://gitee.com</a> 2)进入我的工作台 3)在左下角 仓库—&gt;+(创建仓库)—&gt;输入仓库的名称 4)保存仓库的地址备用</p>
<p>5、按流程进行命令<br>git init<br>git add .<br>git commit -m “你的信息”<br>git remote add origin 你的 git 远程仓库地址<br>//如：git remote add origin <a href="https://github.com/githubusername/demo.git(%E5%88%AB%E5%BF%98%E4%BA%86%E5%BF%85%E9%A1%BB%E5%B8%A6.git)">https://github.com/githubusername/demo.git(别忘了必须带.git)</a><br>git pull –rebase orgin master<br>git push -u origin master</p>
<p>6、使用 git GUI 可视化工具进行手动提交 1)在文件夹空白出点击鼠标右键—&gt;git GUI Here 2)点击 Rescan 3)点击 Stage Changed 4)在右侧输入本次提交数据的信息 5)点击 Push—&gt;push</p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201106135907915.png" alt="image-20201106135907915"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">890768a4a0d8fef582cd3cbbaade86c3</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git命令行</title>
    <url>/taiaiac.gitee.io/2020/12/30/Git/%E5%91%BD%E4%BB%A4%E8%A1%8C/</url>
    <content><![CDATA[<h3 id="Git-全局设置"><a href="#Git-全局设置" class="headerlink" title="Git 全局设置:"></a>Git 全局设置:</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git config --global user<span class="selector-class">.name</span> &quot;爱民艾米&quot;</span><br><span class="line">git config --global user<span class="selector-class">.email</span> &quot;<span class="number">528627554</span><span class="keyword">@qq</span>.com&quot;</span><br></pre></td></tr></table></figure>

<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<h3 id="添加文件"><a href="#添加文件" class="headerlink" title="添加文件"></a>添加文件</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git add README<span class="selector-class">.md</span></span><br></pre></td></tr></table></figure>

<h3 id="添加信息"><a href="#添加信息" class="headerlink" title="添加信息"></a>添加信息</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;信息&quot;</span><br></pre></td></tr></table></figure>

<h3 id="设置远程仓库"><a href="#设置远程仓库" class="headerlink" title="设置远程仓库"></a>设置远程仓库</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git remote add origin 网址</span><br></pre></td></tr></table></figure>

<h3 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<h3 id="查看当前仓库地址信息"><a href="#查看当前仓库地址信息" class="headerlink" title="查看当前仓库地址信息"></a>查看当前仓库地址信息</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git remote -v  // 查看远端地址</span><br><span class="line">git remote     // 查看远端仓库名</span><br></pre></td></tr></table></figure>

<h3 id="删除仓库"><a href="#删除仓库" class="headerlink" title="删除仓库"></a>删除仓库</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure>

<h3 id="删除缓存"><a href="#删除缓存" class="headerlink" title="删除缓存"></a>删除缓存</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git rm -r -f --cached ./</span><br></pre></td></tr></table></figure>

<h3 id="更换仓库地址"><a href="#更换仓库地址" class="headerlink" title="更换仓库地址"></a>更换仓库地址</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git remote set-url origin  // 新地址</span><br></pre></td></tr></table></figure>

<h3 id="拉取项目"><a href="#拉取项目" class="headerlink" title="拉取项目"></a>拉取项目</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">git clone  // 地址</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git学习</title>
    <url>/taiaiac.gitee.io/2020/12/30/Git/Git%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><blockquote>
<p><a href="https://zh.wikipedia.org/wiki/Git">维基百科 - Git</a></p>
</blockquote>
<h3 id="学习资源介绍"><a href="#学习资源介绍" class="headerlink" title="学习资源介绍"></a>学习资源介绍</h3><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/">Git 教程 - 廖雪峰</a></li>
<li><a href="http://git.oschina.net/progit/">Pro Git</a></li>
<li><a href="http://rogerdudler.github.io/git-guide/index.zh.html">git - 简明指南</a></li>
<li><a href="http://backlogtool.com/git-guide/cn/">猴子都能懂的 GIT 入门</a></li>
</ul>
<h3 id="Git-简介"><a href="#Git-简介" class="headerlink" title="Git 简介"></a>Git 简介</h3><ul>
<li>是什么<ul>
<li>Git 是一种版本控制系统，是一个命令，是一种工具</li>
<li>gitlib 是用于实现 git 功能的开发库</li>
<li>github 是一个基于 git 实现的在线代码仓库，包含一个网站界面，向互联网开放</li>
<li>gitlab 是一个基于 git 实现的在线代码仓库软件，你可以用 gitlab 自己搭建一个类似于 github 一样的系统，一般用于在企业、学校等内部网络搭建 git 私服</li>
</ul>
</li>
<li>有什么用，可以解决什么问题<ul>
<li>保存历史记录</li>
<li>多人协作</li>
</ul>
</li>
<li>有了 SVN，为啥要学 Git<ul>
<li>Git 火</li>
<li>Git 相对于 <code>SVN </code>来说，更强大，用户也非常多</li>
</ul>
</li>
<li>怎么用</li>
<li>Git 的诞生<ul>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137402760310626208b4f695940a49e5348b689d095fc000">http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137402760310626208b4f695940a49e5348b689d095fc000</a></li>
</ul>
</li>
</ul>
<h3 id="Git-使用交互流程"><a href="#Git-使用交互流程" class="headerlink" title="Git 使用交互流程"></a>Git 使用交互流程</h3><p><img src="../../imgs/image-20201228101811558.png" alt="image-20201228101811558"></p>
<h3 id="安装和配置-Git-环境"><a href="#安装和配置-Git-环境" class="headerlink" title="安装和配置 Git 环境"></a>安装和配置 Git 环境</h3><ul>
<li>下载地址：<a href="https://git-scm.com/">https://git-scm.com/</a></li>
</ul>
<h4 id="git-bash-常用命令"><a href="#git-bash-常用命令" class="headerlink" title="git-bash 常用命令"></a>git-bash 常用命令</h4><ul>
<li><code>pwd</code></li>
<li>ls<ul>
<li>ls -a</li>
</ul>
</li>
<li><code>cd</code>、<ul>
<li>到文件目录</li>
</ul>
</li>
<li><code>mkdir</code><ul>
<li>创建目录</li>
</ul>
</li>
<li>clear<ul>
<li>清屏</li>
</ul>
</li>
<li><code>rmdir</code><ul>
<li>只能删除空目录</li>
</ul>
</li>
<li>rm<ul>
<li>rm 文件名</li>
<li><code>rm -rf</code> 目录名<ul>
<li>注：很强大，可以删除非空目录，以及一些比较顽固的文件或者目录</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="初始化配置"><a href="#初始化配置" class="headerlink" title="初始化配置"></a>初始化配置</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置用户名</span></span><br><span class="line">git config --global user.name <span class="string">&quot;你的名字&quot;</span></span><br><span class="line"><span class="comment"># 配置用户邮箱</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的常用邮箱&quot;</span></span><br><span class="line"><span class="comment"># 设置 gitk 图形查看工具中文显示默认编码（防止乱码）</span></span><br><span class="line">git config --global gui.encoding utf-8</span><br><span class="line"><span class="comment"># 查看配置列表项</span></span><br><span class="line">git config --list</span><br></pre></td></tr></table></figure>

<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ul>
<li><code>git init</code><ul>
<li>初始化一个 Git 仓库</li>
</ul>
</li>
<li><code>git status</code><ul>
<li>查看当前工作区、暂存区、本地仓库的状态</li>
</ul>
</li>
<li><code>git add</code><ul>
<li>添加到缓存区</li>
</ul>
</li>
<li><code>git commit</code><ul>
<li>示例：<code>git commit -m &quot;日志说明&quot; --author=&quot;操作者姓名 &lt;邮箱&gt;&quot;</code></li>
<li>执行 <code>git commit</code> 的时候，Git 会要求具有用户名和邮箱的参数选项</li>
<li>可以通过 <code>git config</code> 命令配置一下用户名和邮箱</li>
</ul>
</li>
<li><code>git log</code><ul>
<li>查看版本号</li>
</ul>
</li>
<li><code>gitk</code></li>
</ul>
<p>总结：操作 Git 的基本工作流程就是先修改文件，然后执行 <code>git add</code> 命令。<br><code>git add</code> 命令会把文件加入到暂存区，接着就可以执行 <code>git commit</code> 命令，将文件存入文档库，<br>从而形成一次历史记录。</p>
<ul>
<li>问题 1：关于 Git-bash 中文问题</li>
<li><a href="https://github.com/msysgit/msysgit/wiki/Git-for-Windows-Unicode-Support">Git for Windows Unicode Support</a></li>
<li>问题 2：执行 commit 的时候一大堆的信息</li>
<li>问题 3：配置<code>user.name</code>和 <code>user.email</code> 问题</li>
</ul>
<h3 id="工作区、暂存区、本地仓库"><a href="#工作区、暂存区、本地仓库" class="headerlink" title="工作区、暂存区、本地仓库"></a>工作区、暂存区、本地仓库</h3><h3 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># git rm --cached &lt;file&gt;</span></span><br><span class="line"><span class="comment"># 恢复暂存区的指定文件到工作区</span></span><br><span class="line">$ git checkout [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复某个commit的指定文件到暂存区和工作区</span></span><br><span class="line">$ git checkout [commit] [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复暂存区的所有文件到工作区</span></span><br><span class="line">$ git checkout .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span></span><br><span class="line">$ git reset [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置暂存区与工作区，与上一次commit保持一致</span></span><br><span class="line">$ git reset --hard</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span></span><br><span class="line">$ git reset [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span></span><br><span class="line">$ git reset --hard [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span></span><br><span class="line">$ git reset --keep [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个commit，用来撤销指定commit</span></span><br><span class="line"><span class="comment"># 后者的所有变化都将被前者抵消，并且应用到当前分支</span></span><br><span class="line">$ git revert [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂时将未提交的变化移除，稍后再移入</span></span><br><span class="line">$ git stash</span><br><span class="line">$ git stash pop</span><br></pre></td></tr></table></figure>

<h3 id="远程同步"><a href="#远程同步" class="headerlink" title="远程同步"></a>远程同步</h3><ul>
<li>remote</li>
<li>push</li>
<li>pull</li>
</ul>
<h3 id="在线仓库托管服务"><a href="#在线仓库托管服务" class="headerlink" title="在线仓库托管服务"></a>在线仓库托管服务</h3><blockquote>
<p>一个不知道 <code>github</code>、<code>stackoverflow</code> 的程序员想想都是可悲的</p>
</blockquote>
<ul>
<li><code>github</code></li>
<li>码云</li>
<li>coding</li>
</ul>
<hr>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a><code>Github</code></h2><blockquote>
<p><code>Github</code> 就是程序员的新浪微博<br>它可以让你使用社交化的方式进行编程协作、</p>
<ul>
<li>点赞<ul>
<li>评论<ul>
<li>转发</li>
<li>etc.<br>主要作用：可以免费在线托管你的仓库<br>可以实现多人协作<br>提供了一个可视化界面（Web Page）让你能直观清晰的了解你的项目源代码</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h3><ul>
<li>注册</li>
<li>登陆</li>
<li>创建远程仓库</li>
<li>通过 <code>git clone</code> 命令下载远程仓库到本地<ul>
<li>git clone 会自动帮你把远程仓库下载到本地，不需要再去 git init 了</li>
<li>通过 clone 下来的仓库，git 有一个远程仓库地址列表，git 默认会把你 clone 的地址起一个别名：origin</li>
<li>然后你执行 push 的时候实际上就是将本地的版本提交到 origin 上</li>
</ul>
</li>
<li>在本地进行操作，通过 <code>git commit</code> 形成历史记录</li>
<li>通过 <code>git push</code> 将本地仓库中的历史记录提交到远程仓库</li>
</ul>
<h3 id="本地已有仓库，需要提交到线上"><a href="#本地已有仓库，需要提交到线上" class="headerlink" title="本地已有仓库，需要提交到线上"></a>本地已有仓库，需要提交到线上</h3><p>如果是 <code>git init</code> 出来的仓库，进行 <code>push</code> 提交的时候就不知道要往哪里 push。</p>
<p>所以，这里通过 <code>remote</code> 相关命令进行设置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有的远程仓库信息</span></span><br><span class="line">git remote show</span><br><span class="line"><span class="comment"># 根据别名查看指定的远程仓库信息</span></span><br><span class="line">git remote show 远程仓库地址别名</span><br><span class="line"><span class="comment"># 添加远程仓库信息</span></span><br><span class="line">git remote add 别名 远程仓库地址</span><br></pre></td></tr></table></figure>

<p>通过上面的 <code>git remote add</code> 添加完远程仓库地址信息之后，还不能直接 <code>git push</code>，必须在每一次<br><code>push</code> 的时候加上 <code>git push 仓库地址别名 master</code> 就可以提交了。</p>
<p>如果想要省略 <code>git push</code> 后面需要指定的 <code>仓库地址别名 master</code> 可以通过下面的命令修改：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push --set-upstream heima master</span><br></pre></td></tr></table></figure>

<p>这样就可以直接使用 <code>git pish</code> 进行提交而不需要指定 <code>heima master</code> 了</p>
<h2 id="Git-bash-文件操作相关命令"><a href="#Git-bash-文件操作相关命令" class="headerlink" title="Git-bash 文件操作相关命令"></a>Git-bash 文件操作相关命令</h2><ul>
<li>touch：创建文件</li>
<li>cat：查看文件</li>
<li>less：查看大文本文件</li>
<li>vi：visual interface<ul>
<li>Esc 退出到命令模式</li>
<li>i 进入插入模式</li>
<li>:q 退出 vi</li>
<li>:w 保存编辑</li>
<li>:wq 保存并退出</li>
<li>:q! 强制退出不保存修改</li>
<li>vi 的所有操作基本全部是命令，这里掌握基本使用基于可以了</li>
<li>有时候使用 git commit 进行提交的时候希望能多写几行提交日志，这时候可以省略 -m 参数进入 vi 编辑模式</li>
</ul>
</li>
</ul>
<h2 id="Git-1"><a href="#Git-1" class="headerlink" title="Git"></a>Git</h2><p><img src="../imgs/image-20201228154233218.png" alt="image-20201228154233218"></p>
<h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><ul>
<li>git init</li>
<li>git status</li>
<li>git add</li>
<li>git commit</li>
<li>git log</li>
</ul>
<h3 id="添加-删除文件"><a href="#添加-删除文件" class="headerlink" title="添加/删除文件"></a>添加/删除文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加指定文件到暂存区</span></span><br><span class="line">git add [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加指定目录到暂存区，包括子目录</span></span><br><span class="line">git add [dir]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加当前目录的所有文件到暂存区</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除工作区文件，并且将这次删除放入暂存区</span></span><br><span class="line">git rm [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止追踪指定文件，但该文件会保留在工作区</span></span><br><span class="line">git rm --cached [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改名文件，并且将这个改名放入暂存区</span></span><br><span class="line">git mv [file-original] [file-renamed]</span><br></pre></td></tr></table></figure>

<h3 id="代码提交"><a href="#代码提交" class="headerlink" title="代码提交"></a>代码提交</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 提交暂存区到仓库区</span></span><br><span class="line">git commit -m [message]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交暂存区的指定文件到仓库区</span></span><br><span class="line">git commit [file1] [file2] ... -m [message]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交工作区自上次commit之后的变化，直接到仓库区</span></span><br><span class="line">git commit -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用一次新的commit，替代上一次提交</span></span><br><span class="line"><span class="comment"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span></span><br><span class="line">git commit --amend -m [message]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重做上一次commit，并包括指定文件的新变化</span></span><br><span class="line">git commit --amend [file1] [file2] ...</span><br></pre></td></tr></table></figure>

<h3 id="回退撤销"><a href="#回退撤销" class="headerlink" title="回退撤销"></a>回退撤销</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 恢复暂存区的指定文件到工作区</span></span><br><span class="line">git checkout [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复某个commit的指定文件到暂存区和工作区</span></span><br><span class="line">git checkout [commit] [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复暂存区的所有文件到工作区</span></span><br><span class="line">git checkout .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span></span><br><span class="line">git reset [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置暂存区与工作区，与上一次commit保持一致</span></span><br><span class="line">git reset --hard</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span></span><br><span class="line">git reset [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span></span><br><span class="line">git reset --hard [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span></span><br><span class="line">git reset --keep [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个commit，用来撤销指定commit</span></span><br><span class="line"><span class="comment"># 后者的所有变化都将被前者抵消，并且应用到当前分支</span></span><br><span class="line">git revert [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂时将未提交的变化移除，稍后再移入</span></span><br><span class="line">git stash</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<h3 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h3><p>默认在 git 的仓库中，会有个分支的原点：master</p>
<p><img src="../imgs%5Cimage-20201228155143820.png" alt="image-20201228155143820"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列出所有本地分支</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基于当前分支新建一个分支，但依然停留在当前分支</span></span><br><span class="line">git branch [branch-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基于当前分支新建一个分支，并切换到该分支</span></span><br><span class="line">git checkout -b [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到指定分支，并更新工作区</span></span><br><span class="line">git checkout [branch-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到上一个分支，交替和上一个分支进行切换</span></span><br><span class="line">git checkout -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并指定分支到当前分支</span></span><br><span class="line">git merge [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除分支</span></span><br><span class="line">git branch -d [branch-name]</span><br></pre></td></tr></table></figure>

<h3 id="远程操作"><a href="#远程操作" class="headerlink" title="远程操作"></a>远程操作</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载一个远程仓库</span></span><br><span class="line">$ git <span class="built_in">clone</span> [url]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有远程仓库</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示某个远程仓库的信息</span></span><br><span class="line">git remote show [remote]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加一个新的远程仓库，并命名</span></span><br><span class="line">git remote add [shortname] [url]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取回远程仓库的变化，并与本地分支合并</span></span><br><span class="line">git pull [remote] [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传本地指定分支到远程仓库</span></span><br><span class="line">git push [remote] [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强行推送当前分支到远程仓库，即使有冲突</span></span><br><span class="line">git push [remote] --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆最新一次提交</span></span><br><span class="line">git <span class="built_in">clone</span> 网址 --depth=1</span><br></pre></td></tr></table></figure>

<h3 id="Git-工作流程：分支策略"><a href="#Git-工作流程：分支策略" class="headerlink" title="Git 工作流程：分支策略"></a>Git 工作流程：分支策略</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2015/12/git-workflow.html">Git 工作流程</a></li>
</ul>
<h4 id="Git-Flow"><a href="#Git-Flow" class="headerlink" title="Git Flow"></a>Git Flow</h4><h4 id="Github-Collabrators"><a href="#Github-Collabrators" class="headerlink" title="Github Collabrators"></a>Github Collabrators</h4><p>这种方式公司团队项目使用居多</p>
<h4 id="Github-Flow"><a href="#Github-Flow" class="headerlink" title="Github Flow"></a>Github Flow</h4><p>这种方式开源项目使用居多</p>
<ul>
<li>fork</li>
<li>clone 到你的本地</li>
<li>在 clone 下来的项目中拉出一个新的分支<ul>
<li>修改的时候最好是基于 master 拉出一个修改的分支，例如这个分支是用来添加某个功能的</li>
</ul>
</li>
<li>在新分支上开发或者修改完成之后，提交到本地仓库，然后 push 推到自己的账户中 fork 过来的仓库</li>
<li>最后，在 Github 上你 fork 过来的仓库界面中找到 New Pull Request 发起提交请求</li>
<li>对方就会在仓库的 Pull Requests 中收到你发起的提交请求<ul>
<li>然后双方就可以使用社会化交流方式进行沟通协作</li>
<li>例如 Code Review 代码审查</li>
</ul>
</li>
<li>最后对方审查通过没有问题之后，选择 Merge Request</li>
<li>到此，一个完整的 Github 工作流结束</li>
<li>这种方式开源项目更多一些（大家都不认识）</li>
</ul>
<h4 id="Gitlab-flow"><a href="#Gitlab-flow" class="headerlink" title="Gitlab flow"></a>Gitlab flow</h4><h3 id="Gitlab"><a href="#Gitlab" class="headerlink" title="Gitlab"></a>Gitlab</h3><p>对于第三方代码仓库托管服务有很多，其中 Github 最火，但是如果想要托管私有项目收费比较高，<br>而且在国内受限于网络环境影响，鲜少有公司使用。</p>
<p>也有的公司，例如京东、淘宝这种级别的公司，也不太常用别的第三方的托管服务。</p>
<p>Gitlab 是一个开源的类似于 Github 的一个系统，开源免费部署到自己的公司内容。</p>
<hr>
<h2 id="与-Github-进行多人协作"><a href="#与-Github-进行多人协作" class="headerlink" title="与 Github 进行多人协作"></a>与 Github 进行多人协作</h2><h3 id="Collaborators"><a href="#Collaborators" class="headerlink" title="Collaborators"></a>Collaborators</h3><h3 id="Pull-Request"><a href="#Pull-Request" class="headerlink" title="Pull Request"></a>Pull Request</h3><hr>
<h2 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h2><p>Github Pages 提供了一个免费在线托管静态资源的服务，叫做：Github Pages。</p>
<p>使用方法如下：</p>
<ol>
<li>在个人的 Github 账户中创建一个仓库</li>
<li>仓库名称必须为 <code>个人账户名称.github.io</code></li>
<li>往该仓库根目录中提交一个 <code>index.html</code> 文件</li>
<li>然后就可以在地址栏输入 <code>个人账户名称.github.io</code> 地址，就可以看到 <code>index.html</code> 网页内容了</li>
</ol>
<p>注意：上面创建的仓库名称必须是 <code>个人账户名称.github.io</code> ，否则无法访问</p>
<h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>Hexo 是基于 Node.js 开发的一个静态博客生成器，提供本地实时预览及部署功能。<br>基本使用方式如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动本地预览服务，默认是 127.0.0.1:4000</span></span><br><span class="line">hexo server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建文章</span></span><br><span class="line">hexo new 文章标题</span><br></pre></td></tr></table></figure>

<p>也可以参考 Hexo 官方文档：<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a> , 里面有具体的使用方式。</p>
<h3 id="自动发布-Hexo-搭建的静态博客"><a href="#自动发布-Hexo-搭建的静态博客" class="headerlink" title="自动发布 Hexo 搭建的静态博客"></a>自动发布 Hexo 搭建的静态博客</h3><p>第一：先修改 <code>_config.yml</code> 配置文件，下面是一个示例：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://heima04:heima123456@github.com/heima04/heima04.github.io.git</span></span><br></pre></td></tr></table></figure>

<p>上面的配置选项中，一定要注意在 repo 中按照对应的格式加入 Github 用户名和密码。</p>
<p>第二：安装自动发布的插件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>第三：使用命令一键进行发布：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo generate --deploy</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">hexo deploy --generate</span><br></pre></td></tr></table></figure>

<p>上面两条命令都可以，发布可能有延时，稍微等待即可。</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>24个解决实际问题的ES6代码段</title>
    <url>/taiaiac.gitee.io/2021/01/07/ES6/24%E4%B8%AA%E8%A7%A3%E5%86%B3%E5%AE%9E%E9%99%85%E9%97%AE%E9%A2%98%E7%9A%84ES6%E4%BB%A3%E7%A0%81%E6%AE%B5/</url>
    <content><![CDATA[<p>24个解决实际问题的ES6代码段</p>
<p>Vue中文社区  今天<br>图片<br>英文 | <a href="https://madza.hashnode.dev/24-modern-es6-code-snippets-to-solve-practical-js-problems">https://madza.hashnode.dev/24-modern-es6-code-snippets-to-solve-practical-js-problems</a><br>作者 | Madza 译者 | 王强 策划 | 李俊辰<br>这篇文章基于实际使用场景总结了 24 个 ES6 代码段，可用来解决项目中可能遇到的一系列问题。</p>
<h1 id="1、如何隐藏所有指定元素？"><a href="#1、如何隐藏所有指定元素？" class="headerlink" title="1、如何隐藏所有指定元素？"></a>1、如何隐藏所有指定元素？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hide = <span class="function">(<span class="params">...el</span>) =&gt;</span> [...el].forEach(<span class="function"><span class="params">e</span> =&gt;</span> (e.style.display = <span class="string">&quot;none&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Example</span></span><br><span class="line">hide(<span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;img&quot;</span>));  <span class="comment">// 隐藏页面上所有&lt;img /&gt;元素</span></span><br></pre></td></tr></table></figure>

<h1 id="2、如何确认元素是否具有指定的类？"><a href="#2、如何确认元素是否具有指定的类？" class="headerlink" title="2、如何确认元素是否具有指定的类？"></a>2、如何确认元素是否具有指定的类？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hasClass = <span class="function">(<span class="params">el, className</span>) =&gt;</span> el.classList.contains(className); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">hasClass(<span class="built_in">document</span>.querySelector(<span class="string">&quot;p.special&quot;</span>), <span class="string">&quot;special&quot;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h1 id="3、如何切换元素的类？"><a href="#3、如何切换元素的类？" class="headerlink" title="3、如何切换元素的类？"></a>3、如何切换元素的类？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> toggleClass = <span class="function">(<span class="params">el, className</span>) =&gt;</span> el.classList.toggle(className); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">toggleClass(<span class="built_in">document</span>.querySelector( p.special ),  special ); <span class="comment">// 该段不再有 &quot;special&quot; 类</span></span><br></pre></td></tr></table></figure>

<h1 id="4、如何获取当前页面的滚动位置？"><a href="#4、如何获取当前页面的滚动位置？" class="headerlink" title="4、如何获取当前页面的滚动位置？"></a>4、如何获取当前页面的滚动位置？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollPosition = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span> (&#123; </span><br><span class="line">    <span class="attr">x</span>: el.pageXOffset !== <span class="literal">undefined</span> ? el.pageXOffset : el.scrollLeft, </span><br><span class="line">    <span class="attr">y</span>: el.pageYOffset !== <span class="literal">undefined</span> ? el.pageYOffset : el.scrollTop </span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">getScrollPosition(); <span class="comment">// &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="5、如何评价滚动到页面顶部？"><a href="#5、如何评价滚动到页面顶部？" class="headerlink" title="5、如何评价滚动到页面顶部？"></a>5、如何评价滚动到页面顶部？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollToTop = <span class="function">() =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;     </span><br><span class="line">    <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;         </span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);         </span><br><span class="line">        <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">scrollToTop();</span><br></pre></td></tr></table></figure>

<h1 id="6、如何确认父元素是否包含子元素？"><a href="#6、如何确认父元素是否包含子元素？" class="headerlink" title="6、如何确认父元素是否包含子元素？"></a>6、如何确认父元素是否包含子元素？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> elementContains = <span class="function">(<span class="params">parent, child</span>) =&gt;</span> parent !== child &amp;&amp; parent.contains(child);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples  </span></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">&quot;head&quot;</span>), <span class="built_in">document</span>.querySelector(<span class="string">&quot;title&quot;</span>));  <span class="comment">// true  </span></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">&quot;body&quot;</span>), <span class="built_in">document</span>.querySelector(<span class="string">&quot;body&quot;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h1 id="7、如何确认指定元素是否在视口可见？"><a href="#7、如何确认指定元素是否在视口可见？" class="headerlink" title="7、如何确认指定元素是否在视口可见？"></a>7、如何确认指定元素是否在视口可见？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> elementIsVisibleInViewport = <span class="function">(<span class="params">el, partiallyVisible = <span class="literal">false</span></span>) =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">const</span> &#123; top, left, bottom, right &#125; = el.getBoundingClientRect();     </span><br><span class="line">    <span class="keyword">const</span> &#123; innerHeight, innerWidth &#125; = <span class="built_in">window</span>;     </span><br><span class="line">    <span class="keyword">return</span> partiallyVisible ? ((top &gt; <span class="number">0</span> &amp;&amp; top &lt; innerHeight) || (bottom &gt; <span class="number">0</span> &amp;&amp; bottom &lt; innerHeight)) &amp;&amp; ((left &gt; <span class="number">0</span> &amp;&amp; left &lt; innerWidth) || (right &gt; <span class="number">0</span> &amp;&amp; right &lt; innerWidth)) : top &gt;= <span class="number">0</span> &amp;&amp; left &gt;= <span class="number">0</span> &amp;&amp; bottom &lt;= innerHeight &amp;&amp; right &lt;= innerWidth; </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples </span></span><br><span class="line">elementIsVisibleInViewport(el); <span class="comment">// (不完全可见) </span></span><br><span class="line">elementIsVisibleInViewport(el, <span class="literal">true</span>); <span class="comment">// (部分可见)</span></span><br></pre></td></tr></table></figure>

<h1 id="8、如何获取一个元素内的所有图像？"><a href="#8、如何获取一个元素内的所有图像？" class="headerlink" title="8、如何获取一个元素内的所有图像？"></a>8、如何获取一个元素内的所有图像？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getImages = <span class="function">(<span class="params">el, includeDuplicates = <span class="literal">false</span></span>) =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">const</span> images = [...el.getElementsByTagName(<span class="string">&quot;img&quot;</span>)].map(<span class="function"><span class="params">img</span> =&gt;</span> img.getAttribute(<span class="string">&quot;hide&quot;</span>));     </span><br><span class="line">    <span class="keyword">return</span> includeDuplicates ? images : [...new <span class="built_in">Set</span>(images)]; </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples </span></span><br><span class="line">getImages(<span class="built_in">document</span>, <span class="literal">true</span>); <span class="comment">// [&quot;image1.jpg&quot;, &quot;image2.png&quot;, &quot;image1.png&quot;, &quot;...&quot;] </span></span><br><span class="line">getImages(<span class="built_in">document</span>, <span class="literal">false</span>); <span class="comment">// [&quot;image1.jpg&quot;, &quot;image2.png&quot;, &quot;...&quot;]</span></span><br></pre></td></tr></table></figure>

<h1 id="9、如何分辨设备是移动设备还是桌面设备？"><a href="#9、如何分辨设备是移动设备还是桌面设备？" class="headerlink" title="9、如何分辨设备是移动设备还是桌面设备？"></a>9、如何分辨设备是移动设备还是桌面设备？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> detectDeviceType = <span class="function">() =&gt;</span> <span class="regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span>.test(navigator.userAgent) ? <span class="string">&quot;Mobile&quot;</span> : <span class="string">&quot;Desktop&quot;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">detectDeviceType(); <span class="comment">// &quot;Mobile&quot; or &quot;Desktop&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="10、如何获取当前-URL？"><a href="#10、如何获取当前-URL？" class="headerlink" title="10、如何获取当前 URL？"></a>10、如何获取当前 URL？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> currentURL = <span class="function">() =&gt;</span> <span class="built_in">window</span>.location.href; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">currentURL(); <span class="comment">// &quot;https://google.com&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="11、如何创建一个包含当前-URL-参数的对象？"><a href="#11、如何创建一个包含当前-URL-参数的对象？" class="headerlink" title="11、如何创建一个包含当前 URL 参数的对象？"></a>11、如何创建一个包含当前 URL 参数的对象？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getURLParameters = <span class="function"><span class="params">url</span> =&gt;</span> (url.match(<span class="regexp">/([^?=&amp;]+)(=([^&amp;]*))/g</span>) || []).reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> ((a[v.slice(<span class="number">0</span>, v.indexOf( = ))] = v.slice(v.indexOf( = ) + <span class="number">1</span>)), a), &#123;&#125;); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples </span></span><br><span class="line">getURLParameters(<span class="string">&quot;http://url.com/page?n=Adam&amp;s;=Smith&quot;</span>); <span class="comment">// &#123;n: &quot;Adam&quot;, s: &quot;Smith&quot;&#125; getURLParameters(&quot;google.com&quot;); // &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="12、如何将一组表单元素编码为一个对象？"><a href="#12、如何将一组表单元素编码为一个对象？" class="headerlink" title="12、如何将一组表单元素编码为一个对象？"></a>12、如何将一组表单元素编码为一个对象？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formToObject = <span class="function"><span class="params">form</span> =&gt;</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> FormData(form)).reduce(<span class="function">(<span class="params">acc, [key, value]</span>) =&gt;</span> (&#123;  ...acc,  [key]: value  &#125;),&#123;&#125;); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">formToObject(<span class="built_in">document</span>.querySelector(<span class="string">&quot;#form&quot;</span>)); <span class="comment">// &#123; email: &quot;test@email.com&quot;, name: &quot;Test Name&quot; &#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="13、如何从对象检索给定选择器指示的一组属性？"><a href="#13、如何从对象检索给定选择器指示的一组属性？" class="headerlink" title="13、如何从对象检索给定选择器指示的一组属性？"></a>13、如何从对象检索给定选择器指示的一组属性？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> get = <span class="function">(<span class="params"><span class="keyword">from</span>, ...selectors</span>) =&gt;</span> [...selectors].map(<span class="function"><span class="params">s</span> =&gt;</span> s.replace(<span class="regexp">/[([^[]]*)]/g</span>, <span class="string">&quot;.$1.&quot;</span>).split(<span class="string">&quot;.&quot;</span>).filter(<span class="function"><span class="params">t</span> =&gt;</span> t !== <span class="string">&quot;&quot;</span>).reduce(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> prev &amp;&amp; prev[cur], <span class="keyword">from</span>)); </span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">selector</span>: &#123; <span class="attr">to</span>: &#123; <span class="attr">val</span>: <span class="string">&quot;val to select&quot;</span> &#125; &#125;, <span class="attr">target</span>: [<span class="number">1</span>, <span class="number">2</span>, &#123; <span class="attr">a</span>: <span class="string">&quot;test&quot;</span> &#125;] &#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">get(obj, <span class="string">&quot;selector.to.val&quot;</span>, <span class="string">&quot;target[0]&quot;</span>, <span class="string">&quot;target[2].a&quot;</span>); <span class="comment">// [&quot;val to select&quot;, 1, &quot;test&quot;]</span></span><br></pre></td></tr></table></figure>

<h1 id="14、如何在等待一定时间后调用提供的函数（单位毫秒）？"><a href="#14、如何在等待一定时间后调用提供的函数（单位毫秒）？" class="headerlink" title="14、如何在等待一定时间后调用提供的函数（单位毫秒）？"></a>14、如何在等待一定时间后调用提供的函数（单位毫秒）？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> delay = <span class="function">(<span class="params">fn, wait, ...args</span>) =&gt;</span> <span class="built_in">setTimeout</span>(fn, wait, ...args); </span><br><span class="line"></span><br><span class="line">delay(<span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;     </span><br><span class="line">    <span class="built_in">console</span>.log(text); </span><br><span class="line">&#125;, <span class="number">1000</span>, <span class="string">&quot;later&quot;</span>); <span class="comment">// 一秒后记录 &quot;later&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="15、如何在给定元素上触发特定事件，且可选传递自定义数据？"><a href="#15、如何在给定元素上触发特定事件，且可选传递自定义数据？" class="headerlink" title="15、如何在给定元素上触发特定事件，且可选传递自定义数据？"></a>15、如何在给定元素上触发特定事件，且可选传递自定义数据？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> triggerEvent = <span class="function">(<span class="params">el, eventType, detail</span>) =&gt;</span> el.dispatchEvent(<span class="keyword">new</span> CustomEvent(eventType, &#123; detail &#125;)); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples </span></span><br><span class="line">triggerEvent(<span class="built_in">document</span>.getElementById(<span class="string">&quot;myId&quot;</span>), <span class="string">&quot;click&quot;</span>); </span><br><span class="line">triggerEvent(<span class="built_in">document</span>.getElementById( myId ), <span class="string">&quot;click&quot;</span>, &#123; <span class="attr">username</span>: <span class="string">&quot;bob&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>

<h1 id="16、如何移除一个元素的事件侦听器？"><a href="#16、如何移除一个元素的事件侦听器？" class="headerlink" title="16、如何移除一个元素的事件侦听器？"></a>16、如何移除一个元素的事件侦听器？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> off = <span class="function">(<span class="params">el, evt, fn, opts = <span class="literal">false</span></span>) =&gt;</span> el.removeEventListener(evt, fn, opts);</span><br><span class="line"><span class="keyword">const</span> fn = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;!&quot;</span>); </span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&quot;click&quot;</span>, fn); </span><br><span class="line">off(<span class="built_in">document</span>.body, <span class="string">&quot;click&quot;</span>, fn); <span class="comment">// no longer logs &quot;!&quot; upon clicking on the page</span></span><br></pre></td></tr></table></figure>

<h1 id="17、如何获得给定毫秒数的可读格式？"><a href="#17、如何获得给定毫秒数的可读格式？" class="headerlink" title="17、如何获得给定毫秒数的可读格式？"></a>17、如何获得给定毫秒数的可读格式？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formatDuration = <span class="function"><span class="params">ms</span> =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">if</span> (ms &lt; <span class="number">0</span>) ms = -ms; </span><br><span class="line">    <span class="keyword">const</span> time = &#123;         </span><br><span class="line">        <span class="attr">day</span>: <span class="built_in">Math</span>.floor(ms / <span class="number">86400000</span>),         </span><br><span class="line">        <span class="attr">hour</span>: <span class="built_in">Math</span>.floor(ms / <span class="number">3600000</span>) % <span class="number">24</span>,         </span><br><span class="line">        <span class="attr">minute</span>: <span class="built_in">Math</span>.floor(ms / <span class="number">60000</span>) % <span class="number">60</span>,         </span><br><span class="line">        <span class="attr">second</span>: <span class="built_in">Math</span>.floor(ms / <span class="number">1000</span>) % <span class="number">60</span>,         </span><br><span class="line">        <span class="attr">millisecond</span>: <span class="built_in">Math</span>.floor(ms) % <span class="number">1000</span>      </span><br><span class="line">    &#125;;     </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.entries(time).filter(<span class="function"><span class="params">val</span> =&gt;</span> val[<span class="number">1</span>] !== <span class="number">0</span>).map(<span class="function">(<span class="params">[key, val]</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;val&#125;</span> <span class="subst">$&#123;key&#125;</span><span class="subst">$&#123;val !== <span class="number">1</span> ? <span class="string">&quot;s&quot;</span> : <span class="string">&quot;&quot;</span>&#125;</span>`</span>).join(<span class="string">&quot;,&quot;</span>); </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples </span></span><br><span class="line">formatDuration(<span class="number">1001</span>); <span class="comment">// 1 second, 1 millisecond</span></span><br><span class="line">formatDuration(<span class="number">34325055574</span>); <span class="comment">// 397 days, 6 hours, 44 minutes, 15 seconds, 574 milliseconds</span></span><br></pre></td></tr></table></figure>

<h1 id="18、如何获取两个日期之间的天数间隔？"><a href="#18、如何获取两个日期之间的天数间隔？" class="headerlink" title="18、如何获取两个日期之间的天数间隔？"></a>18、如何获取两个日期之间的天数间隔？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getDaysDiffBetweenDates = <span class="function">(<span class="params">dateInitial, dateFinal</span>) =&gt;</span> (dateFinal - dateInitial) / (<span class="number">1000</span> * <span class="number">3600</span> * <span class="number">24</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">getDaysDiffBetweenDates(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;2017-12-13&quot;</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;2017-12-22&quot;</span>)); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>

<h1 id="19、如何对传递的-URL-进行-GET-请求？"><a href="#19、如何对传递的-URL-进行-GET-请求？" class="headerlink" title="19、如何对传递的 URL 进行 GET 请求？"></a>19、如何对传递的 URL 进行 GET 请求？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> httpGet = <span class="function">(<span class="params">url, callback, err = <span class="built_in">console</span>.error</span>) =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">const</span> request = <span class="keyword">new</span> XMLHttpRequest();     </span><br><span class="line">    request.open(<span class="string">&quot;GET&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line">    request.onload = <span class="function">() =&gt;</span> callback(request.responseText);     </span><br><span class="line">    request.onerror = <span class="function">() =&gt;</span> err(request);     </span><br><span class="line">    request.send(); </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line">httpGet(</span><br><span class="line">    <span class="string">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span>, </span><br><span class="line">    <span class="built_in">console</span>.log</span><br><span class="line">); </span><br><span class="line"><span class="comment">// Logs: &#123;&quot;userId&quot;: 1, &quot;id&quot;: 1, &quot;title&quot;: &quot;sample title&quot;, &quot;body&quot;: &quot;my text&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="20、如何对传递的-URL-进行-POST-请求？"><a href="#20、如何对传递的-URL-进行-POST-请求？" class="headerlink" title="20、如何对传递的 URL 进行 POST 请求？"></a>20、如何对传递的 URL 进行 POST 请求？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> httpPost = <span class="function">(<span class="params">url, data, callback, err = <span class="built_in">console</span>.error</span>) =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">const</span> request = <span class="keyword">new</span> XMLHttpRequest();     </span><br><span class="line">    request.open( POST , url, <span class="literal">true</span>);     </span><br><span class="line">    request.setRequestHeader( Content-type ,  application/json; charset=utf-<span class="number">8</span> );     </span><br><span class="line">    request.onload = <span class="function">() =&gt;</span> callback(request.responseText);     </span><br><span class="line">    request.onerror = <span class="function">() =&gt;</span> err(request);     </span><br><span class="line">    request.send(data); </span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">const</span> newPost = &#123; </span><br><span class="line">    <span class="attr">userId</span>: <span class="number">1</span>, </span><br><span class="line">    <span class="attr">id</span>: <span class="number">1337</span>, </span><br><span class="line">    <span class="attr">title</span>:  Foo ,     </span><br><span class="line">    <span class="attr">body</span>:  bar bar bar  </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="built_in">JSON</span>.stringify(newPost); </span><br><span class="line">httpPost(</span><br><span class="line">    <span class="string">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span>, </span><br><span class="line">    data,</span><br><span class="line">    <span class="built_in">console</span>.log</span><br><span class="line">); </span><br><span class="line"><span class="comment">// Logs: &#123;&quot;userId&quot;: 1, &quot;id&quot;: 1337, &quot;title&quot;: &quot;Foo&quot;, &quot;body&quot;: &quot;bar bar bar&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="21、如何为指定选择器创建具有指定范围、步长和持续时间的计时器？"><a href="#21、如何为指定选择器创建具有指定范围、步长和持续时间的计时器？" class="headerlink" title="21、如何为指定选择器创建具有指定范围、步长和持续时间的计时器？"></a>21、如何为指定选择器创建具有指定范围、步长和持续时间的计时器？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">selector, start, end, step = <span class="number">1</span>, duration = <span class="number">2000</span></span>) =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">let</span> current = start,     </span><br><span class="line">    _step = (end - start) * step &lt; <span class="number">0</span> ? -step : step,     </span><br><span class="line">    timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;         </span><br><span class="line">        current += _step;         </span><br><span class="line">        <span class="built_in">document</span>.querySelector(selector).innerHTML = current;         </span><br><span class="line">        <span class="keyword">if</span> (current &gt;= end) <span class="built_in">document</span>.querySelector(selector).innerHTML = end;         </span><br><span class="line">        <span class="keyword">if</span> (current &gt;= end) <span class="built_in">clearInterval</span>(timer);     </span><br><span class="line">    &#125;, <span class="built_in">Math</span>.abs(<span class="built_in">Math</span>.floor(duration / (end - start))));     </span><br><span class="line">    <span class="keyword">return</span> timer;</span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">counter( #my-id , <span class="number">1</span>, <span class="number">1000</span>, <span class="number">5</span>, <span class="number">2000</span>); <span class="comment">// 为 id=&quot;my-id&quot; 的元素创建一个两秒的计时器</span></span><br></pre></td></tr></table></figure>

<h1 id="22、如何将一个字符串复制到剪贴板？"><a href="#22、如何将一个字符串复制到剪贴板？" class="headerlink" title="22、如何将一个字符串复制到剪贴板？"></a>22、如何将一个字符串复制到剪贴板？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> copyToClipboard = <span class="function"><span class="params">str</span> =&gt;</span> &#123;     </span><br><span class="line">    <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement( textarea );     </span><br><span class="line">    el.value = str;     </span><br><span class="line">    el.setAttribute( readonly ,   );     </span><br><span class="line">    el.style.position =  absolute ;     </span><br><span class="line">    el.style.left =  -9999px ;     </span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(el);     </span><br><span class="line">    <span class="keyword">const</span> selected = <span class="built_in">document</span>.getSelection().rangeCount &gt; <span class="number">0</span> ? <span class="built_in">document</span>.getSelection().getRangeAt(<span class="number">0</span>) : <span class="literal">false</span>;     </span><br><span class="line">    el.select();     </span><br><span class="line">    <span class="built_in">document</span>.execCommand( copy );     </span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(el);     </span><br><span class="line">    <span class="keyword">if</span> (selected) &#123;         </span><br><span class="line">        <span class="built_in">document</span>.getSelection().removeAllRanges();         </span><br><span class="line">        <span class="built_in">document</span>.getSelection().addRange(selected);     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">copyToClipboard( Lorem ipsum ); <span class="comment">//  Lorem ipsum  copied to clipboard.</span></span><br></pre></td></tr></table></figure>

<h1 id="23、如何确定页面的浏览器选项卡是否处于前台活跃状态？"><a href="#23、如何确定页面的浏览器选项卡是否处于前台活跃状态？" class="headerlink" title="23、如何确定页面的浏览器选项卡是否处于前台活跃状态？"></a>23、如何确定页面的浏览器选项卡是否处于前台活跃状态？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isBrowserTabFocused = <span class="function">() =&gt;</span> !<span class="built_in">document</span>.hidden; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">isBrowserTabFocused(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h1 id="24、如果一个目录不存在，如何创建它？"><a href="#24、如果一个目录不存在，如何创建它？" class="headerlink" title="24、如果一个目录不存在，如何创建它？"></a>24、如果一个目录不存在，如何创建它？</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>( fs ); <span class="keyword">const</span> createDirIfNotExists = <span class="function"><span class="params">dir</span> =&gt;</span> (!fs.existsSync(dir) ? fs.mkdirSync(dir) : <span class="literal">undefined</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Example </span></span><br><span class="line">createDirIfNotExists( test ); <span class="comment">// 创建目录test(如果不存在的话)</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>exprot使用</title>
    <url>/taiaiac.gitee.io/2021/01/08/ES6/exprot%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="关于exprot"><a href="#关于exprot" class="headerlink" title="关于exprot"></a>关于exprot</h2><p>es6中的模块系统，支持导入导出</p>
<ul>
<li>export</li>
<li>exprot default</li>
<li>import  ‘module’</li>
<li>import  xx  from   ‘module’</li>
<li>import * as  xx  from  ‘module’</li>
<li>import { xx }  from  ‘module’</li>
</ul>
<h3 id="export"><a href="#export" class="headerlink" title="export"></a>export</h3><p>通过 export 导出的成员必须通过解构赋值按需加载</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> b = <span class="number">2</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> c = <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="import-as-xx-from-‘module’"><a href="#import-as-xx-from-‘module’" class="headerlink" title="import  * as xx  from  ‘module’"></a>import  * as xx  from  ‘module’</h3><p>通过 * as 变量名 的形式加载所有通过 export 关键字导出的接口成员</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> all <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(all.a)</span><br><span class="line"><span class="built_in">console</span>.log(all.b)</span><br><span class="line"><span class="built_in">console</span>.log(all.c)</span><br></pre></td></tr></table></figure>

<h3 id="import-xx-from-‘module’"><a href="#import-xx-from-‘module’" class="headerlink" title="import { xx }  from  ‘module’"></a>import { xx }  from  ‘module’</h3><p>配合exprot 按需加载使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; a, b, c &#125; <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="exprot-default"><a href="#exprot-default" class="headerlink" title="exprot default"></a>exprot default</h3><p>默认接口，通过 export default 加载导出的成员必须通过 import 变量名 from ‘模块标识’ 进行加载</p>
<p>通过 export default 暴露的接口成员不能定义的同时直接暴露</p>
<p>最好先定义，再暴露</p>
<p>export default 可以直接暴露字面量 ，例如 {} ，123</p>
<p>一个文件中只有一个默认接口！</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> D = <span class="number">4</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> D</span><br></pre></td></tr></table></figure>

<h3 id="import-xx-from-‘module’-1"><a href="#import-xx-from-‘module’-1" class="headerlink" title="import  xx  from   ‘module’"></a>import  xx  from   ‘module’</h3><p>配合exprot default 使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> D <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(D)</span><br></pre></td></tr></table></figure>

<h3 id="import-‘module’"><a href="#import-‘module’" class="headerlink" title="import   ‘module’"></a>import   ‘module’</h3><p>引入资源模块</p>
<p>export 和 export default 可以共存在一个文件中</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> b = <span class="number">2</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> c = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> D = <span class="number">4</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> D</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> all <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(all)</span><br><span class="line"><span class="comment">// &#123; a: 1, b: 2, c: 3, default: 4 &#125;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>import</title>
    <url>/taiaiac.gitee.io/2020/12/30/ES6/import/</url>
    <content><![CDATA[<h2 id="HTML-部分"><a href="#HTML-部分" class="headerlink" title="HTML 部分"></a>HTML 部分</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./demo.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="HTML-引入的-js-文件（demo-js）"><a href="#HTML-引入的-js-文件（demo-js）" class="headerlink" title="HTML 引入的 js 文件（demo.js）"></a>HTML 引入的 js 文件（demo.js）</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//引入util.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; formartDate, arr &#125; <span class="keyword">from</span> <span class="string">&#x27;./util.js&#x27;</span></span><br><span class="line"><span class="comment">//把日期写到app中</span></span><br><span class="line"><span class="keyword">let</span> app = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  app.innerHTML = formartDate()</span><br><span class="line">  <span class="built_in">console</span>.log(arr[<span class="number">0</span>])</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<h2 id="demo-js-中引入的-js-文件-util-js"><a href="#demo-js-中引入的-js-文件-util-js" class="headerlink" title="demo.js 中引入的 js 文件(util.js)"></a>demo.js 中引入的 js 文件(util.js)</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//日期格式化函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formartDate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">let</span> year = date.getFullYear()</span><br><span class="line">  <span class="keyword">let</span> month = (date.getMonth() + <span class="number">1</span> + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> day = (date.getDate() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> hour = (date.getHours() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> min = (date.getMinutes() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> s = (date.getSeconds() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;day&#125;</span> <span class="subst">$&#123;hour&#125;</span>:<span class="subst">$&#123;min&#125;</span>:<span class="subst">$&#123;s&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//导出函数</span></span><br><span class="line"><span class="keyword">export</span> &#123; formartDate, arr &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>数据转化方法</title>
    <url>/taiaiac.gitee.io/2021/04/29/ES6/%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<blockquote>
<h2 id="便捷转化方法"><a href="#便捷转化方法" class="headerlink" title="便捷转化方法"></a>便捷转化方法</h2></blockquote>
<h3 id="合并数组"><a href="#合并数组" class="headerlink" title="合并数组"></a>合并数组</h3><p>你可以使用传播运算符（…）将一个数组的元素扩展为另一个数组，例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>];</span><br><span class="line"><span class="keyword">const</span> allNumbers = [...numbers, <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>];</span><br><span class="line"><span class="built_in">console</span>.log(allNumbers);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>]</span><br></pre></td></tr></table></figure>

<h3 id="从阵列中删除重复项"><a href="#从阵列中删除重复项" class="headerlink" title="从阵列中删除重复项"></a>从阵列中删除重复项</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">20</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">const</span> uniqueNumbers = [...new <span class="built_in">Set</span>(numbers)];</span><br><span class="line"><span class="built_in">console</span>.log(uniqueNumbers);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">20</span>, <span class="number">3</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure>

<h3 id="将任何内容转换为布尔值"><a href="#将任何内容转换为布尔值" class="headerlink" title="将任何内容转换为布尔值"></a>将任何内容转换为布尔值</h3><p>除了true和false之外，JavaScript还将其他类型视为真或假。</p>
<ul>
<li>0，””，null，undefined，NaN，和false总是假 。</li>
<li>其他一切都是真实的。</li>
</ul>
<p>正因为如此，在JavaScript中，你可以将任何值转换为true和false与一元运算符（!）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bool1 = !<span class="number">0</span>;        <span class="comment">// true</span></span><br><span class="line"><span class="keyword">const</span> bool2 = !<span class="number">100</span>;      <span class="comment">// false</span></span><br><span class="line"><span class="keyword">const</span> bool3 = !<span class="string">&quot;test&quot;</span>;   <span class="comment">// false</span></span><br><span class="line"><span class="keyword">const</span> bool4 = !!<span class="string">&quot;test&quot;</span>;  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(bool1, bool2, bool3, bool4);</span><br></pre></td></tr></table></figure>



<h3 id="将字符串转换为数字"><a href="#将字符串转换为数字" class="headerlink" title="将字符串转换为数字"></a>将字符串转换为数字</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numStr = <span class="string">&quot;124&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> num = +numStr;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num);</span><br><span class="line"><span class="built_in">console</span>.log(num);</span><br></pre></td></tr></table></figure>

<h3 id="将字符串拆分为数组"><a href="#将字符串拆分为数组" class="headerlink" title="将字符串拆分为数组"></a>将字符串拆分为数组</h3><p>要将字符串拆分为数组，可以使用扩展运算符（…）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;Test&quot;</span></span><br><span class="line"><span class="keyword">const</span> strAsArr = [...str]</span><br><span class="line"><span class="built_in">console</span>.log(strAsArr)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="string">&quot;T&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;s&quot;</span>, <span class="string">&quot;t&quot;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="可选链接"><a href="#可选链接" class="headerlink" title="可选链接"></a>可选链接</h3><p><strong><em>“可选的链接运算符（?.）允许读取位于连接对象链深处的属性的值，而不必明确验证链中的每个引用是否有效。” — MDN Web文档\</em></strong></p>
<p>假设你有一个data对象，并且想要安全地访问data.test.value。首先，你需要检查：</p>
<ul>
<li>data 是否被定义。</li>
<li>data.test 是否被定义。</li>
</ul>
<p>在data.test.value，你可以调用之前，因为，你显然无法读取undefined属性。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;test：&#123;value：<span class="number">1</span>&#125;&#125;</span><br><span class="line"><span class="keyword">if</span>（data &amp;&amp; data.test）&#123; </span><br><span class="line">  <span class="built_in">console</span>.log（data.test.value）; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>幸运的是，使用可选链接的方法，你可以简单明了地编写上面的代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> value = data?.test?.value;</span><br><span class="line"><span class="built_in">console</span>.log(value)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>现在，你还可以安全地尝试访问不存在的属性，而不会出现问题：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(data?.this?.does?.not?.exist?.for?.sure)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL</title>
    <url>/taiaiac.gitee.io/2020/12/30/MySQl/mysql-day02/</url>
    <content><![CDATA[<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-- 这是sql的注释</span><br><span class="line"># sql的注释</span><br><span class="line"><span class="comment">/*sql的注释*/</span></span><br></pre></td></tr></table></figure>

<h2 id="1、创建表格-person"><a href="#1、创建表格-person" class="headerlink" title="1、创建表格 person"></a>1、创建表格 person</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">CREATE <span class="selector-tag">TABLE</span> person (</span><br><span class="line">	`id` BIGINT ( <span class="number">10</span> ) PRIMARY KEY auto_increment COMMENT &#x27;用户的id&#x27;,</span><br><span class="line">	`name` VARCHAR ( <span class="number">50</span> ) NOT NULL UNIQUE COMMENT &#x27;用户名&#x27;,</span><br><span class="line">	`age` BIGINT ( <span class="number">3</span> ) COMMENT &#x27;年龄&#x27;,</span><br><span class="line">	`gender` CHAR ( <span class="number">1</span> ) NOT NULL DEFAULT &#x27;男&#x27; COMMENT &#x27;用户性别&#x27;,</span><br><span class="line">	`birthday` datetime NOT NULL DEFAULT now() COMMENT &#x27;生日&#x27;,</span><br><span class="line">	`photo` VARCHAR ( <span class="number">150</span> ) COMMENT &#x27;头像地址&#x27;,</span><br><span class="line">	`phone` VARCHAR ( <span class="number">11</span> ) NOT NULL UNIQUE COMMENT &#x27;电话&#x27;,</span><br><span class="line">	`<span class="selector-tag">address</span>` VARCHAR ( <span class="number">100</span> ) COMMENT &#x27;地址&#x27;,</span><br><span class="line">	`email` VARCHAR ( <span class="number">150</span> ) NOT NULL UNIQUE COMMENT &#x27;邮箱&#x27;,</span><br><span class="line">	`identityNo` VARCHAR ( <span class="number">18</span> ) NOT NULL UNIQUE COMMENT &#x27;身份证号码&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="2、删除表格"><a href="#2、删除表格" class="headerlink" title="2、删除表格"></a>2、删除表格</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">drop <span class="selector-tag">table</span> person;</span><br></pre></td></tr></table></figure>

<h2 id="3、查看表结构"><a href="#3、查看表结构" class="headerlink" title="3、查看表结构"></a>3、查看表结构</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">DESC person;</span><br></pre></td></tr></table></figure>

<h2 id="4、添加数据"><a href="#4、添加数据" class="headerlink" title="4、添加数据"></a>4、添加数据</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">INSERT INTO person</span><br><span class="line">VALUES</span><br><span class="line">	( <span class="number">1</span>, &quot;tom1&quot;, <span class="number">20</span>, &quot;男&quot;, &quot;<span class="number">1992</span>-<span class="number">09</span>-<span class="number">09</span> <span class="number">10</span>:<span class="number">08</span>:<span class="number">09</span><span class="string">&quot;, &quot;</span>/upload/<span class="number">15009284523</span>.jpg<span class="string">&quot;, &quot;</span><span class="number">13877779999</span><span class="string">&quot;, &quot;</span>不详<span class="string">&quot;, &quot;</span>tom1@qq.com<span class="string">&quot;, &quot;</span><span class="number">340101192809091230</span><span class="string">&quot; );</span></span><br><span class="line"><span class="string">INSERT INTO person</span></span><br><span class="line"><span class="string">VALUES</span></span><br><span class="line"><span class="string">	( 2, &quot;</span>tom2<span class="string">&quot;, 21, &quot;</span>女<span class="string">&quot;, &quot;</span><span class="number">1998</span>-<span class="number">09</span>-<span class="number">09</span> <span class="number">10</span>:<span class="number">08</span>:<span class="number">09</span><span class="string">&quot;, &quot;</span>/upload/<span class="number">15009284524</span>.jpg<span class="string">&quot;, &quot;</span><span class="number">13877774444</span><span class="string">&quot;, &quot;</span>不详<span class="string">&quot;, &quot;</span>tom2@qq.com<span class="string">&quot;, &quot;</span><span class="number">34010119980909123</span>x<span class="string">&quot; );</span></span><br><span class="line"><span class="string">INSERT INTO person</span></span><br><span class="line"><span class="string">VALUES</span></span><br><span class="line"><span class="string">	( 3, &quot;</span>tom3<span class="string">&quot;, 20, &quot;</span>男<span class="string">&quot;, &quot;</span><span class="number">1997</span>-<span class="number">09</span>-<span class="number">08</span> <span class="number">10</span>:<span class="number">08</span>:<span class="number">09</span><span class="string">&quot;, &quot;</span>/upload/<span class="number">15009284525</span>.jpg<span class="string">&quot;, &quot;</span><span class="number">13877773333</span><span class="string">&quot;, &quot;</span>不详<span class="string">&quot;, &quot;</span>tom3@qq.com<span class="string">&quot;, &quot;</span><span class="number">340101199709091233</span><span class="string">&quot; );</span></span><br><span class="line"><span class="string">INSERT INTO person</span></span><br><span class="line"><span class="string">VALUES</span></span><br><span class="line"><span class="string">	( 4, &quot;</span>tom4<span class="string">&quot;, 21, &quot;</span>女<span class="string">&quot;, &quot;</span><span class="number">1998</span>-<span class="number">08</span>-<span class="number">09</span> <span class="number">10</span>:<span class="number">08</span>:<span class="number">09</span><span class="string">&quot;, &quot;</span>/upload/<span class="number">15009284526</span>.jpg<span class="string">&quot;, &quot;</span><span class="number">13877772222</span><span class="string">&quot;, &quot;</span>不详<span class="string">&quot;, &quot;</span>tom4@qq.com<span class="string">&quot;, &quot;</span><span class="number">340101199808091235</span><span class="string">&quot; );</span></span><br><span class="line"><span class="string">INSERT INTO person</span></span><br><span class="line"><span class="string">VALUES</span></span><br><span class="line"><span class="string">	( 5, &quot;</span>tom5<span class="string">&quot;, 20, &quot;</span>男<span class="string">&quot;, &quot;</span><span class="number">1998</span>-<span class="number">07</span>-<span class="number">09</span> <span class="number">10</span>:<span class="number">08</span>:<span class="number">09</span><span class="string">&quot;, &quot;</span>/upload/<span class="number">15009284527</span>.jpg<span class="string">&quot;, &quot;</span><span class="number">13877771111</span><span class="string">&quot;, &quot;</span>不详<span class="string">&quot;, &quot;</span>tom5@qq.com<span class="string">&quot;, &quot;</span><span class="number">340101199809091234</span><span class="string">&quot; );</span></span><br><span class="line"><span class="string">INSERT INTO person</span></span><br><span class="line"><span class="string">VALUES</span></span><br><span class="line"><span class="string">	( 6, &quot;</span>tom6<span class="string">&quot;, 21, &quot;</span>女<span class="string">&quot;, &quot;</span><span class="number">1999</span>-<span class="number">09</span>-<span class="number">19</span> <span class="number">10</span>:<span class="number">08</span>:<span class="number">09</span><span class="string">&quot;, &quot;</span>/upload/<span class="number">15009284528</span>.jpg<span class="string">&quot;, &quot;</span><span class="number">13877770000</span><span class="string">&quot;, &quot;</span>不详<span class="string">&quot;, &quot;</span>tom6@qq.com<span class="string">&quot;, &quot;</span><span class="number">340101199909191530</span><span class="string">&quot; );</span></span><br></pre></td></tr></table></figure>

<h2 id="5、修改字段的值"><a href="#5、修改字段的值" class="headerlink" title="5、修改字段的值"></a>5、修改字段的值</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">update person set name = &#x27;tom&#x27; where id = <span class="number">1</span>;</span><br><span class="line">update person set name = &#x27;tom1234&#x27; ,birthday= now()  where id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改-id-gt-1-的-address-为空"><a href="#修改-id-gt-1-的-address-为空" class="headerlink" title="修改 id&gt;1 的 address 为空"></a>修改 id&gt;1 的 address 为空</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">update person set <span class="selector-tag">address</span> = &quot;&quot; where id&gt;<span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h2 id="6、删除表记录-会重置自增序列"><a href="#6、删除表记录-会重置自增序列" class="headerlink" title="6、删除表记录 会重置自增序列"></a>6、删除表记录 会重置自增序列</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">truncate <span class="selector-tag">table</span> person ;</span><br></pre></td></tr></table></figure>

<h2 id="7、删除表记录，不会重置自增序列"><a href="#7、删除表记录，不会重置自增序列" class="headerlink" title="7、删除表记录，不会重置自增序列"></a>7、删除表记录，不会重置自增序列</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">delete <span class="selector-tag">from</span> person ;</span><br></pre></td></tr></table></figure>

<h2 id="8、指定条件的删除"><a href="#8、指定条件的删除" class="headerlink" title="8、指定条件的删除"></a>8、指定条件的删除</h2><h3 id="删除-id-gt-2-并且-age-20-的用户"><a href="#删除-id-gt-2-并且-age-20-的用户" class="headerlink" title="删除 id&gt;2,并且 age=20 的用户"></a>删除 id&gt;2,并且 age=20 的用户</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">delete <span class="selector-tag">from</span> person where id &gt;<span class="number">2</span> &amp;&amp; age =<span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h3 id="删除-id-gt-2-并且-gender-”男”的用户"><a href="#删除-id-gt-2-并且-gender-”男”的用户" class="headerlink" title="删除 id&gt;2,并且 gender=”男”的用户"></a>删除 id&gt;2,并且 gender=”男”的用户</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">delete <span class="selector-tag">from</span> person where id &gt;<span class="number">2</span> and gender =&#x27;男&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="9、查询语句-select-指令"><a href="#9、查询语句-select-指令" class="headerlink" title="9、查询语句 select 指令"></a>9、查询语句 select 指令</h2><h3 id="查询所有用户的-name、id"><a href="#查询所有用户的-name、id" class="headerlink" title="查询所有用户的 name、id"></a>查询所有用户的 name、id</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">select id as &#x27;编号&#x27;,name as &#x27;姓名&#x27; ,age as &#x27;年龄&#x27; <span class="selector-tag">from</span> person where id&gt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h3 id="查询所有"><a href="#查询所有" class="headerlink" title="查询所有"></a>查询所有</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">select * <span class="selector-tag">from</span> person where id = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>把表作为对象进行描述</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">select <span class="selector-tag">p</span>.* <span class="selector-tag">from</span> person <span class="selector-tag">p</span> where <span class="selector-tag">p</span><span class="selector-class">.id</span> &gt;<span class="number">3</span>;</span><br><span class="line">select <span class="number">2</span>*<span class="number">3</span>+<span class="number">5</span>+<span class="number">4</span> num ; # <span class="number">15</span></span><br><span class="line">select md5(&quot;<span class="number">1234</span>&quot;); <span class="selector-id">#81dc9bdb52d04dc20036dbd8313ed055</span></span><br></pre></td></tr></table></figure>

<h2 id="10、聚合函数-sum-字段名-count-字段名-avg-字段名-max-字段名-min-字段名"><a href="#10、聚合函数-sum-字段名-count-字段名-avg-字段名-max-字段名-min-字段名" class="headerlink" title="10、聚合函数 sum(字段名) count(字段名) avg(字段名) max(字段名) min(字段名)"></a>10、聚合函数 sum(字段名) count(字段名) avg(字段名) max(字段名) min(字段名)</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">select sum(age) sum <span class="selector-tag">from</span> person ; <span class="selector-id">#123</span></span><br><span class="line">select count(*) num <span class="selector-tag">from</span> person where age&gt;<span class="number">20</span>; <span class="selector-id">#4</span></span><br><span class="line">select avg(age) avg <span class="selector-tag">from</span> person ;<span class="selector-id">#20</span>.<span class="number">6667</span></span><br><span class="line">select max(age) maxAge <span class="selector-tag">from</span> person ;<span class="selector-id">#30</span></span><br><span class="line">select min(age) minAge <span class="selector-tag">from</span> person ;<span class="selector-id">#19</span></span><br><span class="line">select max(year(now())-year(birthday))  <span class="selector-tag">from</span> person;</span><br><span class="line">select min(year(now())-year(birthday)) <span class="selector-tag">from</span> person;</span><br><span class="line">-- 查询最大年龄的用户信息</span><br><span class="line">select * <span class="selector-tag">from</span> person where birthday = (select min( birthday) <span class="selector-tag">from</span> person );</span><br></pre></td></tr></table></figure>

<h2 id="11、主键、外键"><a href="#11、主键、外键" class="headerlink" title="11、主键、外键"></a>11、主键、外键</h2><p>主键是一张表某个字段的属性，属性名 primary key ,主键字段标定与之关联的其它字段<br>一般给 id 设置主键属性，可以设置多个主键<br>特性：主键字段的值唯一，非空</p>
<h2 id="12、外键-foreign-key"><a href="#12、外键-foreign-key" class="headerlink" title="12、外键(foreign key)"></a>12、外键(foreign key)</h2><h3 id="表中某个字段的值与其它表主键字段值之间的对应关系"><a href="#表中某个字段的值与其它表主键字段值之间的对应关系" class="headerlink" title="表中某个字段的值与其它表主键字段值之间的对应关系"></a>表中某个字段的值与其它表主键字段值之间的对应关系</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">create <span class="selector-tag">table</span> employ(</span><br><span class="line">	id int(<span class="number">10</span>) primary key auto_increment ,</span><br><span class="line">	username varchar(<span class="number">40</span>) not null unique ,</span><br><span class="line">	password varchar(<span class="number">40</span>) not null,</span><br><span class="line">	departId int(<span class="number">10</span>) not null</span><br><span class="line">	) ;</span><br><span class="line"></span><br><span class="line">	create <span class="selector-tag">table</span> department(</span><br><span class="line">	id int(<span class="number">10</span>) primary key auto_increment comment&#x27;部门的主键id&#x27;,</span><br><span class="line">	name varchar(<span class="number">30</span>) not null unique comment&quot;部门名称&quot;</span><br><span class="line">	) ;</span><br></pre></td></tr></table></figure>

<h3 id="设置主键语法"><a href="#设置主键语法" class="headerlink" title="设置主键语法"></a>设置主键语法</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">ALTER <span class="selector-tag">TABLE</span> employ ADD CONSTRAINT pk_employ_id primary KEY ( id )</span><br><span class="line">-- 设置外键的语法</span><br><span class="line">ALTER <span class="selector-tag">TABLE</span> employ ADD CONSTRAINT fk_departId FOREIGN KEY ( departId ) REFERENCES department (id)</span><br><span class="line">-- alter 表示修改</span><br><span class="line">-- <span class="selector-tag">table</span> 表格</span><br><span class="line">-- employ employ表格</span><br><span class="line">-- add 添加</span><br><span class="line">-- CONSTRAINT 约束</span><br><span class="line">-- fk_departId 约束的名称</span><br><span class="line">-- FOREIGN KEY 约束的类型为外键</span><br><span class="line">-- departId employ表格的departId字段</span><br><span class="line">-- REFERENCES 引用</span><br><span class="line">-- department department表格</span><br><span class="line">-- id department表格的id字段</span><br></pre></td></tr></table></figure>

<h2 id="13、多表联查–内连接查询"><a href="#13、多表联查–内连接查询" class="headerlink" title="13、多表联查–内连接查询"></a>13、多表联查–内连接查询</h2><h3 id="查询雇员的信息并且要显示当前雇员的部门名称"><a href="#查询雇员的信息并且要显示当前雇员的部门名称" class="headerlink" title="查询雇员的信息并且要显示当前雇员的部门名称"></a>查询雇员的信息并且要显示当前雇员的部门名称</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">select</span><br><span class="line">	e.*,</span><br><span class="line">	d<span class="selector-class">.name</span></span><br><span class="line"><span class="selector-tag">from</span></span><br><span class="line">	employ e ,</span><br><span class="line">	department d</span><br><span class="line">where</span><br><span class="line">	e<span class="selector-class">.departId</span> = d<span class="selector-class">.id</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>MySQl</category>
      </categories>
      <tags>
        <tag>MySQl</tag>
      </tags>
  </entry>
  <entry>
    <title>箭头函数</title>
    <url>/taiaiac.gitee.io/2020/12/30/ES6/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p><strong>箭头函数表达式</strong>的语法比<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/function">函数表达式</a>更简洁，并且没有自己的<code>this</code>，<code>arguments</code>，<code>super</code>或<code>new.target</code>。箭头函数表达式更适用于那些本来需要匿名函数的地方，并且它不能用作构造函数。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(param1, param2, …, paramN) =&gt; &#123; statements &#125;</span><br><span class="line">(param1, param2, …, paramN) =&gt; expression</span><br><span class="line"><span class="comment">//相当于：(param1, param2, …, paramN) =&gt;&#123; return expression; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当只有一个参数时，圆括号是可选的：</span></span><br><span class="line">(singleParam) =&gt; &#123; statements &#125;</span><br><span class="line">singleParam =&gt; &#123; statements &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有参数的函数应该写成一对圆括号。</span></span><br><span class="line">() =&gt; &#123; statements &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="高级语法"><a href="#高级语法" class="headerlink" title="高级语法"></a>高级语法</h2><blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//加括号的函数体返回对象字面量表达式：</span></span><br><span class="line">params =&gt; (&#123;<span class="attr">foo</span>: bar&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//支持剩余参数和默认参数</span></span><br><span class="line">(param1, param2, ...rest) =&gt; &#123; statements &#125;</span><br><span class="line">(param1 = defaultValue1, param2, …, paramN = defaultValueN) =&gt; &#123;</span><br><span class="line">statements &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//同样支持参数列表解构</span></span><br><span class="line"><span class="keyword">let</span> f = <span class="function">(<span class="params">[a, b] = [<span class="number">1</span>, <span class="number">2</span>], &#123;x: c&#125; = &#123;x: a + b&#125;</span>) =&gt;</span> a + b + c;</span><br><span class="line">f();  <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>引入箭头函数有两个方面的作用：更简短的函数并且不绑定<code>this</code>。</p>
<h2 id="更短的函数"><a href="#更短的函数" class="headerlink" title="更短的函数"></a>更短的函数</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> elements = [<span class="string">&#x27;Hydrogen&#x27;</span>, <span class="string">&#x27;Helium&#x27;</span>, <span class="string">&#x27;Lithium&#x27;</span>, <span class="string">&#x27;Beryllium&#x27;</span>]</span><br><span class="line"></span><br><span class="line">elements.map(<span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> element.length</span><br><span class="line">&#125;) <span class="comment">// 返回数组：[8, 6, 7, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面的普通函数可以改写成如下的箭头函数</span></span><br><span class="line">elements.map(<span class="function">(<span class="params">element</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> element.length</span><br><span class="line">&#125;) <span class="comment">// [8, 6, 7, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当箭头函数只有一个参数时，可以省略参数的圆括号</span></span><br><span class="line">elements.map(<span class="function">(<span class="params">element</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> element.length</span><br><span class="line">&#125;) <span class="comment">// [8, 6, 7, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当箭头函数的函数体只有一个 `return` 语句时，可以省略 `return` 关键字和方法体的花括号</span></span><br><span class="line">elements.map(<span class="function">(<span class="params">element</span>) =&gt;</span> element.length) <span class="comment">// [8, 6, 7, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在这个例子中，因为我们只需要 `length` 属性，所以可以使用参数解构</span></span><br><span class="line"><span class="comment">// 需要注意的是字符串 `&quot;length&quot;` 是我们想要获得的属性的名称，而 `lengthFooBArX` 则只是个变量名，</span></span><br><span class="line"><span class="comment">// 可以替换成任意合法的变量名</span></span><br><span class="line">elements.map(<span class="function">(<span class="params">&#123; length: lengthFooBArX &#125;</span>) =&gt;</span> lengthFooBArX) <span class="comment">// [8, 6, 7, 9]</span></span><br></pre></td></tr></table></figure>

<h2 id="没有单独的this"><a href="#没有单独的this" class="headerlink" title="没有单独的this"></a>没有单独的<code>this</code></h2><p>在箭头函数出现之前，每一个新函数根据它是被如何调用的来定义这个函数的 this 值：</p>
<ul>
<li>如果是该函数是一个构造函数，this 指针指向一个新的对象</li>
<li>在严格模式下的函数调用下，this 指向 undefined</li>
<li>如果是该函数是一个对象的方法，则它的 this 指针指向这个对象</li>
<li>等等</li>
</ul>
<p><code>This</code>被证明是令人厌烦的面向对象风格的编程。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Person() 构造函数定义 `this`作为它自己的实例.</span></span><br><span class="line">  <span class="built_in">this</span>.age = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> <span class="title">growUp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在非严格模式, growUp()函数定义 `this`作为全局对象,</span></span><br><span class="line">    <span class="comment">// 与在 Person()构造函数中定义的 `this`并不相同.</span></span><br><span class="line">    <span class="built_in">this</span>.age++</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br></pre></td></tr></table></figure>

<p>在<code>ECMAScript</code> 3/5 中，通过将<code>this</code>值分配给封闭的变量，可以解决<code>this</code>问题。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="built_in">this</span></span><br><span class="line">  that.age = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> <span class="title">growUp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 回调引用的是`that`变量, 其值是预期的对象.</span></span><br><span class="line">    that.age++</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者，可以创建<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">绑定函数</a>，以便将预先分配的<code>this</code>值传递到绑定的目标函数（上述示例中的<code>growUp()</code>函数）。</p>
<p>箭头函数不会创建自己的<code>this,它只会从自己的作用域链的上一层继承this</code>。因此，在下面的代码中，传递给<code>setInterval</code>的函数内的<code>this</code>与封闭函数中的<code>this</code>值相同：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.age = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.age++ <span class="comment">// |this| 正确地指向 p 实例</span></span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br></pre></td></tr></table></figure>

<h4 id="与严格模式的关系"><a href="#与严格模式的关系" class="headerlink" title="与严格模式的关系"></a>与严格模式的关系</h4><p>鉴于 <code>this</code> 是词法层面上的，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode">严格模式</a>中与 <code>this</code> 相关的规则都将被忽略。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="string">&#x27;use strict&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span></span><br><span class="line">&#125;</span><br><span class="line">f() === <span class="built_in">window</span> <span class="comment">// 或者 global</span></span><br></pre></td></tr></table></figure>

<p>严格模式的其他规则依然不变.</p>
<h4 id="通过-call-或-apply-调用"><a href="#通过-call-或-apply-调用" class="headerlink" title="通过 call 或 apply 调用"></a>通过 call 或 apply 调用</h4><p>由于 箭头函数没有自己的 this 指针，通过 <code>call()</code> <em>或</em> <code>apply()</code> 方法调用一个函数时，只能传递参数（不能绑定 this—译者注），他们的第一个参数会被忽略。（这种现象对于 bind 方法同样成立—译者注）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> adder = &#123;</span><br><span class="line">  <span class="attr">base</span>: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">add</span>: <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> f = <span class="function">(<span class="params">v</span>) =&gt;</span> v + <span class="built_in">this</span>.base</span><br><span class="line">    <span class="keyword">return</span> f(a)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">addThruCall</span>: <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> f = <span class="function">(<span class="params">v</span>) =&gt;</span> v + <span class="built_in">this</span>.base</span><br><span class="line">    <span class="keyword">var</span> b = &#123;</span><br><span class="line">      <span class="attr">base</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> f.call(b, a)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(adder.add(<span class="number">1</span>)) <span class="comment">// 输出 2</span></span><br><span class="line"><span class="built_in">console</span>.log(adder.addThruCall(<span class="number">1</span>)) <span class="comment">// 仍然输出 2</span></span><br></pre></td></tr></table></figure>

<h3 id="不绑定arguments"><a href="#不绑定arguments" class="headerlink" title="不绑定arguments"></a>不绑定<code>arguments</code></h3><p>箭头函数不绑定<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arguments">Arguments 对象</a>。因此，在本示例中，<code>arguments</code>只是引用了封闭作用域内的 arguments：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">arguments</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> arr = <span class="function">() =&gt;</span> <span class="built_in">arguments</span>[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">arr() <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="function">() =&gt;</span> <span class="built_in">arguments</span>[<span class="number">0</span>] + n <span class="comment">// 隐式绑定 foo 函数的 arguments 对象. arguments[0] 是 n,即传给foo函数的第一个参数</span></span><br><span class="line">  <span class="keyword">return</span> f()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>) <span class="comment">// 2</span></span><br><span class="line">foo(<span class="number">2</span>) <span class="comment">// 4</span></span><br><span class="line">foo(<span class="number">3</span>) <span class="comment">// 6</span></span><br><span class="line">foo(<span class="number">3</span>, <span class="number">2</span>) <span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<p>在大多数情况下，使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Rest_parameters">剩余参数</a>是相较使用<code>arguments</code>对象的更好选择。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="function">(<span class="params">...args</span>) =&gt;</span> args[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">return</span> f(arg)</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="function">(<span class="params">...args</span>) =&gt;</span> args[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">return</span> f(arg1, arg2)</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<h3 id="使用箭头函数作为方法"><a href="#使用箭头函数作为方法" class="headerlink" title="使用箭头函数作为方法"></a>使用箭头函数作为方法</h3><p>如上所述，箭头函数表达式对非方法函数是最合适的。让我们看看当我们试着把它们作为方法时发生了什么。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">i</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">this</span>.i, <span class="built_in">this</span>),</span><br><span class="line">  <span class="attr">c</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.i, <span class="built_in">this</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">obj.b()</span><br><span class="line"><span class="comment">// undefined, Window&#123;...&#125;</span></span><br><span class="line">obj.c()</span><br><span class="line"><span class="comment">// 10, Object &#123;...&#125;</span></span><br></pre></td></tr></table></figure>

<p>箭头函数没有定义 this 绑定。另一个涉及<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty()</code></a>的示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">10</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">&#x27;b&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a, <span class="keyword">typeof</span> <span class="built_in">this</span>.a, <span class="built_in">this</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + <span class="number">10</span></span><br><span class="line">    <span class="comment">// 代表全局对象 &#x27;Window&#x27;, 因此 &#x27;this.a&#x27; 返回 &#x27;undefined&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj.b <span class="comment">// undefined   &quot;undefined&quot;   Window &#123;postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, frames: Window, …&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用-new-操作符"><a href="#使用-new-操作符" class="headerlink" title="使用 new 操作符"></a>使用 <code>new</code> 操作符</h3><p>箭头函数不能用作构造器，和 <code>new</code>一起用会抛出错误。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> Foo = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo() <span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure>

<h3 id="使用prototype属性"><a href="#使用prototype属性" class="headerlink" title="使用prototype属性"></a>使用<code>prototype</code>属性</h3><p>箭头函数没有<code>prototype</code>属性。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> Foo = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Foo.prototype) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="使用-yield-关键字"><a href="#使用-yield-关键字" class="headerlink" title="使用 yield 关键字"></a>使用 <code>yield</code> 关键字</h3><p><code>yield</code> 关键字通常不能在箭头函数中使用（除非是嵌套在允许使用的函数内）。因此，箭头函数不能用作函数生成器。</p>
<h2 id="函数体"><a href="#函数体" class="headerlink" title="函数体"></a>函数体</h2><p>箭头函数可以有一个“简写体”或常见的“块体”。</p>
<p>在一个简写体中，只需要一个表达式，并附加一个隐式的返回值。在块体中，必须使用明确的<code>return</code>语句。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">x</span>) =&gt;</span> x * x</span><br><span class="line"><span class="comment">// 简写函数 省略return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//常规编写 明确的返回值</span></span><br></pre></td></tr></table></figure>

<h2 id="返回对象字面量"><a href="#返回对象字面量" class="headerlink" title="返回对象字面量"></a>返回对象字面量</h2><p>记住用<code>params =&gt; &#123;object:literal&#125;</code>这种简单的语法返回对象字面量是行不通的。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function">() =&gt;</span> &#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="comment">// Calling func() returns undefined!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = <span class="function">() =&gt;</span> &#123; <span class="attr">foo</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; &#125;;</span><br><span class="line"><span class="comment">// SyntaxError: function statement requires a name</span></span><br></pre></td></tr></table></figure>

<p>这是因为花括号（<code>&#123;&#125;</code> ）里面的代码被解析为一系列语句（即 <code>foo</code> 被认为是一个标签，而非对象字面量的组成部分）。</p>
<p>所以，记得用圆括号把对象字面量包起来：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function">() =&gt;</span> (&#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h2><p>箭头函数在参数和箭头之间不能换行。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function">()</span></span><br><span class="line"><span class="function">           =&gt;</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">// SyntaxError: expected expression, got &#x27;=&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>但是，可以通过在 ‘=&gt;’ 之后换行，或者用 ‘( )’、’{ }’来实现换行，如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不会有语法错误</span></span><br></pre></td></tr></table></figure>

<h2 id="解析顺序"><a href="#解析顺序" class="headerlink" title="解析顺序"></a>解析顺序</h2><p>虽然箭头函数中的箭头不是运算符，但箭头函数具有与常规函数不同的特殊<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence">运算符优先级</a>解析规则。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> callback;</span><br><span class="line"></span><br><span class="line">callback = callback || <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// ok</span></span><br><span class="line"></span><br><span class="line">callback = callback || <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="comment">// SyntaxError: invalid arrow-function arguments</span></span><br><span class="line"></span><br><span class="line">callback = callback || (<span class="function">() =&gt;</span> &#123;&#125;);    <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<h2 id="更多示例"><a href="#更多示例" class="headerlink" title="更多示例"></a>更多示例</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 空的箭头函数返回 undefined</span></span><br><span class="line"><span class="keyword">let</span> empty = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">;(<span class="function">() =&gt;</span> <span class="string">&#x27;foobar&#x27;</span>)()</span><br><span class="line"><span class="comment">// Returns &quot;foobar&quot;</span></span><br><span class="line"><span class="comment">// (这是一个立即执行函数表达式,可参阅 &#x27;IIFE&#x27;术语表)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> simple = <span class="function">(<span class="params">a</span>) =&gt;</span> (a &gt; <span class="number">15</span> ? <span class="number">15</span> : a)</span><br><span class="line">simple(<span class="number">16</span>) <span class="comment">// 15</span></span><br><span class="line">simple(<span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> max = <span class="function">(<span class="params">a, b</span>) =&gt;</span> (a &gt; b ? a : b)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Easy array filtering, mapping, ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">18</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b)</span><br><span class="line"><span class="comment">// 66</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> even = arr.filter(<span class="function">(<span class="params">v</span>) =&gt;</span> v % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line"><span class="comment">// [6, 0, 18]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> double = arr.map(<span class="function">(<span class="params">v</span>) =&gt;</span> v * <span class="number">2</span>)</span><br><span class="line"><span class="comment">// [10, 12, 26, 0, 2, 36, 46]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 更简明的promise链</span></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参数箭头函数在视觉上容易分析</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;I happen sooner&#x27;</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// deeper code</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;I happen later&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h4 id="箭头函数也可以使用条件（三元）运算符："><a href="#箭头函数也可以使用条件（三元）运算符：" class="headerlink" title="箭头函数也可以使用条件（三元）运算符："></a>箭头函数也可以使用条件（三元）运算符：</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> simple = <span class="function">(<span class="params">a</span>) =&gt;</span> (a &gt; <span class="number">15</span> ? <span class="number">15</span> : a)</span><br><span class="line">simple(<span class="number">16</span>) <span class="comment">// 15</span></span><br><span class="line">simple(<span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> max = <span class="function">(<span class="params">a, b</span>) =&gt;</span> (a &gt; b ? a : b)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>箭头函数内定义的变量及其作用域</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 常规写法</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;Good&#x27;</span> + (now.getHours() &gt; <span class="number">17</span> ? <span class="string">&#x27; evening.&#x27;</span> : <span class="string">&#x27; day.&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">greeting() <span class="comment">//&quot;Good day.&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(now) <span class="comment">// ReferenceError: now is not defined 标准的let作用域</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数括号内定义的变量是局部变量（默认参数）</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="function">(<span class="params">now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span>) =&gt;</span></span><br><span class="line">  <span class="string">&#x27;Good&#x27;</span> + (now.getHours() &gt; <span class="number">17</span> ? <span class="string">&#x27; evening.&#x27;</span> : <span class="string">&#x27; day.&#x27;</span>)</span><br><span class="line">greeting() <span class="comment">//&quot;Good day.&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(now) <span class="comment">// ReferenceError: now is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对比：函数体内&#123;&#125;不使用var定义的变量是全局变量</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;Good&#x27;</span> + (now.getHours() &gt; <span class="number">17</span> ? <span class="string">&#x27; evening.&#x27;</span> : <span class="string">&#x27; day.&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">greeting() <span class="comment">//&quot;Good day.&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(now) <span class="comment">// Fri Dec 22 2017 10:01:00 GMT+0800 (中国标准时间)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对比：函数体内&#123;&#125; 用var定义的变量是局部变量</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;Good&#x27;</span> + (now.getHours() &gt; <span class="number">17</span> ? <span class="string">&#x27; evening.&#x27;</span> : <span class="string">&#x27; day.&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">greeting() <span class="comment">//&quot;Good day.&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(now) <span class="comment">// ReferenceError: now is not defined</span></span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="箭头函数也可以使用闭包："><a href="#箭头函数也可以使用闭包：" class="headerlink" title="箭头函数也可以使用闭包："></a>箭头函数也可以使用闭包：</h4></blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 标准的闭包函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ++i</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> v = A()</span><br><span class="line">v() <span class="comment">//1</span></span><br><span class="line">v() <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//箭头函数体的闭包（ i=0 是默认参数）</span></span><br><span class="line"><span class="keyword">var</span> Add = <span class="function">(<span class="params">i = <span class="number">0</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> ++i</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> v = Add()</span><br><span class="line">v() <span class="comment">//1</span></span><br><span class="line">v() <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//因为仅有一个返回，return 及括号（）也可以省略</span></span><br><span class="line"><span class="keyword">var</span> Add = <span class="function">(<span class="params">i = <span class="number">0</span></span>) =&gt;</span> <span class="function">() =&gt;</span> ++i</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="箭头函数递归"><a href="#箭头函数递归" class="headerlink" title="箭头函数递归"></a>箭头函数递归</h4></blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fact = <span class="function">(<span class="params">x</span>) =&gt;</span> (x == <span class="number">0</span> ? <span class="number">1</span> : x * fact(x - <span class="number">1</span>))</span><br><span class="line">fact(<span class="number">5</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure>

<p>规范</p>
]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql学习笔记</title>
    <url>/taiaiac.gitee.io/2020/12/30/MySQl/mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p><code>MySQL</code>安装过程</p>
<h2 id="1、卸载服务"><a href="#1、卸载服务" class="headerlink" title="1、卸载服务"></a>1、卸载服务</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）使用控制面板进行卸载程序</span><br><span class="line"><span class="number">2</span>）卸载结束看一下安装目录中是否还有文件，清空目录</span><br><span class="line"><span class="number">3</span>）查看window中是否还有服务，删除服务名称，</span><br><span class="line">使用管理权限启动终端，执行 sc delete MySQL80</span><br></pre></td></tr></table></figure>

<h2 id="2、准备安装文件"><a href="#2、准备安装文件" class="headerlink" title="2、准备安装文件"></a>2、准备安装文件</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）mysql-installer-community-<span class="number">8.0</span>.<span class="number">12.0</span><span class="selector-class">.msi</span></span><br><span class="line"><span class="number">2</span>）双击启动安装界面，启动安装</span><br><span class="line"><span class="number">3</span>）流程参考`MySQL`安装过程的`<span class="selector-class">.xlsx</span>`的截图</span><br><span class="line"><span class="number">4</span>）注意的是保存用户名和密码</span><br></pre></td></tr></table></figure>

<h2 id="3、查看按装后的服务"><a href="#3、查看按装后的服务" class="headerlink" title="3、查看按装后的服务"></a>3、查看按装后的服务</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)控制面板---&gt;管理工具---&gt;服务---&gt;MySQL80</span><br><span class="line"><span class="number">2</span>)修改服务的启动方式：自动---&gt;手动</span><br></pre></td></tr></table></figure>

<h2 id="4、启动服务"><a href="#4、启动服务" class="headerlink" title="4、启动服务"></a>4、启动服务</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）手动：控制面板---&gt;管理工具---&gt;服务---&gt;`MySQL80`---&gt;右键启动服务</span><br><span class="line"><span class="number">2</span>）终端命令：找到终端---&gt;以管理员运行---&gt;net start MySQL80</span><br><span class="line">`C:\Windows\system32&gt;net start mysql80</span><br><span class="line">`MYSQL80 服务正在启动 ..`</span><br><span class="line">`MYSQL80 服务已经启动成功。`</span><br><span class="line">注意：服务必须启动，才能使用`mysql`数据管理系统</span><br></pre></td></tr></table></figure>

<h2 id="5、停止服务"><a href="#5、停止服务" class="headerlink" title="5、停止服务"></a>5、停止服务</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）手动：控制面板---&gt;管理工具---&gt;服务---&gt;MySQL80---&gt;右键停止服务</span><br><span class="line"><span class="number">2</span>）终端命令：找到终端---&gt;以管理员运行---&gt;net stop MySQL80</span><br><span class="line">C:\Windows\system32&gt;``net stop mysql80</span><br><span class="line">MYSQL80 服务正在停止.</span><br><span class="line">MYSQL80 服务已成功停止。</span><br></pre></td></tr></table></figure>

<h2 id="6、配置当前MySQL数据库服务的环境变量"><a href="#6、配置当前MySQL数据库服务的环境变量" class="headerlink" title="6、配置当前MySQL数据库服务的环境变量"></a>6、配置当前<code>MySQL</code>数据库服务的环境变量</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）找到安装服务的bin目录</span><br><span class="line">C:\Program Files\MySQL\MySQL Server <span class="number">8.0</span>\bin</span><br><span class="line"><span class="number">2</span>）找本电脑的环境变量</span><br><span class="line">我的电脑---&gt;右键---&gt;属性---&gt;高级系统设置---&gt;环境变量---&gt;path---&gt;双击打卡</span><br><span class="line">---&gt;新建---&gt;把目录C:\Windows\system32&gt;net stop mysql80\bin---&gt;写入点击确定</span><br><span class="line"><span class="number">3</span>）cmd---&gt;启动终端---&gt;输入</span><br><span class="line">mysql -u root -p</span><br><span class="line">enter password: root</span><br><span class="line">进入mysql命令行</span><br></pre></td></tr></table></figure>

<h2 id="7、安装Navicat-Premium"><a href="#7、安装Navicat-Premium" class="headerlink" title="7、安装Navicat Premium"></a>7、安装<code>Navicat Premium</code></h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)数据图形化操作界面，是一个数据库连接和操作的管理工具</span><br><span class="line"><span class="number">2</span>)不是数据库厂商提供的，是第三方工具</span><br></pre></td></tr></table></figure>

<h2 id="8、Navicat创建MySQL的连接"><a href="#8、Navicat创建MySQL的连接" class="headerlink" title="8、Navicat创建MySQL的连接"></a>8、<code>Navicat</code>创建<code>MySQL</code>的连接</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)打开工具</span><br><span class="line">文件---&gt;新建连接---&gt;MySQL---&gt;弹出新建连接的窗口</span><br><span class="line">连接名：web16(任意)</span><br><span class="line">主机：<span class="number">127.0</span>.<span class="number">0.1</span> 或者是 localhost</span><br><span class="line">端口: <span class="number">3306</span>（默认不动）</span><br><span class="line">用户名：root（你的用户名）</span><br><span class="line">密码：<span class="built_in">root</span>(您的密码)</span><br><span class="line">测试连接---&gt;成功---&gt;确定</span><br><span class="line"><span class="number">2</span>）在左边的导航栏就可以看到数据库连接名称</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>）创建连接之前必须先启动数据库</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>）解决连接不了的<span class="number">2059</span>异常方法</span><br><span class="line">在终端中登录mysql服务，执行以下命令</span><br><span class="line">mysql&gt; ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">执行此命令表示：</span><br><span class="line">用户：root&#x27;@&#x27;localhost</span><br><span class="line">密码：root</span><br><span class="line">修改用户名为root的的用户的登录密码为root</span><br></pre></td></tr></table></figure>

<h2 id="9、数据库常规的概念"><a href="#9、数据库常规的概念" class="headerlink" title="9、数据库常规的概念"></a>9、数据库常规的概念</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）数据库（database）  DBA</span><br><span class="line">存放数据的仓库</span><br><span class="line"><span class="number">2</span>）表（<span class="selector-tag">table</span>）</span><br><span class="line">存放在数据库中的矩阵结构，是存放数据的地方</span><br><span class="line"><span class="number">3</span>）行（row）</span><br><span class="line">数据库表中保存的一条数据，又称记录，对应js中的对象</span><br><span class="line">let person =&#123;</span><br><span class="line">id:<span class="number">1</span>,</span><br><span class="line">name:<span class="string">&quot;tom&quot;</span>,</span><br><span class="line">age:<span class="number">20</span>,</span><br><span class="line">gender:<span class="string">&quot;男&quot;</span>,</span><br><span class="line">birthday:<span class="string">&#x27;1990-09-09 12:30:23&#x27;</span>,</span><br><span class="line">photo:<span class="string">&quot;/upload/15009284523.jpg&quot;</span>,</span><br><span class="line">phone:<span class="string">&#x27;13988889999&#x27;</span>,</span><br><span class="line">address:<span class="string">&quot;不详&quot;</span>,</span><br><span class="line">email:<span class="string">&#x27;95243611@qq.com&#x27;</span>,</span><br><span class="line">identynum:<span class="string">&#x27;340121199009094753&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">4</span>）列（column）</span><br><span class="line">一条数据中的包含的某个属性，又称字段，对应js中对象的属性</span><br></pre></td></tr></table></figure>

<h2 id="10、创建数据库kgc"><a href="#10、创建数据库kgc" class="headerlink" title="10、创建数据库kgc"></a>10、创建数据库<code>kgc</code></h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; create database kgc ;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="11、查看创建的数据库"><a href="#11、查看创建的数据库" class="headerlink" title="11、查看创建的数据库"></a>11、查看创建的数据库</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| alisms             |</span><br><span class="line">| kgc                |</span><br><span class="line">| massi              |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure>

<h2 id="12、切换或使用数据库"><a href="#12、切换或使用数据库" class="headerlink" title="12、切换或使用数据库"></a>12、切换或使用数据库</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; use kgc;</span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure>

<p>删除数据库</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; drop database kgc;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="13、创建表格"><a href="#13、创建表格" class="headerlink" title="13、创建表格"></a>13、创建表格</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">create <span class="selector-tag">table</span> `students`(</span><br><span class="line">`id` bigint(<span class="number">10</span>) primary key auto_increment comment &#x27;用户id&#x27;,</span><br><span class="line">`username` varchar(<span class="number">50</span>) unique comment &#x27;用户名&#x27;,</span><br><span class="line">`password` varchar(<span class="number">50</span>) not null comment &#x27;密码&#x27;,</span><br><span class="line">`score` bigint(<span class="number">3</span>) not null comment &#x27;分数&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）创建表的关键字</span><br><span class="line">	create <span class="selector-tag">table</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>）表名称`students`</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>）字段名</span><br><span class="line">	`id`,`username`,`password`,`password`,`score`</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>）字段属性</span><br><span class="line">	bigint(<span class="number">10</span>):长整数类型，最大长度<span class="number">10</span>位</span><br><span class="line">	primary key:表示当前表的主键，有唯一非空的特性，只有主键能自动增长</span><br><span class="line">	auto_increment:当添加数据时，会自动按顺序增长</span><br><span class="line">	comment:注释</span><br><span class="line">	<span class="built_in">varchar</span>(<span class="number">50</span>):可变字符串类型，<span class="number">50</span>最大长度</span><br><span class="line">	unique:当前字段值在表中是唯一的</span><br><span class="line">	not null:当前字段不能为空</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>）引号、括号、逗号、反撇号都是英文状态</span><br><span class="line"><span class="number">6</span>）字段直接使用逗号隔开，最后一个不要逗号</span><br><span class="line"><span class="number">7</span>）分号表示sql语句执行结束</span><br></pre></td></tr></table></figure>

<h2 id="14、查看表"><a href="#14、查看表" class="headerlink" title="14、查看表"></a>14、查看表</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+---------------+</span><br><span class="line">| Tables_in_kgc |</span><br><span class="line">+---------------+</span><br><span class="line">| students      |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure>

<h2 id="15、查看表结构"><a href="#15、查看表结构" class="headerlink" title="15、查看表结构"></a>15、查看表结构</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; desc students;</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| id       | bigint(<span class="number">10</span>)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| username | varchar(<span class="number">50</span>) | YES  | UNI | NULL    |                |</span><br><span class="line">| password | varchar(<span class="number">50</span>) | NO   |     | NULL    |                |</span><br><span class="line">| score    | bigint(<span class="number">3</span>)   | NO   |     | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line"><span class="number">4</span> rows in set (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="16、查看创建表语句"><a href="#16、查看创建表语句" class="headerlink" title="16、查看创建表语句"></a>16、查看创建表语句</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; show create <span class="selector-tag">table</span> students\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line"><span class="selector-tag">Table</span>: students</span><br><span class="line">Create Table: CREATE TABLE `students` (</span><br><span class="line">`id` <span class="built_in">bigint</span>(<span class="number">10</span>) NOT NULL AUTO_INCREMENT COMMENT <span class="string">&#x27;用户id&#x27;</span>,</span><br><span class="line">`username` <span class="built_in">varchar</span>(<span class="number">50</span>) DEFAULT NULL COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">`password` <span class="built_in">varchar</span>(<span class="number">50</span>) NOT NULL COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">`score` <span class="built_in">bigint</span>(<span class="number">3</span>) NOT NULL COMMENT <span class="string">&#x27;分数&#x27;</span>,</span><br><span class="line">PRIMARY KEY (`id`),</span><br><span class="line">UNIQUE KEY `username` (`username`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="17、删除表"><a href="#17、删除表" class="headerlink" title="17、删除表"></a>17、删除表</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt;drop <span class="selector-tag">table</span> students;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="18、插入数据"><a href="#18、插入数据" class="headerlink" title="18、插入数据"></a>18、插入数据</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; insert into students (id,username,password ,score) values (<span class="number">1</span>,&quot;tom&quot;,&quot;tom123&quot;,<span class="number">78</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="19、查看表的所有数据"><a href="#19、查看表的所有数据" class="headerlink" title="19、查看表的所有数据"></a>19、查看表的所有数据</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * <span class="selector-tag">from</span> students;</span><br><span class="line">+----+----------+----------+-------+</span><br><span class="line">| id | username | password | score |</span><br><span class="line">+----+----------+----------+-------+</span><br><span class="line">|  <span class="number">1</span> | tom      | tom123   |    <span class="number">78</span> |</span><br><span class="line">+----+----------+----------+-------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="20、批量添加数据"><a href="#20、批量添加数据" class="headerlink" title="20、批量添加数据"></a>20、批量添加数据</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">insert into</span><br><span class="line">students (username,password ,score)</span><br><span class="line">values</span><br><span class="line">(&quot;sam&quot;,&quot;sam123&quot;,<span class="number">80</span>),</span><br><span class="line">(&quot;wenddy&quot;,&quot;wenddy123&quot;,<span class="number">90</span>),</span><br><span class="line">(&quot;jerry&quot;,&quot;jerry123&quot;,<span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<h2 id="21、使用navicat导出数据为-sql文件"><a href="#21、使用navicat导出数据为-sql文件" class="headerlink" title="21、使用navicat导出数据为*.sql文件"></a>21、使用<code>navicat</code>导出数据为<code>*.sql</code>文件</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）选择当前数据库</span><br><span class="line"><span class="number">2</span>）右键---&gt;转储SQL文件---&gt;数据及结构</span><br><span class="line"><span class="number">3</span>）选择保存sql文件的位置</span><br></pre></td></tr></table></figure>

<h2 id="22、使用navicat导入sql文件数据"><a href="#22、使用navicat导入sql文件数据" class="headerlink" title="22、使用navicat导入sql文件数据"></a>22、使用<code>navicat</code>导入<code>sql</code>文件数据</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>）找一个数据库</span><br><span class="line"><span class="number">2</span>）在数据库上点击右键---&gt;运行SQL文件---&gt;找到当前的user<span class="selector-class">.sql</span>文件---&gt;打开---&gt;运行</span><br><span class="line"><span class="number">3</span>）刷新数据库，可见数据库中有导入的文件</span><br></pre></td></tr></table></figure>

<h2 id="23、修改表的字段值：update-命令"><a href="#23、修改表的字段值：update-命令" class="headerlink" title="23、修改表的字段值：update 命令"></a>23、修改表的字段值：update 命令</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-- 把全部的username字段都设置成xujianyi值，切记不能这样操作，否则无法恢复数据</span><br><span class="line">-- update user set username = &#x27;xujianyi&#x27; ;</span><br><span class="line">-- 把id=<span class="number">4</span>的记录对应的username字段都设置成xujianyi值</span><br><span class="line">update user set username = &#x27;xujianyi&#x27; where id = <span class="number">4</span>;</span><br><span class="line">-- 修改id=<span class="number">6</span>的用户名为zhangyajie，密码为zhang123</span><br><span class="line">mysql&gt; update user set username=&quot;zhangyajie&quot; ,password=&quot;zhang123&quot; where id  = <span class="number">6</span>;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.03</span> sec)</span><br><span class="line">Rows matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">练习：</span><br><span class="line">修改id=<span class="number">4</span>的用户名为root，密码为root123，创建日期为：<span class="built_in">now</span>()</span><br><span class="line">UPDATE USER</span><br><span class="line">SET `username` = <span class="string">&quot;root&quot;</span>,</span><br><span class="line">`password` = <span class="string">&quot;root123&quot;</span>,</span><br><span class="line">creationDate = <span class="built_in">now</span>( )</span><br><span class="line">WHERE</span><br><span class="line">id = <span class="number">4</span>;</span><br></pre></td></tr></table></figure>

<h2 id="24、删除表记录的操作，truncate、delete"><a href="#24、删除表记录的操作，truncate、delete" class="headerlink" title="24、删除表记录的操作，truncate、delete"></a>24、删除表记录的操作，truncate、delete</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)truncate删除表中的所有数据，并重置自增序列</span><br><span class="line">mysql&gt; truncate <span class="selector-tag">table</span> user;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.12</span> sec)</span><br><span class="line"><span class="number">2</span>)delete删除表中的所有数据，不会重置自增序列</span><br><span class="line">mysql&gt; delete <span class="selector-tag">from</span> user ;</span><br><span class="line">Query OK, <span class="number">6</span> rows affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>)指定条件的删除操作</span><br><span class="line">根据id和用户名同时进行删除</span><br><span class="line">mysql&gt; delete  <span class="selector-tag">from</span> user  where id  = <span class="number">2</span> &amp;&amp; username=&quot;zhoupen&quot; ;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">练习：删除性别是男生且id&gt;<span class="number">2</span>的用户</span><br><span class="line">delete <span class="selector-tag">from</span> user where id &gt; <span class="number">2</span> and gender = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">INSERT INTO `user`</span><br><span class="line">( usercode, username, password, gender, birthday, phone, <span class="selector-tag">address</span>, userrole, createdBy, creationDate, modifyby, modifydate, picpath, resume)</span><br><span class="line">VALUES</span><br><span class="line">( &#x27;web16_001&#x27;, &#x27;zhouweiyi&#x27;, &#x27;web16_001&#x27;, <span class="number">2</span>, &#x27;<span class="number">1998</span>-<span class="number">09</span>-<span class="number">09</span>&#x27;, &#x27;<span class="number">13999998888</span>&#x27;, &#x27;不祥&#x27;, <span class="number">1</span>, <span class="number">1</span>, &#x27;<span class="number">1998</span>-<span class="number">09</span>-<span class="number">09</span> <span class="number">12</span>:<span class="number">12</span>:<span class="number">12</span><span class="string">&#x27;, 1, &#x27;</span><span class="number">1998</span>-<span class="number">09</span>-<span class="number">09</span> <span class="number">12</span>:<span class="number">12</span>:<span class="number">12</span><span class="string">&#x27;, &#x27;</span>/upload/<span class="number">1234</span>.jpg<span class="string">&#x27;, &#x27;</span>我是班长，我最帅<span class="string">&#x27;);</span></span><br></pre></td></tr></table></figure>

<h2 id="25、数据简单的查询语句，select-命令"><a href="#25、数据简单的查询语句，select-命令" class="headerlink" title="25、数据简单的查询语句，select 命令"></a>25、数据简单的查询语句，select 命令</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)查询指定的字段</span><br><span class="line">mysql&gt; select id ,username <span class="selector-tag">from</span> user where id &gt;<span class="number">2</span>;</span><br><span class="line">+----+------------+</span><br><span class="line">| id | username   |</span><br><span class="line">+----+------------+</span><br><span class="line">|  <span class="number">3</span> | zhangke    |</span><br><span class="line">|  <span class="number">4</span> | xujianyi   |</span><br><span class="line">|  <span class="number">5</span> | qiupei     |</span><br><span class="line">|  <span class="number">6</span> | zhangyajie |</span><br><span class="line">+----+------------+</span><br><span class="line"><span class="number">4</span> rows in set (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="number">2</span>)给字段添加别名 as命令</span><br><span class="line">mysql&gt; select id as &#x27;编号&#x27; ,username as &quot;用户名&quot; ,birthday as &quot;生日&quot; <span class="selector-tag">from</span> user where id &gt;<span class="number">2</span>;</span><br><span class="line">+------+------------+------------+</span><br><span class="line">| 编号 | 用户名     | 生日       |</span><br><span class="line">+------+------------+------------+</span><br><span class="line">|    <span class="number">3</span> | zhangke    | <span class="number">1999</span>-<span class="number">11</span>-<span class="number">09</span> |</span><br><span class="line">|    <span class="number">4</span> | xujianyi   | <span class="number">1998</span>-<span class="number">06</span>-<span class="number">09</span> |</span><br><span class="line">|    <span class="number">5</span> | qiupei     | <span class="number">1999</span>-<span class="number">12</span>-<span class="number">09</span> |</span><br><span class="line">|    <span class="number">6</span> | zhangyajie | <span class="number">1999</span>-<span class="number">10</span>-<span class="number">09</span> |</span><br><span class="line">+------+------------+------------+</span><br><span class="line"><span class="number">4</span> rows in set (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>) *表示查询所有</span><br><span class="line">mysql&gt; select * <span class="selector-tag">from</span>  user where id &gt; <span class="number">5</span>\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">id: <span class="number">6</span></span><br><span class="line">usercode: web16_006</span><br><span class="line">username: zhangyajie</span><br><span class="line">password: zhang123</span><br><span class="line">gender: <span class="number">1</span></span><br><span class="line">birthday: <span class="number">1999</span>-<span class="number">10</span>-<span class="number">09</span></span><br><span class="line">phone: <span class="number">13999992222</span></span><br><span class="line">address: 合肥</span><br><span class="line">userRole: <span class="number">6</span></span><br><span class="line">createdBy: <span class="number">1</span></span><br><span class="line">creationDate: <span class="number">1999</span>-<span class="number">10</span>-<span class="number">09</span> <span class="number">10</span>:<span class="number">12</span>:<span class="number">12</span></span><br><span class="line">modifyBy: <span class="number">6</span></span><br><span class="line">modifyDate: <span class="number">2020</span>-<span class="number">02</span>-<span class="number">29</span> <span class="number">14</span>:<span class="number">50</span>:<span class="number">25</span></span><br><span class="line">picpath: /upload/<span class="number">1239</span>.jpg</span><br><span class="line">resume: 我是女生，我怕谁！</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="26、聚合函数"><a href="#26、聚合函数" class="headerlink" title="26、聚合函数"></a>26、聚合函数</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)求和sum()</span><br><span class="line">对用户名的角色值进行求和</span><br><span class="line">mysql&gt; select sum( userRole)  &quot;角色值求和&quot; <span class="selector-tag">from</span> user;</span><br><span class="line">+------------+</span><br><span class="line">| 角色值求和 |</span><br><span class="line">+------------+</span><br><span class="line">|         <span class="number">21</span> |</span><br><span class="line">+------------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="number">2</span>)求最大值max(),</span><br><span class="line">求生日的最大值</span><br><span class="line">mysql&gt; select max(birthday) birthday <span class="selector-tag">from</span> user ;</span><br><span class="line">+------------+</span><br><span class="line">| birthday   |</span><br><span class="line">+------------+</span><br><span class="line">| <span class="number">1999</span>-<span class="number">12</span>-<span class="number">09</span> |</span><br><span class="line">+------------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>)求最小值min(),</span><br><span class="line">mysql&gt; select min(birthday) birthday <span class="selector-tag">from</span> user ;</span><br><span class="line">+------------+</span><br><span class="line">| birthday   |</span><br><span class="line">+------------+</span><br><span class="line">| <span class="number">1998</span>-<span class="number">06</span>-<span class="number">09</span> |</span><br><span class="line">+------------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>)求平均数avg(),</span><br><span class="line">mysql&gt; select avg( userRole)  &quot;角色平均值&quot; <span class="selector-tag">from</span> user;</span><br><span class="line">+------------+</span><br><span class="line">| 角色平均值 |</span><br><span class="line">+------------+</span><br><span class="line">|     <span class="number">3.5000</span> |</span><br><span class="line">+------------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>)计数count()</span><br><span class="line">mysql&gt; select count(id) <span class="selector-tag">from</span> user;</span><br><span class="line">+-----------+</span><br><span class="line">| count(id) |</span><br><span class="line">+-----------+</span><br><span class="line">|         <span class="number">6</span> |</span><br><span class="line">+-----------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="27、条件查询逻辑运算符"><a href="#27、条件查询逻辑运算符" class="headerlink" title="27、条件查询逻辑运算符"></a>27、条件查询逻辑运算符</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">or and &gt; &lt; = != &lt;&gt; &gt;= &lt;= &amp;&amp; ||</span><br></pre></td></tr></table></figure>

<h2 id="28、主键的概念-primary-key"><a href="#28、主键的概念-primary-key" class="headerlink" title="28、主键的概念( primary key)"></a>28、主键的概念( primary key)</h2><p>​ 主键是表中的一个字段的一个属性，该字段是唯一标定与之相关联的字段标准，一般情况设置 id 的属性为主键<br>​ 属性值：primary key<br>​ 特征：非空、唯一<br>​ <code>id</code> int(10) primary key auto_increment comment ‘用户名主键 id’</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">create <span class="selector-tag">table</span> employ(</span><br><span class="line">id int(<span class="number">10</span>) primary key auto_increment ,</span><br><span class="line">username varchar(<span class="number">40</span>) not null unique ,</span><br><span class="line">password varchar(<span class="number">40</span>) not null,</span><br><span class="line">departId int(<span class="number">10</span>) not null</span><br><span class="line">) ;</span><br><span class="line">create <span class="selector-tag">table</span> department(</span><br><span class="line">id int(<span class="number">10</span>) primary key auto_increment comment&#x27;部门的主键id&#x27;,</span><br><span class="line">name varchar(<span class="number">30</span>) not null unique comment&quot;部门名称&quot;</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure>

<p>29、键概念（foreign key）<br>外键是当前表中的字段和另外表的主键字段直接的对应关系</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">employ表中的departId的值是引用department表中的id值</span><br></pre></td></tr></table></figure>

<h2 id="30、多表联查–内连接查询"><a href="#30、多表联查–内连接查询" class="headerlink" title="30、多表联查–内连接查询"></a>30、多表联查–内连接查询</h2><p>​ 查询雇员的信息并且要显示当前雇员的部门名称</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select e.* ,d<span class="selector-class">.name</span> <span class="selector-tag">from</span> employ e,department d where e<span class="selector-class">.departId</span>  = d<span class="selector-class">.id</span>;</span><br><span class="line">+----+----------+-----------+----------+--------+</span><br><span class="line">| id | username | password  | departId | name   |</span><br><span class="line">+----+----------+-----------+----------+--------+</span><br><span class="line">|  <span class="number">1</span> | tom      | tom123    |        <span class="number">1</span> | 采购部 |</span><br><span class="line">|  <span class="number">2</span> | sam      | sam123    |        <span class="number">2</span> | 行政部 |</span><br><span class="line">|  <span class="number">3</span> | wenddy   | wenddy123 |        <span class="number">3</span> | 财务部 |</span><br><span class="line">|  <span class="number">4</span> | jerry    | jerry123  |        <span class="number">4</span> | 生成部 |</span><br><span class="line">+----+----------+-----------+----------+--------+</span><br><span class="line"><span class="number">4</span> rows in set (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>作业:<br>1、实现所有聚合函数的练习<br>2、实现查询雇员的信息并显示当前雇员的部门名称练习</p>
<h2 id="31、分页查询-limit-0-3"><a href="#31、分页查询-limit-0-3" class="headerlink" title="31、分页查询 limit 0,3;"></a>31、分页查询 limit 0,3;</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select id,username,password  <span class="selector-tag">from</span> user limit <span class="number">0</span>,<span class="number">3</span>;</span><br><span class="line">+----+-----------+-----------+</span><br><span class="line">| id | username  | password  |</span><br><span class="line">+----+-----------+-----------+</span><br><span class="line">|  <span class="number">1</span> | zhouweiyi | web16_001 |</span><br><span class="line">|  <span class="number">2</span> | zhoupen   | web16_002 |</span><br><span class="line">|  <span class="number">3</span> | zhangke   | web16_003 |</span><br><span class="line">+----+-----------+-----------+</span><br><span class="line"><span class="number">3</span> rows in set (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">index起始坐标</span><br><span class="line">pageCount一页几条</span><br><span class="line">pageNum第几页</span><br><span class="line"></span><br><span class="line">index = (pageNum-<span class="number">1</span>)*pageCount;</span><br><span class="line"></span><br><span class="line">第二页数据(一页<span class="number">3</span>条)：</span><br><span class="line">index = (<span class="number">2</span>-<span class="number">1</span>)*<span class="number">3</span> = <span class="number">3</span>;</span><br><span class="line">mysql&gt; select id,username,password  <span class="selector-tag">from</span> user limit <span class="number">0</span>,<span class="number">3</span>;</span><br><span class="line">+----+-----------+-----------+</span><br><span class="line">| id | username  | password  |</span><br><span class="line">+----+-----------+-----------+</span><br><span class="line">|  <span class="number">1</span> | zhouweiyi | web16_001 |</span><br><span class="line">|  <span class="number">2</span> | zhoupen   | web16_002 |</span><br><span class="line">|  <span class="number">3</span> | zhangke   | web16_003 |</span><br><span class="line">+----+-----------+-----------+</span><br><span class="line"><span class="number">3</span> rows in set (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="32、查询smbms-user表的总数"><a href="#32、查询smbms-user表的总数" class="headerlink" title="32、查询smbms_user表的总数"></a>32、查询<code>smbms_user</code>表的总数</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(id) <span class="selector-tag">from</span> smbms_user;</span><br><span class="line">+-----------+</span><br><span class="line">| count(id) |</span><br><span class="line">+-----------+</span><br><span class="line">|       <span class="number">477</span> |</span><br><span class="line">+-----------+</span><br><span class="line"><span class="number">1</span> row in set (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="33、模糊查询-username包含-root-的用户-id-和用户名"><a href="#33、模糊查询-username包含-root-的用户-id-和用户名" class="headerlink" title="33、模糊查询 username包含 root 的用户 id 和用户名"></a>33、模糊查询 <code>username</code>包含 root 的用户 id 和用户名</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select id ,username <span class="selector-tag">from</span> smbms_user where username  like &#x27;%root%&#x27;;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">| <span class="number">14</span> | root1    |</span><br><span class="line">| <span class="number">43</span> | root123  |</span><br><span class="line">| <span class="number">45</span> | root     |</span><br><span class="line">| <span class="number">47</span> | root47   |</span><br><span class="line">+----+----------+</span><br><span class="line"><span class="number">4</span> rows in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="34、查询以ta开头的用户-id-和用户名"><a href="#34、查询以ta开头的用户-id-和用户名" class="headerlink" title="34、查询以ta开头的用户 id 和用户名"></a>34、查询以<code>ta</code>开头的用户 id 和用户名</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select id ,username <span class="selector-tag">from</span> smbms_user where username  like &#x27;ta%&#x27;;</span><br><span class="line">+-----+------------+</span><br><span class="line">| id  | username   |</span><br><span class="line">+-----+------------+</span><br><span class="line">|  <span class="number">54</span> | TAj3H04cP  |</span><br><span class="line">| <span class="number">419</span> | taNkyip3u  |</span><br><span class="line">| <span class="number">456</span> | tainAUVSYt |</span><br><span class="line">+-----+------------+</span><br><span class="line"><span class="number">3</span> rows in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="35、查询sm结尾的用户-id-和用户名"><a href="#35、查询sm结尾的用户-id-和用户名" class="headerlink" title="35、查询sm结尾的用户 id 和用户名"></a>35、查询<code>sm</code>结尾的用户 id 和用户名</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select id ,username <span class="selector-tag">from</span> smbms_user where username  like &#x27;%sm&#x27;;</span><br><span class="line">+-----+-------------+</span><br><span class="line">| id  | username    |</span><br><span class="line">+-----+-------------+</span><br><span class="line">| <span class="number">385</span> | gyiFjEFe5sM |</span><br><span class="line">| <span class="number">500</span> | Kg2Dism     |</span><br><span class="line">+-----+-------------+</span><br><span class="line"><span class="number">2</span> rows in set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="36、查询-t-结尾的用户-id-和用户名-显示第-2-页，一页-3-条"><a href="#36、查询-t-结尾的用户-id-和用户名-显示第-2-页，一页-3-条" class="headerlink" title="36、查询 t 结尾的用户 id 和用户名,显示第 2 页，一页 3 条"></a>36、查询 t 结尾的用户 id 和用户名,显示第 2 页，一页 3 条</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select id ,username <span class="selector-tag">from</span> smbms_user where username  like &#x27;%t&#x27; limit <span class="number">3</span>,<span class="number">3</span>;</span><br><span class="line">+-----+-----------+</span><br><span class="line">| id  | username  |</span><br><span class="line">+-----+-----------+</span><br><span class="line">| <span class="number">222</span> | Fod3CRkT  |</span><br><span class="line">| <span class="number">295</span> | BmZShUt   |</span><br><span class="line">| <span class="number">362</span> | lOALkDSWt |</span><br><span class="line">+-----+-----------+</span><br><span class="line"><span class="number">3</span> rows in set (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="37、通过smbms-user和smbms-role联查，显示用户名包含-t，要求显示-id-用户名、用户角色名称显示是第二页，一页-3-条。"><a href="#37、通过smbms-user和smbms-role联查，显示用户名包含-t，要求显示-id-用户名、用户角色名称显示是第二页，一页-3-条。" class="headerlink" title="37、通过smbms_user和smbms_role联查，显示用户名包含 t，要求显示 id,用户名、用户角色名称显示是第二页，一页 3 条。"></a>37、通过<code>smbms_user</code>和<code>smbms_role</code>联查，显示用户名包含 t，要求显示 id,用户名、用户角色名称显示是第二页，一页 3 条。</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">mysql&gt; select</span><br><span class="line">-&gt; u<span class="selector-class">.id</span>,</span><br><span class="line">-&gt; u<span class="selector-class">.username</span>,</span><br><span class="line">-&gt; r<span class="selector-class">.rolename</span></span><br><span class="line">-&gt; <span class="selector-tag">from</span></span><br><span class="line">-&gt; smbms_user u,</span><br><span class="line">-&gt; smbms_role r</span><br><span class="line">-&gt; where</span><br><span class="line">-&gt; u<span class="selector-class">.userrole</span> = r<span class="selector-class">.id</span></span><br><span class="line">-&gt; and</span><br><span class="line">-&gt; u<span class="selector-class">.username</span> like &quot;%t%&quot;</span><br><span class="line">-&gt; limit <span class="number">3</span>,<span class="number">3</span>;</span><br><span class="line">+----+------------+----------+</span><br><span class="line">| id | username   | rolename |</span><br><span class="line">+----+------------+----------+</span><br><span class="line">| <span class="number">47</span> | root47     | 经理     |</span><br><span class="line">| <span class="number">54</span> | TAj3H04cP  | 普通员工 |</span><br><span class="line">| <span class="number">57</span> | EiG9ghfJtx | 普通员工 |</span><br><span class="line">+----+------------+----------+</span><br><span class="line"><span class="number">3</span> rows in set (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>MySQl</category>
      </categories>
      <tags>
        <tag>MySQl</tag>
      </tags>
  </entry>
  <entry>
    <title>查询数据总结</title>
    <url>/taiaiac.gitee.io/2020/12/30/MySQl/%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="1、服务端"><a href="#1、服务端" class="headerlink" title="1、服务端"></a>1、服务端</h1><ul>
<li><h2 id="1、创建项目"><a href="#1、创建项目" class="headerlink" title="1、创建项目"></a>1、创建项目</h2><ul>
<li><p>```css<br>express –view==ejs projectname</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ## 2、安装依赖</span><br><span class="line">  - ```css</span><br><span class="line">    cd projectname</span><br></pre></td></tr></table></figure></li>
<li><p>```css<br>cnpm i mysql -S</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- ```css</span><br><span class="line">  cnpm i md5 -S</span><br></pre></td></tr></table></figure></li>
<li><p>```css<br>cnpm i body-parser -S</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- ## 3、创建数据库连接模块 mysqlbd.js</span><br><span class="line">  - 引入 mysql 模块</span><br><span class="line">  - 创建链接函数 getConnetion()返回数据连接对象</span><br><span class="line">  - 读取配置文件中 数据库连接参数</span><br><span class="line">  - ```css</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;user&quot;:&quot;root&quot;,</span><br><span class="line">        &quot;password&quot;:&quot;root&quot;,</span><br><span class="line">        &quot;host&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">        &quot;port&quot;:&quot;3306&quot;,</span><br><span class="line">        &quot;database&quot;:&quot;这里填密码&quot;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>导出 getConnetion 函数</p>
<ul>
<li>```css<br>exports.getConnetion=getConnetion<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- ## 4、在 users.js 中创建/login 路由</span><br><span class="line">  - ```css</span><br><span class="line">    router.post(&quot;/login&quot;,urlencodedParser,function(req,res)&#123;</span><br><span class="line">    			//执行的数据库操作和返回数据操作</span><br><span class="line">    		&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><h2 id="5、在-users-js-中引入模块-mysqlbd-js-用于创建连接"><a href="#5、在-users-js-中引入模块-mysqlbd-js-用于创建连接" class="headerlink" title="5、在 users.js 中引入模块 mysqlbd.js,用于创建连接"></a>5、在 users.js 中引入模块 mysqlbd.js,用于创建连接</h2><ul>
<li>```css<br>let mysql = reuqire(“../utils/mysqlbd.js”)<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- ## 6、根据用户名和密码查询用户</span><br><span class="line">  - 获得数据库连接对象</span><br><span class="line">  - ```js</span><br><span class="line">    let cnt = await mysql.getConnetion()</span><br></pre></td></tr></table></figure></li>
<li>建立连接</li>
<li>```css<br>cnt.connect()<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- 编写 sql 语句</span><br><span class="line">- ```js</span><br><span class="line">  let sql = `select u.*,r.rolename from smbms_user u ,smbms_role r </span><br><span class="line">  			where userName=? and userPassword =? and r.id = u.userRole`</span><br></pre></td></tr></table></figure></li>
<li>准备参数</li>
<li>```js<br>let arr = [params.userName, md5(params.userPassword, ‘utf-8’)]<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- 执行查询操作</span><br><span class="line">- ```js</span><br><span class="line">  cnt.query(sql,arr,function(err,results,fields)&#123;</span><br><span class="line">  				//err:查询错误时的对象</span><br><span class="line">  				//results 查询结果集=[&#123;&#125;,&#123;&#125;....]</span><br><span class="line">  				//fields 查询的字段名称</span><br><span class="line">  				6)返回查询结果</span><br><span class="line">  					res.send(results)</span><br><span class="line">  				7)关闭连接</span><br><span class="line">  					cnt.end()</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><h2 id="7、在服务端-app-js-添加跨域"><a href="#7、在服务端-app-js-添加跨域" class="headerlink" title="7、在服务端 app.js 添加跨域"></a>7、在服务端 app.js 添加跨域</h2></li>
<li><p>```js<br>app.all(‘<em>‘, function (req, res, next) {<br>  res.header(‘Access-Control-Allow-Origin’, ‘</em>‘)<br>  res.header(‘Access-Control-Allow-Headers’, ‘*’)<br>  next()<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- ## 8、启动服务</span><br><span class="line">  - ```css</span><br><span class="line">    npm start</span><br><span class="line">    cd bin ---&gt; node www</span><br></pre></td></tr></table></figure></li>
<li><h2 id="9、监听客户端请求"><a href="#9、监听客户端请求" class="headerlink" title="9、监听客户端请求"></a>9、监听客户端请求</h2><ul>
<li>在客户端发起请求</li>
<li>```css<br>url=”<a href="http://127.0.0.1:3000/users/login&quot;">http://127.0.0.1:3000/users/login&quot;</a><br>method=”post”<br>data={usernName:”root123”,userPassword:”root123”}<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"># 2、客户端</span><br><span class="line"></span><br><span class="line">- ## 1、创建项目 node-express-client</span><br><span class="line">- ## 2、img、 html、css、js 等文件夹和文件</span><br><span class="line">- ## 3、在 login.html 中添加 axios.js 依赖</span><br><span class="line">- ```html</span><br><span class="line">  &lt;script src=&quot;../js/axios.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><h2 id="4、发起登录请求"><a href="#4、发起登录请求" class="headerlink" title="4、发起登录请求"></a>4、发起登录请求</h2><ul>
<li><p>​ 1)在用户名和密码框输入值</p>
</li>
<li><p>​ 2)点击登录按钮触发表单提交事件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">form.onsubmit = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>​ 3)阻止表单的默认提交事件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">e<span class="selector-class">.preventDefault</span>()</span><br><span class="line">e<span class="selector-class">.returnValue</span>  = false</span><br></pre></td></tr></table></figure></li>
<li><p>​ 4)获得表单数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> userName = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#user&#x27;</span>).value</span><br><span class="line"><span class="keyword">let</span> userPassword = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#mima&#x27;</span>).value</span><br></pre></td></tr></table></figure></li>
<li><p>​ 5)使用 axios 发起登录请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="string">&#x27;http://127.0.0.1:3000/users/login&#x27;</span></span><br><span class="line"><span class="keyword">let</span> data = &#123; usernName, userPassword &#125;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">data</span>: res &#125; = axios.post(url, data)</span><br></pre></td></tr></table></figure>
</li>
<li><p>​ 6)解析服务器返回的数据<br>​ res 判断空<br>​ res.length===0 —&gt;提示错误信息(错误的用户名或密码)</p>
</li>
<li><p>​ 7)根据数据执行页面跳转<br>​</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">res<span class="selector-class">.length</span>!==<span class="number">0</span></span><br><span class="line">location<span class="selector-class">.replace</span>(&quot;welcome<span class="selector-class">.html</span>&quot;)</span><br><span class="line">sessionStorage<span class="selector-class">.setItem</span>(&quot;USER_LOGIN&quot;,JSON<span class="selector-class">.stringify</span>(res<span class="selector-attr">[0]</span>))</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h2 id="5、在-welcome-html-界面"><a href="#5、在-welcome-html-界面" class="headerlink" title="5、在 welcome.html 界面"></a>5、在 welcome.html 界面</h2><ul>
<li><p>​ 1)把 sessionStorage 中取出缓存数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = sessionStorage.getItem(<span class="string">&#x27;USER_LOGIN&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> user = <span class="built_in">JSON</span>.parse(str)</span><br></pre></td></tr></table></figure>
</li>
<li><p>​ 2) 把用户信息写到页面中<br>​</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">users<span class="selector-class">.innerHTML</span> = user<span class="selector-class">.userName</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h2 id="6、点击用户管理按钮跳转到用户列表页面"><a href="#6、点击用户管理按钮跳转到用户列表页面" class="headerlink" title="6、点击用户管理按钮跳转到用户列表页面"></a>6、点击用户管理按钮跳转到用户列表页面</h2></li>
</ul>
]]></content>
      <categories>
        <category>MySQl</category>
      </categories>
      <tags>
        <tag>MySQl</tag>
      </tags>
  </entry>
  <entry>
    <title>表格</title>
    <url>/taiaiac.gitee.io/2020/12/30/MySQl/%E8%A1%A8%E6%A0%BC/</url>
    <content><![CDATA[<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.启动服务</span><br><span class="line">C:\Users\root&gt;mysql -u root -p</span><br><span class="line"><span class="number">2</span>.查看创建的数据库</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line"><span class="number">2</span>.创建数据库`kgc`</span><br><span class="line">mysql&gt; create database kgc;</span><br><span class="line"><span class="number">3</span>.切换或使用数据库</span><br><span class="line">mysql&gt; use kgc;</span><br><span class="line"><span class="number">4</span>.删除数据库</span><br><span class="line">mysql&gt; drop database kgc;</span><br><span class="line"><span class="number">5</span>.创建表格</span><br><span class="line">mysql&gt; create <span class="selector-tag">table</span> `student`(</span><br><span class="line">-&gt;     `id` bigint(<span class="number">10</span>) primary key auto_increment comment &#x27;用户id&#x27;,</span><br><span class="line">-&gt;     `username` varchar(<span class="number">50</span>) not null unique comment &#x27;用户名&#x27;,</span><br><span class="line">-&gt;     `password` varchar(<span class="number">50</span>) not null comment &#x27;密码&#x27;,</span><br><span class="line">-&gt;     `score` bigint(<span class="number">3</span>) not null comment &#x27;分数&#x27;</span><br><span class="line">-&gt;     );</span><br><span class="line"><span class="number">6</span>.查看表</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line"><span class="number">7</span>.查看表结构</span><br><span class="line">mysql&gt; desc student;</span><br><span class="line"><span class="number">8</span>.查看创建表语句</span><br><span class="line">mysql&gt; show create <span class="selector-tag">table</span> student;</span><br><span class="line"><span class="number">9</span>.删除表</span><br><span class="line">mysql&gt; drop <span class="selector-tag">table</span> student;</span><br><span class="line"><span class="number">10</span>.插入数据</span><br><span class="line">mysql&gt; insert into student(id,username,password,score) values(<span class="number">1</span>,&#x27;tom&#x27;,&#x27;tom123&#x27;,<span class="number">70</span>);</span><br><span class="line"><span class="number">11</span>. 批量添加数据</span><br><span class="line">mysql&gt; insert into student(username,password,score) values</span><br><span class="line">-&gt; (&#x27;tom1&#x27;,&#x27;tom123&#x27;,<span class="number">80</span>),</span><br><span class="line">-&gt; (&#x27;tom2&#x27;,&#x27;tom1234&#x27;,<span class="number">90</span>),</span><br><span class="line">-&gt; (&#x27;tom3&#x27;,&#x27;admin&#x27;,<span class="number">100</span>);</span><br><span class="line">数据简单的查询语句，select命令</span><br><span class="line">mysql&gt; select <span class="number">1</span>*<span class="number">2</span> as res;</span><br><span class="line">mysql&gt; select pow(<span class="number">2</span>,<span class="number">3</span>) as res;</span><br><span class="line">mysql&gt; select id,username <span class="selector-tag">from</span> student;</span><br><span class="line">mysql&gt; select * <span class="selector-tag">from</span> student;</span><br><span class="line">mysql&gt; select * <span class="selector-tag">from</span> student where password != &#x27;tom123&#x27;;</span><br><span class="line">mysql&gt; select * <span class="selector-tag">from</span> student where score &gt;<span class="number">60</span> and id &gt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">create <span class="selector-tag">table</span> `<span class="selector-tag">main</span>`(</span><br><span class="line">`id` bigint(<span class="number">10</span>) primary key auto_increment comment &#x27;用户&#x27;,</span><br><span class="line"> `name` varchar(<span class="number">50</span>) not null comment &#x27;用户名&#x27;,</span><br><span class="line"> `age` bigint(<span class="number">3</span>) not null comment &#x27;年龄&#x27;,</span><br><span class="line">`gender` varchar(<span class="number">50</span>) not null comment &#x27;性别&#x27;,</span><br><span class="line">`birthday` varchar(<span class="number">50</span>) not null comment &#x27;生日&#x27;,</span><br><span class="line">`photo` varchar(<span class="number">50</span>) not null comment &#x27;照片&#x27;,</span><br><span class="line">`phone` varchar(<span class="number">50</span>) not null comment &#x27;电话&#x27;,</span><br><span class="line">`<span class="selector-tag">address</span>` varchar(<span class="number">50</span>) not null comment &#x27;地址&#x27;,</span><br><span class="line">`email` varchar(<span class="number">50</span>) not null comment &#x27;邮箱&#x27;,</span><br><span class="line">`dientynum` varchar(<span class="number">50</span>) not null comment &#x27;身份证号&#x27;</span><br><span class="line"> );</span><br><span class="line"> insert into <span class="selector-tag">main</span>(name,age,gender,birthday,photo,phone,<span class="selector-tag">address</span>,email,dientynum) values</span><br><span class="line">    -&gt; (&#x27;bob&#x27;,&#x27;<span class="number">40</span>&#x27;,&#x27;男&#x27;,&#x27;<span class="number">1990</span>-<span class="number">09</span>-<span class="number">09</span> <span class="number">12</span>:<span class="number">30</span>:<span class="number">23</span><span class="string">&#x27;,&quot;/upload/15000000552.jpg&quot;,&#x27;</span><span class="number">13988889999</span><span class="string">&#x27;,&#x27;</span>不详<span class="string">&#x27;,&#x27;</span><span class="number">528627554</span>@qq.com<span class="string">&#x27;,&#x27;</span><span class="number">3404623136059</span><span class="string">&#x27;);</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>MySQl</category>
      </categories>
      <tags>
        <tag>MySQl</tag>
      </tags>
  </entry>
  <entry>
    <title>Promise</title>
    <url>/taiaiac.gitee.io/2021/01/14/Javascript/Promise/</url>
    <content><![CDATA[<ul>
<li>promise 是处理异步执行结果的一种方案</li>
<li>promise 是一个对象，是一个容器，用于保存异步执行的结果</li>
<li>promise 有两种状态，<ul>
<li>1）正在获得异步执行的结果（pendding）</li>
<li>2）已经获得异步执行的结果（正确的结果，异常的结果）</li>
<li>3）promise 使用 resolve 函数保存正确的结果</li>
<li>4）promise 使用 reject 函数保存错误或异常的结果</li>
</ul>
</li>
<li>可以使用 promise 自带的函数获得异步执行的结果</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">promise</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;log(res是正确的结果)&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;log(e是异常的结果)&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>可以使用 async 和 await 处理 promise 的结果</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="keyword">return</span> promise()</span><br><span class="line">        <span class="comment">//res是promise对象保存的异步正确的结果</span></span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;<span class="keyword">return</span> e&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Promise 在 Ecmascript 6 中体现出来就是一个对象</span></span><br><span class="line"><span class="comment"> * Promise 是一个容器</span></span><br><span class="line"><span class="comment"> * 一般用来封装一个异步操作</span></span><br><span class="line"><span class="comment"> *   异步操作是一个无法预测的事情，要吗成功，要吗失败</span></span><br><span class="line"><span class="comment"> * 容器内部有三种状态：</span></span><br><span class="line"><span class="comment"> *     pending  正在处理</span></span><br><span class="line"><span class="comment"> *     resolved 成功，已解决</span></span><br><span class="line"><span class="comment"> *     rejected 驳回，失败</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise 对象一经创建，立即执行</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/2.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 当 Promise 对象内部的异步操作结果失败的时候，告诉 Promise 对象容器，该异步任务失败了</span></span><br><span class="line">      <span class="comment">// 其实就是将 Promise 内部的 Pending 状态改为 Rejected</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 当代码执行到这里，说明该 Promise 对象内部的异步操作没有错误发生，证明成功了</span></span><br><span class="line">    <span class="comment">// 然后在这里将 Promise 内部的 Pending 状态改为 Resolved</span></span><br><span class="line">    resolve(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Promise 实例对象有一个方法：then 方法</span></span><br><span class="line"><span class="comment">// then 需要传递两个回调处理函数</span></span><br><span class="line"><span class="comment">// 其中第一个回调处理函数就是 Promise 对象内部的  resolve 函数</span></span><br><span class="line"><span class="comment">// 第二个回调处理函数是可选的，如果传递则就是 Promise 对象内部的 reject 函数</span></span><br><span class="line">.then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(<span class="string">&#x27;./data/3.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 这里没有使用 return 的原因就是 Promise 的状态只能从 Pending 变为 Resolve 或者 Rejected</span></span><br><span class="line">        <span class="comment">// 状态一旦改变，就不会再发生变化</span></span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败了&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// then 方法之后可以继续链式调用 then</span></span><br><span class="line"><span class="comment">// 后续的每一个 then 中指定的回调处理函数都会被执行</span></span><br><span class="line"><span class="comment">// 后续的 then 中指定的回调处理函数可以接收上一个 then 中指定的成功的回调处理函数的返回结果</span></span><br><span class="line"><span class="comment">//    1. 没有返回值，默认就是 undefined</span></span><br><span class="line"><span class="comment">//    2. 有普通的返回值，数字、字符串、对象、数组。。。</span></span><br><span class="line"><span class="comment">//    3. 返回一个新的 Promise 对象</span></span><br><span class="line">.then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">222</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(<span class="string">&#x27;./data/1.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 这里没有使用 return 的原因就是 Promise 的状态只能从 Pending 变为 Resolve 或者 Rejected</span></span><br><span class="line">        <span class="comment">// 状态一旦改变，就不会再发生变化</span></span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">333</span>)</span><br><span class="line">  <span class="comment">// 二进制数据调用 toString() 方法可以转换为普通的字符，默认就是 utf8 编码</span></span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="promise封装异步操作"><a href="#promise封装异步操作" class="headerlink" title="promise封装异步操作"></a>promise封装异步操作</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">readFile(<span class="string">&#x27;./data/1.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">&#x27;./data/2.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">&#x27;./data/3.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(...args, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="promise链式操作错误处理"><a href="#promise链式操作错误处理" class="headerlink" title="promise链式操作错误处理"></a>promise链式操作错误处理</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">readFile(<span class="string">&#x27;./data/4.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">&#x27;./data/2.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="built_in">JSON</span>.parse(<span class="string">&#x27;&#123;dsadsa&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">&#x27;./data/3.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 在使用 Promise 做异步流程控制的时候，关于异常的处理可以通过在最后一个 then 之后设置一个 catch</span></span><br><span class="line">  <span class="comment">// 然后指定一个失败处理函数</span></span><br><span class="line">  <span class="comment">// 该函数可以捕获前面所有的 Promise 对象本身以及 then 内部的任务错误</span></span><br><span class="line">  <span class="comment">// 当前面任何一个发生异常，直接进入 catch，后续所有的 Promise 包括 then 不再执行</span></span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(...args, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="promise多参数处理"><a href="#promise多参数处理" class="headerlink" title="promise多参数处理"></a>promise多参数处理</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">data1, data2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data1, data2)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>事件</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/js%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h1><h2 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h2><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">当以下情况发生时，出现此事件</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>onclick</code></td>
<td align="center">鼠标点击某个对象</td>
</tr>
<tr>
<td align="center"><code>ondblclick</code></td>
<td align="center">鼠标双击某个对象</td>
</tr>
<tr>
<td align="center"><code>onmousemove</code></td>
<td align="center">鼠标被移动</td>
</tr>
<tr>
<td align="center"><code>onmouseout</code></td>
<td align="center">鼠标从某元素移开</td>
</tr>
<tr>
<td align="center"><code>onmouseover</code></td>
<td align="center">鼠标被移到某元素之上</td>
</tr>
<tr>
<td align="center"><code>onmousedown</code></td>
<td align="center">某个鼠标按键被按下</td>
</tr>
<tr>
<td align="center"><code>onmouseup</code></td>
<td align="center">某个鼠标按键被松开</td>
</tr>
<tr>
<td align="center"><code>onmouseenter</code></td>
<td align="center">鼠标进入</td>
</tr>
<tr>
<td align="center"><code>onmouseleave</code></td>
<td align="center">鼠标离开</td>
</tr>
</tbody></table>
<h2 id="表单事件"><a href="#表单事件" class="headerlink" title="表单事件"></a>表单事件</h2><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">当以下情况发生时，出现此事件</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>onblur</code></td>
<td align="center">元素失去焦点</td>
</tr>
<tr>
<td align="center"><code>onchange</code></td>
<td align="center">用户改变域的内容</td>
</tr>
<tr>
<td align="center"><code>onfocus</code></td>
<td align="center">元素获得焦点</td>
</tr>
<tr>
<td align="center"><code>onreset</code></td>
<td align="center">重置按钮被点击</td>
</tr>
<tr>
<td align="center"><code>onsubmit</code></td>
<td align="center">提交按钮被点击</td>
</tr>
</tbody></table>
<h2 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h2><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">当以下情况发生时，出现此事件</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>onkeydown</code></td>
<td align="center">某个键盘的键被按下</td>
</tr>
<tr>
<td align="center"><code>onkeypress</code></td>
<td align="center">某个键盘的键被按下或按住</td>
</tr>
<tr>
<td align="center"><code>onkeyup</code></td>
<td align="center">某个键盘的键被松开</td>
</tr>
</tbody></table>
<h1 id="其他事件"><a href="#其他事件" class="headerlink" title="其他事件"></a>其他事件</h1><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">当以下情况发生时，出现此事件</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>onscroll</code></td>
<td align="center">滚动条事件</td>
</tr>
<tr>
<td align="center"><code>onabort</code></td>
<td align="center">图像加载被中断</td>
</tr>
<tr>
<td align="center"><code>onresize</code></td>
<td align="center">窗口或框架被调整尺寸</td>
</tr>
<tr>
<td align="center"><code>onselect</code></td>
<td align="center">文本被选定</td>
</tr>
<tr>
<td align="center"><code>onunload</code></td>
<td align="center">用户退出页面</td>
</tr>
<tr>
<td align="center"><code>onerror</code></td>
<td align="center">当加载文档或图像时发生某个错误</td>
</tr>
<tr>
<td align="center"><code>onload</code></td>
<td align="center">某个页面或图像被完成加载</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>scroll监听加载页面</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/scroll%E7%9B%91%E5%90%AC%E5%8A%A0%E8%BD%BD%E9%A1%B5%E9%9D%A2/</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).on(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scrollHeight = $(<span class="built_in">document</span>).height()</span><br><span class="line">  <span class="keyword">var</span> windowHeight = $(<span class="built_in">window</span>).height()</span><br><span class="line">  <span class="keyword">var</span> scrollTop = $(<span class="built_in">window</span>).scrollTop()</span><br><span class="line">  <span class="keyword">if</span> (windowHeight + scrollTop - scrollHeight &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      getAjax(<span class="number">4</span>)</span><br><span class="line">    &#125;, <span class="number">500</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>首先要清楚 3 个定义:</p>
<ol>
<li><p>文档高度</p>
<p>这是整个页面的高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scrollHeight = $(<span class="built_in">document</span>).height()</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scrollHeight = $(<span class="built_in">document</span>).height()</span><br></pre></td></tr></table></figure>
</li>
<li><p>可视窗口高度</p>
<p>这是你看到的浏览器可视屏幕高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> windowHeight = $(<span class="built_in">window</span>).height()</span><br></pre></td></tr></table></figure>
</li>
<li><p>滚动条滚动高度</p>
<p>滚动条下滑过的高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scrollTop = $(<span class="built_in">window</span>).scrollTop()</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>所以, 当 文档高度 = 可视窗口高度 + 滚动条高度 时,滚动条正好到底.</p>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>window</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/window/</url>
    <content><![CDATA[<h1 id="Window-–-代表浏览器中一个打开的窗口："><a href="#Window-–-代表浏览器中一个打开的窗口：" class="headerlink" title="Window – 代表浏览器中一个打开的窗口："></a><strong>Window – 代表浏览器中一个打开的窗口：</strong></h1><p><strong>对象属性</strong><br>　　 window //窗口自身<br>　　 window.self //引用本窗户 window=window.self<br>　　 window.name //为窗口命名<br>　　 window.defaultStatus //设定窗户状态栏信息<br>　　 window.location //URL 地址，配备布置这个属性可以打开新的页面</p>
<p><strong>对象方法</strong><br>　　 window.alert(“text”) //提示信息会话框<br>　　 window.confirm(“text”) //确认会话框<br>　　 window.prompt(“text”) //要求键盘输入会话框<br>　　 window.setIntervel(“action”,time) //每一隔指定的时间(毫秒)就执行一次操作<br>　　 window.clearInterval() //清除时间配备布置作用就是终止轮回<br>　　 window.setTimeout(action,time) //隔了指定的时间(毫秒)执行一次操作<br>　　 window.open() //打开新的窗口<br>　　 window.close() //关闭窗口</p>
<p><strong>成员对象</strong><br>　　 window.event<br>　　 window.document //见 document 对象详解<br>　　 window.history<br>　　 window.screen<br>　　 window.navigator<br>　　 window.external<br>　　————————————————– ——————-<br>　　 window.history 对象<br>　　 window.history.length //浏览过的页面数<br>　　 history.back() //后退<br>　　 history.forward() //前进<br>　　 history.go(i) //前进或后退到历史记录的第 i 个页面<br>　　//i&gt;0 进步,i&lt;0 后退<br>　 ————————————————- ——————-<br>　　 window.screen 对象<br>　 window.screen.width //屏幕宽度<br>　　 window.screen.height //屏幕高度<br>　　 window.screen.colorDepth //屏幕色深<br>　　 window.screen.availWidth //可用宽度<br>　　 window.screen.availHeight //可用高度(除去任务栏的高度)<br>　　————————————————– ——————-<br>　　 window.external 对象<br>　　 window.external.AddFavorite(“地址”,”标题” ) //把网站新增到保藏夹<br>　　————————————————– ——————-<br>　　 window.navigator 对象<br>　　 window.navigator.appCodeName //浏览器代码名<br>　　 window.navigator.appName //浏览器应用程序名<br>　　 window.navigator.appMinorVersion //浏览器补丁版本<br>　　 window.navigator.cpuClass //cpu 类型 x86<br>　　 window.navigator.platform //操作体系类型 win32<br>　　 window.navigator.plugins<br>　　 window.navigator.opsProfile<br>　　 window.navigator.userProfile<br>　　 window.navigator.systemLanguage //客户体系语言 zh-cn 简体中文<br>　　 window.navigator.userLanguage //用户语言,同上<br>　　 window.navigator.appVersion //浏览器版本<br>　　 window.navigator.userAgent<br>　　 window.navigator.onLine //用户否在线<br>　　 window.navigator.cookieEnabled //浏览器是否撑持 cookie<br>　　 window.navigator.mimeTypes</p>
<p><strong>document 对象 – 代表整个**HTML** 文档,可用来访问页面中的所有元素：</strong></p>
<p><strong>对象属性</strong></p>
<blockquote>
<p>document.title //设置文档标题等价于 HTML 的<title>标签<br>document.bgColor //设置页面背景色<br>document.fgColor //设置前景色(文本颜色)<br>document.linkColor //未点击过的链接颜色<br>document.alinkColor //激活链接(焦点在此链接上)的颜色<br>document.vlinkColor //已点击过的链接颜色<br>document.URL //设置 URL 属性从而在同一窗口打开另一网页<br>document.fileCreatedDate //文件建立日期，只读属性<br>document.fileModifiedDate //文件修改日期，只读属性<br>document.fileSize //文件大小，只读属性<br>document.cookie //设置和读出 cookie<br>document.charset //设置字符集 简体中文:gb2312</p>
</blockquote>
<h2 id="常用对象方法"><a href="#常用对象方法" class="headerlink" title="常用对象方法"></a>常用对象方法</h2><blockquote>
<p>document.write() //动态向页面写入内容<br>document.createElement(Tag) //创建一个 html 标签对象<br>document.getElementById(ID) //获得指定 ID 值的对象<br>document.getElementsByName(Name) //获得指定 Name 值的对象<br>document.body.appendChild(oTag)</p>
</blockquote>
<h2 id="body-主体子对象"><a href="#body-主体子对象" class="headerlink" title="body-主体子对象"></a>body-主体子对象</h2><blockquote>
<p>document.body //指定文档主体的开始和结束等价于<body></body><br>document.body.bgColor //设置或获取对象后面的背景颜色<br>document.body.link //未点击过的链接颜色<br>document.body.alink //激活链接(焦点在此链接上)的颜色<br>document.body.vlink //已点击过的链接颜色<br>document.body.text //文本色<br>document.body.innerText //设置<body>…</body>之间的文本<br>document.body.innerHTML //设置<body>…</body>之间的 HTML 代码<br>document.body.topMargin //页面上边距<br>document.body.leftMargin //页面左边距<br>document.body.rightMargin //页面右边距<br>document.body.bottomMargin //页面下边距<br>document.body.background //背景图片<br>document.body.appendChild(oTag) //动态生成一个 HTML 对象</p>
</blockquote>
<h2 id="常用对象事件"><a href="#常用对象事件" class="headerlink" title="常用对象事件"></a>常用对象事件</h2><blockquote>
<p>document.body.οnclick=”func()” //鼠标指针单击对象是触发<br>document.body.οnmοuseοver=”func()” //鼠标指针移到对象时触发<br>document.body.οnmοuseοut=”func()” //鼠标指针移出对象时触发</p>
</blockquote>
<h2 id="location-位置子对象"><a href="#location-位置子对象" class="headerlink" title="location-位置子对象"></a>location-位置子对象</h2><blockquote>
<p>document.location.hash // #号后的部分<br>document.location.host // 域名+端口号<br>document.location.hostname // 域名<br>document.location.href // 完整 URL<br>document.location.pathname // 目录部分<br>document.location.port // 端口号<br>document.location.protocol // 网络协议(http:)<br>document.location.search // ?号后的部分</p>
</blockquote>
<h2 id="常用对象事件-1"><a href="#常用对象事件-1" class="headerlink" title="常用对象事件"></a>常用对象事件</h2><blockquote>
<p>documeny.location.reload() //刷新网页<br>document.location.reload(URL) //打开新的网页<br>document.location.assign(URL) //打开新的网页<br>document.location.replace(URL) //打开新的网页<br>========================================================================<br>selection-选区子对象<br>document.selection<br>========================================================================<br>images 集合(页面中的图象):<br>-—————————<br>a)通过集合引用<br>document.images //对应页面上的<img>标签<br>document.images.length //对应页面上<img>标签的个数<br>document.images[0] //第 1 个<img>标签<br>document.images[i] //第 i-1 个<img>标签<br>-—————————<br>b)通过 nane 属性直接引用<br><img name="oImage"><br>document.images.oImage //document.images.name 属性<br>-—————————<br>c)引用图片的 src 属性<br>document.images.oImage.src //document.images.name 属性.src</p>
</blockquote>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>倒计时</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E5%80%92%E8%AE%A1%E6%97%B6/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//实现5天的倒计时</span></span><br><span class="line"><span class="comment">//月份会自动加一，（year,month,day,hrs）(年，月，日，小时)</span></span><br><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2020</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">8</span>) <span class="comment">//2020-10-01 08:00:00</span></span><br><span class="line"><span class="comment">//系统时间会自动更新</span></span><br><span class="line"><span class="keyword">let</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="comment">//getTime()是时间对象自带的方法，获得的是毫秒数</span></span><br><span class="line"><span class="keyword">let</span> seconds = <span class="built_in">parseInt</span>((date.getTime() - today.getTime()) / <span class="number">1000</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-09-18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>times 指定日期的秒数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> <span class="title">countDown</span>(<span class="params">times</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//递归边界</span></span><br><span class="line">  <span class="keyword">if</span> (times &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="built_in">parseInt</span>(times / <span class="number">86400</span>)</span><br><span class="line">  <span class="keyword">let</span> h = <span class="built_in">parseInt</span>((times - d * <span class="number">86400</span>) / <span class="number">3600</span>)</span><br><span class="line">  h = (h + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> m = <span class="built_in">parseInt</span>((times - d * <span class="number">86400</span> - h * <span class="number">3600</span>) / <span class="number">60</span>)</span><br><span class="line">  m = (m + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> s = times - d * <span class="number">86400</span> - h * <span class="number">3600</span> - m * <span class="number">60</span></span><br><span class="line">  s = (s + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> str = d + <span class="string">&#x27;天&#x27;</span> + h + <span class="string">&#x27;:&#x27;</span> + m + <span class="string">&#x27;:&#x27;</span> + s</span><br><span class="line">  <span class="comment">//向id=app元素中，写入html内容</span></span><br><span class="line">  app.innerHTML = str</span><br><span class="line">  <span class="comment">//递归调用 ,1后执行一次</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    times--</span><br><span class="line">    countDown(times)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)(seconds)</span><br><span class="line"></span><br><span class="line"><span class="comment">//countDown(seconds)</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>上下左右下拉列表</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E4%B8%8A%E4%B8%8B%E5%B7%A6%E5%8F%B3%E4%B8%8B%E6%8B%89%E5%88%97%E8%A1%A8/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mine&quot;</span>&gt;</span>我的<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 遮罩层 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">320px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#app</span> <span class="selector-class">.mine</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#app</span> <span class="selector-class">.mask</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#app</span> <span class="selector-class">.mask</span> <span class="selector-class">.list</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#444343</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2.4rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#app</span> <span class="selector-class">.mask</span> <span class="selector-class">.cover</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.3</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> cover = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.cover&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> mine = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.mine&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cover.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  list.style.height = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">mine.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  cover.style.display = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">  list.style.height = <span class="string">&#x27;100vh&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>原生数组方法</title>
    <url>/taiaiac.gitee.io/2021/03/08/Javascript/%E5%8E%9F%E7%94%9F%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="19个JavaScript数组常用方法总结"><a href="#19个JavaScript数组常用方法总结" class="headerlink" title="19个JavaScript数组常用方法总结"></a>19个JavaScript数组常用方法总结</h2><p>数组基本操作可以归纳为 增、删、改、查，需要留意的是哪些方法会对原数组产生影响，哪些方法不会</p>
<p>下面对数组常用的操作方法做一个归纳</p>
<h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><p>下面前三种是对原数组产生影响的增添方法，第四种则不会对原数组产生影响</p>
<ul>
<li>push()</li>
<li>unshift()</li>
<li>splice()</li>
<li>concat()</li>
</ul>
<h4 id="push"><a href="#push" class="headerlink" title="push()"></a>push()</h4><p><code>push()</code>方法接收任意数量的参数，并将它们添加到数组末尾，返回数组的最新长度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = []; <span class="comment">// 创建一个数组</span></span><br><span class="line"><span class="keyword">let</span> count = colors.push(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>); <span class="comment">// 推入两项</span></span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h4 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h4><p>unshift()在数组开头添加任意多个值，然后返回新的数组长度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">// 创建一个数组</span></span><br><span class="line"><span class="keyword">let</span> count = colors.unshift(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>); <span class="comment">// 从数组开头推入两项</span></span><br><span class="line">alert(count); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h4 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h4><p>传入三个参数，分别是开始位置、0（要删除的元素数量）、插入的元素，返回空数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> removed = colors.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;orange&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(colors) <span class="comment">// red,yellow,orange,green,blue</span></span><br><span class="line"><span class="built_in">console</span>.log(removed) <span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<h4 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h4><p>首先会创建一个当前数组的副本，然后再把它的参数添加到副本末尾，最后返回这个新构建的数组，不会影响原始数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> colors2 = colors.concat(<span class="string">&quot;yellow&quot;</span>, [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;brown&quot;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(colors); <span class="comment">// [&quot;red&quot;, &quot;green&quot;,&quot;blue&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(colors2); <span class="comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><p>下面三种都会影响原数组，最后一项不影响原数组：</p>
<ul>
<li>pop()</li>
<li>shift()</li>
<li>splice()</li>
<li>slice()</li>
</ul>
<h4 id="pop"><a href="#pop" class="headerlink" title="pop()"></a>pop()</h4><p><code>pop()</code> 方法用于删除数组的最后一项，同时减少数组的<code>length</code> 值，返回被删除的项</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> item = colors.pop(); <span class="comment">// 取得最后一项</span></span><br><span class="line"><span class="built_in">console</span>.log(item) <span class="comment">// green</span></span><br><span class="line"><span class="built_in">console</span>.log(colors.length) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h4 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h4><p><code>shift()</code>方法用于删除数组的第一项，同时减少数组的<code>length</code> 值，返回被删除的项</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> item = colors.shift(); <span class="comment">// 取得第一项</span></span><br><span class="line"><span class="built_in">console</span>.log(item) <span class="comment">// red</span></span><br><span class="line"><span class="built_in">console</span>.log(colors.length) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h4 id="splice-1"><a href="#splice-1" class="headerlink" title="splice()"></a>splice()</h4><p>传入两个参数，分别是开始位置，删除元素的数量，返回包含删除元素的数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> removed = colors.splice(<span class="number">0</span>,<span class="number">1</span>); <span class="comment">// 删除第一项</span></span><br><span class="line"><span class="built_in">console</span>.log(colors); <span class="comment">// green,blue</span></span><br><span class="line"><span class="built_in">console</span>.log(removed); <span class="comment">// red，只有一个元素的数组</span></span><br></pre></td></tr></table></figure>

<h4 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h4><p>slice() 用于创建一个包含原有数组中一个或多个元素的新数组，不会影响原始数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;purple&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> colors2 = colors.slice(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> colors3 = colors.slice(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(colors)   <span class="comment">// red,green,blue,yellow,purple</span></span><br><span class="line">concole.log(colors2); <span class="comment">// green,blue,yellow,purple</span></span><br><span class="line">concole.log(colors3); <span class="comment">// green,blue,yellow</span></span><br></pre></td></tr></table></figure>

<h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><p>即修改原来数组的内容，常用<code>splice</code></p>
<h4 id="splice-2"><a href="#splice-2" class="headerlink" title="splice()"></a>splice()</h4><p>传入三个参数，分别是开始位置，要删除元素的数量，要插入的任意多个元素，返回删除元素的数组，对原数组产生影响</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> removed = colors.splice(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;purple&quot;</span>); <span class="comment">// 插入两个值，删除一个元素</span></span><br><span class="line"><span class="built_in">console</span>.log(colors); <span class="comment">// red,red,purple,blue</span></span><br><span class="line"><span class="built_in">console</span>.log(removed); <span class="comment">// green，只有一个元素的数组</span></span><br></pre></td></tr></table></figure>

<h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><p>即查找元素，返回元素坐标或者元素值</p>
<ul>
<li>indexOf()</li>
<li>includes()</li>
<li>find()</li>
</ul>
<h4 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h4><p>返回要查找的元素在数组中的位置，如果没找到则返回-1</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">numbers.indexOf(<span class="number">4</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h4 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h4><p>返回要查找的元素在数组中的位置，找到返回<code>true</code>，否则<code>false</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">numbers.includes(<span class="number">4</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h4><p>返回第一个匹配的元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;Matt&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">27</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;Nicholas&quot;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">29</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line">people.find(<span class="function">(<span class="params">element, index, array</span>) =&gt;</span> element.age &lt; <span class="number">28</span>) <span class="comment">// // &#123;name: &quot;Matt&quot;, age: 27&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="二、排序方法"><a href="#二、排序方法" class="headerlink" title="二、排序方法"></a>二、排序方法</h2><p>数组有两个方法可以用来对元素重新排序：</p>
<ul>
<li>reverse()</li>
<li>sort()</li>
</ul>
<h3 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h3><p>顾名思义，将数组元素方向排列</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">values.reverse();</span><br><span class="line">alert(values); <span class="comment">// 5,4,3,2,1</span></span><br></pre></td></tr></table></figure>

<h3 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h3><p>sort()方法接受一个比较函数，用于判断哪个值应该排在前面</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">value1, value2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value1 &lt; value2) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value1 &gt; value2) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> values = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line">values.sort(compare);</span><br><span class="line">alert(values); <span class="comment">// 0,1,5,10,15</span></span><br></pre></td></tr></table></figure>

<h2 id="三、转换方法"><a href="#三、转换方法" class="headerlink" title="三、转换方法"></a>三、转换方法</h2><p>常见的转换方法有：</p>
<h3 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h3><p>join() 方法接收一个参数，即字符串分隔符，返回包含所有项的字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line">alert(colors.join(<span class="string">&quot;,&quot;</span>)); <span class="comment">// red,green,blue</span></span><br><span class="line">alert(colors.join(<span class="string">&quot;||&quot;</span>)); <span class="comment">// red||green||blue</span></span><br></pre></td></tr></table></figure>

<h2 id="四、迭代方法"><a href="#四、迭代方法" class="headerlink" title="四、迭代方法"></a>四、迭代方法</h2><p>常用来迭代数组的方法（都不改变原数组）有如下：</p>
<ul>
<li>some()</li>
<li>every()</li>
<li>forEach()</li>
<li>filter()</li>
<li>map()</li>
</ul>
<h3 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h3><p>对数组每一项都运行传入的函数，如果有一项函数返回 true ，则这个方法返回 true</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> someResult = numbers.every(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(someResult) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h3><p>对数组每一项都运行传入的函数，如果对每一项函数都返回 true ，则这个方法返回 true</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> everyResult = numbers.every(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(everyResult) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h3><p>对数组每一项都运行传入的函数，没有返回值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">numbers.forEach(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 执行某些操作</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><p>对数组每一项都运行传入的函数，函数返回 <code>true</code> 的项会组成数组之后返回</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> filterResult = numbers.filter(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(filterResult); <span class="comment">// 3,4,5,4,3</span></span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p>对数组每一项都运行传入的函数，返回由每次函数调用的结果构成的数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> mapResult = numbers.map(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mapResult) <span class="comment">// 2,4,6,8,10,8,6,4,2</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>回到顶部</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E5%9B%9E%E5%88%B0%E9%A1%B6%E9%83%A8/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;toTop&quot;</span>&gt;</span>goTop<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5000px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#toTop</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#toTop</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#787878</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> tops</span><br><span class="line">onscroll = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  tops = <span class="built_in">parseInt</span>(<span class="built_in">document</span>.documentElement.scrollTop)</span><br><span class="line">  <span class="keyword">if</span> (tops &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">    toTop.style.display = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (tops &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">    toTop.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">toTop.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> id = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    tops -= <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> (tops &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      tops = <span class="number">0</span></span><br><span class="line">      <span class="built_in">clearInterval</span>(id)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.scrollTop = tops</span><br><span class="line">  &#125;, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>定时器</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E5%AE%9A%E6%97%B6%E5%99%A8/</url>
    <content><![CDATA[<h2 id="定时器有以下两个方法："><a href="#定时器有以下两个方法：" class="headerlink" title="定时器有以下两个方法："></a>定时器有以下两个方法：</h2><ul>
<li><h4 id="setInterval-：按照指定的周期（以毫秒计）来调用函数或计算表达式。方法会不停地调用函数，直到-clearInterval-被调用或窗口被关闭。"><a href="#setInterval-：按照指定的周期（以毫秒计）来调用函数或计算表达式。方法会不停地调用函数，直到-clearInterval-被调用或窗口被关闭。" class="headerlink" title="setInterval() ：按照指定的周期（以毫秒计）来调用函数或计算表达式。方法会不停地调用函数，直到 clearInterval() 被调用或窗口被关闭。"></a><code>setInterval()</code> ：按照指定的周期（以毫秒计）来调用函数或计算表达式。方法会不停地调用函数，直到 <code>clearInterval()</code> 被调用或窗口被关闭。</h4></li>
<li><h4 id="setTimeout-：在指定的毫秒数后调用函数或计算表达式。"><a href="#setTimeout-：在指定的毫秒数后调用函数或计算表达式。" class="headerlink" title="setTimeout() ：在指定的毫秒数后调用函数或计算表达式。"></a><code>setTimeout()</code> ：在指定的毫秒数后调用函数或计算表达式。</h4><hr>
</li>
<li><h2 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval()"></a><code>setInterval()</code></h2><ul>
<li><pre><code class="javascript">setInterval(code, time)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    | **参数** |                          描述                          |</span><br><span class="line">    | :------: | :----------------------------------------------------: |</span><br><span class="line">    |   code   |          必需。要调用的函数或要执行的代码串。          |</span><br><span class="line">    |  `time`  | 必须。周期性执行或调用 code 之间的时间间隔，以毫秒计。 |</span><br><span class="line"></span><br><span class="line">- ## `setTimeout()`</span><br><span class="line"></span><br><span class="line">  - ```javascript</span><br><span class="line">    setTimeout(code, time)</span><br></pre></td></tr></table></figure>

| **参数** |                       描述                       |
| :------: | :----------------------------------------------: |
|   code   | 必需。要调用的函数后要执行的 JavaScript 代码串。 |
|  `time`  |        必需。在执行代码前需等待的毫秒数。        |
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="停止时钟"><a href="#停止时钟" class="headerlink" title="停止时钟"></a>停止时钟</h2><ul>
<li><h3 id="clearInterval"><a href="#clearInterval" class="headerlink" title="clearInterval()"></a><code>clearInterval()</code></h3><ul>
<li><pre><code>clearInterval(id)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">//找到页面元素</span><br><span class="line">let clock = document.querySelector(&#x27;.clock&#x27;)</span><br><span class="line">let stop = document.querySelector(&#x27;.stop&#x27;)</span><br><span class="line">let start = document.querySelector(&#x27;.start&#x27;)</span><br><span class="line"></span><br><span class="line">//定时器的编号</span><br><span class="line">let id</span><br><span class="line"></span><br><span class="line">//启动时钟</span><br><span class="line">function startTime() &#123;</span><br><span class="line">  //如果上一个定时任务存在，就清空这个定时器</span><br><span class="line">  if (id) &#123;</span><br><span class="line">    clearInterval(id)</span><br><span class="line">  &#125;</span><br><span class="line">  //再创建一个新的定时任务</span><br><span class="line">  id = setInterval(function () &#123;</span><br><span class="line">    clock.innerHTML = dateFormat()</span><br><span class="line">  &#125;, 1000)</span><br><span class="line"></span><br><span class="line">  //定时器的编号</span><br><span class="line">  console.log(id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//停止时钟</span><br><span class="line">function stopTime() &#123;</span><br><span class="line">  clearInterval(id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start.onclick = function () &#123;</span><br><span class="line">  startTime()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop.onclick = function () &#123;</span><br><span class="line">  stopTime()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//日期格式化函数</span><br><span class="line">function dateFormat() &#123;</span><br><span class="line">  let now = new Date()</span><br><span class="line">  let yyyy = now.getFullYear()</span><br><span class="line">  let MM = (now.getMonth() + 1 + &#x27;&#x27;).padStart(2, &#x27;0&#x27;)</span><br><span class="line">  let dd = (now.getDate() + &#x27;&#x27;).padStart(2, &#x27;0&#x27;)</span><br><span class="line">  let hh = (now.getHours() + &#x27;&#x27;).padStart(2, &#x27;0&#x27;)</span><br><span class="line">  let mm = (now.getMinutes() + &#x27;&#x27;).padStart(2, &#x27;0&#x27;)</span><br><span class="line">  let ss = (now.getSeconds() + &#x27;&#x27;).padStart(2, &#x27;0&#x27;)</span><br><span class="line">  let st = `$&#123;yyyy&#125;-$&#123;MM&#125;-$&#123;dd&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125;`</span><br><span class="line">  return st</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>日期格式化</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//日期格式化函数</span></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">dateFormat</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> yyyy = now.getFullYear()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> MM = (now.getMonth() + <span class="number">1</span> + <span class="string">&quot;&quot;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> dd = (now.getDate() + <span class="string">&quot;&quot;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> hh = (now.getHours() + <span class="string">&quot;&quot;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> mm = (now.getMinutes() + <span class="string">&quot;&quot;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> ss = (now.getSeconds() + <span class="string">&quot;&quot;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> st = <span class="string">`<span class="subst">$&#123;yyyy&#125;</span>-<span class="subst">$&#123;MM&#125;</span>-<span class="subst">$&#123;dd&#125;</span> <span class="subst">$&#123;hh&#125;</span>:<span class="subst">$&#123;mm&#125;</span>:<span class="subst">$&#123;ss&#125;</span>`</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>点击特效</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">/* 鼠标点击文字特效 */</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> f_idx = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> c_idx = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    jQuery(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;body&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> font = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&quot;斗地主&quot;</span>, <span class="string">&quot;吃火锅&quot;</span>, <span class="string">&quot;打豆豆&quot;</span>, <span class="string">&quot;饮酒&quot;</span>, <span class="string">&quot;吃肉&quot;</span>, <span class="string">&quot;狼人杀&quot;</span>, <span class="string">&quot;耍流氓&quot;</span>, <span class="string">&quot;耍无赖&quot;</span>, <span class="string">&quot;身体健康&quot;</span>, <span class="string">&quot;阖家幸福&quot;</span>, <span class="string">&quot;生猴子&quot;</span>, <span class="string">&quot;蒸羊羔儿&quot;</span>, <span class="string">&quot;蒸熊掌&quot;</span>, <span class="string">&quot;蒸鹿尾儿&quot;</span>, <span class="string">&quot;烧花鸭&quot;</span>, <span class="string">&quot;烧雏鸡&quot;</span>, <span class="string">&quot;烧子鹅&quot;</span>, <span class="string">&quot;炉猪&quot;</span>, <span class="string">&quot;炉鸭&quot;</span>, <span class="string">&quot;酱鸡&quot;</span>, <span class="string">&quot;腊肉&quot;</span>, <span class="string">&quot;松花&quot;</span>, <span class="string">&quot;小肚儿&quot;</span>, <span class="string">&quot;晾肉&quot;</span>, <span class="string">&quot;香肠儿&quot;</span>, <span class="string">&quot;什锦苏盘儿&quot;</span>, <span class="string">&quot;熏鸡白肚儿&quot;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> color = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&#x27;#ff0000&#x27;</span>, <span class="string">&#x27;#eb4310&#x27;</span>, <span class="string">&#x27;#f6941d&#x27;</span>, <span class="string">&#x27;#fbb417&#x27;</span>, <span class="string">&#x27;#ffff00&#x27;</span>, <span class="string">&#x27;#cdd541&#x27;</span>, <span class="string">&#x27;#99cc33&#x27;</span>, <span class="string">&#x27;#3f9337&#x27;</span>, <span class="string">&#x27;#219167&#x27;</span>, <span class="string">&#x27;#239676&#x27;</span>, <span class="string">&#x27;#24998d&#x27;</span>, <span class="string">&#x27;#1f9baa&#x27;</span>, <span class="string">&#x27;#0080ff&#x27;</span>, <span class="string">&#x27;#3366cc&#x27;</span>, <span class="string">&#x27;#333399&#x27;</span>, <span class="string">&#x27;#003366&#x27;</span>, <span class="string">&#x27;#800080&#x27;</span>, <span class="string">&#x27;#a1488e&#x27;</span>, <span class="string">&#x27;#c71585&#x27;</span>, <span class="string">&#x27;#bd2158&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> $i = $(<span class="string">&quot;&lt;span /&gt;&quot;</span>).text(font[f_idx]);</span></span><br><span class="line"><span class="javascript">            f_idx = (f_idx + <span class="number">1</span>) % font.length;</span></span><br><span class="line"><span class="javascript">            c_idx = (c_idx + <span class="number">1</span>) % color.length;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> x = e.pageX,</span></span><br><span class="line"><span class="javascript">                y = e.pageY;</span></span><br><span class="line"><span class="javascript">            $i.css(&#123;</span></span><br><span class="line"><span class="javascript">                <span class="string">&quot;z-index&quot;</span>: <span class="number">99999999999999999999999999999999999999999999999999999999999999999999999999</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">&quot;top&quot;</span>: y - <span class="number">20</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">&quot;left&quot;</span>: x,</span></span><br><span class="line"><span class="javascript">                <span class="string">&quot;position&quot;</span>: <span class="string">&quot;absolute&quot;</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">&quot;font-weight&quot;</span>: <span class="string">&quot;bold&quot;</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">&quot;color&quot;</span>: color[c_idx]</span></span><br><span class="line"><span class="javascript">            &#125;);</span></span><br><span class="line"><span class="javascript">            $(<span class="string">&quot;body&quot;</span>).append($i);</span></span><br><span class="line"><span class="javascript">            $i.animate(&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="string">&quot;top&quot;</span>: y - <span class="number">180</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="string">&quot;opacity&quot;</span>: <span class="number">0</span></span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">                <span class="number">1500</span>,</span></span><br><span class="line"><span class="javascript">                <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    $i.remove();</span></span><br><span class="line"><span class="javascript">                &#125;);</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>模仿百度分页</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E6%A8%A1%E4%BB%BF%E7%99%BE%E5%BA%A6%E5%88%86%E9%A1%B5/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>模仿百度分页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../img/logo.png&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.5.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      * &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#4e6ef2</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">36px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">36px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">line-height</span>: <span class="number">36px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#4e6ef2</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-class">.prev-page</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-class">.next-page</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#4e6ef2</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> currentPage = <span class="number">1</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> total = <span class="number">20</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">appendList</span>(<span class="params">pageNum</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//1、先删除所有的page-item</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> pageItem = $(<span class="string">&#x27;.page-item&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (pageItem) &#123;</span></span><br><span class="line"><span class="javascript">          pageItem.remove()</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//2、判断prev-page</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> prevPage = $(<span class="string">&#x27;.prev-page&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        pageNum &gt; <span class="number">1</span> ? prevPage.show() : prevPage.hide()</span></span><br><span class="line"><span class="javascript">        <span class="comment">//3、确定当前页码的范围</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> start = pageNum &lt;= <span class="number">6</span> ? <span class="number">1</span> : pageNum - <span class="number">5</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> end = start + <span class="number">9</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//如果超过总条数时，等于总条数</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (end &gt;= total) &#123;</span></span><br><span class="line"><span class="javascript">          end = total</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//使用循环拼接元素</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt;= end; i++) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> a = $(<span class="string">`&lt;a class=&quot;page-item&quot;&gt;<span class="subst">$&#123;i&#125;</span>&lt;/a&gt;`</span>)</span></span><br><span class="line"><span class="javascript">          <span class="comment">//给点击的元素添加</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (pageNum == i) &#123;</span></span><br><span class="line"><span class="javascript">            a = $(<span class="string">`&lt;a class=&quot;page-item active&quot;&gt;<span class="subst">$&#123;i&#125;</span>&lt;/a&gt;`</span>)</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">          a.insertBefore($(<span class="string">&#x27;.next-page&#x27;</span>))</span></span><br><span class="line"><span class="javascript">          <span class="comment">//给a元素绑定事件</span></span></span><br><span class="line"><span class="javascript">          a.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> index = <span class="built_in">parseInt</span>(a.html())</span></span><br><span class="line"><span class="javascript">            appendList(index)</span></span><br><span class="line"><span class="javascript">            currentPage = index</span></span><br><span class="line"><span class="javascript">          &#125;)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//页面首次加载第一页</span></span></span><br><span class="line"><span class="javascript">        appendList(<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">        <span class="comment">//点击下一页的操作</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.next-page&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          currentPage++</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (currentPage &gt;= total) &#123;</span></span><br><span class="line"><span class="javascript">            currentPage = total</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">          appendList(currentPage)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        <span class="comment">//点击上一页的操作</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.prev-page&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          currentPage--</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (currentPage &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">            currentPage = <span class="number">1</span></span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">          appendList(currentPage)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-inner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;prev-page&quot;</span>&gt;</span><span class="symbol">&amp;lt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;next-page&quot;</span>&gt;</span>下一页<span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>正则</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E6%AD%A3%E5%88%99/</url>
    <content><![CDATA[<h5 id="一-限定符"><a href="#一-限定符" class="headerlink" title="(一)限定符"></a>(一)限定符</h5><p>1、<code>?</code>:它前面的字符需要出现 0 次或 1 次</p>
<blockquote>
<p>例如：<code>used?</code>可以匹配到<code>use</code>和<code>used</code></p>
</blockquote>
<p>2、<code>*</code>:它会匹配 0 个或多个字符</p>
<blockquote>
<p>例如：<code>ab*c</code>可以匹配到<code>ac</code>,<code>abc</code>,<code>abbbbbbc</code></p>
</blockquote>
<p>3、<code>+</code>:它会匹配一次及以上的字符</p>
<blockquote>
<p>例如：<code>ab+c</code>可以匹配<code>abc</code>,<code>abbbc</code>,而不会匹配<code>ac</code></p>
</blockquote>
<p>4、<code>&#123;&#125;</code>:可以限定匹配的数量</p>
<blockquote>
<p>例如：<code>ab&#123;6&#125;c</code>,则匹配到<code>abbbbbbc</code>,而要限定<code>b</code>的数量在 2 到 6 之间，则是<code>ab&#123;2,6&#125;c</code>，如果只是两次以上，则省略括号里的 6，写成<code>ab&#123;2,&#125;c</code></p>
</blockquote>
<h5 id="二-”或”运算符"><a href="#二-”或”运算符" class="headerlink" title="(二)”或”运算符"></a>(二)”或”运算符</h5><blockquote>
<p>例如：<code>a (cat|dog)</code>匹配的是<code>a cat</code>和<code>a dog</code></p>
</blockquote>
<h5 id="三-字符类"><a href="#三-字符类" class="headerlink" title="(三)字符类"></a>(三)字符类</h5><p><code>[]</code>:表示里面的内容只能取自于它们</p>
<blockquote>
<p>例如：<code>[a-z]</code>表示所有小写的英文字母，<code>[abc]</code>能匹配到<code>abc</code>,<code>aabbcc</code>,<code>abcc</code>,<code>[a-zA-Z]</code>表示所有的英文字母，如果在<code>[]</code>前加上<code>^</code>,表示<code>[]</code>之外的字符</p>
</blockquote>
<h5 id="四-元字符"><a href="#四-元字符" class="headerlink" title="(四)元字符"></a>(四)元字符</h5><p><code>\d</code>:数字字符，等同于<code>[0-9]</code><br><code>\w</code>:单词字符<br><code>\s</code>:空白符，包含 Tab 和换行符<br><code>\D</code>:非数字字符<br><code>\W</code>:非单词字符<br><code>\S</code>:非空白符<br><code>.</code>:代表任意字符，不包含换行符<br><code>^</code>:匹配行首</p>
<blockquote>
<p>例如：<code>^a</code>匹配<code>abv</code>,<code>acccn</code></p>
</blockquote>
<p><code>$</code>:匹配行尾</p>
<blockquote>
<p>例如：<code>a$</code>匹配<code>tea</code>,<code>cba</code></p>
</blockquote>
<h5 id="五-贪婪与懒惰匹配"><a href="#五-贪婪与懒惰匹配" class="headerlink" title="(五)贪婪与懒惰匹配"></a>(五)贪婪与懒惰匹配</h5><blockquote>
<p><strong>贪婪匹配：</strong>正则表达式通常的行为是匹配尽可能多的字符，比如这个表达式：<code>a.*b</code>，它将会匹配最长的以<code>a</code>开始，以<code>b</code>结束的字符串，如果用它来搜索<code>aabab</code>的话，它会匹配整个字符串<code>aabab</code></p>
</blockquote>
<blockquote>
<p><strong>懒惰匹配：</strong>就是匹配尽可能少的字符，在能使整个匹配成功的前提下使用最少的重复，只要在它后面加上一个问号?即可，例如<code>a.*?b</code>匹配最短的，以<code>a</code>开始，以<code>b</code>结束的字符串，如果把它应用于<code>aabab</code>的话，它会匹配<code>aab</code>和<code>ab</code>，为什么第一个匹配是<code>aab</code>（第一到第三个字符）而不是<code>ab</code>（第二到第三个字符）？简单地说，因为正则表达式有一条比懒惰／贪婪规则优先级更高的规则，就是：最先开始的匹配拥有最高的优先权</p>
</blockquote>
<h5 id="六-常用的正则表达式大全"><a href="#六-常用的正则表达式大全" class="headerlink" title="(六)常用的正则表达式大全"></a>(六)常用的正则表达式大全</h5><ol>
<li>数字：<code>^[0-9]*$</code></li>
<li>n 位的数字：<code>^\d&#123;n&#125;$</code></li>
<li>至少 n 位的数字：<code>^\d&#123;n,&#125;$</code></li>
<li>m-n 位的数字：<code>^\d&#123;m,n&#125;$</code></li>
<li>零和非零开头的数字：<code>^(0|[1-9][0-9]*)$</code></li>
<li>非零开头的最多带两位小数的数字：<code>^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</code></li>
<li>带 1-2 位小数的正数或负数：<code>^(\-)?\d+(\.\d&#123;1,2&#125;)?$</code></li>
<li>正数、负数、和小数：<code>^(\-|\+)?\d+(\.\d+)?$</code></li>
<li>有两位小数的正实数：<code>^[0-9]+(.[0-9]&#123;2&#125;)?$</code></li>
<li>有 1~3 位小数的正实数：<code>^[0-9]+(.[0-9]&#123;1,3&#125;)?$</code></li>
<li>非零的正整数：<code>^[1-9]\d*$</code> 或 <code>^([1-9][0-9]*)&#123;1,3&#125;$</code> 或 <code>^\+?[1-9][0-9]*$</code></li>
<li>非零的负整数：<code>^\-[1-9][]0-9&quot;*$</code> 或 <code>^-[1-9]\d*$</code></li>
<li>非负整数：<code>^\d+$</code> 或 <code>^[1-9]\d*|0$</code></li>
<li>非正整数：<code>^-[1-9]\d*|0$</code> 或 <code>^((-\d+)|(0+))$</code></li>
<li>非负浮点数：<code>^\d+(\.\d+)?$</code> 或 <code>^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</code></li>
<li>非正浮点数：<code>^((-\d+(\.\d+)?)|(0+(\.0+)?))$</code> 或 <code>^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</code></li>
<li>正浮点数：<code>^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$</code> 或 <code>^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</code></li>
<li>负浮点数：<code>^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$</code> 或 <code>^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</code></li>
<li>浮点数：<code>^(-?\d+)(\.\d+)?$</code> 或 <code>^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</code></li>
</ol>
<hr>
<ol>
<li>汉字：<code>^[\u4e00-\u9fa5]&#123;0,&#125;$</code></li>
<li>英文和数字：<code>^[A-Za-z0-9]+$</code> 或 <code>^[A-Za-z0-9]&#123;4,40&#125;$</code></li>
<li>长度为 3-20 的所有字符：<code>^.&#123;3,20&#125;$</code></li>
<li>由 26 个英文字母组成的字符串：<code>^[A-Za-z]+$</code></li>
<li>由 26 个大写英文字母组成的字符串：<code>^[A-Z]+$</code></li>
<li>由 26 个小写英文字母组成的字符串：<code>^[a-z]+$</code></li>
<li>由数字和 26 个英文字母组成的字符串：<code>^[A-Za-z0-9]+$</code></li>
<li>由数字、26 个英文字母或者下划线组成的字符串：<code>^\w+$</code> 或 <code>^\w&#123;3,20&#125;$</code></li>
<li>中文、英文、数字包括下划线：<code>^[\u4E00-\u9FA5A-Za-z0-9_]+$</code></li>
<li>中文、英文、数字但不包括下划线等符号：<code>^[\u4E00-\u9FA5A-Za-z0-9]+$</code> 或<code>^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$</code></li>
</ol>
<hr>
<ol>
<li>Email 地址：<code>^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</code></li>
<li>域名：<code>[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</code></li>
<li>InternetURL：<code>[a-zA-z]+://[^\s]*</code> 或 <code>^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</code></li>
<li>手机号码：<code>^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</code></li>
<li>电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：<code>^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$</code></li>
<li>国内电话号码(0511-4405222、021-87888822)：<code>\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</code></li>
<li>身份证号(15 位、18 位数字)：<code>^\d&#123;15&#125;|\d&#123;18&#125;$</code></li>
<li>短身份证号码(数字、字母 x 结尾)：<code>^([0-9])&#123;7,18&#125;(x|X)?$</code> 或 <code>^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</code></li>
<li>帐号是否合法(字母开头，允许 5-16 字节，允许字母数字下划线)：<code>^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</code></li>
<li>密码(以字母开头，长度在 6~18 之间，只能包含字母、数字和下划线)：<code>^[a-zA-Z]\w&#123;5,17&#125;$</code></li>
<li>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：<code>^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$</code></li>
<li>日期格式：<code>^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</code></li>
<li>一年的 12 个月(01 ～ 09 和 1 ～ 12)：<code>^(0?[1-9]|1[0-2])$</code></li>
<li>一个月的 31 天(01 ～ 09 和 1 ～ 31)：<code>^((0?[1-9])|((1|2)[0-9])|30|31)$</code></li>
<li>xml 文件：<code>^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</code></li>
<li>中文字符的正则表达式：<code>[\u4e00-\u9fa5]</code></li>
<li>双字节字符：<code>[^\x00-\xff]</code> (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计 2，ASCII 字符计 1))</li>
<li>空白行的正则表达式：<code>\n\s*\r</code> (可以用来删除空白行)</li>
<li>首尾空白字符的正则表达式：<code>^\s*|\s*$</code>或<code>(^\s*)|(\s*$)</code> (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</li>
<li>腾讯 QQ 号：<code>[1-9][0-9]&#123;4,&#125;</code> (腾讯 QQ 号从 10000 开始)</li>
<li>中国邮政编码：<code>[1-9]\d&#123;5&#125;(?!\d)</code> (中国邮政编码为 6 位数字)</li>
<li>IP 地址：<code>\d+\.\d+\.\d+\.\d+</code> (提取 IP 地址时有用)</li>
<li>IP 地址：<code>((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))</code></li>
<li>IP-v4 地址：<code>\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.)&#123;3&#125;(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b</code> (提取 IP 地址时有用)</li>
<li>子网掩码：<code>((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))</code></li>
<li>校验日期:<code>^(?:(?!0000)[0-9]&#123;4&#125;-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]&#123;2&#125;(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$</code>(“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。)</li>
<li>抽取注释：<code>&lt;!--(.*?)--&gt;</code></li>
</ol>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>百叶窗</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E7%99%BE%E5%8F%B6%E7%AA%97/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>百叶窗手风琴<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-1.12.4.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      * &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">1202px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#box</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#box</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="css">        <span class="comment">/* border: 1px solid red; */</span></span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">        <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#box</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">      <span class="comment">/* img &#123;</span></span></span><br><span class="line"><span class="comment"><span class="css">      width: 600px;</span></span></span><br><span class="line"><span class="comment"><span class="css">      height: 500px;</span></span></span><br><span class="line"><span class="comment"><span class="css">    &#125; */</span></span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> num = <span class="number">0</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> list = $(<span class="string">&#x27;#box li&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="comment">//设置每个li背景图片</span></span></span><br><span class="line"><span class="javascript">        list.each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          num = index + <span class="number">1</span></span></span><br><span class="line"><span class="javascript">          $(item).css(<span class="string">&#x27;background-image&#x27;</span>, <span class="string">`url(../img/p<span class="subst">$&#123;num&#125;</span>.jpg)`</span>)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">`../img/p<span class="subst">$&#123;num&#125;</span>.jpg`</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        <span class="comment">//li鼠标移入的效果</span></span></span><br><span class="line"><span class="javascript">        list.mouseenter(</span></span><br><span class="line"><span class="javascript">          <span class="comment">//鼠标移入的效果</span></span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//让当前的hover元素先停止动画，再执行一个动画</span></span></span><br><span class="line"><span class="javascript">            $(<span class="built_in">this</span>)</span></span><br><span class="line"><span class="javascript">              .stop()</span></span><br><span class="line"><span class="javascript">              .animate(</span></span><br><span class="line"><span class="javascript">                &#123;</span></span><br><span class="line"><span class="javascript">                  <span class="attr">width</span>: <span class="number">400</span>,</span></span><br><span class="line"><span class="javascript">                  <span class="attr">opacity</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">                <span class="number">600</span></span></span><br><span class="line"><span class="javascript">              )</span></span><br><span class="line"><span class="javascript">              .siblings()</span></span><br><span class="line"><span class="javascript">              .stop()</span></span><br><span class="line"><span class="javascript">              .animate(</span></span><br><span class="line"><span class="javascript">                &#123;</span></span><br><span class="line"><span class="javascript">                  <span class="comment">//li的其它兄弟元素的样式，注意避免溢出，所以不设置160，设置150</span></span></span><br><span class="line"><span class="javascript">                  <span class="comment">// &quot;width&quot;: 150,</span></span></span><br><span class="line"><span class="javascript">                  <span class="comment">// 自己设置的宽度</span></span></span><br><span class="line"><span class="javascript">                  <span class="attr">width</span>: <span class="number">160</span>,</span></span><br><span class="line"><span class="javascript">                  <span class="attr">opacity</span>: <span class="number">0.3</span>,</span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">                <span class="number">600</span></span></span><br><span class="line"><span class="javascript">              )</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#box&#x27;</span>).mouseleave(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          list.stop().animate(</span></span><br><span class="line"><span class="javascript">            &#123;</span></span><br><span class="line"><span class="javascript">              <span class="attr">width</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="javascript">              <span class="attr">opacity</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="number">600</span></span></span><br><span class="line"><span class="javascript">          )</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span>成都<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span>理想<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span>南方姑娘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span>少年锦时<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span>我们的时光<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span>&gt;</span>鼓楼<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>节点选择器</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9%E5%99%A8/</url>
    <content><![CDATA[<h2 id="5-种获得元素的方式"><a href="#5-种获得元素的方式" class="headerlink" title="5 种获得元素的方式"></a>5 种获得元素的方式</h2><ul>
<li><h4 id="1、通过-id-获得的元素，可以直接使用，不要获得元素"><a href="#1、通过-id-获得的元素，可以直接使用，不要获得元素" class="headerlink" title="1、通过 id 获得的元素，可以直接使用，不要获得元素"></a>1、通过 id 获得的元素，可以直接使用，不要获得元素</h4><ul>
<li><pre><code class="javascript">let id = document.getElementById(&#39;id&#39;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- #### 2、通过类名获得元素集合 `HTMLCollection`不是数组，不能用`forEach`</span><br><span class="line"></span><br><span class="line">  - ```javascript</span><br><span class="line">    let class = document.getElementsByClassName(&#x27;class&#x27;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><h4 id="3、通过标签名获得元素集合-HTMLCollection不是数组，不能用forEach"><a href="#3、通过标签名获得元素集合-HTMLCollection不是数组，不能用forEach" class="headerlink" title="3、通过标签名获得元素集合 HTMLCollection不是数组，不能用forEach"></a>3、通过标签名获得元素集合 <code>HTMLCollection</code>不是数组，不能用<code>forEach</code></h4><ul>
<li><pre><code class="javascript">let div = document.getElementsByTagName(&#39;div&#39;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- #### 4、使用`css`的选择器,只找第一个元素</span><br><span class="line"></span><br><span class="line">  - ```javascript</span><br><span class="line">    let css = document.querySelector(&#x27;.css&#x27;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><h4 id="5、使用css的选择器-找全部-NodeList类型，不是数组，不能用forEach"><a href="#5、使用css的选择器-找全部-NodeList类型，不是数组，不能用forEach" class="headerlink" title="5、使用css的选择器,找全部,NodeList类型，不是数组，不能用forEach"></a>5、使用<code>css</code>的选择器,找全部,<code>NodeList</code>类型，不是数组，不能用<code>forEach</code></h4><ul>
<li><pre><code class="javascript">let item = document.querySelectorAll(&#39;.item&#39;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 节点选择器</span><br><span class="line"></span><br><span class="line">- ### 1、子元素</span><br><span class="line"></span><br><span class="line">  - #### 所有子元素`children`</span><br><span class="line"></span><br><span class="line">    - ```javascript</span><br><span class="line">      let children = ul.children</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><h4 id="第一个firstElementChild"><a href="#第一个firstElementChild" class="headerlink" title="第一个firstElementChild"></a>第一个<code>firstElementChild</code></h4><ul>
<li><pre><code class="javascript">let first = ul.firstElementChild
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- #### 最后一个`lastElementChild`</span><br><span class="line"></span><br><span class="line">  - ```javascript</span><br><span class="line">    let last = ul.lastElementChild</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><h3 id="2、兄弟元素"><a href="#2、兄弟元素" class="headerlink" title="2、兄弟元素"></a>2、兄弟元素</h3><ul>
<li><h4 id="上一个previousElementSibling"><a href="#上一个previousElementSibling" class="headerlink" title="上一个previousElementSibling"></a>上一个<code>previousElementSibling</code></h4><ul>
<li><pre><code class="javascript">let prev = ul.previousElementSibling
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- #### 下一个`nextElementSibling`</span><br><span class="line"></span><br><span class="line">  - ```javascript</span><br><span class="line">    let next = ul.nextElementSibling</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><h3 id="3、父级元素"><a href="#3、父级元素" class="headerlink" title="3、父级元素"></a>3、父级元素</h3><ul>
<li><h3 id="父级parentElement"><a href="#父级parentElement" class="headerlink" title="父级parentElement"></a>父级<code>parentElement</code></h3><ul>
<li><pre><code class="javascript">let parent = ul.parentElement
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>获取视口宽高</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E8%8E%B7%E5%8F%96%E8%A7%86%E5%8F%A3%E5%AE%BD%E9%AB%98/</url>
    <content><![CDATA[<h2 id="window-对象和-document-对象"><a href="#window-对象和-document-对象" class="headerlink" title="window 对象和 document 对象"></a><strong>window 对象和 document 对象</strong></h2><ul>
<li>window 对象表示浏览器打开的窗口，window 可省略，常见的 window 属性有 innerWidth，parseInt，parseFloat</li>
<li>document 对象属于 window 对象，表示一个 DOM 树</li>
</ul>
<h2 id="视口宽高"><a href="#视口宽高" class="headerlink" title="视口宽高"></a><strong>视口宽高</strong></h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// jquery获取视口宽高，不包括工具栏和滚动条</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="built_in">window</span>).width()) <span class="comment">// 939</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="built_in">window</span>).height()) <span class="comment">// 734</span></span><br><span class="line"><span class="comment">// 原生获取视口宽高，包括横纵向滚动条的宽高度，ie8</span></span><br><span class="line"><span class="built_in">console</span>.log(innerWidth) <span class="comment">// 939</span></span><br><span class="line"><span class="built_in">console</span>.log(innerHeight) <span class="comment">// 734</span></span><br><span class="line"><span class="comment">// 不包括工具栏和滚动条</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.documentElement.clientWidth) <span class="comment">// 939</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.documentElement.clientHeight) <span class="comment">// 734</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.documentElement.offsetWidth) <span class="comment">// 939</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.documentElement.offsetHeight) <span class="comment">// 158</span></span><br><span class="line"><span class="comment">// 工具栏和滚动条的宽高</span></span><br><span class="line"><span class="built_in">console</span>.log(outerWidth) <span class="comment">// 1536</span></span><br><span class="line"><span class="built_in">console</span>.log(outerHeight) <span class="comment">// 824</span></span><br><span class="line"><span class="comment">// 默认获取body内容的宽高</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.style.width) <span class="comment">// 没设置，返回空</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.style.height) <span class="comment">// 空</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.clientWidth) <span class="comment">// 923</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.clientHeight) <span class="comment">// 142</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.offsetWidth) <span class="comment">// 923</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.offsetHeight) <span class="comment">// 142</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> content = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(content.style.width) <span class="comment">// 120px（样式width）</span></span><br><span class="line"><span class="built_in">console</span>.log(content.clientWidth) <span class="comment">// 140（样式width+padding）</span></span><br><span class="line"><span class="built_in">console</span>.log(content.offsetWidth) <span class="comment">// 142（样式width+padding+border）</span></span><br></pre></td></tr></table></figure>

<p><strong>如果没设置某个元素的宽高，那么用 style.width 获取时返回的是空，而 clientWidth 和 offsetWidth 依旧有值</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">offsetWidth = width + padding + border</span><br></pre></td></tr></table></figure>

<h1 id="js-获取元素相对窗口位置"><a href="#js-获取元素相对窗口位置" class="headerlink" title="js 获取元素相对窗口位置"></a><a href="https://www.cnblogs.com/jidi/p/get_position.html">js 获取元素相对窗口位置</a></h1><p><strong>JS 获取元素的 offsetTop,offsetLeft 等属性</strong><br>obj.clientWidth //获取元素的宽度（width+padding）<br>obj.clientHeight //元素的高度<br>obj.offsetLeft //元素相对于父元素的 left<br>obj.offsetTop //元素相对于父元素的 top<br>obj.offsetWidth //元素的宽度(width+padding+border)<br>obj.offsetHeight //元素的高度</p>
<p>//获取元素的纵坐标（相对于窗口）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="function"><span class="keyword">function</span> <span class="title">getTop</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"><span class="number">2</span>   <span class="keyword">var</span> offset=e.offsetTop;</span><br><span class="line"><span class="number">3</span>   <span class="keyword">if</span>(e.offsetParent!=<span class="literal">null</span>) offset+=getTop(e.offsetParent);</span><br><span class="line"><span class="number">4</span>   <span class="keyword">return</span> offset;</span><br><span class="line"><span class="number">5</span> &#125;</span><br></pre></td></tr></table></figure>

<p>//获取元素的横坐标（相对于窗口）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="function"><span class="keyword">function</span> <span class="title">getLeft</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"><span class="number">2</span>   <span class="keyword">var</span> offset=e.offsetLeft;</span><br><span class="line"><span class="number">3</span>   <span class="keyword">if</span>(e.offsetParent!=<span class="literal">null</span>) offset+=getLeft(e.offsetParent);</span><br><span class="line"><span class="number">4</span>   <span class="keyword">return</span> offset;</span><br><span class="line"><span class="number">5</span> &#125;</span><br></pre></td></tr></table></figure>

<p><em>上面的方法无疑影响性能，好在浏览器给我提供了相应的接口 getBoundingClientRect，这个方法最早出现在 IE 浏览器中，后来的浏览器也跟着支持了这个方法，而且还更加完善，IE 中只能获取到元素的 left,top,bottom,right 的属性，而后面的现代浏览器还能获取到元素的 width 和 height.</em></p>
<table>
<thead>
<tr>
<th><strong>Chrome</strong></th>
<th><strong>Firefox (Gecko)</strong></th>
<th><strong>Internet Explorer</strong></th>
<th><strong>Opera</strong></th>
<th><strong>Safari</strong></th>
</tr>
</thead>
<tbody><tr>
<td><em>1.0</em></td>
<td><em>3.0 (1.9)</em></td>
<td><em>4.0</em></td>
<td><em>(Yes)</em></td>
<td><em>4.0</em></td>
</tr>
</tbody></table>
<p>*这里要注意的是，bottom 是元素底部相对于窗口顶部的距离，而不是像 css 里面 position 的 bottom 相对于窗口底部，同理，rihgt 属性是元素最右边相对于窗口左边的距离。</p>
<p>-</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&quot;box&quot;</span>);</span><br><span class="line"><span class="number">2</span> <span class="keyword">var</span> pos = box.getBoundingClientRect();</span><br><span class="line"><span class="number">3</span> box.innerHTML = <span class="string">&quot;top:&quot;</span>+pos.top +</span><br><span class="line"><span class="number">4</span>   <span class="string">&quot;left:&quot;</span>+pos.left +</span><br><span class="line"><span class="number">5</span>   <span class="string">&quot;bottom:&quot;</span>+pos.bottom +</span><br><span class="line"><span class="number">6</span>   <span class="string">&quot;right:&quot;</span>+pos.right +</span><br><span class="line"><span class="number">7</span>   <span class="string">&quot;width:&quot;</span>+pos.width +</span><br><span class="line"><span class="number">8</span>   <span class="string">&quot;height:&quot;</span>+pos.height</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>请求数据拼接</title>
    <url>/taiaiac.gitee.io/2020/12/30/Javascript/%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E6%8B%BC%E6%8E%A5/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>响应式布局<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/common.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/dangdang.css&quot;</span> /&gt;</span></span><br><span class="line">    //引入axios插件</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- banner --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/jmsj_hw150316g.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 2、导航列表 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav-list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 3、图文列表 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/append.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述 请求数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-09-21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    axios</span><br><span class="line">      .get(<span class="string">&#x27;http://127.0.0.1:5500/%E7%A7%BB%E5%8A%A8%E7%AB%AF/js/msg.json&#x27;</span>)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        resolve(res.data)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        reject(e)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">rander</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//解构，必要</span></span><br><span class="line">  <span class="keyword">let</span> &#123; arrNav, goodList &#125; = <span class="keyword">await</span> request()</span><br><span class="line">  <span class="built_in">console</span>.log(arrNav)</span><br><span class="line">  <span class="built_in">console</span>.log(goodList)</span><br><span class="line">  <span class="comment">//先拼接ul</span></span><br><span class="line">  <span class="keyword">let</span> ul = <span class="string">&#x27;&lt;ul&gt;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arrNav.length; i++) &#123;</span><br><span class="line">    ul += <span class="string">`&lt;li&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;item&quot;&gt;</span></span><br><span class="line"><span class="string">              &lt;div class=&quot;text&quot;&gt;<span class="subst">$&#123;arrNav[i]&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div class=&quot;arrow-right&quot;&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/li&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  ul += <span class="string">&#x27;&lt;/ul&gt;&#x27;</span></span><br><span class="line">  <span class="keyword">let</span> navList = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;nav-list&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">  <span class="built_in">console</span>.log(navList)</span><br><span class="line">  navList.innerHTML = ul</span><br><span class="line"></span><br><span class="line">  <span class="comment">//拼接商品</span></span><br><span class="line">  <span class="keyword">let</span> goods = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; goodList.length; i++) &#123;</span><br><span class="line">    goods += <span class="string">`&lt;div class=&quot;goods-wrap&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;item&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;img src=&quot;<span class="subst">$&#123;goodList[i].goodsImg&#125;</span>&quot; alt=&quot;&quot; class=&quot;goods-img&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&#x27;goods-desc&#x27;&gt;<span class="subst">$&#123;goodList[i].goodsDesc&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&#x27;price&#x27;&gt;￥<span class="subst">$&#123;goodList[i].price&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;price-befor&quot;&gt;￥<span class="subst">$&#123;goodList[i][<span class="string">&#x27;price-befor&#x27;</span>]&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;buy&quot;&gt;点击购买&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> gdsList = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;goods-list&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">  gdsList.innerHTML = goods</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//一加载页面，就渲染数据</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  rander()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;arrNav&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;小说&quot;</span>,</span><br><span class="line">    <span class="string">&quot;青春动漫&quot;</span>,</span><br><span class="line">    <span class="string">&quot;经济管理&quot;</span>,</span><br><span class="line">    <span class="string">&quot;历史文化&quot;</span>,</span><br><span class="line">    <span class="string">&quot;人文社科&quot;</span>,</span><br><span class="line">    <span class="string">&quot;孕产育儿&quot;</span>,</span><br><span class="line">    <span class="string">&quot;旅游美食&quot;</span>,</span><br><span class="line">    <span class="string">&quot;中小学教辅&quot;</span>,</span><br><span class="line">    <span class="string">&quot;外语考试&quot;</span>,</span><br><span class="line">    <span class="string">&quot;文学艺术&quot;</span>,</span><br><span class="line">    <span class="string">&quot;成功励志&quot;</span>,</span><br><span class="line">    <span class="string">&quot;传记&quot;</span>,</span><br><span class="line">    <span class="string">&quot;哲学心理&quot;</span>,</span><br><span class="line">    <span class="string">&quot;亲子家教&quot;</span>,</span><br><span class="line">    <span class="string">&quot;保健养生&quot;</span>,</span><br><span class="line">    <span class="string">&quot;科技&quot;</span>,</span><br><span class="line">    <span class="string">&quot;童书&quot;</span>,</span><br><span class="line">    <span class="string">&quot;教材&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;goodList&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book0.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book1.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book2.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book3.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book4.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book5.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book6.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goodsImg&quot;</span>: <span class="string">&quot;images/book7.jpg&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;goodsDesc&quot;</span>: <span class="string">&quot;狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;price&quot;</span>: <span class="number">19.9</span>,</span><br><span class="line">      <span class="attr">&quot;price-befor&quot;</span>: <span class="number">39.9</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>Express中间件</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/Express%E4%B8%AD%E9%97%B4%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="Express-中间件"><a href="#Express-中间件" class="headerlink" title="Express 中间件"></a>Express 中间件</h1><h2 id="1-中间件的概念"><a href="#1-中间件的概念" class="headerlink" title="1.中间件的概念"></a>1.中间件的概念</h2><blockquote>
<p>参考文档：<a href="http://expressjs.com/en/guide/using-middleware.html">http://expressjs.com/en/guide/using-middleware.html</a></p>
</blockquote>
<p>中间件：把很复杂的事情分割成单个，然后依次有条理的执行。就是一个中间处理环节，有输入，有输出。</p>
<p>说的通俗易懂点儿，中间件就是一个（从请求到响应调用的方法）方法。</p>
<p>把数据从请求到响应分步骤来处理，每一个步骤都是一个中间处理环节。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cookie = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/cookie&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> query = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/query&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> postBody = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/post-body&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 解析请求地址中的get参数</span></span><br><span class="line">	<span class="comment">// var obj = url.parse(req.url,true);</span></span><br><span class="line">	<span class="comment">// req.query = obj.query;</span></span><br><span class="line">	query(req,res);	<span class="comment">//中间件</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 解析请求地址中的post参数</span></span><br><span class="line">	req.body = &#123;</span><br><span class="line">		<span class="attr">foo</span>:<span class="string">&#x27;bar&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(req.url === <span class="string">&#x27;xxx&#x27;</span>)&#123;</span><br><span class="line">	<span class="comment">// 处理请求</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;3000 runing...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>同一个请求对象所经过的中间件都是同一个请求对象和响应对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"><span class="comment">// 中间件：处理请求的，本质就是个函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 Express 中，对中间件有几种分类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当请求进来，会从第一个中间件开始进行匹配</span></span><br><span class="line"><span class="comment">//    如果匹配，则进来</span></span><br><span class="line"><span class="comment">//       如果请求进入中间件之后，没有调用 next 则代码会停在当前中间件</span></span><br><span class="line"><span class="comment">//       如果调用了 next 则继续向后找到第一个匹配的中间件</span></span><br><span class="line"><span class="comment">//    如果不匹配，则继续判断匹配下一个中间件</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 不关心请求路径和请求方法的中间件</span></span><br><span class="line"><span class="comment">// 也就是说任何请求都会进入这个中间件</span></span><br><span class="line"><span class="comment">// 中间件本身是一个方法，该方法接收三个参数：</span></span><br><span class="line"><span class="comment">//    Request 请求对象</span></span><br><span class="line"><span class="comment">//    Response 响应对象</span></span><br><span class="line"><span class="comment">//    next     下一个中间件</span></span><br><span class="line"><span class="comment">// 当一个请求进入一个中间件之后，如果不调用 next 则会停留在当前中间件</span></span><br><span class="line"><span class="comment">// 所以 next 是一个方法，用来调用下一个中间件的</span></span><br><span class="line"><span class="comment">// 调用 next 方法也是要匹配的（不是调用紧挨着的那个）</span></span><br><span class="line">app.get(<span class="string">&#x27;/abc&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 同一个请求的req和res是一样的，</span></span><br><span class="line">  <span class="comment">// 可以前面存储下面调用</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/abc&#x27;</span>)</span><br><span class="line">  <span class="comment">// req.foo = &#x27;bar&#x27;;</span></span><br><span class="line">  req.body = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">&#x27;/abc&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log(req.foo);</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.body)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/abc&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;app is running at port 3000.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="2-中间件的分类："><a href="#2-中间件的分类：" class="headerlink" title="2.中间件的分类："></a>2.中间件的分类：</h2><h3 id="应用程序级别的中间件"><a href="#应用程序级别的中间件" class="headerlink" title="应用程序级别的中间件"></a>应用程序级别的中间件</h3><p>万能匹配（不关心任何请求路径和请求方法的中间件）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Time&#x27;</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>关心请求路径和请求方法的中间件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Time&#x27;</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="路由级别的中间件严格匹配请求路径和请求方法的中间件"><a href="#路由级别的中间件严格匹配请求路径和请求方法的中间件" class="headerlink" title="路由级别的中间件严格匹配请求路径和请求方法的中间件"></a>路由级别的中间件严格匹配请求路径和请求方法的中间件</h3><p>get:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;get&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.post(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;post&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>put:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.put(<span class="string">&#x27;/user&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;put&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>delete:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.delete(<span class="string">&#x27;/delete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;delete&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中间件：处理请求，本质就是个函数</span></span><br><span class="line"><span class="comment">// 在express中，对中间件有几种分类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 不关心任何请求路径和请求方法的中间件</span></span><br><span class="line"><span class="comment">// 也就是说任何请求都会进入这个中间件</span></span><br><span class="line"><span class="comment">// 中间件本身是一个方法，该方法接收三个参数</span></span><br><span class="line"><span class="comment">// Request 请求对象</span></span><br><span class="line"><span class="comment">// Response 响应对象</span></span><br><span class="line"><span class="comment">// next 下一个中间件</span></span><br><span class="line"><span class="comment">// // 全局匹配中间件</span></span><br><span class="line"><span class="comment">// app.use(function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;1&#x27;);</span></span><br><span class="line"><span class="comment">// 	// 当一个请求进入中间件后</span></span><br><span class="line"><span class="comment">// 	// 如果需要请求另外一个方法则需要使用next（）方法</span></span><br><span class="line"><span class="comment">// 	next();</span></span><br><span class="line"><span class="comment">// 	// next是一个方法，用来调用下一个中间件</span></span><br><span class="line"><span class="comment">//  // 注意：next（）方法调用下一个方法的时候，也会匹配（不是调用紧挨着的哪一个）</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// app.use(function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;2&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// // 2 关心请求路径的中间件</span></span><br><span class="line"><span class="comment">// // 以/xxx开头的中间件</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/a&#x27;,function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(req.url);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 严格匹配请求方法和请求路径的中间件</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.post(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/a&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;app is running at port 3000.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3-错误处理中间件"><a href="#3-错误处理中间件" class="headerlink" title="3.错误处理中间件"></a>3.错误处理中间件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">err, req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.error(err, stack)</span><br><span class="line">  res.status(<span class="number">500</span>).send(<span class="string">&#x27;Something broke&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>配置使用 404 中间件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 要写在最底部，最后匹配</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">&#x27;404.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>配置全局错误处理中间件:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">	fs.readFile(<span class="string">&#x27;.a/bc&#x27;</span>, <span class="function"><span class="title">funtion</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (err) &#123;</span><br><span class="line">        	<span class="comment">// 当调用next()传参后，则直接进入到全局错误处理中间件方法中</span></span><br><span class="line">        	<span class="comment">// 当发生全局错误的时候，我们可以调用next传递错误对象</span></span><br><span class="line">        	<span class="comment">// 然后被全局错误处理中间件匹配到并进行处理</span></span><br><span class="line">        	<span class="comment">// 带有参数的next函数会直接跳过去找到四个参数的中间件</span></span><br><span class="line">			next(err);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//全局错误处理中间件</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err,req,res,next</span>)</span>&#123;</span><br><span class="line">    res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">        <span class="attr">err_code</span>:<span class="number">500</span>,</span><br><span class="line">        <span class="attr">message</span>:err.message</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="4-解析处理表单-POST-请求体中间件"><a href="#4-解析处理表单-POST-请求体中间件" class="headerlink" title="4.解析处理表单 POST 请求体中间件"></a>4.解析处理表单 POST 请求体中间件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 由于表单 POST 请求可能会携带大量的数据，所以在进行请求提价的时候会分为多次提交</span></span><br><span class="line">  <span class="comment">// 具体分为多少次进行提交不一定，取决于数据量的大小</span></span><br><span class="line">  <span class="comment">// 在 Node 中，对于处理这种不确定的数据，使用事件的形式处理</span></span><br><span class="line">  <span class="comment">// 这里可以通过监听 req 对象的 data 事件，然后通过对应的回调处理函数中的参数 chunk 拿到每一次接收到的数据</span></span><br><span class="line">  <span class="comment">//        data 事件触发多少次，不一定</span></span><br><span class="line">  <span class="comment">// 当数据接收完毕之后，会自动触发 req 对象的 end 事件，然后就可以在 end 事件中使用接收到的表单 POST 请求体</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="params">chunk</span> =&gt;</span> &#123;</span><br><span class="line">    data += chunk</span><br><span class="line">  &#125;)</span><br><span class="line">  req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 手动给 req 对象挂载一个 body 属性，值就是当前表单 POST 请求体对象</span></span><br><span class="line">    <span class="comment">// 在后续的处理中间件中，就可以直接使用 req.body 了</span></span><br><span class="line">    <span class="comment">// 因为在同一个请求中，流通的都是同一个 req 和 res 对象</span></span><br><span class="line">    req.body = queryString.parse(data)</span><br><span class="line">    next()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载路由容器（路由容器中组织了网站功能处理路由中间件）</span></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure>


<h2 id="5-内置中间件"><a href="#5-内置中间件" class="headerlink" title="5.内置中间件"></a>5.内置中间件</h2><ul>
<li>express.static(提供静态文件)<ul>
<li><a href="http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express">http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express</a></li>
</ul>
</li>
</ul>
<h2 id="6-第三方中间件"><a href="#6-第三方中间件" class="headerlink" title="6.第三方中间件"></a>6.第三方中间件</h2><blockquote>
<p>参考文档：<a href="http://expressjs.com/en/resources/middleware.html">http://expressjs.com/en/resources/middleware.html</a></p>
</blockquote>
<ul>
<li>body-parser</li>
<li>compression</li>
<li>cookie-parser</li>
<li>mogran</li>
<li>response-time</li>
<li>server-static</li>
<li>session</li>
</ul>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>FormData使用方法详解</title>
    <url>/taiaiac.gitee.io/2021/01/14/Node.js/FormData%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="FormData使用方法详解"><a href="#FormData使用方法详解" class="headerlink" title="FormData使用方法详解"></a>FormData使用方法详解</h2><blockquote>
<p>原文链接：<a href="https://www.jianshu.com/p/e984c3619019">https://www.jianshu.com/p/e984c3619019</a></p>
</blockquote>
<h5 id="FormData的主要用途有两个："><a href="#FormData的主要用途有两个：" class="headerlink" title="FormData的主要用途有两个："></a>FormData的主要用途有两个：</h5><h6 id="1、将form表单元素的name与value进行组合，实现表单数据的序列化，从而减少表单元素的拼接，提高工作效率。"><a href="#1、将form表单元素的name与value进行组合，实现表单数据的序列化，从而减少表单元素的拼接，提高工作效率。" class="headerlink" title="1、将form表单元素的name与value进行组合，实现表单数据的序列化，从而减少表单元素的拼接，提高工作效率。"></a>1、将form表单元素的name与value进行组合，实现表单数据的序列化，从而减少表单元素的拼接，提高工作效率。</h6><h6 id="2、异步上传文件"><a href="#2、异步上传文件" class="headerlink" title="2、异步上传文件"></a>2、异步上传文件</h6><h4 id="一、创建formData对象"><a href="#一、创建formData对象" class="headerlink" title="一、创建formData对象"></a>一、创建formData对象</h4><h6 id="1、创建一个空对象："><a href="#1、创建一个空对象：" class="headerlink" title="1、创建一个空对象："></a>1、创建一个空对象：</h6><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过FormData构造函数创建一个空对象</span></span><br><span class="line"><span class="keyword">var</span> formdata=<span class="keyword">new</span> FormData();</span><br><span class="line"><span class="comment">//可以通过append()方法来追加数据</span></span><br><span class="line">formdata.append(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laotie&quot;</span>);</span><br><span class="line"><span class="comment">//通过get方法对值进行读取</span></span><br><span class="line">console.log(formdata.<span class="keyword">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//laotie</span></span><br><span class="line"><span class="comment">//通过set方法对值进行设置</span></span><br><span class="line">formdata.<span class="keyword">set</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoliu&quot;</span>);</span><br><span class="line">console.log(formdata.<span class="keyword">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//laoliu</span></span><br></pre></td></tr></table></figure>

<h6 id="2、通过表单对formData进行初始化"><a href="#2、通过表单对formData进行初始化" class="headerlink" title="2、通过表单对formData进行初始化"></a>2、通过表单对formData进行初始化</h6><p>创建表单：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;advForm&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告名称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;advName&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;xixi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告类别：<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;advType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>轮播图<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>轮播图底部广告<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>热门回收广告<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span>&gt;</span>优品精选广告<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过表单元素作为参数，实现对formData的初始化：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获得表单按钮元素</span></span><br><span class="line"><span class="keyword">var</span> btn=<span class="built_in">document</span>.querySelector(<span class="string">&quot;#btn&quot;</span>);</span><br><span class="line"><span class="comment">//为按钮添加点击事件</span></span><br><span class="line">btn.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//根据ID获得页面当中的form表单元素</span></span><br><span class="line">    <span class="keyword">var</span> form=<span class="built_in">document</span>.querySelector(<span class="string">&quot;#advForm&quot;</span>);</span><br><span class="line">    <span class="comment">//将获得的表单元素作为参数，对formData进行初始化</span></span><br><span class="line">    <span class="keyword">var</span> formdata=<span class="keyword">new</span> FormData(form);</span><br><span class="line">    <span class="comment">//通过get方法获得name为advName元素的value值</span></span><br><span class="line">    <span class="built_in">console</span>.log(formdata.get(<span class="string">&quot;advName&quot;</span>));<span class="comment">//xixi</span></span><br><span class="line">    <span class="comment">//通过get方法获得name为advType元素的value值</span></span><br><span class="line">    <span class="built_in">console</span>.log(formdata.get(<span class="string">&quot;advType&quot;</span>));<span class="comment">//1 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二、操作方法"><a href="#二、操作方法" class="headerlink" title="二、操作方法"></a>二、操作方法</h4><h6 id="1、通过get-key-与getAll-key-来获取相对应的值"><a href="#1、通过get-key-与getAll-key-来获取相对应的值" class="headerlink" title="1、通过get(key)与getAll(key)来获取相对应的值"></a>1、通过get(key)与getAll(key)来获取相对应的值</h6><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取key为age的第一个值</span></span><br><span class="line">formdata.<span class="keyword">get</span>(<span class="string">&quot;age&quot;</span>); </span><br><span class="line"> <span class="comment">// 获取key为age的所有值，返回值为数组类型</span></span><br><span class="line">formdata.getAll(<span class="string">&quot;age&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="2、通过append-key-value-在数据末尾追加数据"><a href="#2、通过append-key-value-在数据末尾追加数据" class="headerlink" title="2、通过append(key,value)在数据末尾追加数据"></a>2、通过append(key,value)在数据末尾追加数据</h6><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过FormData构造函数创建一个空对象</span></span><br><span class="line"><span class="keyword">var</span> formdata=<span class="built_in">new</span> FormData();</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laoliu的数据</span></span><br><span class="line">formdata.<span class="built_in">append</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoliu&quot;</span>);</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laoli的数据</span></span><br><span class="line">formdata.<span class="built_in">append</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoli&quot;</span>);</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laotie的数据</span></span><br><span class="line">formdata.<span class="built_in">append</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laotie&quot;</span>);</span><br><span class="line"><span class="comment">//通过get方法读取key为name的第一个值</span></span><br><span class="line">console.log(formdata.get(<span class="string">&quot;name&quot;</span>));<span class="comment">//laoliu</span></span><br><span class="line"><span class="comment">//通过getAll方法读取key为name的所有值</span></span><br><span class="line">console.log(formdata.getAll(<span class="string">&quot;name&quot;</span>));<span class="comment">//[&quot;laoliu&quot;, &quot;laoli&quot;, &quot;laotie&quot;]</span></span><br></pre></td></tr></table></figure>

<h6 id="3、通过set-key-value-来设置修改数据"><a href="#3、通过set-key-value-来设置修改数据" class="headerlink" title="3、通过set(key, value)来设置修改数据"></a>3、通过set(key, value)来设置修改数据</h6><p>key的值不存在，会添加一条数据</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过FormData构造函数创建一个空对象</span></span><br><span class="line"><span class="keyword">var</span> formdata=<span class="keyword">new</span> FormData();</span><br><span class="line"><span class="comment">//如果key的值不存在会为数据添加一个key为name值为laoliu的数据</span></span><br><span class="line">formdata.<span class="keyword">set</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoli&quot;</span>);</span><br><span class="line"><span class="comment">//通过get方法读取key为name的第一个值</span></span><br><span class="line">console.log(formdata.<span class="keyword">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//laoli</span></span><br></pre></td></tr></table></figure>

<p>key的值存在，会修改对应的value值</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过FormData构造函数创建一个空对象</span></span><br><span class="line">var formdata=<span class="keyword">new</span> <span class="built_in">FormData</span>();</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laoliu的数据</span></span><br><span class="line">formdata.<span class="built_in">append</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoliu&quot;</span>);</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laoliu2的数据</span></span><br><span class="line">formdata.<span class="built_in">append</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoliu2&quot;</span>);</span><br><span class="line"><span class="comment">//通过get方法读取key为name的第一个值</span></span><br><span class="line">console.<span class="built_in">log</span>(formdata.<span class="built_in">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//laoliu</span></span><br><span class="line"><span class="comment">//通过getAll方法读取key为name的所有值</span></span><br><span class="line">console.<span class="built_in">log</span>(formdata.<span class="built_in">getAll</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//[&quot;laoliu&quot;, &quot;laoliu2&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将存在的key为name的值修改为laoli</span></span><br><span class="line">formdata.<span class="built_in">set</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoli&quot;</span>);</span><br><span class="line"><span class="comment">//通过get方法读取key为name的第一个值</span></span><br><span class="line">console.<span class="built_in">log</span>(formdata.<span class="built_in">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//laoli</span></span><br><span class="line"><span class="comment">//通过getAll方法读取key为name的所有值</span></span><br><span class="line">console.<span class="built_in">log</span>(formdata.<span class="built_in">getAll</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//[&quot;laoli&quot;]</span></span><br></pre></td></tr></table></figure>

<h6 id="4、通过has-key-来判断是否存在对应的key值"><a href="#4、通过has-key-来判断是否存在对应的key值" class="headerlink" title="4、通过has(key)来判断是否存在对应的key值"></a>4、通过has(key)来判断是否存在对应的key值</h6><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过FormData构造函数创建一个空对象</span></span><br><span class="line"><span class="keyword">var</span> formdata=<span class="keyword">new</span> FormData();</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laoliu的数据</span></span><br><span class="line">formdata.append(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoliu&quot;</span>);</span><br><span class="line"><span class="comment">//判断是否包含key为name的数据</span></span><br><span class="line"><span class="built_in">console</span>.log(formdata.has(<span class="string">&quot;name&quot;</span>));<span class="comment">//true</span></span><br><span class="line"><span class="comment">//判断是否包含key为age的数据</span></span><br><span class="line"><span class="built_in">console</span>.log(formdata.has(<span class="string">&quot;age&quot;</span>));<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h6 id="5、通过delete-key-可以删除数据"><a href="#5、通过delete-key-可以删除数据" class="headerlink" title="5、通过delete(key)可以删除数据"></a>5、通过delete(key)可以删除数据</h6><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//通过FormData构造函数创建一个空对象</span></span><br><span class="line">var formdata=<span class="keyword">new</span> <span class="built_in">FormData</span>();</span><br><span class="line"><span class="comment">//通过append()方法在末尾追加key为name值为laoliu的数据</span></span><br><span class="line">formdata.<span class="built_in">append</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;laoliu&quot;</span>);</span><br><span class="line">console.<span class="built_in">log</span>(formdata.<span class="built_in">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//laoliu</span></span><br><span class="line"><span class="comment">//删除key为name的值</span></span><br><span class="line">formdata.<span class="built_in"><span class="keyword">delete</span></span>(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">console.<span class="built_in">log</span>(formdata.<span class="built_in">get</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//null</span></span><br></pre></td></tr></table></figure>

<h4 id="三、通过XMLHttpRequest发送数据"><a href="#三、通过XMLHttpRequest发送数据" class="headerlink" title="三、通过XMLHttpRequest发送数据"></a>三、通过XMLHttpRequest发送数据</h4><p>创建表单：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;advForm&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告名称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;advName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xixi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告类别：<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;advType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>轮播图<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>轮播图底部广告<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>热门回收广告<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span>&gt;</span>优品精选广告<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告图片：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;advPic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告地址：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;advUrl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>广告排序：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;orderBy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>发送数据：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> btn=<span class="built_in">document</span>.querySelector(<span class="string">&quot;#btn&quot;</span>);</span><br><span class="line">btn.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> formdata=<span class="keyword">new</span> FormData(<span class="built_in">document</span>.getElementById(<span class="string">&quot;advForm&quot;</span>));</span><br><span class="line">    <span class="keyword">var</span> xhr=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(<span class="string">&quot;post&quot;</span>,<span class="string">&quot;http://127.0.0.1/adv&quot;</span>);</span><br><span class="line">    xhr.send(formdata);</span><br><span class="line">    xhr.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line">            <span class="comment">//...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>作者：张培跃<br>链接：<a href="https://www.jianshu.com/p/e984c3619019">https://www.jianshu.com/p/e984c3619019</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Express(快速的)</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/Express%EF%BC%88%E5%BF%AB%E9%80%9F%E7%9A%84%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Express（快速的）"><a href="#Express（快速的）" class="headerlink" title="Express（快速的）"></a>Express（快速的）</h1><p>作者：Tj</p>
<p>原生的 http 在某些方面表现不足以应对我们的开发需求，所以就需要使用框架来加快我们的开发效率，框架的目的就是提高效率，让我们的代码高度统一。</p>
<p>在 node 中有很多 web 开发框架。主要学习 express</p>
<ul>
<li><p><code>http://expressjs.com/</code>,其中主要封装的是 http。</p>
</li>
<li><pre><code class="js">// 1 安装
// 2 引包
var express = require(&#39;express&#39;)
// 3 创建服务器应用程序
//      也就是原来的http.createServer();
var app = express()

// 公开指定目录
// 只要通过这样做了，就可以通过/public/xx的方式来访问public目录中的所有资源
// 在Express中开放资源就是一个API的事
app.use(&#39;/public/&#39;, express.static(&#39;/public/&#39;))

//模板引擎在Express中开放模板也是一个API的事

// 当服务器收到get请求 / 的时候，执行回调处理函数
app.get(&#39;/&#39;, function (req, res) &#123;
  res.send(&#39;hello express&#39;)
&#125;)

// 相当于server.listen
app.listen(3000, function () &#123;
  console.log(&#39;app is runing at port 3000&#39;)
&#125;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 起步</span><br><span class="line"></span><br><span class="line">### 安装</span><br><span class="line"></span><br><span class="line">```css</span><br><span class="line">cnpm install express</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h3 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 创建app</span></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">//  2.</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1</span></span><br><span class="line">  <span class="comment">// res.write(&#x27;Hello&#x27;);</span></span><br><span class="line">  <span class="comment">// res.write(&#x27;World&#x27;);</span></span><br><span class="line">  <span class="comment">// res.end()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2</span></span><br><span class="line">  <span class="comment">// res.end(&#x27;hello world&#x27;);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3</span></span><br><span class="line">  res.send(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;express app is runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="基本路由"><a href="#基本路由" class="headerlink" title="基本路由"></a>基本路由</h3><p>路由：</p>
<ul>
<li>请求方法</li>
<li>请求路径</li>
<li>请求处理函数</li>
</ul>
<p>get:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//当你以get方法请求/的时候，执行对应的处理函数</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//当你以post方法请求/的时候，执行对应的处理函数</span></span><br><span class="line">app.post(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Express-静态服务-API"><a href="#Express-静态服务-API" class="headerlink" title="Express 静态服务 API"></a>Express 静态服务 API</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.use不仅仅是用来处理静态资源的，还可以做很多工作(body-parser的配置)</span></span><br><span class="line">app.use(express.static(<span class="string">&#x27;public&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">&#x27;files&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/stataic&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>))</span><br><span class="line"><span class="comment">// 引入express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建app</span></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开放静态资源</span></span><br><span class="line"><span class="comment">// 1.当以/public/开头的时候，去./public/目录中找对应资源</span></span><br><span class="line"><span class="comment">// 访问：http://127.0.0.1:3000/public/login.html</span></span><br><span class="line">app.use(<span class="string">&#x27;/public/&#x27;</span>, express.static(<span class="string">&#x27;./public/&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.当省略第一个参数的时候，只可以通过省略/public的方式来访问</span></span><br><span class="line"><span class="comment">// 访问：http://127.0.0.1:3000/login.html</span></span><br><span class="line"><span class="comment">// app.use(express.static(&#x27;./public/&#x27;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.访问：http://127.0.0.1:3000/a/login.html</span></span><br><span class="line"><span class="comment">// a相当于public的别名</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/a/&#x27;,express.static(&#x27;./public/&#x27;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.end(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;express app is runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="在-Express-中配置使用-art-templete-模板引擎"><a href="#在-Express-中配置使用-art-templete-模板引擎" class="headerlink" title="在 Express 中配置使用 art-templete 模板引擎"></a>在 Express 中配置使用 <code>art-templete</code> 模板引擎</h4><ul>
<li><p><a href="https://aui.github.io/art-template/">art-template 官方文档</a></p>
</li>
<li><p>在 node 中，有很多第三方模板引擎都可以使用，不是只有</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">art-template</span><br></pre></td></tr></table></figure>

<ul>
<li>还有 ejs，jade（pug），handlebars，nunjucks</li>
</ul>
</li>
</ul>
<p>安装：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install --save art-template</span><br><span class="line">npm install --save express-art-template</span><br><span class="line"></span><br><span class="line"><span class="comment">//两个一起安装</span></span><br><span class="line">npm i --save art-template express-art-template</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 配置使用 art-template 模板引擎</span></span><br><span class="line"><span class="comment">// 第一个参数，表示，当渲染以 .art 结尾的文件的时候，使用 art-template 模板引擎</span></span><br><span class="line"><span class="comment">// express-art-template 是专门用来在 Express 中把 art-template 整合到 Express 中</span></span><br><span class="line"><span class="comment">// 虽然外面这里不需要记载 art-template 但是也必须安装</span></span><br><span class="line"><span class="comment">// 原因就在于 express-art-template 依js赖了 art-template</span></span><br><span class="line"></span><br><span class="line">app.engine(<span class="string">&#x27;html&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;express-art-template&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Express 为 Response 相应对象提供了一个方法：render</span></span><br><span class="line"><span class="comment">// render 方法默认是不可以使用，但是如果配置了模板引擎就可以使用了</span></span><br><span class="line"><span class="comment">// res.render(&#x27;html模板名&#x27;, &#123;模板数据&#125;)</span></span><br><span class="line"><span class="comment">// 第一个参数不能写路径，默认会去项目中的 views 目录查找该模板文件</span></span><br><span class="line"><span class="comment">// 也就是说 Express 有一个约定：开发人员把所有的视图文件都放到 views 目录中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想要修改默认的 views 目录，则可以</span></span><br><span class="line"><span class="comment">// app.set(&#x27;views&#x27;, render函数的默认路径)</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// express默认会去views目录找index.html</span></span><br><span class="line">  res.render(<span class="string">&#x27;index.html&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;hello world&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>如果希望修改默认的<code>views</code>视图渲染存储目录，可以：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数views千万不要写错</span></span><br><span class="line">app.set(<span class="string">&#x27;views&#x27;</span>, 目录路径)</span><br></pre></td></tr></table></figure>

<h2 id="在-Express-中获取表单请求数据"><a href="#在-Express-中获取表单请求数据" class="headerlink" title="在 Express 中获取表单请求数据"></a>在 Express 中获取表单请求数据</h2><h3 id="获取-get-请求数据："><a href="#获取-get-请求数据：" class="headerlink" title="获取 get 请求数据："></a>获取 get 请求数据：</h3><p>Express 内置了一个 api，可以直接通过<code>req.query</code>来获取数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过requery方法获取用户输入的数据</span></span><br><span class="line"><span class="comment">// req.query只能拿到get请求的数据</span></span><br><span class="line"><span class="keyword">var</span> comment = req.query</span><br></pre></td></tr></table></figure>

<h3 id="获取-post-请求数据："><a href="#获取-post-请求数据：" class="headerlink" title="获取 post 请求数据："></a>获取 post 请求数据：</h3><p>在 Express 中没有内置获取表单 post 请求体的 api，这里我们需要使用一个第三方包<code>body-parser</code>来获取数据。</p>
<p>安装：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save body-parser;</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<p>// 配置解析表单 POST 请求体插件（注意：一定要在 app.use(router) 之前 ）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 引包</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置body-parser</span></span><br><span class="line"><span class="comment">// 只要加入这个配置，则在req请求对象上会多出来一个属性：body</span></span><br><span class="line"><span class="comment">// 也就是说可以直接通过req.body来获取表单post请求数据</span></span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br><span class="line">  res.write(<span class="string">&#x27;you posted:\n&#x27;</span>)</span><br><span class="line">  <span class="comment">// 可以通过req.body来获取表单请求数据</span></span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="在-Express-中配置使用-express-session-插件操作"><a href="#在-Express-中配置使用-express-session-插件操作" class="headerlink" title="在 Express 中配置使用 express-session 插件操作"></a>在 Express 中配置使用 <code>express-session</code> 插件操作</h2><blockquote>
<p>参考文档：<a href="https://github.com/expressjs/session">https://github.com/expressjs/session</a></p>
</blockquote>
<p>安装：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install express-session</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//该插件会为req请求对象添加一个成员:req.session默认是一个对象</span></span><br><span class="line"><span class="comment">//这是最简单的配置方式</span></span><br><span class="line"><span class="comment">//Session是基于Cookie实现的</span></span><br><span class="line">app.use(</span><br><span class="line">  session(&#123;</span><br><span class="line">    <span class="comment">//配置加密字符串，他会在原有的基础上和字符串拼接起来去加密</span></span><br><span class="line">    <span class="comment">//目的是为了增加安全性，防止客户端恶意伪造</span></span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;keyboard cat&#x27;</span>,</span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">true</span>, <span class="comment">//无论是否适用Session，都默认直接分配一把钥匙</span></span><br><span class="line">    <span class="attr">cookie</span>: &#123; <span class="attr">secure</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读</span></span><br><span class="line"><span class="comment">//添加Session数据</span></span><br><span class="line"><span class="comment">//session就是一个对象</span></span><br><span class="line">req.session.foo = <span class="string">&#x27;bar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//写</span></span><br><span class="line"><span class="comment">//获取session数据</span></span><br><span class="line">req.session.foo</span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line">req.session.foo = <span class="literal">null</span></span><br><span class="line"><span class="keyword">delete</span> req.session.foo</span><br></pre></td></tr></table></figure>

<p>提示：</p>
<p>默认 Session 数据时内存储数据，服务器一旦重启，真正的生产环境会把 Session 进行持久化存储。</p>
<h2 id="利用-Express-实现-ADUS-项目"><a href="#利用-Express-实现-ADUS-项目" class="headerlink" title="利用 Express 实现 ADUS 项目"></a>利用 Express 实现 ADUS 项目</h2><h3 id="模块化思想"><a href="#模块化思想" class="headerlink" title="模块化思想"></a>模块化思想</h3><p>模块如何划分:</p>
<ul>
<li>模块职责要单一</li>
</ul>
<p>javascript 模块化：</p>
<ul>
<li>Node 中的 CommonJS</li>
<li>浏览器中的：<ul>
<li>AMD require.js</li>
<li>CMD sea.js</li>
</ul>
</li>
<li>es6 中增加了官方支持</li>
</ul>
<h3 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h3><ul>
<li>初始化</li>
<li>安装依赖</li>
<li>模板处理</li>
</ul>
<h3 id="路由设计"><a href="#路由设计" class="headerlink" title="路由设计"></a>路由设计</h3><table>
<thead>
<tr>
<th>请求方法</th>
<th>请求路径</th>
<th>get 参数</th>
<th>post 参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>/students</td>
<td></td>
<td></td>
<td>渲染首页</td>
</tr>
<tr>
<td>GET</td>
<td>/students/new</td>
<td></td>
<td></td>
<td>渲染添加学生页面</td>
</tr>
<tr>
<td>POST</td>
<td>/students/new</td>
<td></td>
<td>name,age,gender,hobbies</td>
<td>处理添加学生请求</td>
</tr>
<tr>
<td>GET</td>
<td>/students/edit</td>
<td>id</td>
<td></td>
<td>渲染编辑页面</td>
</tr>
<tr>
<td>POST</td>
<td>/students/edit</td>
<td></td>
<td>id,name,age,gender,hobbies</td>
<td>处理编辑请求</td>
</tr>
<tr>
<td>GET</td>
<td>/students/delete</td>
<td>id</td>
<td></td>
<td>处理删除请求</td>
</tr>
</tbody></table>
<h3 id="提取路由模块"><a href="#提取路由模块" class="headerlink" title="提取路由模块"></a>提取路由模块</h3><p>router.js:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * router.js路由模块</span></span><br><span class="line"><span class="comment"> * 职责：</span></span><br><span class="line"><span class="comment"> *      处理路由</span></span><br><span class="line"><span class="comment"> *      根据不同的请求方法+请求路径设置具体的请求函数</span></span><br><span class="line"><span class="comment"> * 模块职责要单一，我们划分模块的目的就是增强代码的可维护性，提升开发效率</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Express专门提供了一种更好的方式</span></span><br><span class="line"><span class="comment">// 专门用来提供路由的</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 1 创建一个路由容器</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router()</span><br><span class="line"><span class="comment">// 2 把路由都挂载到路由容器中</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// res.send(&#x27;hello world&#x27;);</span></span><br><span class="line">  <span class="comment">// readFile的第二个参数是可选的，传入utf8就是告诉他把读取到的文件直接按照utf8编码，直接转成我们认识的字符</span></span><br><span class="line">  <span class="comment">// 除了这样来转换，也可以通过data.toString（）来转换</span></span><br><span class="line">  fs.readFile(<span class="string">&#x27;./db.json&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">&#x27;Server error.&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 读取到的文件数据是string类型的数据</span></span><br><span class="line">    <span class="comment">// console.log(data);</span></span><br><span class="line">    <span class="comment">// 从文件中读取到的数据一定是字符串，所以一定要手动转换成对象</span></span><br><span class="line">    <span class="keyword">var</span> students = <span class="built_in">JSON</span>.parse(data).students</span><br><span class="line">    res.render(<span class="string">&#x27;index.html&#x27;</span>, &#123;</span><br><span class="line">      <span class="comment">// 读取文件数据</span></span><br><span class="line">      <span class="attr">students</span>: students,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/new&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">&#x27;new.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/edit&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/students/edit&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/delete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 把router导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = router</span><br></pre></td></tr></table></figure>

<p>app.js:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./router&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// router(app);</span></span><br><span class="line"><span class="comment">// 把路由容器挂载到app服务中</span></span><br><span class="line"><span class="comment">// 挂载路由</span></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure>



<h3 id="模糊匹配路径"><a href="#模糊匹配路径" class="headerlink" title="模糊匹配路径"></a>模糊匹配路径</h3><p>用途：聚合请求</p>
<ul>
<li>冒号后可以自定义参数</li>
<li>匹配冒号前的路径</li>
<li>通过req.params.参数 获得</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /advert/one/:advertId 是一个模糊匹配路径</span></span><br><span class="line"><span class="comment">// 可以匹配 /advert/one/* 的路径形式</span></span><br><span class="line"><span class="comment">// 例如：/advert/one/1 /advert/one/2 /advert/one/a /advert/one/abc 等路径</span></span><br><span class="line"><span class="comment">// 但是 /advert/one 或者 /advert/one/a/b 是不行的</span></span><br><span class="line"><span class="comment">// 至于 advertId 是自己起的一个名字，可以在处理函数中通过 req.params 来进行获取</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/advert/one/:advertId&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.params.advertId)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="设计操作数据的-API-文件模块"><a href="#设计操作数据的-API-文件模块" class="headerlink" title="设计操作数据的 API 文件模块"></a>设计操作数据的 API 文件模块</h3><p>es6 中的 find 和 findIndex：</p>
<p>find 接受一个方法作为参数，方法内部返回一个条件</p>
<p>find 会便利所有的元素，执行你给定的带有条件返回值的函数</p>
<p>符合该条件的元素会作为 find 方法的返回值</p>
<p>如果遍历结束还没有符合该条件的元素，则返回 undefined</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * student.js</span></span><br><span class="line"><span class="comment"> * 数据操作文件模块</span></span><br><span class="line"><span class="comment"> * 职责：操作文件中的数据，只处理数据，不关心业务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取所有学生列表</span></span><br><span class="line"><span class="comment"> * return []</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.find = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取添加保存学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.save = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.delete = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ul>
<li><p>处理模板</p>
</li>
<li><p>配置静态开放资源</p>
</li>
<li><p>配置模板引擎</p>
</li>
<li><p>简单的路由，/studens 渲染静态页出来</p>
</li>
<li><p>路由设计</p>
</li>
<li><p>提取路由模块</p>
</li>
<li><p>由于接下来的一系列业务操作都需要处理文件数据，所以我们需要封装 Student.js’</p>
</li>
<li><p>先写好 student.js 文件结构</p>
<ul>
<li>查询所有学生列别哦的 API</li>
<li>findById</li>
<li>save</li>
<li>updateById</li>
<li>deleteById</li>
</ul>
</li>
<li><p>实现具体功能</p>
<ul>
<li>通过路由收到请求</li>
<li>接受请求中的参数（get，post）<ul>
<li>req.query</li>
<li>req.body</li>
</ul>
</li>
<li>调用数据操作 API 处理数据</li>
<li>根据操作结果给客户端发送请求</li>
</ul>
</li>
<li><p>业务功能顺序</p>
<ul>
<li>列表</li>
<li>添加</li>
<li>编辑</li>
<li>删除</li>
</ul>
</li>
<li><p>find 方法</p>
</li>
<li><pre><code class="js">// EcmaScript 6 中的一个数组方法：find
// 需要接收一个函数作为参数
// 当某个遍历项符合 item.id === student.id 条件的时候，find 会终止遍历，同时返回遍历项
let stu = students.find((item) =&gt; &#123;
  return item.id === student.id
&#125;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- findIndex 方法</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  // findIndex 方法专门用来根据条件查找元素的下标</span><br><span class="line">  let deleteId = students.findIndex((item) =&gt; &#123;</span><br><span class="line">    return item.id === parseInt(id)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

### 子模板和模板的继承（模板引擎高级语法）【include，extend，block】
</code></pre>
</li>
</ul>
<p>注意:</p>
<p>模板页：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">	&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">	&lt;title&gt;模板页&lt;/title&gt;</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;/node_modules/bootstrap/dist/css/bootstrap.css&quot;/&gt;</span><br><span class="line">	&#123;&#123; block &#x27;head&#x27; &#125;&#125;&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;!-- 通过include导入公共部分 --&gt;</span><br><span class="line">	&#123;&#123;include &#x27;./header.html&#x27;&#125;&#125;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 留一个位置 让别的内容去填充 --&gt;</span><br><span class="line">	&#123;&#123; block  &#x27;content&#x27; &#125;&#125;</span><br><span class="line">		&lt;h1&gt;默认内容&lt;/h1&gt;</span><br><span class="line">	&#123;&#123; /block &#125;&#125;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 通过include导入公共部分 --&gt;</span><br><span class="line">	&#123;&#123;include &#x27;./footer.html&#x27;&#125;&#125;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 公共样式 --&gt;</span><br><span class="line">	&lt;script src=&quot;/node_modules/jquery/dist/jquery.js&quot; &gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;/node_modules/bootstrap/dist/js/bootstrap.js&quot; &gt;&lt;/script&gt;</span><br><span class="line">	&#123;&#123; block &#x27;script&#x27; &#125;&#125;&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>模板的继承：</p>
<p> header 页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>公共的头部<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> footer 页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>公共的底部<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>模板页的使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 继承(extend:延伸，扩展)模板也layout.html --&gt;</span><br><span class="line">&lt;!-- 把layout.html页面的内容都拿进来作为index.html页面的内容 --&gt;</span><br><span class="line">&#123;&#123;extend <span class="string">&#x27;./layout.html&#x27;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 向模板页面填充新的数据 --&gt;</span><br><span class="line">&lt;!-- 填充后就会替换掉layout页面content中的数据 --&gt;</span><br><span class="line">&lt;!-- style样式方面的内容 --&gt;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;head&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		body&#123;</span><br><span class="line">			background-color: skyblue;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;content&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;div id=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">		<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Index页面的内容<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;!-- js部分的内容 --&gt;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;script&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>最终的显示效果：</p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDB</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/MongoDB/</url>
    <content><![CDATA[<h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><h2 id="1-关系型和非关系型数据库"><a href="#1-关系型和非关系型数据库" class="headerlink" title="1.关系型和非关系型数据库"></a>1.关系型和非关系型数据库</h2><h3 id="关系型数据库（表就是关系，或者说表与表之间存在关系）"><a href="#关系型数据库（表就是关系，或者说表与表之间存在关系）" class="headerlink" title="关系型数据库（表就是关系，或者说表与表之间存在关系）"></a>关系型数据库（表就是关系，或者说表与表之间存在关系）</h3><ul>
<li>所有的关系型数据库都需要通过<code>sql</code>语言来操作</li>
<li>所有的关系型数据库在操作之前都需要设计表结构</li>
<li>而且数据表还支持约束<ul>
<li>唯一的</li>
<li>主键</li>
<li>默认值</li>
<li>非空</li>
</ul>
</li>
</ul>
<h3 id="非关系型数据库"><a href="#非关系型数据库" class="headerlink" title="非关系型数据库"></a>非关系型数据库</h3><ul>
<li>非关系型数据库非常的灵活</li>
<li>有的关系型数据库就是 key-value 对</li>
<li>但 MongDB 是长得最像关系型数据库的非关系型数据库<ul>
<li>数据库 -》 数据库</li>
<li>数据表 -》 集合（数组）</li>
<li>表记录 -》文档对象</li>
</ul>
</li>
<li>一个数据库中可以有多个数据库</li>
<li>一个数据库中可以有多个集合（数组）</li>
<li>一个集合中可以有多个文档（表记录）</li>
<li>文档解构很灵活，没有任何限制</li>
<li>mongoDB 非常灵活，不需要像 MySQL 一样先创建数据库、表、设计表结构<ul>
<li>当你需要插入数据的时候，只需要指定往那个数据库的哪个集合操作就可以了</li>
<li>一切都有 MongoDB 来帮你自动完成建库建表。。</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    qq:&#123;</span><br><span class="line">       user:[</span><br><span class="line">           &#123;&#125;,&#123;&#125;,&#123;&#125;...</span><br><span class="line">       ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>也就是说你可以任意的往里面存数据，没有结构性这么一说</li>
</ul>
<h3 id="存储结构"><a href="#存储结构" class="headerlink" title="存储结构"></a>存储结构</h3><ul>
<li>一个计算机上可以有一个数据库服务实例</li>
<li>一个数据服务实例上可以有多个数据库</li>
<li>一个数据库中可以有多个集合<ul>
<li>集合根据数据的业务类型划分</li>
<li>例如用户数据、商品信息数据、广告信息数据。。。</li>
<li>对数据进行分门别类的存储</li>
<li>集合在 MongoDB 中就类似于数组</li>
</ul>
</li>
<li>一个集合中可以有多个文档<ul>
<li>文档在 MongoDB 中就是一个 类似于 JSON 的数据对象</li>
<li>文档对象是动态的，可以随意的生成</li>
<li>为了便于管理，最好一个集合中存储的数据一定要保持文档结构的统一（数据完整性）</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  collection1: [</span><br><span class="line">    &#123; a: &#123; age: <span class="number">18</span>, name: &#x27;&#x27;, lsit: [], is: <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">    &#123; 文档2 &#125;,</span><br><span class="line">    &#123; 文档3 &#125;</span><br><span class="line">  ],</span><br><span class="line">  collection2: [],</span><br><span class="line">  collection3: [],</span><br><span class="line">  collection4: [],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h2><ul>
<li><p>下载</p>
<ul>
<li>下载地址：<a href="https://www.mongodb.com/download-center/community">https://www.mongodb.com/download-center/community</a></li>
</ul>
</li>
<li><p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i mongoose</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置环境变量</p>
</li>
<li><p>最后输入<code>mongod --version</code>测试是否安装成功</p>
</li>
</ul>
<h2 id="3-启动和关闭数据库"><a href="#3-启动和关闭数据库" class="headerlink" title="3.启动和关闭数据库"></a>3.启动和关闭数据库</h2><p>启动：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mongodb 默认使用执行mongod 命令所处盼复根目录下的/data/db作为自己的数据存储目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 所以在第一次执行该命令之前先自己手动新建一个 /data/db</span></span><br><span class="line">mongod</span><br></pre></td></tr></table></figure>

<p>如果想要修改默认的数据存储目录，可以：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongod --dbpath = 数据存储目录路径</span><br></pre></td></tr></table></figure>

<p>停止：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在开启服务的控制台，直接Ctrl+C;</span><br><span class="line">或者直接关闭开启服务的控制台。</span><br></pre></td></tr></table></figure>

<h2 id="4-连接数据库"><a href="#4-连接数据库" class="headerlink" title="4.连接数据库"></a>4.连接数据库</h2><p>连接：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 该命令默认连接本机的 MongoDB 服务</span></span><br><span class="line">mongo</span><br></pre></td></tr></table></figure>

<p>退出：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在连接状态输入 <span class="built_in">exit</span> 退出连接</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<h2 id="5-基本命令"><a href="#5-基本命令" class="headerlink" title="5.基本命令"></a>5.基本命令</h2><ul>
<li><p><code>show dbs</code></p>
<ul>
<li>查看数据库列表(数据库中的所有数据库)</li>
</ul>
</li>
<li><p><code>db</code></p>
</li>
<li><p>查看当前连接的数据库</p>
</li>
<li><p><code>use 数据库名称</code></p>
<ul>
<li>切换到指定的数据库，（如果没有会新建）</li>
</ul>
</li>
<li><p>插入数据</p>
</li>
<li><p><code>show collections</code></p>
</li>
<li><p>查看当前目录下的所有数据表</p>
</li>
<li><p><code>db.表名.find()</code></p>
<ul>
<li>查看表中的详细信息</li>
</ul>
</li>
<li><p><code>db.createCollection(&#39;student&#39;)</code></p>
<ul>
<li>创建</li>
</ul>
</li>
<li><p><code>db.student.find().pretty()</code></p>
<ul>
<li>查询转化json字符串</li>
</ul>
</li>
<li><p><code>db.student.distinct(&#39;条件&#39;)</code></p>
<ul>
<li>去重</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#39;age&#39;:18&#125;)</code></p>
<ul>
<li>条件查询{‘age’:18}</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#39;age&#39;:&#123;&quot;$lt&quot;:18&#125;&#125;)</code></p>
<ul>
<li>小于18</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#39;age&#39;:&#123;&quot;$gt&quot;:18&#125;&#125;)</code></p>
<ul>
<li>大于18</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#39;age&#39;:&#123;&quot;$lte&quot;:18&#125;&#125;)</code></p>
<ul>
<li>等于18</li>
</ul>
</li>
<li><p><code> db.student.find(&#123;&#39;age&#39;:&#123;&quot;$lt&quot;:18,&quot;$lte&quot;:12&#125;&#125;)</code></p>
<ul>
<li>小于18等于12</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#125;,&#123;&#39;name&#39;:1,&#39;age&#39;:1,&quot;_id&quot;:0&#125;)</code></p>
<ul>
<li>字段查询(包含)</li>
<li>“_id”:0 去除查询结果中的id</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;$or:[&#123;&#39;name&#39;:&#39;zs&#39;,&#39;age&#39;:18&#125;]&#125;)</code></p>
<ul>
<li>查询全部</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;$or:[&#123;&#39;name&#39;:&#39;zs&#39;,&#39;age&#39;:18&#125;]&#125;).limit(1)</code></p>
<ul>
<li>限制条数</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#39;age&#39;:&#123;&#39;$ne&#39;:18&#125;&#125;)</code></p>
<ul>
<li>不等于18</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#125;).count()</code></p>
<ul>
<li>查询的条数</li>
</ul>
</li>
<li><p><code>db.student.find(&#123;&#125;).limit(2).skip(4)</code></p>
<ul>
<li>第4条数据开始查询</li>
</ul>
</li>
<li><p><code>db.student.update(&#123;&#39;name&#39;:&#39;zs&#39;&#125;,&#123;$set:&#123;&#39;age&#39;:30&#125;&#125;)</code></p>
<ul>
<li>只修改第一条数据</li>
</ul>
</li>
<li><p><code>db.student.updateOne(&#123;&#39;name&#39;:&#39;zs&#39;&#125;,&#123;$set:&#123;&#39;sex&#39;:&#39;female&#39;&#125;&#125;)</code></p>
<ul>
<li>修改单个</li>
</ul>
</li>
<li><p><code> db.student.updateMany(&#123;&#39;name&#39;:&#39;zs&#39;&#125;,&#123;$set:&#123;&#39;sex&#39;:&#39;female&#39;&#125;&#125;)</code></p>
<ul>
<li>修改多个</li>
</ul>
</li>
<li><p><code> db.student.deleteOne(&#123;&#125;)</code></p>
<ul>
<li>删除一个</li>
</ul>
</li>
<li><p><code>db.student.deleteMany(&#123;条件&#125;)</code></p>
<ul>
<li>删除查询的条件</li>
</ul>
</li>
</ul>
<h2 id="6-在-Node-中如何操作-MongoDB-数据库"><a href="#6-在-Node-中如何操作-MongoDB-数据库" class="headerlink" title="6.在 Node 中如何操作 MongoDB 数据库"></a>6.在 Node 中如何操作 MongoDB 数据库</h2><h3 id="使用官方的MongoDB-包来操作"><a href="#使用官方的MongoDB-包来操作" class="headerlink" title="使用官方的MongoDB 包来操作"></a>使用官方的<code>MongoDB</code> 包来操作</h3><blockquote>
<p> <a href="http://mongodb.github.io/node-mongodb-native/">http://mongodb.github.io/node-mongodb-native/</a></p>
</blockquote>
<h3 id="使用第三方包-mongoose-来操作-MongoDB-数据库"><a href="#使用第三方包-mongoose-来操作-MongoDB-数据库" class="headerlink" title="使用第三方包 mongoose 来操作 MongoDB 数据库"></a>使用第三方包 <code>mongoose</code> 来操作 MongoDB 数据库</h3><p>第三方包：<code>mongoose</code>基于 MongoDB 官方的<code>mongodb</code>包再一次做了封装，名字叫<code>mongoose</code>，是 WordPress 项目团队开发的。</p>
<blockquote>
<p> <a href="https://mongoosejs.com/">https://mongoosejs.com/</a></p>
</blockquote>
<h2 id="7-学习指南（步骤）"><a href="#7-学习指南（步骤）" class="headerlink" title="7.学习指南（步骤）"></a>7.学习指南（步骤）</h2><blockquote>
<p>官方学习文档：<a href="http://www.mongoosejs.net/">http://www.mongoosejs.net/</a></p>
</blockquote>
<h3 id="设计-Scheme-发布-Model-（创建表）"><a href="#设计-Scheme-发布-Model-（创建表）" class="headerlink" title="设计 Scheme 发布 Model （创建表）"></a>设计 Scheme 发布 Model （创建表）</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.引包</span></span><br><span class="line"><span class="comment">// 注意：按照后才能require使用</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拿到schema图表</span></span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.连接数据库</span></span><br><span class="line"><span class="comment">// 指定连接数据库后不需要存在，当你插入第一条数据库后会自动创建数据库</span></span><br><span class="line">mongoose.connect(<span class="string">&#x27;mongodb://localhost/test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.设计集合结构（表结构）</span></span><br><span class="line"><span class="comment">// 用户表</span></span><br><span class="line"><span class="keyword">var</span> userSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  <span class="attr">username</span>: &#123;</span><br><span class="line">    <span class="comment">//姓名</span></span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">true</span>, <span class="comment">//添加约束，保证数据的完整性，让数据按规矩统一</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">password</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">email</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.将文档结构发布为模型</span></span><br><span class="line"><span class="comment">// mongoose.model方法就是用来将一个架构发布为 model</span></span><br><span class="line"><span class="comment">// 		第一个参数：传入一个大写名词单数字符串用来表示你的数据库的名称</span></span><br><span class="line"><span class="comment">// 					mongoose 会自动将大写名词的字符串生成 小写复数 的集合名称</span></span><br><span class="line"><span class="comment">// 					例如 这里会变成users集合名称</span></span><br><span class="line"><span class="comment">// 		第二个参数：架构</span></span><br><span class="line"><span class="comment">// 	返回值：模型构造函数</span></span><br><span class="line"><span class="keyword">var</span> User = mongoose.model(<span class="string">&#x27;User&#x27;</span>, userSchema)</span><br></pre></td></tr></table></figure>

<h3 id="添加（增）"><a href="#添加（增）" class="headerlink" title="添加（增）"></a>添加（增）</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 5.通过模型构造函数对User中的数据进行操作</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> User(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">  <span class="attr">email</span>: <span class="string">&#x27;xiaochen@qq.com&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">user.save(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;保存失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;保存成功&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="删除（删）"><a href="#删除（删）" class="headerlink" title="删除（删）"></a>删除（删）</h3><p>根据条件删除所有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">User.remove(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;删除失败&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>根据条件删除一个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Model.findOneAndRemove(conditions,[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>根据 id 删除一个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User.findByIdAndRemove(id,[options],[callback]);</span><br></pre></td></tr></table></figure>

<h3 id="更新（改）"><a href="#更新（改）" class="headerlink" title="更新（改）"></a>更新（改）</h3><p>更新所有：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User.remove(conditions,doc,[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>根据指定条件更新一个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User.FindOneAndUpdate([conditions],[update],[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>根据 id 更新一个：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 更新	根据id来修改表数据</span></span><br><span class="line">User.findByIdAndUpdate(</span><br><span class="line">  <span class="string">&#x27;5e6c5264fada77438c45dfcd&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;junjun&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;更新失败&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;更新成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="查询（查）"><a href="#查询（查）" class="headerlink" title="查询（查）"></a>查询（查）</h3><p>查询所有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询所有</span></span><br><span class="line">User.find(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;查询失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>条件查询所有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据条件查询</span></span><br><span class="line">User.find(&#123; <span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;查询失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>条件查询单个：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 按照条件查询单个，查询出来的数据是一个对象（&#123;&#125;）</span></span><br><span class="line"><span class="comment">// 没有条件查询使用findOne方法，查询的是表中的第一条数据</span></span><br><span class="line">User.findOne(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;查询失败&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>与 findOne 相同，但它接收文档的 _id 作为参数，返回单个文档。_id 可以是字符串或 ObjectId 对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">User.findById(req.params.Id, <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> next(err)</span><br><span class="line">    &#125;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">      <span class="attr">err_code</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">result</span>: result</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>Node 中的其他成员</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/Node%20%E4%B8%AD%E7%9A%84%E5%85%B6%E4%BB%96%E6%88%90%E5%91%98/</url>
    <content><![CDATA[<h1 id="Node-中的其他成员（dirname，filename）"><a href="#Node-中的其他成员（dirname，filename）" class="headerlink" title="Node 中的其他成员（dirname，filename）"></a>Node 中的其他成员（dirname，filename）</h1><p>在每个模块中，除了<code>require</code>,<code>exports</code>等模块相关的 API 之外，还有两个特殊的成员：</p>
<ul>
<li><code>__dirname</code>，是一个成员，可以用来<strong>动态</strong>获取当前文件模块所属目录的绝对路径</li>
<li><code>__filename</code>，可以用来<strong>动态</strong>获取当前文件的绝对路径（包含文件名）</li>
<li><code>__dirname</code>和<code>filename</code>是不受执行 node 命令所属路径影响的</li>
</ul>
<p>在文件操作中，使用相对路径是不可靠的，因为 node 中文件操作的路径被设计为相对于执行 node 命令所处的路径。</p>
<p>所以为了解决这个问题，只需要把相对路径变为绝对路径（绝对路径不受任何影响）就可以了。</p>
<p>就可以使用<code>__dirname</code>或者<code>__filename</code>来帮助我们解决这个问题</p>
<p>在拼接路径的过程中，为了避免手动拼接带来的一些低级错误，推荐使用<code>path.join()</code>来辅助拼接</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(__dirname + &#x27;a.txt&#x27;);</span></span><br><span class="line"><span class="comment">// path.join方法会将文件操作中的相对路径都统一的转为动态的绝对路径</span></span><br><span class="line">fs.readFile(path.join(__dirname + <span class="string">&#x27;/a.txt&#x27;</span>), <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>补充：模块中的路径标识和这里的路径没关系，不受影响（就是相对于文件模块）</p>
</blockquote>
<blockquote>
<p><strong>注意：</strong></p>
<p><strong>模块中的路径标识和文件操作中的相对路径标识不一致</strong></p>
<p><strong>模块中的路径标识就是相对于当前文件模块，不受 node 命令所处路径影响</strong></p>
</blockquote>
<h2 id="path路径操作模块"><a href="#path路径操作模块" class="headerlink" title="path路径操作模块"></a>path路径操作模块</h2><blockquote>
<p>参考文档：<a href="https://nodejs.org/docs/latest-v13.x/api/path.html">https://nodejs.org/docs/latest-v13.x/api/path.html</a></p>
</blockquote>
<ul>
<li>path.basename：获取路径的文件名，默认包含扩展名</li>
<li>path.dirname：获取路径中的目录部分</li>
<li>path.extname：获取一个路径中的扩展名部分</li>
<li>path.parse：把路径转换为对象<ul>
<li>root：根路径</li>
<li>dir：目录</li>
<li>base：包含后缀名的文件名</li>
<li>ext：后缀名</li>
<li>name：不包含后缀名的文件名</li>
</ul>
</li>
<li>path.join：拼接路径</li>
<li>path.isAbsolute：判断一个路径是否为绝对路径</li>
</ul>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>介绍</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/Node%20%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<h1 id="1-Node-介绍"><a href="#1-Node-介绍" class="headerlink" title="1.Node 介绍"></a>1.Node 介绍</h1><h2 id="1-1-为什么要学习-Node-js"><a href="#1-1-为什么要学习-Node-js" class="headerlink" title="1.1.为什么要学习 Node.js"></a>1.1.为什么要学习 Node.js</h2><p>企业需求</p>
<ul>
<li>具有服务端开发经验更改</li>
<li>front-end</li>
<li>back-end</li>
<li>全栈开发工程师</li>
<li>基本的网站开发能力<ul>
<li>服务端</li>
<li>前端</li>
<li>运维部署</li>
</ul>
</li>
<li>多人社区</li>
</ul>
<h2 id="1-2-Node-js-是什么"><a href="#1-2-Node-js-是什么" class="headerlink" title="1.2.Node.js 是什么"></a>1.2.Node.js 是什么</h2><ul>
<li>Node.js 是 JavaScript 运行时</li>
<li>通俗易懂的讲，Node.js 是 JavaScript 的运行平台</li>
<li>Node.js 既不是语言，也不是框架，它是一个平台</li>
<li>浏览器中的 JavaScript<ul>
<li>EcmaScript<ul>
<li>基本语法</li>
<li>if</li>
<li>var</li>
<li>function</li>
<li>Object</li>
<li>Array</li>
</ul>
</li>
<li>Bom</li>
<li>Dom</li>
</ul>
</li>
<li>Node.js 中的 JavaScript<ul>
<li>没有 Bom，Dom</li>
<li>EcmaScript</li>
<li>在 Node 中这个 JavaScript 执行环境为 JavaScript 提供了一些服务器级别的 API<ul>
<li>例如文件的读写</li>
<li>网络服务的构建</li>
<li>网络通信</li>
<li>http 服务器</li>
</ul>
</li>
</ul>
</li>
<li>构建与 Chrome 的 V8 引擎之上<ul>
<li>代码只是具有特定格式的字符串</li>
<li>引擎可以认识它，帮你解析和执行</li>
<li>Google Chrome 的 V8 引擎是目前公认的解析执行 JavaScript 代码最快的</li>
<li>Node.js 的作者把 Google Chrome 中的 V8 引擎移植出来，开发了一个独立的 JavaScript 运行时环境</li>
</ul>
</li>
<li>Node.js uses an envent-driven,non-blocking I/O mode that makes it lightweight and efficent.<ul>
<li>envent-driven 事件驱动</li>
<li>non-blocking I/O mode 非阻塞 I/O 模型（异步）</li>
<li>ightweight and efficent. 轻量和高效</li>
</ul>
</li>
<li>Node.js package ecosystem,npm,is the larget scosystem of open sourcr libraries in the world<ul>
<li>npm 是世界上最大的开源生态系统</li>
<li>绝大多数 JavaScript 相关的包都存放在 npm 上，这样做的目的是为了让开发人员更方便的去下载使用</li>
<li>npm install jquery</li>
</ul>
</li>
</ul>
<h2 id="1-3-Node-能做什么"><a href="#1-3-Node-能做什么" class="headerlink" title="1.3.Node 能做什么"></a>1.3.Node 能做什么</h2><ul>
<li>web 服务器后台</li>
<li>命令行工具<ul>
<li>npm(node)</li>
<li>git(c 语言)</li>
<li>hexo（node）</li>
<li>…</li>
</ul>
</li>
<li>对于前端工程师来讲，接触最多的是它的命令行工具<ul>
<li>自己写的很少，主要是用别人第三方的</li>
<li>webpack</li>
<li>gulp</li>
<li>npm</li>
</ul>
</li>
</ul>
<h1 id="2-起步"><a href="#2-起步" class="headerlink" title="2.起步"></a>2.起步</h1><h2 id="2-1-安装-Node-环境"><a href="#2-1-安装-Node-环境" class="headerlink" title="2.1.安装 Node 环境"></a>2.1.安装 Node 环境</h2><ul>
<li>查看 Node 环境的版本号</li>
<li>下载：<a href="https://nodejs.org/en/">https://nodejs.org/en/</a></li>
<li>安装：<ul>
<li>傻瓜式安装，一路<code>next</code></li>
<li>安装过再次安装会升级</li>
</ul>
</li>
<li>确认 Node 环境是否安装成功<ul>
<li>查看 node 的版本号：<code>node --version</code></li>
<li>或者<code>node -v</code></li>
</ul>
</li>
<li>配置环境变量</li>
</ul>
<h2 id="2-2-解析执行-Javascript"><a href="#2-2-解析执行-Javascript" class="headerlink" title="2.2.解析执行 Javascript"></a>2.2.解析执行 Javascript</h2><ol>
<li>创建编写 JavaScript 脚本文件</li>
<li>打开终端，定位脚本文件的所属目录</li>
<li>输入<code>node 文件名</code>执行对应的文件</li>
</ol>
<p>注意：文件名不要用<code>node.js</code>来命名，也就是说除了<code>node</code>这个名字随便起，最好不要使用中文。</p>
<h2 id="2-3-文件的读写"><a href="#2-3-文件的读写" class="headerlink" title="2.3.文件的读写"></a>2.3.文件的读写</h2><p>文件读取:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//浏览器中的JavaScript是没有文件操作能力的</span></span><br><span class="line"><span class="comment">//但是Node中的JavaScript具有文件操作能力</span></span><br><span class="line"><span class="comment">//fs是file-system的简写，就是文件系统的意思</span></span><br><span class="line"><span class="comment">//在Node中如果想要进行文件的操作就必须引用fs这个核心模块</span></span><br><span class="line"><span class="comment">//在fs这个核心模块中，就提供了人所有文件操作相关的API</span></span><br><span class="line"><span class="comment">//例如 fs.readFile就是用来读取文件的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  1.使用fs核心模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.读取文件</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件读取失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>文件写入：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  1.使用fs核心模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.将数据写入文件</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="string">&#x27;我是文件写入的信息&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件写入失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="2-4-http"><a href="#2-4-http" class="headerlink" title="2.4.http"></a>2.4.http</h2><p>服务器：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.加载http核心模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.使用http.createServer()创建一个web服务器</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.服务器要做的事儿</span></span><br><span class="line"><span class="comment">// 提供服务：对数据服务</span></span><br><span class="line"><span class="comment">// 发请求</span></span><br><span class="line"><span class="comment">//	接收请求</span></span><br><span class="line"><span class="comment">//	处理请求</span></span><br><span class="line"><span class="comment">//	反馈（发送响应）</span></span><br><span class="line"><span class="comment">//	当客户端请求过来，就会自动触发服务器的request请求事件，然后执行第二个参数：回调处理函数</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;收到客户的请求了&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.绑定端口号，启动服务</span></span><br><span class="line">server.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>Yarn</title>
    <url>/taiaiac.gitee.io/2021/01/12/Node.js/Yarn/</url>
    <content><![CDATA[<h3 id="Yarn"><a href="#Yarn" class="headerlink" title="Yarn"></a>Yarn</h3><p>Yarn 是一个 Facebook 开源的一个类似于 npm 的一个包管理工具，也就是 npm 能做的，<br>yarn 也能做。</p>
<p>安装：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g yarn</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># npm init</span></span><br><span class="line">yarn init</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm install --save 包名</span></span><br><span class="line">yarn add 包名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 离线安装</span></span><br><span class="line">yarn add 包名@版本号 --offline</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm install</span></span><br><span class="line">yarn install</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm uninstall 包名</span></span><br><span class="line">yarn remove 包名</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm install -g 包名</span></span><br><span class="line">yarn global add 包名</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm uninstall -g 包名</span></span><br><span class="line">yarn global remove 包名</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>Node中的模块系统</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/Node%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<h1 id="Node-中的模块系统"><a href="#Node-中的模块系统" class="headerlink" title="Node 中的模块系统"></a>Node 中的模块系统</h1><p>使用 Node 编写应用程序主要就是在使用：</p>
<ul>
<li>EcmaScript 语言<ul>
<li>没有 Bom 和 Dom</li>
</ul>
</li>
<li>核心模块<ul>
<li>文件操作的 fs</li>
<li>http 服务操作的 http</li>
<li>url 路径操作模块</li>
<li>path 路径处理模块</li>
<li>os 操作系统信息</li>
</ul>
</li>
<li>第三方模块<ul>
<li>art-template</li>
<li>必须通过 npm 来下载才可以使用</li>
</ul>
</li>
<li>自己写的模块<ul>
<li>自己创建的文件</li>
</ul>
</li>
</ul>
<h2 id="什么是模块化"><a href="#什么是模块化" class="headerlink" title="什么是模块化"></a>什么是模块化</h2><ul>
<li>文件作用域(模块是独立的，在不同的文件使用必须要重新引用)【在 node 中没有全局作用域，它是文件模块作用域】</li>
<li>通信规则<ul>
<li>加载 require</li>
<li>导出 exports</li>
</ul>
</li>
</ul>
<h2 id="CommomJS-模块规范"><a href="#CommomJS-模块规范" class="headerlink" title="CommomJS 模块规范"></a>CommomJS 模块规范</h2><p>在 Node 中的 JavaScript 还有一个重要的概念，模块系统。</p>
<ul>
<li><p>模块作用域</p>
</li>
<li><p>使用 require 方法来加载模块</p>
</li>
<li><p>使用 exports 接口对象来导出模板中的成员</p>
<h3 id="加载require"><a href="#加载require" class="headerlink" title="加载require"></a>加载<code>require</code></h3><p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> 自定义变量名 = <span class="built_in">require</span>(<span class="string">&#x27;模块&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>作用：</p>
<ul>
<li>执行被加载模块中的代码</li>
<li>得到被加载模块中的<code>exports</code>导出接口对象</li>
</ul>
<h3 id="导出exports"><a href="#导出exports" class="headerlink" title="导出exports"></a>导出<code>exports</code></h3><ul>
<li><p>Node 中是模块作用域，默认文件中所有的成员只在当前模块有效</p>
</li>
<li><p>对于希望可以被其他模块访问到的成员，我们需要把这些公开的成员都挂载到<code>exports</code>接口对象中就可以了</p>
<p>导出多个成员（必须在对象中）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.a = <span class="number">123</span></span><br><span class="line"><span class="built_in">exports</span>.b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;bbb&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exports</span>.c = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exports</span>.d = <span class="string">&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure>

<p>导出单个成员（拿到的就是函数，字符串）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure>

<p>以下情况会覆盖：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment">//后者会覆盖前者</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以通过以下方法来导出多个成员：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    foo = <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">add</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x+y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="模块原理"><a href="#模块原理" class="headerlink" title="模块原理"></a>模块原理</h2><p>exports 和<code>module.exports</code>的一个引用：</p>
<p>module.exports 是 require 后 return module.exports 里的内容</p>
<p>module.exports 始终指向文件导出内存</p>
<p>给 exports 赋值会断开和 module.exports 之间的引用<br>同理，给 module.exports 重新赋值也会断开</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">exports</span> === <span class="built_in">module</span>.exports);	<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="built_in">module</span>.exports.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line">当给<span class="built_in">exports</span>重新赋值后，<span class="built_in">exports</span>！= <span class="built_in">module</span>.exports.</span><br><span class="line">最终<span class="keyword">return</span>的是<span class="built_in">module</span>.exports,无论<span class="built_in">exports</span>中的成员是什么都没用。</span><br><span class="line">真正去使用的时候：</span><br><span class="line">导出多个成员：<span class="built_in">exports</span>.xxx = xxx</span><br><span class="line">导出多个成员也可以：<span class="built_in">module</span>.exports = &#123;&#125;</span><br><span class="line">导出单个成员：<span class="built_in">module</span>.exports = xxx</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用服务</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 引用模板</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建服务</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="comment">// 公共路径</span></span><br><span class="line"><span class="keyword">var</span> wwwDir = <span class="string">&#x27;D:/app/www&#x27;</span>;</span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = req.url;</span><br><span class="line">    <span class="comment">// 读取文件</span></span><br><span class="line">    fs.readFile(<span class="string">&#x27;./template-apche.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.end(<span class="string">&#x27;404 Not Found&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        fs.readdir(wwwDir, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.end(<span class="string">&#x27;Can not find www Dir.&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 使用模板引擎解析替换data中的模板字符串</span></span><br><span class="line">            <span class="comment">// 去xmpTempleteList.html中编写模板语法</span></span><br><span class="line">            <span class="keyword">var</span> htmlStr = template.render(data.toString(), &#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;D:/app/www/ 的索引&#x27;</span>,</span><br><span class="line">                <span class="attr">files</span>:files</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// 发送响应数据</span></span><br><span class="line">            res.end(htmlStr);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running....&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="number">1.</span>jQuery中的each 和 原生JavaScript方法forEach的区别：</span><br><span class="line">	提供源头：</span><br><span class="line">    	原生js是es5提供的（不兼容IE8）,</span><br><span class="line">        jQuery的each是jQuery第三方库提供的（如果要使用需要用<span class="number">2</span>以下的版本也就是<span class="number">1.</span>版本）,它的each方法主要用来遍历jQuery实例对象（伪数组）,同时也可以做低版本forEach的替代品,jQuery的实例对象不能使用forEach方法，如果想要使用必须转为数组（[].slice.call(jQuery实例对象)）才能使用</span><br><span class="line"><span class="number">2.</span>模块中导出多个成员和导出单个成员</span><br><span class="line"><span class="number">3.301</span>和<span class="number">302</span>的区别：</span><br><span class="line">	<span class="number">301</span>永久重定向,浏览器会记住</span><br><span class="line">    <span class="number">302</span>临时重定向</span><br><span class="line"><span class="number">4.</span><span class="built_in">exports</span>和<span class="built_in">module</span>.exports的区别:</span><br><span class="line">	每个模块中都有一个<span class="built_in">module</span>对象</span><br><span class="line">    <span class="built_in">module</span>对象中有一个<span class="built_in">exports</span>对象</span><br><span class="line">    我们可以把需要导出的成员都挂载到<span class="built_in">module</span>.exports接口对象中</span><br><span class="line">	也就是<span class="string">`module.exports.xxx = xxx`</span>的方式</span><br><span class="line">    但是每次写太多了就很麻烦，所以Node为了简化代码，就在每一个模块中都提供了一个成员叫<span class="string">`exports`</span></span><br><span class="line">    <span class="string">`exports === module.exports`</span>结果为<span class="literal">true</span>,所以完全可以<span class="string">`exports.xxx = xxx`</span></span><br><span class="line">    当一个模块需要导出单个成员的时候必须使用<span class="string">`module.exports = xxx`</span>的方式，=,使用<span class="string">`exports = xxx`</span>不管用,因为每个模块最终<span class="keyword">return</span>的是<span class="built_in">module</span>.exports,而<span class="built_in">exports</span>只是<span class="built_in">module</span>.exports的一个引用,所以<span class="string">`exports`</span>即使重新赋值,也不会影响<span class="string">`module.exports`</span>。</span><br><span class="line">    有一种赋值方式比较特殊：<span class="string">`exports = module.exports`</span>这个用来新建立引用关系的。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="require-的加载规则"><a href="#require-的加载规则" class="headerlink" title="require 的加载规则"></a>require 的加载规则</h1><ul>
<li>核心模块<ul>
<li>模块名</li>
</ul>
</li>
<li>第三方模块<ul>
<li>模块名</li>
</ul>
</li>
<li>用户自己写的<ul>
<li>路径</li>
</ul>
</li>
</ul>
<h2 id="require-的加载规则-1"><a href="#require-的加载规则-1" class="headerlink" title="require 的加载规则"></a>require 的加载规则</h2><ul>
<li><p>优先从缓存加载</p>
</li>
<li><p>判断模块标识符</p>
<ul>
<li><p>核心模块</p>
</li>
<li><p>自己写的模块（路径形式的模块）</p>
</li>
<li><p>第三方模块（node_modules）</p>
<ul>
<li><p>第三方模块的标识就是第三方模块的名称（不可能有第三方模块和核心模块的名字一致）</p>
</li>
<li><p>npm</p>
<ul>
<li>开发人员可以把写好的框架库发布到 npm 上</li>
<li>使用者通过 npm 命令来下载</li>
</ul>
</li>
<li><p>使用方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 名称 = <span class="built_in">require</span>(<span class="string">&#x27;npm install【下载包】 的包名&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>node_modules/express/package.json main</li>
<li>如果 package.json 或者 main 不成立，则查找被选择项：index.js</li>
<li>如果以上条件都不满足，则继续进入上一级目录中的 node_modules 按照上面的规则依次查找，直到当前文件所属此盘根目录都找不到最后报错</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果非路径形式的标识</span></span><br><span class="line"><span class="comment">// 路径形式的标识：</span></span><br><span class="line"><span class="comment">// ./  当前目录 不可省略</span></span><br><span class="line"><span class="comment">// ../  上一级目录  不可省略</span></span><br><span class="line"><span class="comment">//  /xxx也就是D:/xxx</span></span><br><span class="line"><span class="comment">// 带有绝对路径几乎不用（D:/a/foo.js）</span></span><br><span class="line"><span class="comment">// 首位表示的是当前文件模块所属磁盘根目录</span></span><br><span class="line"><span class="comment">// require(&#x27;./a&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 核心模块</span></span><br><span class="line"><span class="comment">// 核心模块本质也是文件，核心模块文件已经被编译到了二进制文件中了，我们只需要按照名字来加载就可以了</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三方模块</span></span><br><span class="line"><span class="comment">// 凡是第三方模块都必须通过npm下载（npm i node_modules），使用的时候就可以通过require(&#x27;包名&#x27;)来加载才可以使用</span></span><br><span class="line"><span class="comment">// 第三方包的名字不可能和核心模块的名字是一样的</span></span><br><span class="line"><span class="comment">// 既不是核心模块，也不是路径形式的模块</span></span><br><span class="line"><span class="comment">//      先找到当前文所述目录的node_modules</span></span><br><span class="line"><span class="comment">//      然后找node_modules/art-template目录</span></span><br><span class="line"><span class="comment">//      node_modules/art-template/package.json</span></span><br><span class="line"><span class="comment">//      node_modules/art-template/package.json中的main属性</span></span><br><span class="line"><span class="comment">//      main属性记录了art-template的入口模块</span></span><br><span class="line"><span class="comment">//      然后加载使用这个第三方包</span></span><br><span class="line"><span class="comment">//      实际上最终加载的还是文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//      如果package.json不存在或者mian指定的入口模块不存在</span></span><br><span class="line"><span class="comment">//      则node会自动找该目录下的index.js</span></span><br><span class="line"><span class="comment">//      也就是说index.js是一个备选项，如果main没有指定，则加载index.js文件</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 如果条件都不满足则会进入上一级目录进行查找</span></span><br><span class="line"><span class="comment">// 注意：一个项目只有一个node_modules，放在项目根目录中，子目录可以直接调用根目录的文件</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="模块标识中的-和文件操作路径中的"><a href="#模块标识中的-和文件操作路径中的" class="headerlink" title="模块标识中的 / 和文件操作路径中的 /"></a>模块标识中的 <code>/</code> 和文件操作路径中的 <code>/</code></h2><p>文件操作路径：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 咱们所使用的所有文件操作的API都是异步的</span></span><br><span class="line"><span class="comment">// 就像ajax请求一样</span></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="comment">// 文件操作中 ./ 相当于当前模块所处磁盘根目录</span></span><br><span class="line"><span class="comment">// ./index.txt    相对于当前目录</span></span><br><span class="line"><span class="comment">// /index.txt    相对于当前目录</span></span><br><span class="line"><span class="comment">// /index.txt   绝对路径,当前文件模块所处根目录</span></span><br><span class="line"><span class="comment">// d:express/index.txt   绝对路径</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./index.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>模块操作路径：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在模块加载中，相对路径中的./不能省略</span></span><br><span class="line"><span class="comment">// 这里省略了.也是磁盘根目录</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./index&#x27;</span>)(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>jsonp跨域</title>
    <url>/taiaiac.gitee.io/2021/01/12/Node.js/jsonp%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<h2 id="Jsonp是什么？"><a href="#Jsonp是什么？" class="headerlink" title="Jsonp是什么？"></a>Jsonp是什么？</h2><ul>
<li>JSON可被原生js支持</li>
<li>存在于html中的标签属性中（天生支持跨域）<ul>
<li><code>&lt;img src=&quot;&quot; /&gt;</code></li>
<li><code>&lt;link href=&quot;&quot;&gt;</code></li>
<li><code>&lt;script src=&quot;&quot; /&gt;</code></li>
<li>等等。。。</li>
</ul>
</li>
<li>通过json数据格式传递数据</li>
<li>一种非正式传输协议</li>
<li>允许用户传递一个callback参数给服务端，然后服务端返回数据时会将这个callback参数作为函数名来包裹住JSON数据，这样客户端就可以随意定制自己的函数来自动处理返回数据了。</li>
<li>只支持get请求</li>
</ul>
<h1 id="Html"><a href="#Html" class="headerlink" title="Html"></a>Html</h1><h2 id="客户端处理"><a href="#客户端处理" class="headerlink" title="客户端处理"></a>客户端处理</h2><p>动态创建<code>&lt;script&gt;</code>标签配置scr属性中的请求头，通过回调函数完成交互。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>jsonp - 示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 异步请求跨域限制（ajax）</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 不同域名、不同协议、不同端口号</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  jsonp(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:3000/&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="number">111</span>)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  jsonp(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:3000/&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="number">222</span>)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  jsonp(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:3000/&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="number">333</span>)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">option</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 将用户通过对象命名空间传递进来的函数挂载到全局</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> callbackName = <span class="string">&#x27;itcast_&#x27;</span> + <span class="built_in">Math</span>.random().toString().substr(<span class="number">2</span>) + <span class="built_in">Math</span>.random().toString().substr(<span class="number">2</span>)</span></span><br><span class="line"><span class="javascript">    <span class="comment">// !window.callbacks为true时，执行后面的代码</span></span></span><br><span class="line"><span class="javascript">    !<span class="built_in">window</span>.callbacks &amp;&amp; (<span class="built_in">window</span>.callbacks = &#123;&#125;)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.callbacks[callbackName] = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      option.success(data)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 这里才意味着可以删除 script 标签了</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 这里可以直接使用 script ，原因是下面的变量提升，而且等这里使用 script 的时候，下面的代码早就执行结束了</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.removeChild(script)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 1. 解决 url 问题</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 2. 解决回调处理函数问题</span></span></span><br><span class="line"><span class="javascript">    option.url = option.url + <span class="string">&#x27;?callback=callbacks.&#x27;</span> + callbackName</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    script.src = option.url</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 将 script 上到 DOM 中</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.body.appendChild(script)</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`收到客户端请求了：<span class="subst">$&#123;req.url&#125;</span>`</span>)</span><br><span class="line">  <span class="keyword">var</span> data = <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">    <span class="attr">list</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    res.end(<span class="string">`<span class="subst">$&#123;req.query.callback&#125;</span>(<span class="subst">$&#123;data&#125;</span>)`</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;running...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>node/nvm的安装使用</title>
    <url>/taiaiac.gitee.io/2021/01/04/Node.js/node-nvm%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="nvm的下载，安装与使用"><a href="#nvm的下载，安装与使用" class="headerlink" title="nvm的下载，安装与使用"></a>nvm的下载，安装与使用</h1><h2 id="1，nvm作用："><a href="#1，nvm作用：" class="headerlink" title="1，nvm作用："></a>1，nvm作用：</h2><p>进行nodejs版本控制</p>
<h2 id="2，nvm下载地址："><a href="#2，nvm下载地址：" class="headerlink" title="2，nvm下载地址："></a>2，nvm下载地址：</h2><ul>
<li><a href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a></li>
</ul>
<h2 id="3，nvm安装"><a href="#3，nvm安装" class="headerlink" title="3，nvm安装"></a>3，nvm安装</h2><ul>
<li>nvm-noinstall.zip： 这个是绿色免安装版本，但是使用之前需要配置</li>
<li>nvm-setup.zip：这是一个安装包，下载之后点击安装，无需配置就可以使用，方便。</li>
<li>Source code(zip)：zip压缩的源码</li>
<li>Sourc code(tar.gz)：tar.gz的源码，一般用于Linux系统</li>
</ul>
<p>安装步骤属于傻瓜式操作，一直next就行了，在此不做截图演示</p>
<h2 id="4，配置路径和下载源"><a href="#4，配置路径和下载源" class="headerlink" title="4，配置路径和下载源"></a>4，配置路径和下载源</h2><p>在nvm安装路径下setting.txt文件中配置如下信息：<br>设置nvm路径(相当于setting.txt中的root:)：<br>设置nodejs路径(相当于setting.txt中的path:)：<br>nvm node_mirror ：<a href="https://npm.taobao.org/mirrors/node/">https://npm.taobao.org/mirrors/node/</a><br>nvm npm_mirror ：<a href="https://npm.taobao.org/mirrors/npm/">https://npm.taobao.org/mirrors/npm/</a><br><img src="https://img-blog.csdnimg.cn/20190521094141670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NDAxNjQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="5，测试nvm"><a href="#5，测试nvm" class="headerlink" title="5，测试nvm"></a>5，测试nvm</h2><p>在电脑命令行输入nvm出现如下信息代表安装成功<br><img src="https://img-blog.csdnimg.cn/20190521094202813.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NDAxNjQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>nvm list</td>
<td>查看已经安装的版本</td>
</tr>
<tr>
<td>nvm list installed</td>
<td>查看已经安装的版本</td>
</tr>
<tr>
<td>nvm list available</td>
<td>查看网络可以安装的版本</td>
</tr>
<tr>
<td>nvm arch</td>
<td>查看当前系统的位数和当前nodejs的位数</td>
</tr>
<tr>
<td>nvm install [arch]</td>
<td>安装指定版本的node 并且可以指定平台 version 版本号 arch 平台</td>
</tr>
<tr>
<td>nvm on</td>
<td>打开nodejs版本控制</td>
</tr>
<tr>
<td>nvm off</td>
<td>关闭nodejs版本控制</td>
</tr>
<tr>
<td>nvm proxy [url]</td>
<td>查看和设置代理</td>
</tr>
<tr>
<td>nvm node_mirror [url]</td>
<td>设置或者查看setting.txt中的node_mirror，如果不设置的默认是 <a href="https://nodejs.org/dist/">https://nodejs.org/dist/</a></td>
</tr>
<tr>
<td>nvm npm_mirror [url]</td>
<td>设置或者查看setting.txt中的npm_mirror,如果不设置的话默认的是：<a href="https://github.com/npm/npm/archive/">https://github.com/npm/npm/archive/</a>.</td>
</tr>
<tr>
<td>nvm uninstall</td>
<td>卸载指定的版本</td>
</tr>
<tr>
<td>nvm use [version] [arch]</td>
<td>切换指定的node版本和位数</td>
</tr>
<tr>
<td>nvm root [path]</td>
<td>设置和查看root路径</td>
</tr>
<tr>
<td>nvm version</td>
<td>查看当前的版本</td>
</tr>
</tbody></table>
<h2 id="nvm的常用命令"><a href="#nvm的常用命令" class="headerlink" title="nvm的常用命令"></a>nvm的常用命令</h2><ol>
<li><code>nvm install node</code>：安装最新版的<code>node.js</code>。nvm i == nvm install。</li>
<li><code>nvm install [version]</code>：安装指定版本的<code>node.js</code> 。</li>
<li><code>nvm use [version]</code>：使用某个版本的<code>node</code>。</li>
<li><code>nvm list</code>：列出当前安装了哪些版本的<code>node</code>。</li>
<li><code>nvm uninstall [version]</code>：卸载指定版本的<code>node</code>。</li>
<li><code>nvm node_mirror [url]</code>：设置<code>nvm</code>的镜像。</li>
<li><code>nvm npm_mirror [url]</code>：设置<code>npm</code>的镜像</li>
</ol>
<h2 id="我的路径配置"><a href="#我的路径配置" class="headerlink" title="我的路径配置"></a>我的路径配置</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">C:\Users\<span class="number">52862</span>\AppData\Roaming\nvm</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>nodejs中babel配置</title>
    <url>/taiaiac.gitee.io/2021/01/07/Node.js/nodejs%E4%B8%ADbabel%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h3 id="Babel-Register"><a href="#Babel-Register" class="headerlink" title="Babel Register"></a>Babel Register</h3><p>第一：在项目根目录下创建一个 <code>.babelrc</code> 文件，写入以下内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二：安装对应的转码规则：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ES2015转码规则</span></span><br><span class="line">$ npm install --save-dev babel-preset-es2015</span><br><span class="line"></span><br><span class="line"><span class="comment"># react转码规则</span></span><br><span class="line">$ npm install --save-dev babel-preset-react</span><br><span class="line"></span><br><span class="line"><span class="comment"># ES7不同阶段语法提案的转码规则（共有4个阶段），选装一个</span></span><br><span class="line">$ npm install --save-dev babel-preset-stage-0</span><br><span class="line">$ npm install --save-dev babel-preset-stage-1</span><br><span class="line">$ npm install --save-dev babel-preset-stage-2</span><br><span class="line">$ npm install --save-dev babel-preset-stage-3</span><br></pre></td></tr></table></figure>

<p>第三：将 <code>.babelrc</code> 文件中修改为以下内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [<span class="string">&quot;es2015&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第四步（从第四步开始，前三部必不可少）：</p>
<ul>
<li>babel-cli：命令行转码</li>
<li>babel-node：babel-cli 工具自带一个 babel-node 命令，提供一个支持 ES6 的 REPL 环境</li>
<li>babel-register：实时转码，所以只适合在开发环境使用</li>
<li>babel-core：如果某些代码需要调用 Babel 的 API 进行转码，就要使用 babel-core 模块</li>
</ul>
<p>babel-cli：</p>
<p>一种使用方式就是全局安装：<code>npm install -g babel-cli</code>（可以通过 <code>npm root -g</code> 查看全局包安装目录），<br>只要全局安装了 <code>babel-cli</code>，则会在命令行中多出一个命令：<code>babel</code>。</p>
<p>这里如果使用全局安装的 <code>babel-cli</code> 进行转码是没有问题的，但是问题是如果一旦项目给了别人，<br>别人不知道你使用了这个转码工具，所以解决方式就是将 <code>babel-cli</code> 安装到本地项目中：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev babel-cli</span><br></pre></td></tr></table></figure>

<p>这种第三方命令行工具如果安装到本地项目，会在 <code>node_modules</code> 中生成一个目录：<code>.bin</code>，<br>然后第三方命令行工具会将对应的可执行文件放到该目录中。</p>
<p>这样的话，就可以直接在本地项目中使用该第三方命令行工具了。</p>
<p>对于如何使用，则可以通过配置 <code>package.json</code> 文件中的 <code>scripts</code> 字段来配置使用：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;babel-demo&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;babel demo1.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;babel-cli&quot;</span>: <span class="string">&quot;^6.22.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-preset-es2015&quot;</span>: <span class="string">&quot;^6.22.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-preset-react&quot;</span>: <span class="string">&quot;^6.22.0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>babel-register（适合开发阶段，实时编码转换）:</p>
<p>第一：安装 babel-register</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev babel-register</span><br></pre></td></tr></table></figure>

<p>第二：添加一个傀儡文件(main.js)：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;babel-register&#x27;</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;你的核心功能代码入口文件模块&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>第三：使用 node 执行 <code>main.js</code>，而不是你的入口文件.</p>
<h3 id="–save-和-–save-dev"><a href="#–save-和-–save-dev" class="headerlink" title="–save 和 –save-dev"></a>–save 和 –save-dev</h3><p>通过 <code>--save</code> 参数安装的包，是将依赖项保存到 package.json 文件中的 dependencies 选项中。<br>通过 <code>--save-dev</code> 参数安装的包，是将依赖项保存到 package.json 文件中的 devDependencies 选项中。</p>
<p>无论是 <code>--save</code> 或者 <code>--save-dev</code> 安装的包，通过执行 <code>npm install</code> 都会将对应的依赖包安装进来。</p>
<p>但是，在开发阶段会有一些仅仅用来辅助开发的一些第三方包或是工具，然后最终上线运行（到了生产环境），<br>这些开发依赖项就不再需要了，就可以通过 <code>npm install --production</code> 命令仅仅安装 <code>dependencies</code> 中的<br>依赖项。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>babel-register ：一次引用，好用省心</p>
<p>babel-cli  ： 手动转码，<code>babel</code> 命令</p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>node中使用MySQL</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/node%E4%B8%AD%E4%BD%BF%E7%94%A8MySQL/</url>
    <content><![CDATA[<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><blockquote>
<p>文档：<a href="https://www.npmjs.com/package/mysql">https://www.npmjs.com/package/mysql</a></p>
</blockquote>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save  mysql</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入mysql包</span></span><br><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>, <span class="comment">//本机</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;me&#x27;</span>, <span class="comment">//账号root</span></span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;secret&#x27;</span>, <span class="comment">//密码12345</span></span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;my_db&#x27;</span>, <span class="comment">//数据库名</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接数据库	（打开冰箱门）</span></span><br><span class="line">connection.connect()</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行数据操作	（把大象放到冰箱）</span></span><br><span class="line">connection.query(<span class="string">&#x27;SELECT * FROM `users` &#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error <span class="comment">//抛出异常阻止代码往下执行</span></span><br><span class="line">  <span class="comment">// 没有异常打印输出结果</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;The solution is: &#x27;</span>, results)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭连接	（关闭冰箱门）</span></span><br><span class="line">connection.end()</span><br></pre></td></tr></table></figure>

<h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>package中的参数</title>
    <url>/taiaiac.gitee.io/2021/01/07/Node.js/package%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;edu&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;app.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;node main.js&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;babel src -d dist&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prestart&quot;</span>: <span class="string">&quot;npm run build&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;node dist/app.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bootstrap&quot;</span>: <span class="string">&quot;^3.3.7&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;echarts&quot;</span>: <span class="string">&quot;^3.4.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;ejs&quot;</span>: <span class="string">&quot;^2.5.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;express&quot;</span>: <span class="string">&quot;^4.14.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;font-awesome&quot;</span>: <span class="string">&quot;^4.7.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;jquery&quot;</span>: <span class="string">&quot;^3.1.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;nprogress&quot;</span>: <span class="string">&quot;^0.2.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;babel-cli&quot;</span>: <span class="string">&quot;^6.22.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-preset-es2015&quot;</span>: <span class="string">&quot;^6.22.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-register&quot;</span>: <span class="string">&quot;^6.22.0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>“scripts”</code>运行指定</p>
<ul>
<li>“test”：测试指定</li>
<li>“dev”：开发环境运行指令</li>
<li>“build”：执行编译转码等操作，俗称打包</li>
<li>“prestart”：指令“start”之前的操作指令，在<code>npm start</code>之前执行</li>
<li>“start”：生产环境的运行指令，即运行编译后的代码</li>
<li>“poststart”：指令“start”之后的操作指令，在<code>npm start</code>之后执行</li>
</ul>
<p><code>&quot;dependencies&quot;</code>：生产环境依赖</p>
<p><code>&quot;devDependencies&quot;</code>：开发环境依赖</p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>npm</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/npm/</url>
    <content><![CDATA[<h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><ul>
<li>node package manage(node 包管理器)</li>
<li>通过 npm 命令安装 jQuery 包（npm install –save jquery），在安装时加上–save 会主动生成说明书文件信息（将安装文件的信息添加到 package.json 里面）</li>
</ul>
<h2 id="npm-网站"><a href="#npm-网站" class="headerlink" title="npm 网站"></a>npm 网站</h2><blockquote>
<p> npmjs.com 网站 是用来搜索 npm 包的</p>
</blockquote>
<h2 id="npm-命令行工具"><a href="#npm-命令行工具" class="headerlink" title="npm 命令行工具"></a>npm 命令行工具</h2><p>npm 是一个命令行工具，只要安装了 node 就已经安装了 npm。</p>
<p>npm 也有版本概念，可以通过<code>npm --version</code>来查看 npm 的版本</p>
<p>升级 npm(自己升级自己)：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install --global npm</span><br></pre></td></tr></table></figure>

<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul>
<li>npm init(生成 package.json 说明书文件)<ul>
<li>npm init -y(可以跳过向导，快速生成)</li>
</ul>
</li>
<li>npm install<ul>
<li>一次性把 dependencies 选项中的依赖项全部安装</li>
<li>简写（npm i）</li>
</ul>
</li>
<li>npm install 包名<ul>
<li>只下载</li>
<li>简写（npm i 包名）</li>
</ul>
</li>
<li>npm install –save 包名<ul>
<li>下载并且保存依赖项（package.json 文件中的 dependencies 选项）</li>
<li>简写（npm i 包名）</li>
</ul>
</li>
<li>npm uninstall 包名<ul>
<li>只删除，如果有依赖项会依然保存</li>
<li>简写（npm un 包名）</li>
</ul>
</li>
<li>npm uninstall –save 包名<ul>
<li>删除的同时也会把依赖信息全部删除</li>
<li>简写（npm un 包名）</li>
</ul>
</li>
<li>npm help<ul>
<li>查看使用帮助</li>
</ul>
</li>
<li>npm 命令 –help<ul>
<li>查看具体命令的使用帮助（npm uninstall –help）</li>
</ul>
</li>
</ul>
<h2 id="解决-npm-被墙的问题"><a href="#解决-npm-被墙的问题" class="headerlink" title="解决 npm 被墙的问题"></a>解决 npm 被墙的问题</h2><p>npm 存储包文件的服务器在国外，有时候会被墙，速度很慢，所以需要解决这个问题。</p>
<blockquote>
<p><a href="https://developer.aliyun.com/mirror/NPM?from=tnpm%E6%B7%98%E5%AE%9D%E7%9A%84%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E6%8A%8Anpm%E5%9C%A8%E5%9B%BD%E5%86%85%E5%81%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E9%95%9C%E5%83%8F%EF%BC%88%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%87%E4%BB%BD%EF%BC%89%E3%80%82">https://developer.aliyun.com/mirror/NPM?from=tnpm淘宝的开发团队把npm在国内做了一个镜像（也就是一个备份）。</a></p>
</blockquote>
<p>安装淘宝的 cnpm：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https:<span class="comment">//registry.npm.taobao.org;</span></span><br><span class="line">#在任意目录执行都可以</span><br><span class="line">#--<span class="built_in">global</span>表示安装到全局，而非当前目录</span><br><span class="line">#--<span class="built_in">global</span>不能省略，否则不管用</span><br><span class="line">npm install --<span class="built_in">global</span> cnpm</span><br></pre></td></tr></table></figure>

<p>安装包的时候把以前的<code>npm</code>替换成<code>cnpm</code>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#走国外的npm服务器下载jQuery包，速度比较慢</span><br><span class="line">npm install jQuery;</span><br><span class="line"></span><br><span class="line">#使用cnpm就会通过淘宝的服务器来下载jQuery</span><br><span class="line">cnpm install jQuery;</span><br></pre></td></tr></table></figure>

<p>如果不想安装<code>cnpm</code>又想使用淘宝的服务器来下载：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install jquery --registry=https://npm.taobao.org;</span><br></pre></td></tr></table></figure>

<p>但是每次手动加参数就很麻烦，所以我们可以把这个选项加入到配置文件中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm config set registry https:<span class="comment">//npm.taobao.org;</span></span><br><span class="line"></span><br><span class="line">#查看npm配置信息</span><br><span class="line">npm config list;</span><br></pre></td></tr></table></figure>

<p>只要经过上面的配置命令，则以后所有的<code>npm install</code>都会通过淘宝的服务器来下载</p>
<h1 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h1><p>每一个项目都要有一个<code>package.json</code>文件（包描述文件，就像产品的说明书一样）</p>
<p>这个文件可以通过<code>npm init</code>自动初始化出来</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">D:\code\node中的模块系统&gt;npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See <span class="string">`npm help json`</span> <span class="keyword">for</span> definitive documentation on these fields</span><br><span class="line">and exactly what they <span class="keyword">do</span>.</span><br><span class="line"></span><br><span class="line">Use <span class="string">`npm install &lt;pkg&gt;`</span> afterwards to install a package and</span><br><span class="line">save it <span class="keyword">as</span> a dependency <span class="keyword">in</span> the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">package name: (node中的模块系统)</span><br><span class="line">Sorry, name can only contain URL-friendly characters.</span><br><span class="line">package name: (node中的模块系统) cls</span><br><span class="line"><span class="attr">version</span>: (<span class="number">1.0</span><span class="number">.0</span>)</span><br><span class="line"><span class="attr">description</span>: 这是一个测试项目</span><br><span class="line">entry point: (main.js)</span><br><span class="line">test command:</span><br><span class="line">git repository:</span><br><span class="line">keywords:</span><br><span class="line">author: xiaochen</span><br><span class="line"><span class="attr">license</span>: (ISC)</span><br><span class="line">About to write to D:\code\node中的模块系统\package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;cls&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;这是一个测试项目&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;xiaochen&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is <span class="built_in">this</span> OK? (yes) yes</span><br></pre></td></tr></table></figure>

<p>对于目前来讲，最有用的是<code>dependencies</code>选项，可以用来帮助我们保存第三方包的依赖信息。</p>
<p>如果<code>node_modules</code>删除了也不用担心，只需要在控制面板中<code>npm install</code>就会自动把<code>package.json</code>中的<code>dependencies</code>中所有的依赖项全部都下载回来。</p>
<ul>
<li>建议每个项目的根目录下都有一个<code>package.json</code>文件</li>
<li>建议执行<code>npm install 包名</code>的时候都加上<code>--save</code>选项，目的是用来保存依赖信息</li>
</ul>
<h2 id="package-json-和-package-lock-json"><a href="#package-json-和-package-lock-json" class="headerlink" title="package.json 和 package.lock.json"></a>package.json 和 package.lock.json</h2><p>npm 5 以前是不会有<code>package-lock.json</code>这个文件</p>
<p>npm5 以后才加入这个文件</p>
<p>当你安装包的时候，npm 都会生成或者更新<code>package-lock.json</code>这个文件</p>
<ul>
<li><p>npm5 以后的版本安装都不要加<code>--save</code>参数，它会自动保存依赖信息</p>
</li>
<li><p>当你安装包的时候，会自动创建或者更新<code>package-lock.json</code>文件</p>
</li>
<li><pre><code class="css">package-lock.json
里面会保存具体的包的版本号
</code></pre>
</li>
</ul>
<p>这个文件会包含<code>node_modules</code>中所有包的信息（版本，下载地址。。。）</p>
<ul>
<li><p>这样的话重新<code>npm install</code>的时候速度就可以提升</p>
</li>
<li><p>从文件来看，有一个<code>lock</code>称之为锁</p>
<ul>
<li>这个<code>lock</code>使用来锁版本的</li>
<li>如果项目依赖了<code>1.1.1</code>版本</li>
<li>如果你重新 install 其实会下载最新版本，而不是<code>1.1.1</code></li>
</ul>
</li>
<li><p><code>package-lock.json</code>的另外一个作用就是锁定版本号，防止自动升级</p>
</li>
</ul>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>url模块</title>
    <url>/taiaiac.gitee.io/2020/12/30/Node.js/url%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<p><img src="../imgs/image-20201018150415630.png" alt="image-20201018150415630"></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line"><span class="comment">// 解析请求路径</span></span><br><span class="line">url.parse(request.url, <span class="literal">true</span>)</span><br><span class="line"><span class="comment">// 取出路径</span></span><br><span class="line">url.parse(request.url, <span class="literal">true</span>).pathname</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="comment">// 引入url模块</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line"><span class="comment">// 引入外部模块（文件）</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;../util/utils.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定服务的ip和port</span></span><br><span class="line"><span class="keyword">const</span> ip = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">4000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用http模块创建服务</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 解析请求路径</span></span><br><span class="line">  <span class="keyword">let</span> reqUrl = url.parse(request.url)</span><br><span class="line">  <span class="comment">// 取出路径</span></span><br><span class="line">  <span class="keyword">let</span> pathname = reqUrl.pathname</span><br><span class="line">  <span class="comment">// 获取后缀给出反应</span></span><br><span class="line">  <span class="keyword">if</span> (pathname === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    response.write(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/favicon.ico&#x27;</span>) &#123;</span><br><span class="line">    response.write(<span class="string">&#x27;favicon.ico&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 使用外部引入的函数解析</span></span><br><span class="line">    <span class="keyword">let</span> object = util.format(reqUrl.query)</span><br><span class="line">    <span class="comment">// 转化成json字符串显示页面</span></span><br><span class="line">    response.write(<span class="built_in">JSON</span>.stringify(object))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//表示响应结束</span></span><br><span class="line">  response.end(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定服务运行的端口号</span></span><br><span class="line">server.listen(port, ip, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Server is running on: &#x27;</span> + port + <span class="string">&#x27;!&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;http://127.0.0.1:4000&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>引入的文件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 把一个请求参数转换成对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-06</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>query：&#x27;username=tom&amp;password=123456&#x27;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span> <span class="type">&#123;username:&quot;tom&quot;,password:&quot;123456&quot;&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">query</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 创建一个空对象保存</span></span><br><span class="line">  <span class="keyword">let</span> object = &#123;&#125;</span><br><span class="line">  <span class="comment">// 判空</span></span><br><span class="line">  <span class="keyword">if</span> (!query) &#123;</span><br><span class="line">    <span class="keyword">return</span> object</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 数组保存分割的字符串</span></span><br><span class="line">  <span class="keyword">let</span> arr = query.split(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">  <span class="comment">// 遍历赋值</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 保存分割后的数组中的字符串</span></span><br><span class="line">    <span class="keyword">let</span> element = arr[i]</span><br><span class="line">    <span class="comment">// 二次分割成数组</span></span><br><span class="line">    <span class="keyword">let</span> arr1 = element.split(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">    <span class="comment">// 对象赋值，key和value</span></span><br><span class="line">    object[arr1[<span class="number">0</span>]] = arr1[<span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回对象</span></span><br><span class="line">  <span class="keyword">return</span> object</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出让文件可读</span></span><br><span class="line"><span class="built_in">exports</span>.format = format</span><br></pre></td></tr></table></figure>

<p>启动终端</p>
<p><img src="../imgs/image-20201006165108474.png" alt="image-20201006165108474"></p>
<p>浏览器打开</p>
<p><em><a href="http://127.0.0.1:4000/login?username=tom&amp;password=123456">http://127.0.0.1:4000/login?username=tom&amp;password=123456</a></em></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>) <span class="comment">// 引入http模块</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>) <span class="comment">//引入url模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;./node12_readFlie&#x27;</span>) <span class="comment">//引入外部文件</span></span><br><span class="line"><span class="keyword">const</span> query = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>) <span class="comment">//引入querystring解析模块</span></span><br><span class="line"><span class="keyword">const</span> log = <span class="built_in">console</span>.log</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并监听服务器</span></span><br><span class="line">http</span><br><span class="line">    .createServer(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//设置跨域</span></span><br><span class="line">        res.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">            <span class="comment">//解析地址</span></span><br><span class="line">        <span class="keyword">let</span> reqUrl = url.parse(req.url)</span><br><span class="line">            <span class="comment">// 解析路径</span></span><br><span class="line">        <span class="keyword">let</span> pathname = reqUrl.pathname</span><br><span class="line">        <span class="built_in">console</span>.log(pathname)</span><br><span class="line">    	...</span><br><span class="line">        ...</span><br><span class="line">        )</span><br><span class="line">    .listen(<span class="number">5000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Server is running on http://127.0.0.1:5000&#x27;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>使用nodejs发送邮件</title>
    <url>/taiaiac.gitee.io/2021/01/28/Node.js/%E4%BD%BF%E7%94%A8nodejs%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="nodemailer介绍"><a href="#nodemailer介绍" class="headerlink" title="nodemailer介绍"></a><strong>nodemailer介绍</strong></h2><p><code>nodemailer</code>是一个发送邮件npm包，我们可以使用它方便快捷的给任何人发送邮件。</p>
<p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i nodemailer</span><br></pre></td></tr></table></figure>



<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nodemailer = <span class="built_in">require</span>(<span class="string">&#x27;nodemailer&#x27;</span>)</span><br><span class="line"><span class="comment">// 发送邮件函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">sendMail</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> user = <span class="string">&#x27;xxx@qq.com&#x27;</span> <span class="comment">//自己的邮箱</span></span><br><span class="line">  <span class="keyword">var</span> pass = <span class="string">&#x27;xxx&#x27;</span> <span class="comment">//qq邮箱授权码,设置=》账户</span></span><br><span class="line">  <span class="keyword">var</span> to = <span class="string">&#x27;xxx@qq.com&#x27;</span> <span class="comment">//对方的邮箱</span></span><br><span class="line">  <span class="keyword">let</span> transporter = nodemailer.createTransport(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;smtp.qq.com&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">587</span>,</span><br><span class="line">    <span class="attr">secure</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">auth</span>: &#123;</span><br><span class="line">      <span class="attr">user</span>: user, <span class="comment">// 用户账号</span></span><br><span class="line">      <span class="attr">pass</span>: pass <span class="comment">//授权码,通过QQ获取</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> info = <span class="keyword">await</span> transporter.sendMail(&#123;</span><br><span class="line">    <span class="attr">from</span>: <span class="string">`自定义文字&lt;<span class="subst">$&#123;user&#125;</span>&gt;`</span>, <span class="comment">// 发送方</span></span><br><span class="line">    <span class="attr">to</span>: <span class="string">`自定义文字&lt;<span class="subst">$&#123;to&#125;</span>&gt;`</span>, <span class="comment">// 接收方</span></span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;自定义文字&#x27;</span>, <span class="comment">// 主题</span></span><br><span class="line">    <span class="attr">text</span>: text <span class="comment">// 邮件内容</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(info)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;发送成功&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试一下</span></span><br><span class="line"> sendMail(<span class="string">&#x27;你好，世界！&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><h4 id="随机情话（彩虹屁）接口"><a href="#随机情话（彩虹屁）接口" class="headerlink" title="随机情话（彩虹屁）接口"></a>随机情话（彩虹屁）接口</h4><p><a href="https://chp.shadiao.app/api.php">https://chp.shadiao.app/api.php</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getHoneyedWords</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//获取这个接口的信息</span></span><br><span class="line">  <span class="keyword">return</span> Axios.get(<span class="string">&#x27;https://chp.shadiao.app/api.php&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取情话</span></span><br><span class="line">getHoneyedWords().then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res.data)</span><br><span class="line">  <span class="comment">//发送邮件</span></span><br><span class="line">  sendMail(res.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="定时插件"><a href="#定时插件" class="headerlink" title="定时插件"></a><strong>定时插件</strong></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i node-schedule</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">&quot;node-schedule&quot;</span>);</span><br><span class="line"><span class="comment">//每天下午5点21分发送</span></span><br><span class="line">schedule.scheduleJob(&#123; <span class="attr">hour</span>: <span class="number">17</span>, <span class="attr">minute</span>: <span class="number">21</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;启动任务:&quot;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">  getHoneyedWords().then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.data);</span><br><span class="line">    sendMail(res.data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>修改完代码自动重启</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/%E4%BF%AE%E6%94%B9%E5%AE%8C%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF/</url>
    <content><![CDATA[<h2 id="修改完代码自动重启"><a href="#修改完代码自动重启" class="headerlink" title="修改完代码自动重启"></a>修改完代码自动重启</h2><p>我们在这里可以使用一个第三方命名行工具：<code>nodemon</code>来帮助我们解决频繁修改代码重启服务器的问题。</p>
<p><code>nodemon</code>是一个基于 Node.js 开发的一个第三方命令行工具，我们使用的时候需要独立安装：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#在任意目录执行该命令都可以</span><br><span class="line">#也就是说，所有需要 --<span class="built_in">global</span>安装的包都可以在任意目录执行</span><br><span class="line">npm install --<span class="built_in">global</span> nodemon</span><br><span class="line">npm install -g nodemon</span><br><span class="line"></span><br><span class="line">#如果安装不成功的话，可以使用cnpm安装</span><br><span class="line">cnpm install -g nodemon</span><br></pre></td></tr></table></figure>

<p>安装完毕之后使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node app.js</span><br><span class="line"></span><br><span class="line">#使用nodemon</span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure>

<p>只要是通过<code>nodemon</code>启动的服务，则他会监视你的文件变化，当文件发生变化的时候，会自动帮你重启服务器。</p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>封装异步API</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/%E5%B0%81%E8%A3%85%E5%BC%82%E6%AD%A5API/</url>
    <content><![CDATA[<h2 id="封装异步-API"><a href="#封装异步-API" class="headerlink" title="封装异步 API"></a>封装异步 API</h2><p>回调函数：获取异步操作的结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// var callback = funtion(data)&#123; console.log(data); &#125;</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    callback(data)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果需要获取一个函数中异步操作的结果，则必须通过回调函数的方式来获取</span></span><br><span class="line">fn(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>文件上传插件</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="在-Node-中使用-formidable-处理文件上传"><a href="#在-Node-中使用-formidable-处理文件上传" class="headerlink" title="在 Node 中使用 formidable 处理文件上传"></a>在 Node 中使用 formidable 处理文件上传</h1><blockquote>
<p>具体使用方式参照官方文档：<a href="https://www.npmjs.com/package/formidable">https://www.npmjs.com/package/formidable</a></p>
</blockquote>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install formidable</span><br><span class="line">yarn add formidable</span><br></pre></td></tr></table></figure>



<h3 id="使用fromData"><a href="#使用fromData" class="headerlink" title="使用fromData"></a>使用fromData</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">   有文件的表单提交：</span></span><br><span class="line"><span class="comment">     1. method 必须是 post</span></span><br><span class="line"><span class="comment">     2. 必须将表单的 enctype 设置为 multipart/form-data，否则文件不传输</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">   头像：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用formidable插件"><a href="#使用formidable插件" class="headerlink" title="使用formidable插件"></a>使用formidable插件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> formidable = <span class="built_in">require</span>(<span class="string">&#x27;formidable&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里处理具有文件提交的表单，使用一个第三方包：formidable</span></span><br><span class="line">app.post(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 解析文件上传 </span></span><br><span class="line">  <span class="keyword">const</span> form = <span class="keyword">new</span> formidable.IncomingForm()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 指定上传路径</span></span><br><span class="line">  form.uploadDir = <span class="string">&#x27;./upload&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 保持原来的扩展名</span></span><br><span class="line">  form.keepExtensions = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// err 就是可能发生的错误对象</span></span><br><span class="line">  <span class="comment">// fields 就是普通的表单字段</span></span><br><span class="line">  <span class="comment">// files 就是文件内容数据信息</span></span><br><span class="line">  form.parse(req, <span class="function">(<span class="params">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// console.log(fields)</span></span><br><span class="line">    <span class="built_in">console</span>.log(files)</span><br><span class="line">    res.end(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> formidable = <span class="built_in">require</span>(<span class="string">&#x27;formidable&#x27;</span>),</span><br><span class="line">    http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>),</span><br><span class="line">    util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (req.url == <span class="string">&#x27;/upload&#x27;</span> &amp;&amp; req.method.toLowerCase() == <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 解析文件上传</span></span><br><span class="line">    <span class="keyword">var</span> form = <span class="keyword">new</span> formidable.IncomingForm();</span><br><span class="line"> </span><br><span class="line">    form.parse(req, <span class="function"><span class="keyword">function</span>(<span class="params">err, fields, files</span>) </span>&#123;</span><br><span class="line">      res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">      res.write(<span class="string">&#x27;received upload:\n\n&#x27;</span>);</span><br><span class="line">      res.end(util.inspect(&#123;<span class="attr">fields</span>: fields, <span class="attr">files</span>: files&#125;));</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 显示一个文件上传表单</span></span><br><span class="line">  res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">  res.end(</span><br><span class="line">    <span class="string">&#x27;&lt;form action=&quot;/upload&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;&gt;&#x27;</span>+</span><br><span class="line">    <span class="string">&#x27;&lt;input type=&quot;text&quot; name=&quot;title&quot;&gt;&lt;br&gt;&#x27;</span>+</span><br><span class="line">    <span class="string">&#x27;&lt;input type=&quot;file&quot; name=&quot;upload&quot; multiple=&quot;multiple&quot;&gt;&lt;br&gt;&#x27;</span>+</span><br><span class="line">    <span class="string">&#x27;&lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;&#x27;</span>+</span><br><span class="line">    <span class="string">&#x27;&lt;/form&gt;&#x27;</span></span><br><span class="line">  );</span><br><span class="line">&#125;).listen(<span class="number">8080</span>);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>异步编程</title>
    <url>/taiaiac.gitee.io/2021/01/13/Node.js/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h1><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201224134656280.png" alt="image"></p>
<p>JavaScript 编程的一大特色，就是异步编程</p>
<p>异步函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span></span><br><span class="line">readFile</span><br><span class="line">wirteFile</span><br><span class="line">readdir</span><br><span class="line">ajax</span><br><span class="line"><span class="comment">// 往往异步 API 都伴随有一个回调函数</span></span><br><span class="line"><span class="keyword">var</span> ret = fn()</span><br><span class="line">$.get(<span class="string">&#x27;dsadas&#x27;</span>, fucntion () &#123;&#125;)</span><br><span class="line"><span class="keyword">var</span> ret = $.get()</span><br></pre></td></tr></table></figure>

<h2 id="1-回调函数"><a href="#1-回调函数" class="headerlink" title="1.回调函数"></a>1.回调函数</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201224135623580.png" alt=" "></p>
<p>不成立的情况下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">var</span> ret = x + y <span class="comment">//这一步会执行不到</span></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">  <span class="comment">//到这里执行就结束了，不会i等到前面的定时器，所以直接返回了默认值 undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment">// 结果是 1 3 undefined 4</span></span><br></pre></td></tr></table></figure>

<p>使用回调函数解决：</p>
<p>回调函数：通过一个函数，获取函数内部的操作。（根据输入得到输出结果）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ret</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// callback就是回调函数</span></span><br><span class="line">  <span class="comment">// var x = 10;</span></span><br><span class="line">  <span class="comment">// var y = 20;</span></span><br><span class="line">  <span class="comment">// var callback = function(ret)&#123;console.log(ret);&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ret = x + y</span><br><span class="line">    callback(ret)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">10</span>, <span class="number">20</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ret</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ret)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201222191541919.png" alt="image"></p>
<p>注意：</p>
<p> 凡是需要得到一个函数内部异步操作的结果（setTimeout,readFile,writeFile,ajax,readdir）</p>
<p> 这种情况必须通过 回调函数 (异步 API 都会伴随着一个回调函数)</p>
<p>ajax:</p>
<p>基于原生 XMLHttpRequest 封装 get 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// 当请求加载成功要调用指定的函数</span></span><br><span class="line">oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(oReq.responseText)</span><br><span class="line">&#125;</span><br><span class="line">oReq.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;请求路径&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">oReq.send()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">  <span class="comment">// 当请求加载成功要调用指定的函数</span></span><br><span class="line">  oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//console.log(oReq.responseText);</span></span><br><span class="line">    callback(oReq.responseText)</span><br><span class="line">  &#125;</span><br><span class="line">  oReq.open(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>)</span><br><span class="line">  oReq.send()</span><br><span class="line">&#125;</span><br><span class="line">get(<span class="string">&#x27;data.json&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="2-Promise"><a href="#2-Promise" class="headerlink" title="2.Promise"></a>2.Promise</h2><p>只要出现异步回调，就可以使用.then（）的方式处理</p>
<p>callback hell（回调地狱）:</p>
<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223160628461.png" alt=" "></p>
<p>文件的读取无法判断执行顺序（文件的执行顺序是依据文件的大小来决定的）(异步 api 无法保证文件的执行顺序)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">    <span class="comment">// 2 抛出异常</span></span><br><span class="line">    <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">    <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/b.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">    <span class="comment">// 2 抛出异常</span></span><br><span class="line">    <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">    <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过回调嵌套的方式来保证顺序：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">    <span class="comment">// 2 抛出异常</span></span><br><span class="line">    <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">    <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/b.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">      <span class="comment">// 2 抛出异常</span></span><br><span class="line">      <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">      <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">      <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">        <span class="comment">// 2 抛出异常</span></span><br><span class="line">        <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">        <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">        <span class="keyword">throw</span> err</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>为了解决以上编码方式带来的问题（回调地狱嵌套），所以在 EcmaScript6 新增了一个 API:<code>Promise</code>。</p>
<ul>
<li>Promise：承诺，保证，期约</li>
<li>Promise 本身不是异步的，但往往都是内部封装一个异步任务</li>
<li><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223165614747.png" alt="image-"></li>
</ul>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在EcmaScript 6中新增了一个API Promise</span></span><br><span class="line"><span class="comment">// Promise 是一个构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// 1 创建Promise容器		resolve:解决   reject：失败</span></span><br><span class="line"><span class="comment">// Promise 容器一旦创建就开始执行里面的代码</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 失败了，promise中的异步任务失败了</span></span><br><span class="line">      <span class="comment">// console.log(err);</span></span><br><span class="line">      <span class="comment">// 把容器的Pending状态变为rejected</span></span><br><span class="line">      <span class="comment">// 调用reject就相当于调用了then方的第二个参数函数</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 	console.log(data);</span></span><br><span class="line">      <span class="comment">//	Promise中的异步任务成功了</span></span><br><span class="line">      <span class="comment">// 把容器的Pending状态变为resolve</span></span><br><span class="line">      <span class="comment">// 也就是说这里调用的 resolve 方法实际上就是 then 方法传递的那个function</span></span><br><span class="line">      resolve(<span class="number">1234</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当p1成功了，然后就（then）做指定的操作</span></span><br><span class="line"><span class="comment">// then方法接收的function就是容器中的resolve函数</span></span><br><span class="line">p1.then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败了&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223165905008.png" alt="image-"></p>
<p>链式循环：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="comment">// 当 p1 读取成功的时候</span></span><br><span class="line">    <span class="comment">// 当前函数中 return 的结果就可以在后面的 then 中 function 接收到</span></span><br><span class="line">    <span class="comment">// 当你 return 123 后面就接收到 123</span></span><br><span class="line">    <span class="comment">//      return &#x27;hello&#x27; 后面就接收到 &#x27;hello&#x27;</span></span><br><span class="line">    <span class="comment">//      没有 return 后面收到的就是 undefined</span></span><br><span class="line">    <span class="comment">// 上面那些 return 的数据没什么卵用</span></span><br><span class="line">    <span class="comment">// 真正有用的是：我们可以 return 一个 Promise 对象</span></span><br><span class="line">    <span class="comment">// 当 return 一个 Promise 对象的时候，后续的 then 中的 方法的第一个参数会作为 p2 的 resolve</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">return</span> p2</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败了&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> p3</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223170433735.png" alt="image-"></p>
<p>Promise 和 callback 回调函数解决异步问题</p>
<p>封装 Promise 的<code>readFile</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pReadFile</span>(<span class="params">filePath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(filePath, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pReadFile(<span class="string">&#x27;./a.txt&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> pReadFile(<span class="string">&#x27;./b.txt&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> pReadFile(<span class="string">&#x27;./a.txt&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>mongoose 所有的 API 都支持 Promise：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询所有</span></span><br><span class="line">User.find().then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注册：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 用户注册</span></span><br><span class="line"><span class="comment">// 1. 判断用户是否存在</span></span><br><span class="line"><span class="comment">//    如果已存在，结束注册</span></span><br><span class="line"><span class="comment">//    如果不存在，注册（保存一条用户信息）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// callback回调函数式</span></span><br><span class="line">User.findOne(&#123;<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(user)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;用户已存在&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> User(&#123;</span><br><span class="line">             <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">             <span class="attr">password</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">             <span class="attr">email</span>:<span class="string">&#x27;fffff&#x27;</span></span><br><span class="line">        &#125;).save(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;注册成功&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise.then()方法处理</span></span><br><span class="line">User.findOne(&#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(user)&#123;</span><br><span class="line">            <span class="comment">// 用户已经存在不能注册</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;用户已存在&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 用户不存在可以注册</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> User(&#123;</span><br><span class="line">                <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">                <span class="attr">password</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">                <span class="attr">email</span>:<span class="string">&#x27;fffff&#x27;</span></span><br><span class="line">            &#125;).save();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="title">funciton</span>(<span class="params">ret</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;注册成功&#x27;</span>);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3-Genertator-生成器函数"><a href="#3-Genertator-生成器函数" class="headerlink" title="3.Genertator 生成器函数"></a>3.Genertator 生成器函数</h2><h3 id="async-函数"><a href="#async-函数" class="headerlink" title="async 函数"></a>async 函数</h3><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201224140023310.png" alt="image-"></p>
<ul>
<li><p>ES7 提供了<code>async</code>函数，使得异步操作变得更加方便。<code>async</code>函数是什么？一句话，<code>async</code>函数就是 Generator 函数的语法糖。</p>
</li>
<li><p><code>async</code>表示函数里有异步操作，<code>await</code>表示紧跟在后面的表达式需要等待结果。</p>
</li>
<li><p>返回值是 Promise。</p>
<ul>
<li><code>async</code>函数的返回值是 Promise 对象，你可以用<code>then</code>方法指定下一步的操作。</li>
</ul>
</li>
<li><p>进一步说，<code>async</code>函数完全可以看作多个异步操作，包装成的一个 Promise 对象，而<code>await</code>命令就是内部<code>then</code>命令的语法糖。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3学习教程and资源</title>
    <url>/taiaiac.gitee.io/2021/03/13/VUE3/vue3%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8Band%E8%B5%84%E6%BA%90/</url>
    <content><![CDATA[<blockquote>
<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p>vue3</p>
<p><a href="https://vue3js.cn/docs/zh/">https://vue3js.cn/docs/zh/</a></p>
<p>Vue Router</p>
<p><a href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh/</a></p>
<p>vuex</p>
<p><a href="https://vuex.vuejs.org/zh/">https://vuex.vuejs.org/zh/</a></p>
<p>vuepress</p>
<p><a href="https://vuepress.vuejs.org/zh/guide/">https://vuepress.vuejs.org/zh/guide/</a></p>
<p>vite</p>
<p><a href="https://vitejs.dev/">https://vitejs.dev/</a></p>
<p>ui框架</p>
<p><a href="https://element-plus.gitee.io/#/zh-CN/guide/design">https://element-plus.gitee.io/#/zh-CN/guide/design</a></p>
</blockquote>
<blockquote>
<h3 id="文档笔记"><a href="#文档笔记" class="headerlink" title="文档笔记"></a>文档笔记</h3><p><a href="https://juejin.cn/post/6866373381424414734/">https://juejin.cn/post/6866373381424414734/</a></p>
</blockquote>
<blockquote>
<h3 id="视频讲解"><a href="#视频讲解" class="headerlink" title="视频讲解"></a>视频讲解</h3><p>vue3</p>
<p><a href="https://www.bilibili.com/video/BV1Wh411X7Xp">https://www.bilibili.com/video/BV1Wh411X7Xp</a></p>
<p>vite</p>
<p><a href="https://www.bilibili.com/video/BV1vX4y1K7bQ">https://www.bilibili.com/video/BV1vX4y1K7bQ</a></p>
<p>vite插件开发指南</p>
<p><a href="https://www.bilibili.com/video/BV1jb4y1R7UV">https://www.bilibili.com/video/BV1jb4y1R7UV</a></p>
</blockquote>
]]></content>
      <categories>
        <category>VUE3</category>
      </categories>
      <tags>
        <tag>VUE3</tag>
      </tags>
  </entry>
  <entry>
    <title>重装node的踩坑</title>
    <url>/taiaiac.gitee.io/2021/01/08/Node.js/%E9%87%8D%E8%A3%85node%E7%9A%84%E8%B8%A9%E5%9D%91/</url>
    <content><![CDATA[<h2 id="1、安装nvm后npm不能用"><a href="#1、安装nvm后npm不能用" class="headerlink" title="1、安装nvm后npm不能用"></a>1、安装nvm后npm不能用</h2><p>安装nvm就要卸载清理现有的node，运行npm发现不能用，首先清理电脑上所有关于node的痕迹，重新安装配置，nvm有时候会装不上npm的包，所以要多尝试安装不同版本，反复安装测试。</p>
<h2 id="2、环境变量设置"><a href="#2、环境变量设置" class="headerlink" title="2、环境变量设置"></a>2、环境变量设置</h2><p>检查npm安装完毕并且命令行生效后，会发现以前下载的全局的包，命令行依旧不生效，原因就是npm的文件位置发生变动，需要修改到现有npm目录下。</p>
<h3 id="查看npm设置"><a href="#查看npm设置" class="headerlink" title="查看npm设置"></a>查看npm设置</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm config list</span><br></pre></td></tr></table></figure>

<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">; cli configs</span><br><span class="line">metrics-registry = &quot;https://registry.npmjs.org/<span class="string">&quot;</span></span><br><span class="line"><span class="string">scope = &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">user-agent = &quot;</span>npm/<span class="number">6.13</span>.<span class="number">4</span> node/v12.<span class="number">14.0</span> win32 x64<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">; userconfig C:\Users\52862\.npmrc</span></span><br><span class="line"><span class="string">cache = &quot;</span>C:\\Users\\<span class="number">52862</span>\\AppData\\Roaming\\nvm\\v12.<span class="number">14.0</span>\\node_cache<span class="string">&quot;</span></span><br><span class="line"><span class="string">prefix = &quot;</span>C:\\Users\\<span class="number">52862</span>\\AppData\\Roaming\\nvm\\v12.<span class="number">14.0</span>\\node_cache<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">; node bin location = C:\Program Files\nodejs\node.exe</span></span><br><span class="line"><span class="string">; cwd = C:\Users\52862</span></span><br><span class="line"><span class="string">; HOME = C:\Users\52862</span></span><br><span class="line"><span class="string">; &quot;</span>npm config ls -l<span class="string">&quot; to show all defaults.</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>找到cache，prefix配置项，前往正在使用的node版本目录下创建对应的两个文件夹</p>
<h4 id="cache对应node-cache"><a href="#cache对应node-cache" class="headerlink" title="cache对应node_cache"></a>cache对应<code>node_cache</code></h4><h4 id="prefix对应node-global"><a href="#prefix对应node-global" class="headerlink" title="prefix对应node_global"></a>prefix对应<code>node_global</code></h4><h3 id="命令行修改配置项"><a href="#命令行修改配置项" class="headerlink" title="命令行修改配置项"></a>命令行修改配置项</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm config set cache &quot;对应目录&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm config set profix &quot;对应目录&quot;</span><br></pre></td></tr></table></figure>

<p>修改完成后全局安装所需的全局安装包vue脚手架等等。。。</p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>JS中使用 Ajax 来进行请求的几种方式</title>
    <url>/taiaiac.gitee.io/2020/12/30/ajax/JS%E4%B8%AD%E4%BD%BF%E7%94%A8%20Ajax%20%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%AF%B7%E6%B1%82%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="1-什么是-AJAX"><a href="#1-什么是-AJAX" class="headerlink" title="1.什么是 AJAX"></a>1.什么是 AJAX</h2><p>术语 AJAX 表示 <strong>异步的 JavaScript 和 XML</strong>。</p>
<p><strong>AJAX</strong> 在 JS 中用于发出异步网络请求来获取资源。当然，不像名称所暗示的那样，资源并不局限于 XML，还用于获取 JSON、HTML 或纯文本等资源。</p>
<p>有多种方法可以发出网络请求并从服务器获取数据。 我们将一一介绍。</p>
<h2 id="2-XMLHttpRequest"><a href="#2-XMLHttpRequest" class="headerlink" title="2.XMLHttpRequest"></a>2.XMLHttpRequest</h2><p><code>XMLHttpRequest</code>对象（简称<strong>XHR</strong>）在较早的时候用于从服务器异步检索数据。</p>
<p>之所以使用<strong>XML</strong>，是因为它首先用于检索 XML 数据。现在，它也可以用来检索 JSON, HTML 或纯文本。</p>
<h3 id="事例-2-1-GET"><a href="#事例-2-1-GET" class="headerlink" title="事例 2.1: GET"></a>事例 2.1: GET</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(<span class="built_in">this</span>.responseText)</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Error Occurred:&#x27;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.onload = success</span><br><span class="line">xhr.onerror = error</span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;</span>)</span><br><span class="line">xhr.send()</span><br></pre></td></tr></table></figure>

<p>我们看到，要发出一个简单的 GET 请求，需要两个侦听器来处理请求的成功和失败。我们还需要调用<code>open()</code>和<code>send()</code>方法。来自服务器的响应存储在<code>responseText</code>变量中，该变量使用<code>JSON.parse()</code>转换为 JavaScript 对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(<span class="built_in">this</span>.responseText)</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Error Occurred :&#x27;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.onload = success</span><br><span class="line">xhr.onerror = error</span><br><span class="line">xhr.open(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;https://jsonplaceholder.typicode.com/posts&#x27;</span>)</span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>)</span><br><span class="line">xhr.send(</span><br><span class="line">  <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">    <span class="attr">userId</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>我们看到 POST 请求类似于 GET 请求。 我们需要另外使用<code>setRequestHeader</code>设置请求标头“Content-Type” ，并使用 send 方法中的<code>JSON.stringify</code>将 JSON 正文作为字符串发送。</p>
<h3 id="2-3-XMLHttpRequest-vs-Fetch"><a href="#2-3-XMLHttpRequest-vs-Fetch" class="headerlink" title="2.3 XMLHttpRequest vs Fetch"></a>2.3 XMLHttpRequest vs Fetch</h3><p>早期的开发人员，已经使用了好多年的 <code>XMLHttpRequest</code>来请求数据了。 现代的<code>fetch API</code>允许我们发出类似于<code>XMLHttpRequest（XHR）</code>的网络请求。 主要区别在于<code>fetch() </code>API 使用<strong>Promises</strong>，它使 API 更简单，更简洁，避免了回调地狱。</p>
<h2 id="3-Fetch-API"><a href="#3-Fetch-API" class="headerlink" title="3. Fetch API"></a>3. Fetch API</h2><p>Fetch 是一个用于进行 AJAX 调用的原生 JavaScript API，它得到了大多数浏览器的支持，现在得到了广泛的应用。</p>
<h3 id="3-1-API-用法"><a href="#3-1-API-用法" class="headerlink" title="3.1 API 用法"></a>3.1 API 用法</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fetch(url, options)</span><br><span class="line">  .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// handle response data</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// handle errors</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="API-参数"><a href="#API-参数" class="headerlink" title="API 参数"></a>API 参数</h4><p><code>fetch()</code> API 有两个参数</p>
<ol>
<li><p><strong>url</strong>是必填参数，它是您要获取的资源的路径。</p>
</li>
<li><pre><code class="js">options
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">是一个可选参数。不需要提供这个参数来发出简单的 GET 请求。</span><br><span class="line"></span><br><span class="line">- method: GET | POST | PUT | DELETE | PATCH</span><br><span class="line"></span><br><span class="line">- headers: 请求头，如</span><br><span class="line"></span><br><span class="line">  ```js</span><br><span class="line">  &#123; “Content-type”: “application/json; charset=UTF-8” &#125;</span><br></pre></td></tr></table></figure>

  - mode: cors | no-cors | same-origin | navigate
  - cache: default | reload | no-cache
  - body: 一般用于 POST 请求
</code></pre>
</li>
</ol>
<p><strong>API 返回 Promise 对象</strong></p>
<p><code>fetch()</code> API 返回一个 promise 对象。</p>
<ul>
<li>如果存在网络错误，则将拒绝，这会在<code>.catch()</code>块中处理。</li>
<li>如果来自服务器的响应带有任何状态码(如<code>200</code>、<code>404</code>、<code>500</code>)，则 promise 将被解析。响应对象可以在<code>.then()</code>块中处理。</li>
</ul>
<p><strong>错误处理</strong></p>
<p>请注意，对于成功的响应，我们期望状态代码为<code>200</code>（正常状态），但是即使响应带有错误状态代码（例如<code>404</code>（未找到资源）和<code>500</code>（内部服务器错误）），<code>fetch()</code> API 的状态也是 <code>resolved</code>，我们需要在<code>.then()</code> 块中显式地处理那些。</p>
<p>我们可以在<code>response</code> 对象中看到 HTTP 状态：</p>
<ul>
<li>HTTP 状态码，例如 200。</li>
<li>ok –布尔值，如果 HTTP 状态代码为 200-299，则为<code>true</code>。</li>
</ul>
<h3 id="3-3-示例：GET"><a href="#3-3-示例：GET" class="headerlink" title="3.3 示例：GET"></a>3.3 示例：GET</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getTodoItem = fetch(<span class="string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(err));</span><br><span class="line"></span><br><span class="line">getTodoItem.then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response));</span><br><span class="line">Response</span><br><span class="line"></span><br><span class="line"> &#123; <span class="attr">userId</span>: <span class="number">1</span>, <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;delectus aut autem&quot;</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中需要注意两件事:</p>
<ol>
<li><code>fetch</code> API 返回一个 promise 对象，我们可以将其分配给变量并稍后执行。</li>
<li>我们还必须调用<code>response.json()</code>将响应对象转换为 JSON</li>
</ol>
<h4 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h4><p>我们来看看当 HTTP <code>GET</code>请求抛出 500 错误时会发生什么：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;http://httpstat.us/500&#x27;</span>) <span class="comment">// this API throw 500 error</span></span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Inside first then block&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> response.json();</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">json</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Inside second then block&quot;</span>, json))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(<span class="string">&quot;Inside catch block:&quot;</span>, err));</span><br><span class="line">Inside first then block</span><br><span class="line">➤ ⓧ Inside <span class="keyword">catch</span> block: <span class="built_in">SyntaxError</span>: Unexpected token I <span class="keyword">in</span> <span class="built_in">JSON</span> at position <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>我们看到，即使 API 抛出 500 错误，它仍然会首先进入<code>then()</code>块，在该块中它无法解析错误 JSON 并抛出<code>catch()</code>块捕获的错误。</p>
<p>这意味着如果我们使用<code>fetch()</code>API，则需要像这样显式地处理此类错误：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;http://httpstat.us/500&#x27;</span>)</span><br><span class="line">  .then(handleErrors)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(<span class="string">&quot;Inside catch block:&quot;</span>, err));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleErrors</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!response.ok) &#123; <span class="comment">// throw error based on custom conditions on response</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"> ➤ Inside <span class="keyword">catch</span> block: <span class="built_in">Error</span>: Internal Server <span class="built_in">Error</span> at handleErrors (Script snippet %<span class="number">239</span>:<span class="number">9</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-3-示例：POST"><a href="#3-3-示例：POST" class="headerlink" title="3.3 示例：POST"></a>3.3 示例：POST</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;https://jsonplaceholder.typicode.com/todos&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">      <span class="attr">completed</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;new todo item&#x27;</span>,</span><br><span class="line">      <span class="attr">userId</span>: <span class="number">1</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;application/json; charset=UTF-8&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">json</span> =&gt;</span> <span class="built_in">console</span>.log(json))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err))</span><br><span class="line">Response</span><br><span class="line"></span><br><span class="line">➤ &#123;<span class="attr">completed</span>: <span class="literal">true</span>, <span class="attr">title</span>: <span class="string">&quot;new todo item&quot;</span>, <span class="attr">userId</span>: <span class="number">1</span>, <span class="attr">id</span>: <span class="number">201</span>&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中需要注意两件事:-</p>
<ol>
<li><code>POST</code>请求类似于<code>GET</code>请求。 我们还需要在<code>fetch()</code> API 的第二个参数中发送<code>method</code>，<code>body</code> 和<code>headers</code> 属性。</li>
<li>我们必须需要使用 <code>JSON.stringify()</code> 将对象转成字符串请求<code>body</code> 参数</li>
</ol>
<h2 id="4-Axios-API"><a href="#4-Axios-API" class="headerlink" title="4.Axios API"></a>4.Axios API</h2><p>Axios API 非常类似于 fetch API，只是做了一些改进。我个人更喜欢使用 Axios API 而不是<code>fetch()</code> API，原因如下：</p>
<ul>
<li>为 GET 请求提供 <code>axios.get()</code>，为 POST 请求提供 <code>axios.post()</code>等提供不同的方法，这样使我们的代码更简洁。</li>
<li>将响应代码（例如 404、500）视为可以在<code>catch()</code>块中处理的错误，因此我们无需显式处理这些错误。</li>
<li>它提供了与 IE11 等旧浏览器的向后兼容性</li>
<li>它将响应作为 JSON 对象返回，因此我们无需进行任何解析</li>
</ul>
<h3 id="4-1-示例：GET"><a href="#4-1-示例：GET" class="headerlink" title="4.1 示例：GET"></a>4.1 示例：GET</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在chrome控制台中引入脚本的方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">script.type = <span class="string">&#x27;text/javascript&#x27;</span>;</span><br><span class="line">script.src = <span class="string">&#x27;https://unpkg.com/axios/dist/axios.min.js&#x27;</span>;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(script);</span><br><span class="line">axios.get(<span class="string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response.data))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(err));</span><br><span class="line">Response</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">userId</span>: <span class="number">1</span>, <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;delectus aut autem&quot;</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;</span><br></pre></td></tr></table></figure>

<p>我们可以看到，我们直接使用 response 获得响应数据。数据没有任何解析对象，不像<code>fetch()</code> API。</p>
<h4 id="错误处理-1"><a href="#错误处理-1" class="headerlink" title="错误处理"></a>错误处理</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;http://httpstat.us/500&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response.data))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(<span class="string">&quot;Inside catch block:&quot;</span>, err));</span><br><span class="line">Inside <span class="keyword">catch</span> block: <span class="built_in">Error</span>: Network <span class="built_in">Error</span></span><br></pre></td></tr></table></figure>

<p>我们看到，500 错误也被<code>catch()</code>块捕获，不像<code>fetch()</code> API，我们必须显式处理它们。</p>
<h3 id="4-2-示例：POST"><a href="#4-2-示例：POST" class="headerlink" title="4.2 示例：POST"></a>4.2 示例：POST</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.post(<span class="string">&#x27;https://jsonplaceholder.typicode.com/todos&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">completed</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;new todo item&#x27;</span>,</span><br><span class="line">      <span class="attr">userId</span>: <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response.data))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err))</span><br><span class="line"> &#123;<span class="attr">completed</span>: <span class="literal">true</span>, <span class="attr">title</span>: <span class="string">&quot;new todo item&quot;</span>, <span class="attr">userId</span>: <span class="number">1</span>, <span class="attr">id</span>: <span class="number">201</span>&#125;</span><br></pre></td></tr></table></figure>

<p>我们看到 POST 方法非常简短，可以直接传递请求主体参数，这与<code>fetch()</code> API 不同。</p>
]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>alpine的demo练习</title>
    <url>/taiaiac.gitee.io/2021/04/29/apline/alpine%E7%9A%84demo%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>alpine<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/alpinejs/dist/alpine.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/jquery-3.5.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;state()&quot;</span> <span class="attr">x-init</span>=<span class="string">&quot;isWatch&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">x-model</span>=<span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">x-html</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>count++<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">x-html</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">x-ref</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">x-if</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Some Element<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; open: false &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;open = true&quot;</span>&gt;</span>Open Dropdown<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">x-show</span>=<span class="string">&quot;open&quot;</span> @<span class="attr">click.away</span>=<span class="string">&quot;open = false&quot;</span>&gt;</span></span><br><span class="line">      Dropdown Body</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; tab: &#x27;foo&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;active&#x27;: tab === &#x27;foo&#x27; &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;tab = &#x27;foo&#x27;&quot;</span>&gt;</span>Foo<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;active&#x27;: tab === &#x27;bar&#x27; &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;tab = &#x27;bar&#x27;&quot;</span>&gt;</span>Bar<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show</span>=<span class="string">&quot;tab === &#x27;foo&#x27;&quot;</span>&gt;</span>Tab Foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show</span>=<span class="string">&quot;tab === &#x27;bar&#x27;&quot;</span>&gt;</span>Tab Bar<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  <span class="attr">msg</span>: <span class="string">&#x27;来自动态数据&#x27;</span>,</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">msg1</span>: <span class="string">&#x27;通过refs修改页面数据&#x27;</span>,</span><br><span class="line">  <span class="attr">items</span>: [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> methods = &#123;</span><br><span class="line">  <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> (<span class="built_in">this</span>.$refs.foo.innerText = <span class="built_in">this</span>.msg1))</span><br><span class="line">    <span class="built_in">this</span>.msg1 = <span class="string">&#x27;修改了&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.count++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> watch = &#123;</span><br><span class="line">  <span class="function"><span class="title">isWatch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$watch(<span class="string">&#x27;count&#x27;</span>, <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(v))</span><br><span class="line">    <span class="built_in">this</span>.$watch(<span class="string">&#x27;msg1&#x27;</span>, <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(v))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> init = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(init, data, methods, watch)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(init)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = <span class="function">() =&gt;</span> init</span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log($(<span class="string">&#x27;li&#x27;</span>))</span><br><span class="line">  $(<span class="string">&#x27;li&#x27;</span>).html(<span class="string">&#x27;dasdas&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Alpine.js</category>
      </categories>
      <tags>
        <tag>Alpine.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Axios Ajax获取远程数据</title>
    <url>/taiaiac.gitee.io/2020/12/30/ajax/axios/</url>
    <content><![CDATA[<h1 id="Ajax-获取数据"><a href="#Ajax-获取数据" class="headerlink" title="Ajax 获取数据"></a>Ajax 获取数据</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述 请求数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-09-21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    axios</span><br><span class="line">      .get(<span class="string">&#x27;http://127.0.0.1:5500/%E7%A7%BB%E5%8A%A8%E7%AB%AF/js/msg.json&#x27;</span>)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        resolve(res.data)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        reject(e)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">rander</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; arrNav, goodList &#125; = <span class="keyword">await</span> request()</span><br><span class="line">  <span class="built_in">console</span>.log(arrNav)</span><br><span class="line">  <span class="built_in">console</span>.log(goodList)</span><br><span class="line">  <span class="comment">//先拼接ul</span></span><br><span class="line">  <span class="keyword">let</span> ul = <span class="string">&#x27;&lt;ul&gt;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arrNav.length; i++) &#123;</span><br><span class="line">    ul += <span class="string">`&lt;li&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;item&quot;&gt;</span></span><br><span class="line"><span class="string">              &lt;div class=&quot;text&quot;&gt;<span class="subst">$&#123;arrNav[i]&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div class=&quot;arrow-right&quot;&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/li&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  ul += <span class="string">&#x27;&lt;/ul&gt;&#x27;</span></span><br><span class="line">  <span class="comment">//拼接商品</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//一加载页面，就渲染数据</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  rander()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> <span class="title">activeItems</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">    items[i].onclick = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (i === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//main.innerHTML = &#x27;首页&#x27;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> data = <span class="keyword">await</span> requst(&#123;</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;https://web17.oss-cn-hangzhou.aliyuncs.com/list.json&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="built_in">console</span>.log(data)</span><br><span class="line">          <span class="comment">//把data中的数据在页面渲染</span></span><br><span class="line">          rander(data)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="comment">//处理异常</span></span><br><span class="line">          <span class="built_in">console</span>.log(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i === <span class="number">1</span>) &#123;</span><br><span class="line">        main.innerHTML = <span class="string">&#x27;搜索&#x27;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i === <span class="number">2</span>) &#123;</span><br><span class="line">        main.innerHTML = <span class="string">&#x27;购物车&#x27;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i === <span class="number">3</span>) &#123;</span><br><span class="line">        main.innerHTML = <span class="string">&#x27;我的&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述 封装的请求方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-09-17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">option</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">requst</span>(<span class="params">option</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//option=&#123;method:&#x27;&#x27;,url:&quot;&quot;,data:&#123;&#125;&#125;</span></span><br><span class="line">  <span class="comment">//axios请求默认是异步的，无法直接返回请求结果值</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    axios</span><br><span class="line">      .get(option.url)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//获得请求结果</span></span><br><span class="line">        resolve(res.data)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//发生异常</span></span><br><span class="line">        reject(e)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述 在页面渲染数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-09-17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rander</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr)</span><br><span class="line">  <span class="comment">//判断参数的合法性，主要是判空和判断数据类型</span></span><br><span class="line">  <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//找到元素</span></span><br><span class="line">  <span class="comment">//拼接字符串</span></span><br><span class="line">  <span class="keyword">let</span> st = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    st += <span class="string">`&lt;div class=&quot;goods-wrap&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&#x27;img-warp&#x27;&gt;</span></span><br><span class="line"><span class="string">            &lt;img src=&quot;<span class="subst">$&#123;arr[i].imgUrl&#125;</span>&quot; alt=&quot;&quot; class=&quot;goods-img&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;goods-content&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;goods-name&quot;&gt;<span class="subst">$&#123;arr[i].name&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;goods-desc&quot;&gt;<span class="subst">$&#123;arr[i].desc&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;goods-num&quot;&gt;<span class="subst">$&#123;arr[i].num&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&#x27;goods-op&#x27;&gt;</span></span><br><span class="line"><span class="string">            &lt;button class=&quot;add-btn&quot; data-obj=&quot;<span class="subst">$&#123;arr[i].name&#125;</span>&quot; &gt;加入购物&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class=&quot;collect-btn&quot;&gt;点击收藏&lt;/button&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//对新添加的元素进行事件绑定</span></span><br><span class="line">  <span class="keyword">let</span> addBtn = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;add-btn&#x27;</span>)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; addBtn.length; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line">    addBtn[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//页面加载结束就执行的函数</span></span><br><span class="line">;(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> data = <span class="keyword">await</span> requst(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://web17.oss-cn-hangzhou.aliyuncs.com/list.json&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  rander(data)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery Ajax获取远程数据</title>
    <url>/taiaiac.gitee.io/2020/12/30/ajax/jQuery/</url>
    <content><![CDATA[<h1 id="Ajax-获取数据"><a href="#Ajax-获取数据" class="headerlink" title="Ajax 获取数据"></a>Ajax 获取数据</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  <span class="comment">//请求地址</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://192.168.102.32.oss-cn-hangzhou.aliyuncs.com/list.json&#x27;</span>,</span><br><span class="line">  <span class="comment">//请求方法</span></span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  <span class="comment">//请求参数</span></span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">//是否异步</span></span><br><span class="line">  <span class="attr">async</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//是否使用缓存</span></span><br><span class="line">  <span class="attr">cache</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">//请求失败执行的函数</span></span><br><span class="line">  <span class="function"><span class="title">error</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//在发送请求前执行的函数</span></span><br><span class="line">  <span class="function"><span class="title">beforeSend</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//启动进度条</span></span><br><span class="line">    NProgress.start()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//请求成功执行的函数</span></span><br><span class="line">  <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="keyword">let</span> app = $(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line">    res.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> div = <span class="string">`渲染数据`</span></span><br><span class="line">      app.append(div)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//请求结束执行函数</span></span><br><span class="line">  <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//结束进度条</span></span><br><span class="line">    NProgress.done()</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 使用promise函数保存请求到的值</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//模拟登录过程,post类型的带参请求</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://192.168.102.32:8888/api/private/v1/login&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">async</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 请求发送前执行的函数</span></span><br><span class="line">      <span class="function"><span class="title">beforeSend</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 启动进度条</span></span><br><span class="line">        NProgress.start()</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">        <span class="comment">// 保存为标记&#x27;LOGIN_USER&#x27;的JSON字符串</span></span><br><span class="line">        sessionStorage.setItem(<span class="string">&#x27;LOGIN_USER&#x27;</span>, <span class="built_in">JSON</span>.stringify(res))</span><br><span class="line">        <span class="comment">// 保存数据</span></span><br><span class="line">        resolve(res)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">error</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 返回错误状态</span></span><br><span class="line">        reject(e)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 最终都会执行的函数不管成功失败</span></span><br><span class="line">      <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 结束进度条</span></span><br><span class="line">        NProgress.done()</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取"><a href="#获取" class="headerlink" title="获取"></a>获取</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用async  await获取</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 等待login()执行结束</span></span><br><span class="line">  <span class="keyword">let</span> promise = <span class="keyword">await</span> login()</span><br><span class="line">  <span class="comment">// 以下是同步执行</span></span><br><span class="line">  <span class="built_in">console</span>.log(promise)</span><br><span class="line">  location = <span class="string">&#x27;jQ-44goods-cate.html&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  get()</span><br><span class="line">  <span class="comment">// 第二种方法</span></span><br><span class="line">  <span class="comment">// let promise = login()</span></span><br><span class="line">  <span class="comment">// then正确信息</span></span><br><span class="line">  <span class="comment">// promise.then(function(res) &#123;</span></span><br><span class="line">  <span class="comment">//     console.log(res)</span></span><br><span class="line">  <span class="comment">// catch保存错误信息</span></span><br><span class="line">  <span class="comment">// &#125;).catch(function(e) &#123;</span></span><br><span class="line">  <span class="comment">//     console.log(e)</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="get-方法"><a href="#get-方法" class="headerlink" title="get 方法"></a>get 方法</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置同步请求</span></span><br><span class="line">$.ajaxSettings.async = <span class="literal">false</span></span><br><span class="line">$.get(</span><br><span class="line">  <span class="string">&#x27;https://web17.oss-cn-hangzhou.aliyuncs.com/topic.json&#x27;</span>, <span class="comment">//url</span></span><br><span class="line">  &#123;&#125;, <span class="comment">//data</span></span><br><span class="line">  <span class="comment">//callback</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.data.commentList)</span><br><span class="line">    <span class="keyword">let</span> arr = res.data.commentList</span><br><span class="line">    appendElement(arr)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">//恢复异步请求</span></span><br><span class="line">$.ajaxSettings.async = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h1 id="post-方法"><a href="#post-方法" class="headerlink" title="post 方法"></a>post 方法</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$.post(</span><br><span class="line">  <span class="comment">//url</span></span><br><span class="line">  <span class="string">&#x27;http://192.168.102.7:8888/api/private/v1/login&#x27;</span>,</span><br><span class="line">  <span class="comment">//data</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//callback</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>原生js Ajax获取远程数据</title>
    <url>/taiaiac.gitee.io/2020/12/30/ajax/%E5%8E%9F%E7%94%9Fjs/</url>
    <content><![CDATA[<h1 id="Ajax-获取远程数据"><a href="#Ajax-获取远程数据" class="headerlink" title="Ajax 获取远程数据"></a>Ajax 获取远程数据</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//async 表示异步的 经常修饰函数，表示函数的return值是promise对象</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getMsg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = request(</span><br><span class="line">    <span class="string">&#x27;https://web17.oss-cn-hangzhou.aliyuncs.com/list.json&#x27;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&#x27;GET&#x27;</span></span><br><span class="line">  )</span><br><span class="line">  <span class="comment">//await 表示等待异步执行的结果，只能存在于async修饰的函数</span></span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> result</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">  <span class="comment">//在页面渲染render</span></span><br><span class="line">  app.lastElementChild.innerHTML = res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url, params, method</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//promise是一个容器，存放未来异步代码执行的结果</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> xmlRequest</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">      <span class="comment">//IE6+和其它浏览器支持</span></span><br><span class="line">      xmlRequest = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//IE6、IE5浏览器支持</span></span><br><span class="line">      xmlRequest = <span class="keyword">new</span> ActiveXObject(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3、监听xmlRequest生命周期的状态</span></span><br><span class="line">    xmlRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xmlRequest.readyState === <span class="number">4</span> &amp;&amp; xmlRequest.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">//4、获取响应信息</span></span><br><span class="line">        <span class="keyword">let</span> res = xmlRequest.respons</span><br><span class="line">        <span class="comment">//使用Promise 保存异步结果</span></span><br><span class="line">        resolve(res)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 发送请求</span></span><br><span class="line">    <span class="keyword">if</span> (method.toLowerCase() === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      xmlRequest.open(<span class="string">&#x27;get&#x27;</span>, url + <span class="string">&#x27;/?&#x27;</span> + params, <span class="literal">true</span>)</span><br><span class="line">      xmlRequest.send()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.toLowerCase() === <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">      xmlRequest.open(<span class="string">&#x27;post&#x27;</span>, url, <span class="literal">true</span>)</span><br><span class="line">      xmlRequest.setRequestHeader(</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">      )</span><br><span class="line">      xmlRequest.send(params)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1、创建对象"><a href="#1、创建对象" class="headerlink" title="1、创建对象"></a>1、创建对象</h2><ul>
<li><pre><code class="javascript">let xmlRequest
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 适配</span><br><span class="line"></span><br><span class="line">- ```javascript</span><br><span class="line">  if (window.XMLHttpRequest) &#123;</span><br><span class="line">    //IE6+和其它浏览器支持</span><br><span class="line">    xmlRequest = new XMLHttpRequest()</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    //IE6、IE5浏览器支持</span><br><span class="line">    xmlRequest = new ActiveXObject(&#x27;Microsoft.XMLHTTP&#x27;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="2、发送请求"><a href="#2、发送请求" class="headerlink" title="2、发送请求"></a>2、发送请求</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (method.toLowerCase() === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">	xmlRequest.open(<span class="string">&#x27;get&#x27;</span>, url + <span class="string">&#x27;/?&#x27;</span> + params, <span class="literal">true</span>)</span><br><span class="line">	xmlRequest.send()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.toLowerCase() === <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">	xmlRequest.open(<span class="string">&#x27;post&#x27;</span>, url, <span class="literal">true</span>)</span><br><span class="line">	xmlRequest.setRequestHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line">	xmlRequest.send(params)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (...)&#123;</span><br><span class="line">           ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、监听-xmlRequest-生命周期的状态"><a href="#3、监听-xmlRequest-生命周期的状态" class="headerlink" title="3、监听 xmlRequest 生命周期的状态"></a>3、监听 xmlRequest 生命周期的状态</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3、监听xmlRequest生命周期的状态</span></span><br><span class="line">xmlRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xmlRequest.readyState === <span class="number">4</span> &amp;&amp; xmlRequest.status === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">//4、获取响应信息</span></span><br><span class="line">    <span class="keyword">let</span> res = xmlRequest.response</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="请求状态码"><a href="#请求状态码" class="headerlink" title="请求状态码"></a>请求状态码</h3><ul>
<li><em>从 0 到 4 发生变化</em><ol>
<li><em>0:请求未初始化(还没有调用到 open 方法)</em></li>
<li>1:服务器连接已建立(已调用 send 方法，正在发生请求)</li>
<li>2:请求已接收(send 方法完成，已接收到全部响应内容)</li>
<li>3:请求处理中(解析响应内容)</li>
<li>4:请求已完成，且响应已就绪</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="4、获取响应信息"><a href="#4、获取响应信息" class="headerlink" title="4、获取响应信息"></a>4、获取响应信息</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">xmlRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xmlRequest.readyState === <span class="number">4</span> &amp;&amp; xmlRequest.status === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">//4、获取响应信息</span></span><br><span class="line">    <span class="keyword">let</span> res = xmlRequest.response</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="promise-对象"><a href="#promise-对象" class="headerlink" title="promise 对象"></a>promise 对象</h1><ul>
<li><p>1、promise 是处理异步执行结果的一种方案</p>
</li>
<li><p>2、promise 是一个对象，是一个容器，用于保存异步执行的结果</p>
</li>
<li><p>3、promise 有两种状态，</p>
<ul>
<li>1）正在获得异步执行的结果（pendding）</li>
<li>2）已经获得异步执行的结果（正确的结果，异常的结果）</li>
<li>3）promise 使用 resolve 函数保存正确的结果</li>
<li>4）promise 使用 reject 函数保存错误或异常的结果</li>
</ul>
</li>
<li><p>4、可以使用 promise 自带的函数获得异步执行的结果</p>
<ul>
<li><pre><code class="javascript">promise.then(function (res) &#123;
  log(res是正确的结果)
&#125;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ```javascript</span><br><span class="line">  promise.catch(function (e) &#123;</span><br><span class="line">    log(e是异常的结果)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>5、可以使用 async 和 await 处理 promise 的结果</p>
<ul>
<li><pre><code class="javascript">async function get()&#123;
    try&#123;
    let res = await return promise()
    //res是promise对象保存的异步正确的结果
    &#125;catch(e)&#123;return e&#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ```javascript</span><br><span class="line">  //async 表示异步的 经常修饰函数，表示函数的return值是promise对象</span><br><span class="line">  async function getMsg() &#123;</span><br><span class="line">    let result = request(</span><br><span class="line">      &#x27;https://web17.oss-cn-hangzhou.aliyuncs.com/list.json&#x27;,</span><br><span class="line">      null,</span><br><span class="line">      &#x27;GET&#x27;</span><br><span class="line">    )</span><br><span class="line">    //await 表示等待异步执行的结果，只能存在于async修饰的函数</span><br><span class="line">    let res = await result</span><br><span class="line">    console.log(res)</span><br><span class="line">    //在页面渲染render</span><br><span class="line">    app.lastElementChild.innerHTML = res</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>echarts基础属性和引入</title>
    <url>/taiaiac.gitee.io/2020/12/30/echarts/%E5%9F%BA%E7%A1%80%E5%B1%9E%E6%80%A7%E5%92%8C%E5%BC%95%E5%85%A5/</url>
    <content><![CDATA[<p><a href="https://echarts.apache.org/zh/option.html#series-line">line</a>（折线图）、<a href="https://echarts.apache.org/zh/option.html#series-bar">bar</a>（柱状图）、<a href="https://echarts.apache.org/zh/option.html#series-pie">pie</a>（饼图）、<a href="https://echarts.apache.org/zh/option.html#series-scatter">scatter</a>（散点图）、<a href="https://echarts.apache.org/zh/option.html#series-graph">graph</a>（关系图）、<a href="https://echarts.apache.org/zh/option.html#series-tree">tree</a>（树图）、…</p>
<h2 id="局部引入"><a href="#局部引入" class="headerlink" title="局部引入"></a>局部引入</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入 ECharts 主模块</span></span><br><span class="line"><span class="keyword">const</span> echarts = <span class="built_in">require</span>(<span class="string">&#x27;echarts/dist/echarts&#x27;</span>)</span><br><span class="line"><span class="comment">// 或者import</span></span><br><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!--  	为 ECharts 准备一个具备大小（宽高）的 DOM		 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;main&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gongling-chart&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px;height:400px;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="comment">// 基于准备好的dom，初始化echarts实例</span></span><br><span class="line"><span class="keyword">const</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;id&#x27;</span>))</span><br><span class="line"><span class="comment">//或者通过ref</span></span><br><span class="line"><span class="keyword">const</span> myChart = echarts.init(<span class="built_in">this</span>.$refs.main)</span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">myChart<span class="selector-class">.setOption</span>(&#123;</span><br><span class="line">    series: [],</span><br><span class="line">    title: &#123;&#125;,</span><br><span class="line">    <span class="selector-tag">legend</span>: &#123;&#125;,</span><br><span class="line">    grid: &#123;&#125;,</span><br><span class="line">    xAxis: &#123;&#125;,</span><br><span class="line">    yAxis: &#123;&#125;,</span><br><span class="line">    tooltip: &#123;&#125;</span><br><span class="line">    // 配置项。。。</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h2><h3 id="title-标题"><a href="#title-标题" class="headerlink" title="title 标题"></a>title 标题</h3><p>标题组件，包含主标题和副标题。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">title: &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">true</span>; <span class="comment">//是否显示标题组件</span></span><br><span class="line">    text: <span class="string">&#x27;&#x27;</span>, <span class="comment">//主标题文本，支持使用 \n 换行。</span></span><br><span class="line">    <span class="attr">link</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//主标题文本超链接。</span></span><br><span class="line">    <span class="attr">textStyle</span>: &#123; <span class="comment">//主标题配置</span></span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//主标题文字的颜色。</span></span><br><span class="line">        <span class="attr">fontStyle</span>: <span class="string">&#x27;nomal&#x27;</span>, <span class="comment">//主标题文字字体的风格。&#x27;normal&#x27;,&#x27;italic&#x27;,&#x27;oblique&#x27;</span></span><br><span class="line">        <span class="attr">fontWeight</span>: <span class="number">100</span>, <span class="comment">//字体粗细</span></span><br><span class="line">        verticalAlign： <span class="string">&#x27;middle&#x27;</span> <span class="comment">//文字垂直对齐方式，默认自动。</span></span><br><span class="line">        <span class="comment">// 一些css文字属性...</span></span><br><span class="line">    &#125;，</span><br><span class="line">    <span class="attr">subtext</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//副标题</span></span><br><span class="line">    <span class="attr">subtextStyle</span>: &#123;</span><br><span class="line">        <span class="comment">//副标题设置</span></span><br><span class="line">        <span class="comment">//如果不设置会继承主标题设置</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">textAlign</span>: <span class="string">&#x27;auto&#x27;</span> <span class="comment">//整体（包括 text 和 subtext）的水平对齐。</span></span><br><span class="line">    <span class="comment">// 可选值：&#x27;auto&#x27;、&#x27;left&#x27;、&#x27;right&#x27;、&#x27;center&#x27;。</span></span><br><span class="line">    <span class="attr">textVerticalAlign</span>: <span class="string">&#x27;auto&#x27;</span>, <span class="comment">//整体（包括 text 和 subtext）的垂直对齐。</span></span><br><span class="line">    <span class="comment">// 可选值：&#x27;auto&#x27;、&#x27;top&#x27;、&#x27;bottom&#x27;、&#x27;middle&#x27;。</span></span><br><span class="line">    <span class="attr">padding</span>: <span class="number">5</span>, <span class="comment">//标题内边距，单位px，默认各方向内边距为5，接受数组分别设定上右下左边距</span></span><br><span class="line">    <span class="attr">itemGap</span>: <span class="number">10</span>, <span class="comment">//主副标题之间的间距。</span></span><br><span class="line">    <span class="attr">left</span>: <span class="string">&#x27;auto&#x27;</span>, <span class="comment">//title 组件离容器左侧的距离。</span></span><br><span class="line">    <span class="attr">top</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">    <span class="attr">right</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">    <span class="attr">bottom</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">    <span class="attr">shadowOffsetX</span>: number, <span class="comment">//阴影水平方向上的偏移距离。</span></span><br><span class="line">    <span class="attr">shadowOffsetY</span>: number <span class="comment">//阴影垂直方向上的偏移距离</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="series-系列列表"><a href="#series-系列列表" class="headerlink" title="series 系列列表"></a>series 系列列表</h3><p>每个系列通过 <code>type</code> 决定自己的图表类型</p>
<ul>
<li>pie 饼状图</li>
<li>bar 柱状图</li>
<li>line 折线/面积图</li>
<li>data 放入具体数值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">series :&#123; <span class="comment">//系列列表。每个系列通过 type 决定自己的图表类型</span></span><br><span class="line">    <span class="attr">type</span>: pie, 			<span class="comment">//饼图</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;name&#x27;</span>, <span class="comment">//系列名称，用于tooltip的显示，legend 的图例筛选，在 setOption 更新数据和配置项时用于指定对应的系列。</span></span><br><span class="line">    legendHoverLink ：<span class="literal">true</span>, <span class="comment">//是否启用图例 hover 时的联动高亮。</span></span><br><span class="line">    hoverAnimation ：<span class="literal">true</span>, <span class="comment">//是否开启 hover 在扇区上的放大动画效果</span></span><br><span class="line">    hoverOffset ：<span class="number">10</span>, <span class="comment">//高亮扇区的偏移距离</span></span><br><span class="line">    selectedOffset ：<span class="number">10</span>, <span class="comment">//选中扇区的偏移距离</span></span><br><span class="line">    clockwise ：<span class="literal">true</span>, <span class="comment">//饼图的扇区是否是顺时针排布</span></span><br><span class="line">    startAngle ：<span class="number">90</span>, <span class="comment">//起始角度，支持范围[0, 360]</span></span><br><span class="line">    <span class="attr">minAngle</span>: number, <span class="comment">//最小的扇区角度（0 ~ 360），用于防止某个值过小导致扇区太小影响交互</span></span><br><span class="line">    <span class="attr">minShowLabelAngle</span>: number, <span class="comment">//小于这个角度（0 ~ 360）的扇区，不显示标签（label 和 labelLine）</span></span><br><span class="line">    <span class="attr">roseType</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//是否展示成南丁格尔图，通过半径区分数据大小。可选择两种模式</span></span><br><span class="line">    <span class="comment">// &#x27;radius&#x27; 扇区圆心角展现数据的百分比，半径展现数据的大小</span></span><br><span class="line">    <span class="comment">// &#x27;area&#x27; 所有扇区圆心角相同，仅通过半径展现数据大小</span></span><br><span class="line">    <span class="attr">hoverAnimation</span>: <span class="literal">false</span>, <span class="comment">//移入放大</span></span><br><span class="line">    <span class="attr">avoidLabelOverlap</span>: <span class="literal">false</span>, <span class="comment">//避免标注重叠</span></span><br><span class="line">    stillShowZeroSum ：<span class="literal">true</span>, <span class="comment">//是否在数据和为0（一般情况下所有数据为0） 的时候不显示扇区。</span></span><br><span class="line">    cursor ：<span class="string">&#x27;pointer&#x27;</span>, <span class="comment">//鼠标悬浮时在图形元素上时鼠标的样式是什么。同 CSS 的 cursor。</span></span><br><span class="line">    <span class="attr">left</span>: <span class="number">20</span>, <span class="comment">//pie chart组件离容器左侧的距离</span></span><br><span class="line">    <span class="attr">top</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">right</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">bottm</span>: <span class="number">20</span>,</span><br><span class="line">    width ：<span class="string">&#x27;auto&#x27;</span> <span class="comment">//pie chart组件的宽度。默认自适应。</span></span><br><span class="line">    height ：<span class="string">&#x27;auto&#x27;</span>, <span class="comment">//pie chart组件的高度。默认自适应。</span></span><br><span class="line">    center ：[<span class="string">&#x27;50%&#x27;</span>, <span class="string">&#x27;50%&#x27;</span>], <span class="comment">//饼图的中心（圆心）坐标，数组的第一项是横坐标，第二项是纵坐标</span></span><br><span class="line">    radius ：[<span class="number">0</span>, <span class="string">&#x27;75%&#x27;</span>], <span class="comment">//饼图的半径</span></span><br><span class="line">    <span class="attr">data</span>:[],<span class="comment">//系列中的数据内容数组</span></span><br><span class="line">    <span class="attr">label</span>: &#123; <span class="comment">// 饼图图形上的文本标签，可用于说明图形的一些数据信息，比如值，名称等</span></span><br><span class="line">        <span class="attr">show</span>: <span class="literal">true</span>, <span class="comment">//</span></span><br><span class="line">        position ：<span class="string">&#x27;outside&#x27;</span>, <span class="comment">//标签的位置。</span></span><br><span class="line">        <span class="comment">// &#x27;outside&#x27;饼图扇区外侧，通过视觉引导线连到相应的扇区</span></span><br><span class="line">        <span class="comment">// &#x27;inside&#x27;饼图扇区内部</span></span><br><span class="line">        <span class="comment">// &#x27;inner&#x27; 同 &#x27;inside&#x27;</span></span><br><span class="line">        <span class="comment">// &#x27;center&#x27;在饼图中心位置</span></span><br><span class="line">        <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;: &#123;d&#125;&#x27;</span>, <span class="comment">//标签内容格式器，支持字符串模板和回调函数两种形式，字符串模板与回调函数返回的字符串均支持用 \n 换行</span></span><br><span class="line">        <span class="comment">// 字符串模板</span></span><br><span class="line">        <span class="comment">// &#123;a&#125;：系列名,&#123;b&#125;：数据名,&#123;c&#125;：数据值,&#123;d&#125;：百分比</span></span><br><span class="line">        <span class="attr">rotate</span>: <span class="literal">true</span>, <span class="comment">//如果为 true，则为径向排布</span></span><br><span class="line">        <span class="comment">// 如果为 number ，旋转指定角度，从 -90 度到 90 度。正值是逆时针</span></span><br><span class="line">        color ：<span class="string">&quot;#fff&quot;</span>, <span class="comment">//文字的颜色</span></span><br><span class="line">        ... <span class="comment">//一些css样式配置</span></span><br><span class="line">        shadowColor ：<span class="string">&#x27;transparent&#x27;</span>， <span class="comment">//文字块的背景阴影颜色</span></span><br><span class="line">        shadowBlur： <span class="number">123</span>, <span class="comment">//文字块的背景阴影长度</span></span><br><span class="line">        <span class="attr">shadowOffsetX</span>: <span class="number">123</span>, <span class="comment">//文字块的背景阴影 X 偏移</span></span><br><span class="line">        <span class="attr">shadowOffsetY</span>: <span class="number">12</span>, <span class="comment">//文字块的背景阴影 Y 偏移</span></span><br><span class="line">        alignTo ：<span class="string">&#x27;none&#x27;</span>, <span class="comment">//标签的对齐方式，仅当 position 值为 &#x27;outer&#x27; 时有效</span></span><br><span class="line">        <span class="comment">// &#x27;none&#x27;（默认值）：label line 的长度为固定值</span></span><br><span class="line">        <span class="comment">// &#x27;labelLine&#x27;：label line 的末端对齐</span></span><br><span class="line">        <span class="comment">// &#x27;edge&#x27;：文字对齐，</span></span><br><span class="line">        bleedMargin ：<span class="number">10</span>, <span class="comment">//文字的出血线大小，超过出血线的文字将被裁剪为 &#x27;...&#x27;。仅当 label.position 为 &#x27;outer&#x27; 并且 label.alignTo 为 &#x27;none&#x27; 或 &#x27;labelLine&#x27; 的情况有效</span></span><br><span class="line">        distanceToLabelLine ：<span class="number">5</span>, <span class="comment">//文字与 label line 之间的距离</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="legend-图例"><a href="#legend-图例" class="headerlink" title="legend 图例"></a>legend 图例</h3><p>图例组件展现了不同系列的标记(symbol)，颜色和名字。可以通过点击图例控制哪些系列不显示。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">legend： &#123; <span class="comment">//图例组件展现了不同系列的标记(symbol)，颜色和名字。可以通过点击图例控制哪些系列不显示</span></span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;plain&#x27;</span>, <span class="comment">//普通图例。缺省就是普通图例</span></span><br><span class="line">    <span class="attr">data</span>:[],<span class="comment">//图例的数据数组,如果 data 没有被指定，会自动从当前系列中获取</span></span><br><span class="line">    <span class="attr">itemWidth</span>: <span class="number">5</span>, <span class="comment">//图例大小  我这里用的是圆</span></span><br><span class="line">    <span class="attr">itemGap</span>: <span class="number">30</span>, <span class="comment">//图例之间的间隔</span></span><br><span class="line">    <span class="attr">y</span>: <span class="string">&#x27;80%&#x27;</span>, <span class="comment">//垂直放的位置，可以写top，center，bottom，也可以写px或者百分比。x轴方向同理，默认center</span></span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&quot;circle&quot;</span>, <span class="comment">//图例的形状，选择类型有：&quot;circle&quot;（圆形）、&quot;rectangle&quot;（长方形）、&quot;triangle&quot;（三角形）、&quot;diamond&quot;（菱形）、&quot;emptyCircle&quot;（空心圆）、&quot;emptyRectangle&quot;（空心长方形）、&quot;emptyTriangle&quot;（空心三角形）、&quot;emptyDiamon&quot;（空心菱形），还可以放自定义图片，格式为&quot;image://path&quot;,path为图片路径</span></span><br><span class="line">    <span class="attr">selectedMode</span>: <span class="literal">false</span>, <span class="comment">//选中哪个图例 false后图例不可点击</span></span><br><span class="line">    left： <span class="string">&#x27;auto&#x27;</span>, <span class="comment">//图例组件离容器左侧的距离</span></span><br><span class="line">    orient： <span class="string">&#x27;horizontal&#x27;</span>, <span class="comment">//图例列表的布局朝向,&#x27;vertical&#x27;纵向</span></span><br><span class="line">    inactiveColor： <span class="string">&#x27;#ccc&#x27;</span>, <span class="comment">//图例关闭时的颜色</span></span><br><span class="line">    <span class="attr">selected</span>: &#123;&#125; <span class="comment">//图例选中状态表</span></span><br><span class="line">    ... <span class="comment">//css样式设置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="xAxis-直角坐标系-x-轴"><a href="#xAxis-直角坐标系-x-轴" class="headerlink" title="xAxis 直角坐标系 x 轴"></a>xAxis 直角坐标系 x 轴</h3><p>直角坐标系 grid 中的 x 轴，一般情况下单个 grid 组件最多只能放上下两个 x 轴，多于两个 x 轴需要通过配置 <a href="https://echarts.apache.org/zh/option.html#xAxis.offset">offset</a> 属性防止同个位置多个 x 轴的重叠。</p>
<ul>
<li><p>name 坐标轴名称。</p>
</li>
<li><p>type 坐标轴类型。</p>
</li>
<li><p>data 类目数据（放置类名）</p>
</li>
<li><p>如果没有设置 <a href="https://echarts.apache.org/zh/option.html#xAxis.type">type</a>，但是设置了 <code>axis.data</code>，则认为 <code>type</code> 是 <code>&#39;category&#39;</code>。</p>
<p>如果设置了 <a href="https://echarts.apache.org/zh/option.html#xAxis.type">type</a> 是 <code>&#39;category&#39;</code>，但没有设置 <code>axis.data</code>，则 <code>axis.data</code> 的内容会自动从 <a href="https://echarts.apache.org/zh/option.html#series.data">series.data</a> 中获取，这会比较方便。不过注意，<code>axis.data</code> 指明的是 <code>&#39;category&#39;</code> 轴的取值范围。如果不指定而是从 <a href="https://echarts.apache.org/zh/option.html#series.data">series.data</a> 中获取，那么只能获取到 <a href="https://echarts.apache.org/zh/option.html#series.data">series.data</a> 中出现的值。比如说，假如 <a href="https://echarts.apache.org/zh/option.html#series.data">series.data</a> 为空时，就什么也获取不到。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 所有类目名称列表</span></span><br><span class="line"><span class="attr">data</span>: [<span class="string">&#x27;周一&#x27;</span>, <span class="string">&#x27;周二&#x27;</span>, <span class="string">&#x27;周三&#x27;</span>, <span class="string">&#x27;周四&#x27;</span>, <span class="string">&#x27;周五&#x27;</span>, <span class="string">&#x27;周六&#x27;</span>, <span class="string">&#x27;周日&#x27;</span>]</span><br><span class="line"><span class="comment">// 每一项也可以是具体的配置项，此时取配置项中的 `value` 为类目名</span></span><br><span class="line"><span class="attr">data</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&#x27;周一&#x27;</span>,</span><br><span class="line">    <span class="comment">// 突出周一</span></span><br><span class="line">    <span class="attr">textStyle</span>: &#123;</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="number">20</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;周二&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;周三&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;周四&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;周五&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;周六&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;周日&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">    type = <span class="string">&#x27;category&#x27;</span> <span class="comment">//坐标轴类型</span></span><br><span class="line">    <span class="comment">// &#x27;value&#x27;数值轴， 适用于连续数据</span></span><br><span class="line">    <span class="comment">// `&#x27;category&#x27;`类目轴， 适用于离散的类目数据。 为该类型时类目数据可自动从[series.data] 设置类目数据。</span></span><br><span class="line">    <span class="comment">// `&#x27;time&#x27;`时间轴， 适用于连续的时序数据， 与数值轴相比时间轴带有时间的格式化， 在刻度计算上也有所不同， 例如会根据跨度的范围来决定使用月， 星期， 日还是小时范围的刻度。</span></span><br><span class="line">    <span class="comment">// `&#x27;log&#x27;`对数轴。 适用于对数数据。</span></span><br><span class="line">    <span class="attr">data</span>:[],<span class="comment">//类目数据，在类目轴（type: &#x27;category&#x27;）中有效</span></span><br><span class="line">    nameLocation = <span class="string">&#x27;end&#x27;</span>,<span class="comment">//坐标轴名称显示位置</span></span><br><span class="line">    <span class="attr">nameTextStyle</span>:&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 坐标轴名称的文字样式</span></span><br><span class="line">    &#125;,</span><br><span class="line">    nameGap = <span class="number">15</span>,<span class="comment">//坐标轴名称与轴线之间的距离</span></span><br><span class="line">    <span class="attr">nameRotate</span>:<span class="number">2</span>,<span class="comment">//坐标轴名字旋转，角度值,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="yAxis-直角坐标系-y-轴"><a href="#yAxis-直角坐标系-y-轴" class="headerlink" title="yAxis 直角坐标系 y 轴"></a>yAxis 直角坐标系 y 轴</h3><p>直角坐标系 grid 中的 y 轴，一般情况下单个 grid 组件最多只能放左右两个 y 轴，多于两个 y 轴需要通过配置 <a href="https://echarts.apache.org/zh/option.html#yAxis.offset">offset</a> 属性防止同个位置多个 Y 轴的重叠。</p>
<h3 id="tooltip-提示框"><a href="#tooltip-提示框" class="headerlink" title="tooltip 提示框"></a>tooltip 提示框</h3><p>提示框组件。</p>
<p>提示框组件的通用介绍：<br>提示框组件可以设置在多种地方：<br>可以设置在全局，即 tooltip<br>可以设置在坐标系中，即 grid.tooltip、polar.tooltip、single.tooltip<br>可以设置在系列中，即 series.tooltip<br>可以设置在系列的每个数据项中，即 series.data.tooltip</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">tooltip: &#123;</span><br><span class="line">    show = <span class="literal">true</span>, <span class="comment">//是否显示提示框组件，包括提示框浮层和 axisPointer</span></span><br><span class="line">    trigger = <span class="string">&#x27;item&#x27;</span>, <span class="comment">//触发类型</span></span><br><span class="line">    <span class="comment">// &#x27;item&#x27;数据项图形触发，主要在散点图，饼图等无类目轴的图表中使用</span></span><br><span class="line">    <span class="comment">// &#x27;axis&#x27;坐标轴触发，主要在柱状图，折线图等会使用类目轴的图表中使用</span></span><br><span class="line">    <span class="comment">// &#x27;none&#x27;什么都不触发</span></span><br><span class="line">    <span class="attr">axisPointer</span>: &#123;</span><br><span class="line">        <span class="comment">// 坐标轴指示器配置项</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>, <span class="comment">//直线指示器</span></span><br><span class="line">        <span class="comment">// &#x27;shadow&#x27; 阴影指示器&#x27;none&#x27; 无指示器&#x27;cross&#x27; 十字准星指示器。其实是种简写，表示启用两个正交的轴的 axisPointer。</span></span><br><span class="line">        axis = <span class="string">&#x27;auto&#x27;</span>, <span class="comment">//指示器的坐标轴</span></span><br><span class="line">        showContent = <span class="literal">true</span>, <span class="comment">//是否显示提示框浮层，默认显示。只需tooltip触发事件或显示axisPointer而不需要显示内容时可配置该项为false</span></span><br><span class="line">        <span class="attr">alwaysShowContent</span>: <span class="literal">true</span>, <span class="comment">//是否永远显示提示框内容，默认情况下在移出可触发提示框区域后 一定时间 后隐藏，设置为 true 可以保证一直显示提示框内容</span></span><br><span class="line">        triggerOn = <span class="string">&#x27;mousemove|click&#x27;</span>, <span class="comment">//提示框触发的条件</span></span><br><span class="line">        <span class="comment">// &#x27;mousemove&#x27;鼠标移动时触发,&#x27;click&#x27;鼠标点击时触发,&#x27;mousemove|click&#x27;同时鼠标移动和点击时触发,&#x27;none&#x27;不在 &#x27;mousemove&#x27; 或 &#x27;click&#x27; 时触发，用户可以通过 action.tooltip.showTip 和 action.tooltip.hideTip 来手动触发和隐藏。也可以通过 axisPointer.handle 来触发或隐藏</span></span><br><span class="line">        <span class="attr">showDelay</span>: <span class="number">100</span>, <span class="comment">//浮层显示的延迟，单位为 ms，默认没有延迟，也不建议设置</span></span><br><span class="line">        hideDelay = <span class="number">100</span>, <span class="comment">//浮层隐藏的延迟</span></span><br><span class="line">        <span class="attr">enterable</span>: <span class="literal">false</span>, <span class="comment">//鼠标是否可进入提示框浮层中</span></span><br><span class="line">        <span class="attr">confine</span>: <span class="literal">true</span>, <span class="comment">//是否将 tooltip 框限制在图表的区域内</span></span><br><span class="line">        transitionDuration = <span class="number">0.4</span>, <span class="comment">//提示框浮层的移动动画过渡时间，单位是 s，设置为 0 的时候会紧跟着鼠标移动。</span></span><br><span class="line">        <span class="attr">position</span>: [<span class="number">10</span>, <span class="number">10</span>], <span class="comment">// 绝对位置，相对于容器左侧 10px, 上侧 10 px</span></span><br><span class="line">        <span class="attr">position</span>: [<span class="string">&#x27;50%&#x27;</span>, <span class="string">&#x27;50%&#x27;</span>], <span class="comment">// 相对位置，放置在容器正中间</span></span><br><span class="line">        <span class="comment">// &#x27;inside&#x27;鼠标所在图形的内部中心位置， 只在 trigger 为 &#x27;item&#x27;</span></span><br><span class="line">        <span class="comment">// 的时候有效。</span></span><br><span class="line">        <span class="comment">// &#x27;top&#x27;鼠标所在图形上侧， 只在 trigger 为 &#x27;item&#x27;</span></span><br><span class="line">        <span class="comment">// 的时候有效。</span></span><br><span class="line">        <span class="comment">// &#x27;left&#x27;鼠标所在图形左侧， 只在 trigger 为 &#x27;item&#x27;</span></span><br><span class="line">        <span class="comment">// 的时候有效。</span></span><br><span class="line">        <span class="comment">// &#x27;right&#x27;鼠标所在图形右侧， 只在 trigger 为 &#x27;item&#x27;</span></span><br><span class="line">        <span class="comment">// 的时候有效。</span></span><br><span class="line">        <span class="comment">// &#x27;bottom&#x27;鼠标所在图形底侧， 只在 trigger 为 &#x27;item&#x27;</span></span><br><span class="line">        <span class="comment">// 的时候有效。</span></span><br><span class="line">        <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b0&#125;: &#123;c0&#125;&lt;br /&gt;&#123;b1&#125;: &#123;c1&#125;&#x27;</span>, <span class="comment">//字符串模板</span></span><br><span class="line">        ... <span class="comment">//css样式设置</span></span><br><span class="line">        <span class="attr">extraCssText</span>: <span class="string">&#x27;box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);&#x27;</span>, <span class="comment">//额外附加到浮层的 css 样式</span></span><br><span class="line">        <span class="attr">label</span>: &#123; show, precision, formatter, margin, color, fontStyle, fontWeight, fontFamily, fontSize, lineHeight, width, height, textBorderColor, textBorderWidth, textShadowColor, textShadowBlur, textShadowOffsetX, textShadowOffsetY, padding, backgroundColor, borderColor, borderWidth, shadowBlur, shadowColor, shadowOffsetX, shadowOffsetY &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>echarts</category>
      </categories>
      <tags>
        <tag>echarts</tag>
      </tags>
  </entry>
  <entry>
    <title>element-ui快速上手</title>
    <url>/taiaiac.gitee.io/2020/12/30/element-ui/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/</url>
    <content><![CDATA[<h3 id="使用-vue-cli-3"><a href="#使用-vue-cli-3" class="headerlink" title="使用 vue-cli@3"></a>使用 vue-cli@3</h3><p>我们为新版的 vue-cli 准备了相应的 <a href="https://github.com/ElementUI/vue-cli-plugin-element">Element 插件</a>，你可以用它们快速地搭建一个基于 Element 的项目。</p>
<h3 id="¶引入-Element"><a href="#¶引入-Element" class="headerlink" title="¶引入 Element"></a><a href="https://element.eleme.cn/#/zh-CN/component/quickstart#yin-ru-element">¶</a>引入 Element</h3><p>你可以引入整个 Element，或是根据需要仅引入部分组件。我们先介绍如何引入完整的 Element。</p>
<h4 id="¶完整引入"><a href="#¶完整引入" class="headerlink" title="¶完整引入"></a><a href="https://element.eleme.cn/#/zh-CN/component/quickstart#wan-zheng-yin-ru">¶</a>完整引入</h4><p>在 main.js 中写入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>以上代码便完成了 Element 的引入。需要注意的是，样式文件需要单独引入。</p>
<h4 id="¶按需引入"><a href="#¶按需引入" class="headerlink" title="¶按需引入"></a><a href="https://element.eleme.cn/#/zh-CN/component/quickstart#an-xu-yin-ru">¶</a>按需引入</h4><p>借助 <a href="https://github.com/QingWei-Li/babel-plugin-component">babel-plugin-component</a>，我们可以只引入需要的组件，以达到减小项目体积的目的。</p>
<p>首先，安装 babel-plugin-component：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-component -D</span><br></pre></td></tr></table></figure>

<p>然后，将 .babelrc 修改为：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [[<span class="string">&quot;es2015&quot;</span>, &#123; <span class="attr">&quot;modules&quot;</span>: <span class="literal">false</span> &#125;]],</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来，如果你只希望引入部分组件，比如 Button 和 Select，那么需要在 main.js 中写入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button, Select &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.component(Button.name, Button)</span><br><span class="line">Vue.component(Select.name, Select)</span><br><span class="line"><span class="comment">/* 或写为</span></span><br><span class="line"><span class="comment"> * Vue.use(Button)</span></span><br><span class="line"><span class="comment"> * Vue.use(Select)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>完整组件列表和引入方式（完整组件列表以 <a href="https://github.com/ElemeFE/element/blob/master/components.json">components.json</a> 为准）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Pagination,</span><br><span class="line">  Dialog,</span><br><span class="line">  Autocomplete,</span><br><span class="line">  Dropdown,</span><br><span class="line">  DropdownMenu,</span><br><span class="line">  DropdownItem,</span><br><span class="line">  Menu,</span><br><span class="line">  Submenu,</span><br><span class="line">  MenuItem,</span><br><span class="line">  MenuItemGroup,</span><br><span class="line">  Input,</span><br><span class="line">  InputNumber,</span><br><span class="line">  Radio,</span><br><span class="line">  RadioGroup,</span><br><span class="line">  RadioButton,</span><br><span class="line">  Checkbox,</span><br><span class="line">  CheckboxButton,</span><br><span class="line">  CheckboxGroup,</span><br><span class="line">  Switch,</span><br><span class="line">  Select,</span><br><span class="line">  Option,</span><br><span class="line">  OptionGroup,</span><br><span class="line">  Button,</span><br><span class="line">  ButtonGroup,</span><br><span class="line">  Table,</span><br><span class="line">  TableColumn,</span><br><span class="line">  DatePicker,</span><br><span class="line">  TimeSelect,</span><br><span class="line">  TimePicker,</span><br><span class="line">  Popover,</span><br><span class="line">  Tooltip,</span><br><span class="line">  Breadcrumb,</span><br><span class="line">  BreadcrumbItem,</span><br><span class="line">  Form,</span><br><span class="line">  FormItem,</span><br><span class="line">  Tabs,</span><br><span class="line">  TabPane,</span><br><span class="line">  Tag,</span><br><span class="line">  Tree,</span><br><span class="line">  Alert,</span><br><span class="line">  Slider,</span><br><span class="line">  Icon,</span><br><span class="line">  Row,</span><br><span class="line">  Col,</span><br><span class="line">  Upload,</span><br><span class="line">  Progress,</span><br><span class="line">  Spinner,</span><br><span class="line">  Badge,</span><br><span class="line">  Card,</span><br><span class="line">  Rate,</span><br><span class="line">  Steps,</span><br><span class="line">  Step,</span><br><span class="line">  Carousel,</span><br><span class="line">  CarouselItem,</span><br><span class="line">  Collapse,</span><br><span class="line">  CollapseItem,</span><br><span class="line">  Cascader,</span><br><span class="line">  ColorPicker,</span><br><span class="line">  Transfer,</span><br><span class="line">  Container,</span><br><span class="line">  Header,</span><br><span class="line">  Aside,</span><br><span class="line">  Main,</span><br><span class="line">  Footer,</span><br><span class="line">  Timeline,</span><br><span class="line">  TimelineItem,</span><br><span class="line">  Link,</span><br><span class="line">  Divider,</span><br><span class="line">  Image,</span><br><span class="line">  Calendar,</span><br><span class="line">  Backtop,</span><br><span class="line">  PageHeader,</span><br><span class="line">  CascaderPanel,</span><br><span class="line">  Loading,</span><br><span class="line">  MessageBox,</span><br><span class="line">  Message,</span><br><span class="line">  Notification,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Pagination)</span><br><span class="line">Vue.use(Dialog)</span><br><span class="line">Vue.use(Autocomplete)</span><br><span class="line">Vue.use(Dropdown)</span><br><span class="line">Vue.use(DropdownMenu)</span><br><span class="line">Vue.use(DropdownItem)</span><br><span class="line">Vue.use(Menu)</span><br><span class="line">Vue.use(Submenu)</span><br><span class="line">Vue.use(MenuItem)</span><br><span class="line">Vue.use(MenuItemGroup)</span><br><span class="line">Vue.use(Input)</span><br><span class="line">Vue.use(InputNumber)</span><br><span class="line">Vue.use(Radio)</span><br><span class="line">Vue.use(RadioGroup)</span><br><span class="line">Vue.use(RadioButton)</span><br><span class="line">Vue.use(Checkbox)</span><br><span class="line">Vue.use(CheckboxButton)</span><br><span class="line">Vue.use(CheckboxGroup)</span><br><span class="line">Vue.use(Switch)</span><br><span class="line">Vue.use(Select)</span><br><span class="line">Vue.use(Option)</span><br><span class="line">Vue.use(OptionGroup)</span><br><span class="line">Vue.use(Button)</span><br><span class="line">Vue.use(ButtonGroup)</span><br><span class="line">Vue.use(Table)</span><br><span class="line">Vue.use(TableColumn)</span><br><span class="line">Vue.use(DatePicker)</span><br><span class="line">Vue.use(TimeSelect)</span><br><span class="line">Vue.use(TimePicker)</span><br><span class="line">Vue.use(Popover)</span><br><span class="line">Vue.use(Tooltip)</span><br><span class="line">Vue.use(Breadcrumb)</span><br><span class="line">Vue.use(BreadcrumbItem)</span><br><span class="line">Vue.use(Form)</span><br><span class="line">Vue.use(FormItem)</span><br><span class="line">Vue.use(Tabs)</span><br><span class="line">Vue.use(TabPane)</span><br><span class="line">Vue.use(Tag)</span><br><span class="line">Vue.use(Tree)</span><br><span class="line">Vue.use(Alert)</span><br><span class="line">Vue.use(Slider)</span><br><span class="line">Vue.use(Icon)</span><br><span class="line">Vue.use(Row)</span><br><span class="line">Vue.use(Col)</span><br><span class="line">Vue.use(Upload)</span><br><span class="line">Vue.use(Progress)</span><br><span class="line">Vue.use(Spinner)</span><br><span class="line">Vue.use(Badge)</span><br><span class="line">Vue.use(Card)</span><br><span class="line">Vue.use(Rate)</span><br><span class="line">Vue.use(Steps)</span><br><span class="line">Vue.use(Step)</span><br><span class="line">Vue.use(Carousel)</span><br><span class="line">Vue.use(CarouselItem)</span><br><span class="line">Vue.use(Collapse)</span><br><span class="line">Vue.use(CollapseItem)</span><br><span class="line">Vue.use(Cascader)</span><br><span class="line">Vue.use(ColorPicker)</span><br><span class="line">Vue.use(Transfer)</span><br><span class="line">Vue.use(Container)</span><br><span class="line">Vue.use(Header)</span><br><span class="line">Vue.use(Aside)</span><br><span class="line">Vue.use(Main)</span><br><span class="line">Vue.use(Footer)</span><br><span class="line">Vue.use(Timeline)</span><br><span class="line">Vue.use(TimelineItem)</span><br><span class="line">Vue.use(Link)</span><br><span class="line">Vue.use(Divider)</span><br><span class="line">Vue.use(Image)</span><br><span class="line">Vue.use(Calendar)</span><br><span class="line">Vue.use(Backtop)</span><br><span class="line">Vue.use(PageHeader)</span><br><span class="line">Vue.use(CascaderPanel)</span><br><span class="line"></span><br><span class="line">Vue.use(Loading.directive)</span><br><span class="line"></span><br><span class="line">Vue.prototype.$loading = Loading.service</span><br><span class="line">Vue.prototype.$msgbox = MessageBox</span><br><span class="line">Vue.prototype.$alert = MessageBox.alert</span><br><span class="line">Vue.prototype.$confirm = MessageBox.confirm</span><br><span class="line">Vue.prototype.$prompt = MessageBox.prompt</span><br><span class="line">Vue.prototype.$notify = Notification</span><br><span class="line">Vue.prototype.$message = Message</span><br></pre></td></tr></table></figure>

<h3 id="¶全局配置"><a href="#¶全局配置" class="headerlink" title="¶全局配置"></a><a href="https://element.eleme.cn/#/zh-CN/component/quickstart#quan-ju-pei-zhi">¶</a>全局配置</h3><p>在引入 Element 时，可以传入一个全局配置对象。该对象目前支持 <code>size</code> 与 <code>zIndex</code> 字段。<code>size</code> 用于改变组件的默认尺寸，<code>zIndex</code> 设置弹框的初始 z-index（默认值：2000）。按照引入 Element 的方式，具体操作如下：</p>
<p>完整引入 Element：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Element <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line">Vue.use(Element, &#123; <span class="attr">size</span>: <span class="string">&#x27;small&#x27;</span>, <span class="attr">zIndex</span>: <span class="number">3000</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>按需引入 Element：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$ELEMENT = &#123; <span class="attr">size</span>: <span class="string">&#x27;small&#x27;</span>, <span class="attr">zIndex</span>: <span class="number">3000</span> &#125;</span><br><span class="line">Vue.use(Button)</span><br></pre></td></tr></table></figure>

<p>按照以上设置，项目中所有拥有 <code>size</code> 属性的组件的默认尺寸均为 ‘small’，弹框的初始 z-index 为 3000。</p>
<h3 id="¶开始使用"><a href="#¶开始使用" class="headerlink" title="¶开始使用"></a><a href="https://element.eleme.cn/#/zh-CN/component/quickstart#kai-shi-shi-yong">¶</a>开始使用</h3><p>至此，一个基于 Vue 和 Element 的开发环境已经搭建完毕，现在就可以编写代码了。各个组件的使用方法请参阅它们各自的文档。</p>
]]></content>
      <categories>
        <category>element-ui</category>
      </categories>
      <tags>
        <tag>element-ui</tag>
      </tags>
  </entry>
  <entry>
    <title>egg.js学习</title>
    <url>/taiaiac.gitee.io/2021/01/16/egg.js/egg%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1 id="什么是egg？"><a href="#什么是egg？" class="headerlink" title="什么是egg？"></a>什么是egg？</h1><p><strong>Egg.js 为企业级框架和应用而生</strong>，我们希望由 Egg.js 孕育出更多上层框架，帮助开发团队和开发人员降低开发和维护成本。</p>
<ul>
<li><strong>一个插件只做一件事</strong></li>
<li>Nunjucks模板<ul>
<li> <a href="https://github.com/eggjs/egg-view-nunjucks">egg-view-nunjucks</a></li>
</ul>
</li>
<li>MySQL 数据库<ul>
<li><a href="https://github.com/eggjs/egg-mysql">egg-mysql</a></li>
</ul>
</li>
<li>奉行『<strong>约定优于配置</strong>』<ul>
<li>按照<a href="https://eggjs.org/zh-cn/advanced/loader.html">一套统一的约定</a>进行应用开发</li>
</ul>
</li>
</ul>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li>提供基于 Egg <a href="https://eggjs.org/zh-cn/advanced/framework.html">定制上层框架</a>的能力</li>
<li>高度可扩展的<a href="https://eggjs.org/zh-cn/basics/plugin.html">插件机制</a></li>
<li>内置<a href="https://eggjs.org/zh-cn/advanced/cluster-client.html">多进程管理</a></li>
<li>基于 <a href="http://koajs.com/">Koa</a> 开发，性能优异</li>
<li>框架稳定，测试覆盖率高</li>
<li><a href="https://eggjs.org/zh-cn/tutorials/progressive.html">渐进式开发</a></li>
</ul>
<h2 id="异步编程模型"><a href="#异步编程模型" class="headerlink" title="异步编程模型"></a>异步编程模型</h2><ul>
<li>async function</li>
<li>Egg 继承于 Koa</li>
<li>插件<ul>
<li>extend：扩展基础对象的上下文，提供各种工具类、属性。</li>
<li>middleware：增加一个或多个中间件，提供请求的前置、后置处理逻辑。</li>
<li>config：配置各个环境下插件自身的默认配置项。</li>
</ul>
</li>
</ul>
<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><ul>
<li>操作系统：支持 macOS，Linux，Windows</li>
<li>运行环境：建议选择 <a href="http://nodejs.org/">LTS 版本</a>，最低要求 8.x。</li>
</ul>
<h2 id="快速初始化"><a href="#快速初始化" class="headerlink" title="快速初始化"></a>快速初始化</h2><p>我们推荐直接使用脚手架，只需几条简单指令，即可快速生成项目（<code>npm &gt;=6.1.0</code>）:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir egg-example &amp;&amp; cd egg-example</span><br><span class="line">npm init egg --type=simple</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure>

<p>启动项目:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br><span class="line">open http://localhost:7001</span><br></pre></td></tr></table></figure>

<h2 id="逐步搭建"><a href="#逐步搭建" class="headerlink" title="逐步搭建"></a>逐步搭建</h2><p><strong>注意：实际项目中，推荐使用脚手架直接初始化。</strong></p>
<h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><p>先来初始化下目录结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ mkdir egg-example</span><br><span class="line">$ cd egg-example</span><br><span class="line">$ npm init</span><br><span class="line">$ npm i egg --save</span><br><span class="line">$ npm i egg-bin --save-dev</span><br></pre></td></tr></table></figure>

<p>添加 <code>npm scripts</code> 到 <code>package.json</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;egg-example&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;dev&quot;: &quot;egg-bin dev&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编写 Controller目录</li>
<li>配置路由</li>
<li>设置cookie（config文件）</li>
<li>模板渲染引擎（nunjucks插件）</li>
<li>编写service<ul>
<li>业务逻辑层</li>
<li>抓取数据</li>
<li>。。。。</li>
</ul>
</li>
</ul>
<h1 id="框架内置基础对象"><a href="#框架内置基础对象" class="headerlink" title="框架内置基础对象"></a>框架内置基础对象</h1><ul>
<li>从koa继承而来的四个对象<ul>
<li>Application（实例对象，应用程序）</li>
<li>Context（上下文，ctx）</li>
<li>Request（请求）</li>
<li>Responese（响应）</li>
</ul>
</li>
<li>扩展的一些对象<ul>
<li>Controller（控制器）</li>
<li>Service（服务）</li>
<li>Helper（）</li>
<li>Config（设置，配置）</li>
<li>Logger（记录器）</li>
</ul>
</li>
</ul>
<h2 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h2><ul>
<li>全局应用对象</li>
<li>只会实例化一个</li>
<li>可以挂载方法和对象（全局）</li>
</ul>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><ul>
<li><code>server</code>: 该事件一个 worker 进程只会触发一次，在 HTTP 服务完成启动后，会将 HTTP server 通过这个事件暴露出来给开发者。</li>
<li><code>error</code>: 运行时有任何的异常被 onerror 插件捕获后，都会触发 <code>error</code> 事件，将错误对象和关联的上下文（如果有）暴露给开发者，可以进行自定义的日志记录上报等处理。</li>
<li><code>request</code> 和 <code>response</code>: 应用收到请求和响应请求时，分别会触发 <code>request</code> 和 <code>response</code> 事件，并将当前请求上下文暴露出来，开发者可以监听这两个事件来进行日志记录。</li>
</ul>
<h3 id="获取方式"><a href="#获取方式" class="headerlink" title="获取方式"></a>获取方式</h3><ul>
<li>在app.js中自定义</li>
<li>exports导出</li>
<li>在几乎任意文件中使用this.app使用</li>
</ul>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>Context 是一个<strong>请求级别的对象</strong>，继承自 <a href="http://koajs.com/#context">Koa.Context</a>。在每一次收到用户请求时，框架会实例化一个 Context 对象，这个对象封装了这次用户请求的信息，并提供了许多便捷的方法来获取请求参数或者设置响应信息。框架会将所有的 <a href="https://eggjs.org/zh-cn/basics/service.html">Service</a> 挂载到 Context 实例上。</p>
<h3 id="获取方式-1"><a href="#获取方式-1" class="headerlink" title="获取方式"></a>获取方式</h3><ul>
<li>在Middleware中</li>
<li>在Controller中</li>
<li>在Service中</li>
<li>this.ctx</li>
<li>ctx.xxx</li>
</ul>
<h2 id="Request-amp-Responese"><a href="#Request-amp-Responese" class="headerlink" title="Request &amp; Responese"></a>Request &amp; Responese</h2><ul>
<li>Request 是一个<strong>请求级别的对象</strong><ul>
<li>继承自 <a href="http://koajs.com/#request">Koa.Request</a></li>
<li>封装了 Node.js 原生的 HTTP Request 对象</li>
</ul>
</li>
<li>Response 是一个<strong>请求级别的对象</strong><ul>
<li>继承自 <a href="http://koajs.com/#response">Koa.Response</a></li>
<li>封装了 Node.js 原生的 HTTP Response 对象</li>
</ul>
</li>
</ul>
<h3 id="获取方式-2"><a href="#获取方式-2" class="headerlink" title="获取方式"></a>获取方式</h3><ul>
<li>Request(<code>ctx.request</code>)<ul>
<li><strong>ctx.request.query.id</strong></li>
<li><code>ctx.request.query.id</code> =<code>ctx.query.id</code></li>
</ul>
</li>
<li>Response(<code>ctx.response</code>)<ul>
<li><strong>ctx.response.body</strong></li>
<li><code>ctx.response.body=</code> 和 <code>ctx.body=</code> 是等价的</li>
<li>获取 POST 的 body 应该使用 <code>ctx.request.body</code>，而不是 <code>ctx.body</code>。</li>
</ul>
</li>
</ul>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p>框架提供了一个 Controller 基类，并推荐所有的 <a href="https://eggjs.org/zh-cn/basics/controller.html">Controller</a> 都继承于该基类实现。这个 Controller 基类有下列属性：</p>
<ul>
<li><code>ctx</code> - 当前请求的 <a href="https://eggjs.org/zh-cn/basics/objects.html#context">Context</a> 实例。</li>
<li><code>app</code> - 应用的 <a href="https://eggjs.org/zh-cn/basics/objects.html#application">Application</a> 实例。</li>
<li><code>config</code> - 应用的<a href="https://eggjs.org/zh-cn/basics/config.html">配置</a>。</li>
<li><code>service</code> - 应用所有的 <a href="https://eggjs.org/zh-cn/basics/service.html">service</a>。</li>
<li><code>logger</code> - 为当前 controller 封装的 logger 对象。</li>
</ul>
<h3 id="引用方式"><a href="#引用方式" class="headerlink" title="引用方式"></a>引用方式</h3><ul>
<li>从 egg 上获取（推荐）</li>
<li>从app实例上获取</li>
</ul>
<h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><p>框架提供了一个 Service 基类，并推荐所有的 <a href="https://eggjs.org/zh-cn/basics/service.html">Service</a> 都继承于该基类实现。</p>
<p>Service 基类的属性和 <a href="https://eggjs.org/zh-cn/basics/objects.html#controller">Controller</a> 基类属性一致，访问方式也类似：</p>
<h3 id="引用方式-1"><a href="#引用方式-1" class="headerlink" title="引用方式"></a>引用方式</h3><ul>
<li>从 egg 上获取（推荐）</li>
<li>从app实例上获取</li>
</ul>
<h2 id="Helper"><a href="#Helper" class="headerlink" title="Helper"></a>Helper</h2><p>Helper 用来提供一些实用的 utility 函数。它的作用在于我们可以将一些常用的动作抽离在 helper.js 里面成为一个独立的函数，这样可以用 JavaScript 来写复杂的逻辑，避免逻辑分散各处，同时可以更好的编写测试用例。</p>
<p>Helper 自身是一个类，有和 <a href="https://eggjs.org/zh-cn/basics/objects.html#controller">Controller</a> 基类一样的属性，它也会在每次请求时进行实例化，因此 Helper 上的所有函数也能获取到当前请求相关的上下文信息。</p>
<h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h2><p>我们推荐应用开发遵循配置和代码分离的原则，将一些需要硬编码的业务配置都放到配置文件中，同时配置文件支持各个不同的运行环境使用不同的配置，使用起来也非常方便，所有框架、插件和应用级别的配置都可以通过 Config 对象获取到，关于框架的配置，可以详细阅读 <a href="https://eggjs.org/zh-cn/basics/config.html">Config 配置</a>章节。</p>
<h3 id="获取方式-3"><a href="#获取方式-3" class="headerlink" title="获取方式"></a>获取方式</h3><p>我们可以通过 <code>app.config</code> 从 Application 实例上获取到 config 对象，也可以在 Controller, Service, Helper 的实例上通过 <code>this.config</code> 获取到 config 对象。</p>
<h2 id="Logger"><a href="#Logger" class="headerlink" title="Logger"></a>Logger</h2><p>框架内置了功能强大的<a href="https://eggjs.org/zh-cn/core/logger.html">日志功能</a>，可以非常方便的打印各种级别的日志到对应的日志文件中，每一个 logger 对象都提供了 4 个级别的方法：</p>
<ul>
<li><code>logger.debug()</code></li>
<li><code>logger.info()</code></li>
<li><code>logger.warn()</code></li>
<li><code>logger.error()</code></li>
</ul>
<p>在框架中提供了多个 Logger 对象，下面我们简单的介绍一下各个 Logger 对象的获取方式和使用场景</p>
<h2 id="Subscription"><a href="#Subscription" class="headerlink" title="Subscription"></a>Subscription</h2><p>订阅模型是一种比较常见的开发模式，譬如消息中间件的消费者或调度任务。因此我们提供了 Subscription 基类来规范化这个模式。</p>
<p>可以通过以下方式来引用 Subscription 基类：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Subscription = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>).Subscription;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Schedule</span> <span class="keyword">extends</span> <span class="title">Subscription</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 需要实现此方法</span></span><br><span class="line">  <span class="comment">// subscribe 可以为 async function 或 generator function</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">subscribe</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>表单请求不显示username、password的问题，需要在请求路径中添加下面的字段，在egg官网中安全设定。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?_csrf=&#123;&#123; ctx.csrf | safe &#125;&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>egg.js</category>
      </categories>
      <tags>
        <tag>egg.js</tag>
      </tags>
  </entry>
  <entry>
    <title>分页处理</title>
    <url>/taiaiac.gitee.io/2020/12/30/layui/%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 页面加载请求数据</span></span><br><span class="line">  <span class="comment">// async await 取出数据</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getAjax</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 取出的数据res  使用promis保存数据</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">        <span class="comment">//模拟请求的远程数据</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;../JSON/case.json&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">        <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">          resolve(res)</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分页组件</span></span><br><span class="line">    layui.use([<span class="string">&#x27;laypage&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> laypage = layui.laypage,</span><br><span class="line">        layer = layui.layer</span><br><span class="line">      <span class="comment">//自定义首页、尾页、上一页、下一页文本</span></span><br><span class="line">      laypage.render(&#123;</span><br><span class="line">        <span class="attr">elem</span>: <span class="string">&#x27;demo&#x27;</span>, <span class="comment">//id</span></span><br><span class="line">        <span class="attr">count</span>: res.length, <span class="comment">//数据总数</span></span><br><span class="line">        <span class="attr">limit</span>: <span class="number">12</span>, <span class="comment">//每页显示的条数</span></span><br><span class="line">        <span class="attr">groups</span>: <span class="number">5</span>, <span class="comment">//连续出现的页码个数</span></span><br><span class="line">        <span class="attr">theme</span>: <span class="string">&#x27;#c00000&#x27;</span>, <span class="comment">//背景</span></span><br><span class="line">        <span class="attr">first</span>: <span class="string">&#x27;首页&#x27;</span>,</span><br><span class="line">        <span class="attr">last</span>: <span class="string">&#x27;尾页&#x27;</span>,</span><br><span class="line">        <span class="attr">prev</span>: <span class="string">&#x27;&lt;em&gt;←&lt;/em&gt;&#x27;</span>,</span><br><span class="line">        <span class="attr">next</span>: <span class="string">&#x27;&lt;em&gt;→&lt;/em&gt;&#x27;</span>,</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 描述</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>obj 当前的对象</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>first 分页的第一页</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="attr">jump</span>: <span class="function"><span class="keyword">function</span> (<span class="params">obj, first</span>) </span>&#123;</span><br><span class="line">          <span class="comment">//当前页pageNum</span></span><br><span class="line">          <span class="keyword">let</span> pageNum = obj.curr</span><br><span class="line">          <span class="comment">// 首个下标start</span></span><br><span class="line">          <span class="keyword">let</span> start = (pageNum - <span class="number">1</span>) * <span class="built_in">this</span>.limit</span><br><span class="line">          <span class="comment">// 末尾下标end</span></span><br><span class="line">          <span class="keyword">let</span> end = start + <span class="built_in">this</span>.limit</span><br><span class="line">          <span class="keyword">if</span> (end &gt;= <span class="built_in">this</span>.count) &#123;</span><br><span class="line">            end = <span class="built_in">this</span>.count</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 不是第一页的时候清空页面元素</span></span><br><span class="line">          <span class="keyword">if</span> (!first) &#123;</span><br><span class="line">            $(<span class="string">&#x27;.case-item-append&#x27;</span>).empty()</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//获得数组指定区段的元素，进行页面拼接</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">            setItem(res[i])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  getAjax()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setItem</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> layuiCol = $(<span class="string">`&lt;div class=&quot;layui-col-md4 case-item&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;case-item-border&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;case-item-LT&quot;&gt;禁止转载&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;case-item-bg&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;case-item-head&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;case-item-text&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;h4&gt;<span class="subst">$&#123;obj.title&#125;</span>&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;设计师：&lt;i&gt;<span class="subst">$&#123;obj.name&#125;</span>&lt;/i&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;面积：&lt;i&gt;<span class="subst">$&#123;obj.acreage&#125;</span>.00㎡&lt;/i&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;工程地址：&lt;i&gt;<span class="subst">$&#123;obj.site&#125;</span>&lt;/i&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;`</span>)</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;.case-item-append&#x27;</span>).append(layuiCol)</span><br><span class="line">  $(<span class="string">&#x27;.case-item-bg:last&#x27;</span>).css(&#123;</span><br><span class="line">    <span class="string">&#x27;background-image&#x27;</span>: obj.bg,</span><br><span class="line">  &#125;)</span><br><span class="line">  $(<span class="string">&#x27;.case-item-head:last&#x27;</span>).css(&#123;</span><br><span class="line">    <span class="string">&#x27;background-image&#x27;</span>: obj.head,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>layui</category>
      </categories>
      <tags>
        <tag>layui</tag>
      </tags>
  </entry>
  <entry>
    <title>gitee搭建博客踩坑总结</title>
    <url>/taiaiac.gitee.io/2021/01/05/hexo/gitee%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E8%B8%A9%E5%9D%91%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>经过了一周的折腾终于把自己喜欢的主题在gitee上搭好了，由于踩的坑比较多还是准备记录一下。</p>
<p>说下hexo，hexo是基于node的一个博客框架，主要功能就是读取md语法和解析文件目录，文件分类，等等。。。</p>
<p>关于如何搭建跟着官网流程十分钟就能搭出一个默认主题的blog了，这里主要记录我就算跟着教程走还是出现的疑难杂症。</p>
<h2 id="远程部署gitee的问题"><a href="#远程部署gitee的问题" class="headerlink" title="远程部署gitee的问题"></a>远程部署gitee的问题</h2><h4 id="配置文件-config-yml"><a href="#配置文件-config-yml" class="headerlink" title="配置文件_config.yml"></a>配置文件_config.yml</h4><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># _config.yml</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">远程地址</span></span><br><span class="line"><span class="string">root:/仓库名</span></span><br><span class="line"><span class="comment"># _config.yml 拖到最后找到deploy选项</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">https://你的账号:你的密码@你的仓库地址</span></span><br></pre></td></tr></table></figure>

<h4 id="自动发布搭建的静态博客"><a href="#自动发布搭建的静态博客" class="headerlink" title="自动发布搭建的静态博客"></a>自动发布搭建的静态博客</h4><p>下载自动发布插件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>网上的教程也仅至与此了，因为每次提交部署测试都很耗费时间，这个 url 和 root 的配置着实费时间，下面更细致的介绍一下让我们更准确的填写个人配置。</p>
<ol>
<li><p>打开gitee</p>
</li>
<li><p>创建仓库 </p>
</li>
<li><p>进入仓库复制地址填写到url选项后也就是</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">url: 远程地址</span><br></pre></td></tr></table></figure>
</li>
<li><p>复制仓库名填入root，前面加<code>/</code></p>
</li>
</ol>
<p>ok，这样地址可以保证是准确的，后续出现问题可以排除远程地址和根目录的缘故了</p>
<h2 id="增加和修改后页面不刷新"><a href="#增加和修改后页面不刷新" class="headerlink" title="增加和修改后页面不刷新"></a>增加和修改后页面不刷新</h2><p>使用<code>hexo clean</code> 清除缓存和删除<code>db.json</code>文件和清除浏览器缓存，原因是有缓存，没及时更新</p>
<h2 id="资源丢失类的报错"><a href="#资源丢失类的报错" class="headerlink" title="资源丢失类的报错"></a>资源丢失类的报错</h2><p>本地服务器启动时没有报错，远程部署后出现资源丢失或者变量未定义之类的报错，很大可能是因为nodejs版本问题，版本过高或者过低，建议百度适合主题的nodejs版本（我用的是v12.14.0）</p>
<h2 id="使用主题出现的疑难杂症"><a href="#使用主题出现的疑难杂症" class="headerlink" title="使用主题出现的疑难杂症"></a>使用主题出现的疑难杂症</h2><p>每个主题中都会有config.yml的配置文件，总配置文件中有大部分的个性化设置，建议把英文注释都翻译一下，设置基本就清晰了，还有的主题可能不支持中文，会出现乱码</p>
<h2 id="2d模型小人"><a href="#2d模型小人" class="headerlink" title="2d模型小人"></a>2d模型小人</h2><p>百度搜索hexo-helper-live2d，简单傻瓜式操作，几步完成</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo基本使用</title>
    <url>/taiaiac.gitee.io/2020/12/31/hexo/hexo%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="1-Hexo-介绍"><a href="#1-Hexo-介绍" class="headerlink" title="1.Hexo 介绍"></a>1.Hexo 介绍</h2><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<p>官网地址：<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p>
<h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><ul>
<li>node.js</li>
<li>Git</li>
</ul>
<h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><p>全局安装 H</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h2 id="2-指令"><a href="#2-指令" class="headerlink" title="2.指令"></a>2.指令</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo init &#x27;项目名&#x27;</span><br></pre></td></tr></table></figure>

<p>新建一个网站。如果没有设置 <code>项目名</code> ，Hexo 默认在目前的文件夹建立网站。</p>
<h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo new &#x27;文章名&#x27;</span><br></pre></td></tr></table></figure>

<p>标题包含空格的话，请使用引号括起来。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo new &quot;post title with whitespace&quot;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">简写</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">–path</td>
<td align="center">-p</td>
<td align="center">自定义新文章的路径</td>
</tr>
<tr>
<td align="center">–replace</td>
<td align="center">-r</td>
<td align="center">如果存在同名文章，将其替换</td>
</tr>
<tr>
<td align="center">–slug</td>
<td align="center">-s</td>
<td align="center">文章的 Slug，作为新文章的文件名和发布后的 URL</td>
</tr>
</tbody></table>
<p>指定位置创建文章</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo new `title的值` -<span class="selector-tag">p</span> test/&#x27;文章名&#x27;</span><br></pre></td></tr></table></figure>

<p>路径为：_posts/test/文章</p>
<h3 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h3><p>生成静态文件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">简写</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>

<h3 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h3><p>发表草稿。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo publish &#x27;文章&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p>启动服务器。默认情况下，访问网址为： <code>http://localhost:4000/</code>。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<h3 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h3><p>部署网站。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line">简写</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><p>渲染文件。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo render &#x27;文章&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><p>清除缓存文件 (<code>db.json</code>) 和已生成的静态文件 (<code>public</code>)。</p>
<p>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure>

<h3 id="监视文件变动"><a href="#监视文件变动" class="headerlink" title="监视文件变动"></a>监视文件变动</h3><p>Hexo 能够监视文件变动并立即重新生成静态文件，在生成时会比对文件的 SHA1 checksum，只有变动的文件才会写入。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo generate --watch</span><br></pre></td></tr></table></figure>

<h3 id="完成后部署"><a href="#完成后部署" class="headerlink" title="完成后部署"></a>完成后部署</h3><p>您可执行下列的其中一个命令，让 Hexo 在生成完毕后自动部署网站，两个命令的作用是相同的。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo generate --deploy</span><br><span class="line">hexo deploy --generate</span><br></pre></td></tr></table></figure>

<blockquote>
<p>简写</p>
<p>上面两个命令可以简写为<br>$ hexo g -d<br>$ hexo d -g</p>
</blockquote>
<h2 id="3-gitee部署"><a href="#3-gitee部署" class="headerlink" title="3.gitee部署"></a>3.gitee部署</h2><h3 id="配置文件-config-yml"><a href="#配置文件-config-yml" class="headerlink" title="配置文件_config.yml"></a>配置文件_config.yml</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># _config.yml</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">远程地址</span></span><br><span class="line"><span class="string">root:/仓库名</span></span><br><span class="line"><span class="comment"># _config.yml 拖到最后找到deploy选项</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">https://你的账号:你的密码@你的仓库地址</span></span><br></pre></td></tr></table></figure>

<h3 id="自动发布搭建的静态博客"><a href="#自动发布搭建的静态博客" class="headerlink" title="自动发布搭建的静态博客"></a>自动发布搭建的静态博客</h3><p>下载自动发布插件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h4 id="命令行发布"><a href="#命令行发布" class="headerlink" title="命令行发布"></a>命令行发布</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>这样第一次的部署就完成了</p>
<h4 id="后续发布"><a href="#后续发布" class="headerlink" title="后续发布"></a>后续发布</h4><p>使用 Hexo 命令行生成静态文件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<h2 id="4-自定义"><a href="#4-自定义" class="headerlink" title="4.自定义"></a>4.自定义</h2><p>见官网。</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>页面布局</title>
    <url>/taiaiac.gitee.io/2020/12/30/layui/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<h1 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h1><h3 id="将栅格放入一个带有-class-”layui-container”-的特定的容器中，以便在小屏幕以上的设备中固定宽度，让列可控"><a href="#将栅格放入一个带有-class-”layui-container”-的特定的容器中，以便在小屏幕以上的设备中固定宽度，让列可控" class="headerlink" title="将栅格放入一个带有 class=”layui-container” 的特定的容器中，以便在小屏幕以上的设备中固定宽度，让列可控"></a>将栅格放入一个带有 <em>class=”layui-container”</em> 的特定的容器中，以便在小屏幕以上的设备中固定宽度，让列可控</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="不固定容器宽度"><a href="#不固定容器宽度" class="headerlink" title="不固定容器宽度"></a>不固定容器宽度</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-fluid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="下面是一个简单的例子，列间距为-10px："><a href="#下面是一个简单的例子，列间距为-10px：" class="headerlink" title="下面是一个简单的例子，列间距为 10px："></a>下面是一个简单的例子，列间距为 10px：</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-space10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="列偏移："><a href="#列偏移：" class="headerlink" title="列偏移："></a>列偏移：</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md-offset4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​</p>
]]></content>
      <categories>
        <category>layui</category>
      </categories>
      <tags>
        <tag>layui</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo美化</title>
    <url>/taiaiac.gitee.io/2021/01/04/hexo/hexo%E7%BE%8E%E5%8C%96/</url>
    <content><![CDATA[<h2 id="添加卡通人物（看板娘）"><a href="#添加卡通人物（看板娘）" class="headerlink" title="添加卡通人物（看板娘）"></a>添加卡通人物（看板娘）</h2><h4 id="下载项目"><a href="#下载项目" class="headerlink" title="下载项目"></a>下载项目</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure>

<h4 id="下载模型"><a href="#下载模型" class="headerlink" title="下载模型"></a>下载模型</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install packagename</span><br></pre></td></tr></table></figure>

<h4 id="设置参数"><a href="#设置参数" class="headerlink" title="设置参数"></a>设置参数</h4><p>打开站点目录下的 _config.yml 文件，添加如下代码：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Live2D</span></span><br><span class="line"><span class="comment">## https://github.com/EYHN/hexo-helper-live2d</span></span><br><span class="line"><span class="comment">## https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init</span></span><br><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#enable: false</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span> <span class="comment"># 默认</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span> <span class="comment"># 插件在站点上的根目录(相对路径)</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span> <span class="comment"># 脚本文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span> <span class="comment"># 模型文件相对与插件根目录路径</span></span><br><span class="line">  <span class="comment"># scriptFrom: jsdelivr # jsdelivr CDN</span></span><br><span class="line">  <span class="comment"># scriptFrom: unpkg # unpkg CDN</span></span><br><span class="line">  <span class="comment"># scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span> <span class="comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span> <span class="comment"># 调试, 是否在控制台输出日志</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-hibiki</span></span><br><span class="line">    <span class="comment"># use: live2d-widget-model-wanko # npm-module package name</span></span><br><span class="line">    <span class="comment"># use: wanko # 博客根目录/live2d_models/ 下的目录名</span></span><br><span class="line">    <span class="comment"># use: ./wives/wanko # 相对于博客根目录的路径</span></span><br><span class="line">    <span class="comment"># use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">200</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">434</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span> <span class="comment"># 是否在移动设备上显示</span></span><br><span class="line">    <span class="attr">scale:</span> <span class="number">0.5</span> <span class="comment"># 移动设备上的缩放</span></span><br><span class="line">  <span class="attr">react:</span></span><br><span class="line">    <span class="attr">opacityDefault:</span> <span class="number">0.7</span></span><br><span class="line">    <span class="attr">opacityOnHover:</span> <span class="number">0.8</span></span><br></pre></td></tr></table></figure>

<h2 id="模型预览"><a href="#模型预览" class="headerlink" title="模型预览"></a>模型预览</h2><p>以下模型均是在<code>width: 150</code> 、<code>height: 300</code>下截得</p>
<h3 id="live2d-widget-model-chitose"><a href="#live2d-widget-model-chitose" class="headerlink" title="live2d-widget-model-chitose"></a>live2d-widget-model-chitose</h3><p><img src="https://img-blog.csdnimg.cn/20190213143712193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-chitose"></p>
<h3 id="live2d-widget-model-epsilon2-1"><a href="#live2d-widget-model-epsilon2-1" class="headerlink" title="live2d-widget-model-epsilon2_1"></a>live2d-widget-model-epsilon2_1</h3><p><img src="https://img-blog.csdnimg.cn/20190213143804975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-epsilon2_1"></p>
<h3 id="live2d-widget-model-gf"><a href="#live2d-widget-model-gf" class="headerlink" title="live2d-widget-model-gf"></a>live2d-widget-model-gf</h3><p><img src="https://img-blog.csdnimg.cn/20190213143827126.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-gf"></p>
<h3 id="live2d-widget-model-haru-01"><a href="#live2d-widget-model-haru-01" class="headerlink" title="live2d-widget-model-haru_01"></a>live2d-widget-model-haru_01</h3><p><img src="https://img-blog.csdnimg.cn/20190213143840834.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-haru_01"></p>
<h3 id="live2d-widget-model-haru-02"><a href="#live2d-widget-model-haru-02" class="headerlink" title="live2d-widget-model-haru_02"></a>live2d-widget-model-haru_02</h3><p><img src="https://img-blog.csdnimg.cn/20190213143852738.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-haru_02"></p>
<h3 id="live2d-widget-model-haruto"><a href="#live2d-widget-model-haruto" class="headerlink" title="live2d-widget-model-haruto"></a>live2d-widget-model-haruto</h3><p><img src="https://img-blog.csdnimg.cn/2019021314390429.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-haruto"></p>
<h3 id="live2d-widget-model-hibiki"><a href="#live2d-widget-model-hibiki" class="headerlink" title="live2d-widget-model-hibiki"></a>live2d-widget-model-hibiki</h3><p><img src="https://img-blog.csdnimg.cn/2019021314391665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-hibiki"></p>
<h3 id="live2d-widget-model-hijiki"><a href="#live2d-widget-model-hijiki" class="headerlink" title="live2d-widget-model-hijiki"></a>live2d-widget-model-hijiki</h3><p><img src="https://img-blog.csdnimg.cn/20190213143926652.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-hijiki"></p>
<h3 id="live2d-widget-model-izumi"><a href="#live2d-widget-model-izumi" class="headerlink" title="live2d-widget-model-izumi"></a>live2d-widget-model-izumi</h3><p><img src="https://img-blog.csdnimg.cn/20190213143935681.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-izumi"></p>
<h3 id="live2d-widget-model-koharu"><a href="#live2d-widget-model-koharu" class="headerlink" title="live2d-widget-model-koharu"></a>live2d-widget-model-koharu</h3><p><img src="https://img-blog.csdnimg.cn/20190213143946729.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-koharu"></p>
<h3 id="live2d-widget-model-miku"><a href="#live2d-widget-model-miku" class="headerlink" title="live2d-widget-model-miku"></a>live2d-widget-model-miku</h3><p><img src="https://img-blog.csdnimg.cn/20190213143956339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-miku"></p>
<h3 id="live2d-widget-model-nico"><a href="#live2d-widget-model-nico" class="headerlink" title="live2d-widget-model-nico"></a>live2d-widget-model-nico</h3><p><img src="https://img-blog.csdnimg.cn/20190213144006466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-nico"></p>
<h3 id="live2d-widget-model-nietzsche"><a href="#live2d-widget-model-nietzsche" class="headerlink" title="live2d-widget-model-nietzsche"></a>live2d-widget-model-nietzsche</h3><p><img src="https://img-blog.csdnimg.cn/20190213144016561.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-nietzsche"></p>
<h3 id="live2d-widget-model-ni-j"><a href="#live2d-widget-model-ni-j" class="headerlink" title="live2d-widget-model-ni-j"></a>live2d-widget-model-ni-j</h3><p><img src="https://img-blog.csdnimg.cn/20190213144024314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-ni-j"></p>
<h3 id="live2d-widget-model-nipsilon"><a href="#live2d-widget-model-nipsilon" class="headerlink" title="live2d-widget-model-nipsilon"></a>live2d-widget-model-nipsilon</h3><p><img src="https://img-blog.csdnimg.cn/2019021314403570.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-nipsilon"></p>
<h3 id="live2d-widget-model-nito"><a href="#live2d-widget-model-nito" class="headerlink" title="live2d-widget-model-nito"></a>live2d-widget-model-nito</h3><p><img src="https://img-blog.csdnimg.cn/20190213144043660.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-nito"></p>
<h3 id="live2d-widget-model-shizuku"><a href="#live2d-widget-model-shizuku" class="headerlink" title="live2d-widget-model-shizuku"></a>live2d-widget-model-shizuku</h3><p><img src="https://img-blog.csdnimg.cn/20190213144051578.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-shizuku"></p>
<h3 id="live2d-widget-model-tororo"><a href="#live2d-widget-model-tororo" class="headerlink" title="live2d-widget-model-tororo"></a>live2d-widget-model-tororo</h3><p><img src="https://img-blog.csdnimg.cn/20190213144100147.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-tororo"></p>
<h3 id="live2d-widget-model-tsumiki"><a href="#live2d-widget-model-tsumiki" class="headerlink" title="live2d-widget-model-tsumiki"></a>live2d-widget-model-tsumiki</h3><p><img src="https://img-blog.csdnimg.cn/20190213144108445.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-tsumiki"></p>
<h3 id="live2d-widget-model-unitychan"><a href="#live2d-widget-model-unitychan" class="headerlink" title="live2d-widget-model-unitychan"></a>live2d-widget-model-unitychan</h3><p><img src="https://img-blog.csdnimg.cn/20190213144116297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-unitychan"></p>
<h3 id="live2d-widget-model-wanko"><a href="#live2d-widget-model-wanko" class="headerlink" title="live2d-widget-model-wanko"></a>live2d-widget-model-wanko</h3><p><img src="https://img-blog.csdnimg.cn/20190213144124813.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-wanko"></p>
<h3 id="live2d-widget-model-z16"><a href="#live2d-widget-model-z16" class="headerlink" title="live2d-widget-model-z16"></a>live2d-widget-model-z16</h3><p><img src="https://img-blog.csdnimg.cn/20190213144132454.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdfMTIzX3p5,size_16,color_FFFFFF,t_70" alt="live2d-widget-model-z16"></p>
<h2 id="添加粒子效果"><a href="#添加粒子效果" class="headerlink" title="添加粒子效果"></a>添加粒子效果</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script</span><br><span class="line">      type=<span class="string">&quot;text/javascript&quot;</span></span><br><span class="line">      color=<span class="string">&quot;0,205,205&quot;</span></span><br><span class="line">      opacity=<span class="string">&quot;0.7&quot;</span></span><br><span class="line">      zIndex=<span class="string">&quot;-2&quot;</span></span><br><span class="line">      count=<span class="string">&quot;99&quot;</span></span><br><span class="line">      src=<span class="string">&quot;//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js&quot;</span></span><br><span class="line">    &gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>以上代码粘贴到body即可</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>video标签</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/video%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="center"><strong>属性</strong></th>
<th align="center"><strong>值</strong></th>
<th align="center"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">autoplay</td>
<td align="center">autoplay</td>
<td align="center">如果出现该属性，则视频在就绪后马上播放。</td>
</tr>
<tr>
<td align="center">controls</td>
<td align="center">controls</td>
<td align="center">如果出现该属性，则向用户显示控件，比如播放按钮。</td>
</tr>
<tr>
<td align="center">loop</td>
<td align="center"><em>loop</em></td>
<td align="center">如果出现该属性，则当媒介文件完成播放后再次开始播放。</td>
</tr>
<tr>
<td align="center">muted</td>
<td align="center">muted</td>
<td align="center">规定视频的音频输出应该被静音。</td>
</tr>
<tr>
<td align="center">poster</td>
<td align="center"><em>URL</em></td>
<td align="center">规定视频下载时显示的图像，或者在用户点击播放按钮前显示的图像。</td>
</tr>
<tr>
<td align="center">preload</td>
<td align="center">preload</td>
<td align="center">如果出现该属性，则视频在页面加载时进行加载，并预备播放。如果使用 “autoplay”，则忽略该属性。</td>
</tr>
<tr>
<td align="center">src</td>
<td align="center"><em>url</em></td>
<td align="center">要播放的视频的 URL。</td>
</tr>
</tbody></table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;.../xx.mp4&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">  <span class="attr">loop</span></span></span><br><span class="line"><span class="tag">  <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">  <span class="attr">muted</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>文本溢出省略</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E7%9C%81%E7%95%A5/</url>
    <content><![CDATA[<h2 id="不支持多行文本溢出显示省略号"><a href="#不支持多行文本溢出显示省略号" class="headerlink" title="不支持多行文本溢出显示省略号"></a>不支持多行文本溢出显示省略号</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br></pre></td></tr></table></figure>

<h2 id="WebKit-浏览器或移动端的页面"><a href="#WebKit-浏览器或移动端的页面" class="headerlink" title="WebKit 浏览器或移动端的页面"></a>WebKit 浏览器或移动端的页面</h2><p>这个属性比较合适 WebKit 浏览器或移动端（绝大部分是 WebKit 内核的）浏览器。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure>

<p>在 WebKit 浏览器或移动端（绝大部分是 WebKit 内核的浏览器）的页面实现比较简单，可以直接使用 WebKit 的 CSS 扩展属性(WebKit 是私有属性)<code>-webkit-line-clamp</code> ；注意：这是一个 不规范的属性（<a href="http://developer.apple.com/safari/library/documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/doc/uid/TP30001266-UnsupportedProperties">unsupported WebKit property</a>），它没有出现在 CSS 规范草案中。</p>
<p><code>-webkit-line-clamp</code>用来限制在一个块元素显示的文本的行数。 为了实现该效果，它需要组合其他的 WebKit 属性。查看 <code>text-overflow</code> 属性文档：<a href="https://www.html.cn/book/css/webkit/text/line-clamp.htm">https://www.html.cn/book/css/webkit/text/line-clamp.htm</a></p>
<p>常见结合属性：</p>
<ol>
<li><code>display: -webkit-box;</code> 必须结合的属性 ，将对象作为弹性伸缩盒子模型显示 。</li>
<li><code>-webkit-box-orient</code> 必须结合的属性 ，设置或检索伸缩盒对象的子元素的排列方式 。</li>
<li><code>text-overflow: ellipsis;</code>，可以用来多行文本的情况下，用省略号“…”隐藏超出范围的文本 。查看 <code>text-overflow</code> 属性文档：<a href="https://www.html.cn/book/css/properties/user-interface/text-overflow.htm">https://www.html.cn/book/css/properties/user-interface/text-overflow.htm</a></li>
</ol>
<h3 id="跨浏览器兼容的方案"><a href="#跨浏览器兼容的方案" class="headerlink" title="跨浏览器兼容的方案"></a>跨浏览器兼容的方案</h3><p>比较靠谱简单的做法就是设置相对定位的容器高度，用包含省略号(…)的元素模拟实现；</p>
<p>例如：</p>
<p>css 代码:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.4em</span>; <span class="comment">/* 3 times the line-height to show 3 lines */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4.2em</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">1px</span> <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">/newimg88/2014/09/ellipsis_bg.png</span>) repeat-y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看 demo：</p>
<iframe allowfullscreen="true" allowpaymentrequest="true" allowtransparency="true" class="cp_embed_iframe " frameborder="0" height="265" name="cp_embed_1" scrolling="no" src="https://codepen.io/feiwen8772/embed/gQJXzO?height=265&amp;theme-id=0&amp;slug-hash=gQJXzO&amp;default-tab=result&amp;animations=run&amp;editable=&amp;embed-version=2&amp;user=feiwen8772&amp;name=cp_embed_1" title="CodePen Embed" loading="lazy" id="cp_embed_gQJXzO" style="box-sizing: border-box; max-width: 100%; display: block; margin: 0px auto 16px; width: 718px; overflow: hidden;"></iframe>

<p>这里注意几点：</p>
<ol>
<li>height 高度真好是<code>line-height</code>的 3 倍；</li>
<li>结束的省略好用了半透明的 png 做了减淡的效果，或者设置背景颜色；</li>
<li>IE6-7 不显示<code>content</code>内容，所以要兼容 IE6-7 可以是在内容中加入一个标签，比如用<code>&lt;span class=&quot;line-clamp&quot;&gt;...&lt;/span&gt;</code>去模拟；</li>
<li>要支持 IE8，需要将<code>::after</code>替换成<code>:after</code>；</li>
</ol>
<h3 id="JavaScript-方案"><a href="#JavaScript-方案" class="headerlink" title="JavaScript 方案"></a>JavaScript 方案</h3><p>用 js 也可以根据上面的思路去模拟，实现也很简单，推荐几个做类似工作的成熟小工具：</p>
<h4 id="1-Clamp-js"><a href="#1-Clamp-js" class="headerlink" title="1.Clamp.js"></a>1.Clamp.js</h4><p>下载及文档地址：<a href="https://github.com/josephschmitt/Clamp.js">https://github.com/josephschmitt/Clamp.js</a><br>使用也非常简单：</p>
<p>js 代码:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;clamp-this-module&#x27;</span>)</span><br><span class="line">$clamp(<span class="built_in">module</span>, &#123; <span class="attr">clamp</span>: <span class="number">3</span> &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-jQuery-插件-jQuery-dotdotdot"><a href="#2-jQuery-插件-jQuery-dotdotdot" class="headerlink" title="2.jQuery 插件-jQuery.dotdotdot"></a>2.jQuery 插件-jQuery.dotdotdot</h4><p>这个使用起来也很方便：</p>
<p>js 代码:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&quot;#wrapper&quot;</span>).dotdotdot(&#123;        <span class="comment">//  configuration goes here    &#125;);</span></span><br><span class="line"></span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>斜切</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E6%96%9C%E5%88%87/</url>
    <content><![CDATA[<p>HTML</p>
<p><img src="https://img-blog.csdnimg.cn/20181203161923958.png" alt="img"></p>
<hr>
<p>效果图及 css 写法</p>
<p><img src="https://img-blog.csdnimg.cn/20181203161008518.png" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/20181203161512333.png" alt="img"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rectangle</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">305px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">75px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">135deg</span>, transparent <span class="number">52px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) top right;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><img src="https://img-blog.csdnimg.cn/20181203161831624.png" alt="img"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> <span class="selector-class">.rectangle</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">305px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">75px</span>;</span><br><span class="line">    <span class="attribute">background</span>: </span><br><span class="line">            <span class="built_in">linear-gradient</span>(-<span class="number">135deg</span>, transparent <span class="number">52px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) top right;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><img src="https://img-blog.csdnimg.cn/2018120317221413.png" alt="img"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rectangle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">305px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, transparent <span class="number">52px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) bottom right,</span><br><span class="line">    <span class="built_in">linear-gradient</span>(-<span class="number">135deg</span>, transparent <span class="number">52px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) top right;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><img src="https://img-blog.csdnimg.cn/20181203172333678.png" alt="img"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.rectangle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">305px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">75px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">135deg</span>, transparent <span class="number">52px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) top left, <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">45deg</span>,</span><br><span class="line">        transparent <span class="number">52px</span>,</span><br><span class="line">        <span class="number">#ffffff</span> <span class="number">0</span></span><br><span class="line">      ) bottom left,</span><br><span class="line">    <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, transparent <span class="number">52px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) bottom right, <span class="built_in">linear-gradient</span>(</span><br><span class="line">        -<span class="number">135deg</span>,</span><br><span class="line">        transparent <span class="number">52px</span>,</span><br><span class="line">        <span class="number">#ffffff</span> <span class="number">0</span></span><br><span class="line">      ) top right;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>滚动条设置</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h1 id="webkit-scrollbar-滚动条的设置"><a href="#webkit-scrollbar-滚动条的设置" class="headerlink" title="::-webkit-scrollbar 滚动条的设置"></a>::-webkit-scrollbar 滚动条的设置</h1><ul>
<li>::-webkit-scrollbar 滚动条整体部分</li>
<li>::-webkit-scrollbar-thumb 滚动条里面的小方块，能上下左右移动（取决于是垂直滚动条还是水平滚动条）</li>
<li>::-webkit-scrollbar-track 滚动条的轨道（里面装有 thumb）</li>
<li>::-webkit-scrollbar-button 滚动条轨道两端的按钮，允许通过点击微调小方块的位置</li>
<li>::-webkit-scrollbar-track-piece 内层轨道，滚动条中间部分（除去）</li>
<li>::-webkit-scrollbar-corner 边角，及两个滚动条的交汇处</li>
<li>::-webkit-resizer 两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</li>
</ul>
<h5 id="自定义滚动条简单版："><a href="#自定义滚动条简单版：" class="headerlink" title="自定义滚动条简单版："></a>自定义滚动条简单版：</h5><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*定义滚动条宽高及背景，宽高分别对应横竖滚动条的尺寸*/</span></span><br><span class="line"><span class="selector-class">.scrollbar</span>::-webkit-scrollbar &#123;</span><br><span class="line">  width: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*定义滚动条的轨道，内阴影及圆角*/</span></span><br><span class="line"><span class="selector-class">.scrollbar</span>::-webkit-scrollbar-track &#123;</span><br><span class="line">  -webkit-box-shadow: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*定义滑块，内阴影及圆角*/</span></span><br><span class="line"><span class="selector-class">.scrollbar</span>::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  /*width: <span class="number">10px</span>;*/</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>炫光按钮</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E7%82%AB%E5%85%89%E6%8C%89%E9%92%AE/</url>
    <content><![CDATA[<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="comment">/* background: linear-gradient(90deg, #845EC2, #5EC291, #ffeb3b, #C28C5E); */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#03a9f4</span>, <span class="number">#f441a5</span>, <span class="number">#ffeb3b</span>, <span class="number">#03a9f4</span>);</span><br><span class="line">  <span class="comment">/* background: linear-gradient(90deg, #845EC2, #5EC291, #ffeb3b, #C28C5E); */</span></span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="comment">/* 大写 */</span></span><br><span class="line">  <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#03a9f4</span>, <span class="number">#f441a5</span>, <span class="number">#ffeb3b</span>, <span class="number">#03a9f4</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: sun <span class="number">8s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: sun <span class="number">8s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> sun &#123;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">400%</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>流光<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>荧光边框</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E8%8D%A7%E5%85%89%E8%BE%B9%E6%A1%86/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#060c21</span>;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  place-items: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#060c21</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">2</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">40px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">235deg</span>, <span class="number">#89ff00</span>, <span class="number">#060c21</span>, <span class="number">#00bcd4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>边框流光</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E8%BE%B9%E6%A1%86%E6%B5%81%E5%85%89/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        可放内容</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animate-border&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="sass-文件"><a href="#sass-文件" class="headerlink" title="sass 文件"></a>sass 文件</h1><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="comment">/* border: 1px solid rgba(32,254,255,.3); */</span></span><br><span class="line">  <span class="comment">/* 宽高和相对定位是一定要给的,因为这会影响.animate-border子元素的定位 */</span></span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 利用伪元素和两个i元素产生4条线 */</span></span><br><span class="line">  <span class="selector-class">.animate-border</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">::before</span>,</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">i</span> &#123;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">display</span>: inline-block;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">background-image</span>: linear-gradient(<span class="number">90deg</span>, transparent, <span class="number">#03e9f4</span>);</span><br><span class="line">      <span class="comment">/* name  duration timing-function delay iteration-count diraction */</span></span><br><span class="line">      <span class="attribute">animation</span>: one <span class="number">4s</span> linear infinite;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="attribute">top</span>: -<span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">background-image</span>: linear-gradient(<span class="number">180deg</span>, transparent, <span class="number">#03e9f4</span>);</span><br><span class="line">      <span class="attribute">animation</span>: two <span class="number">4s</span> linear <span class="number">1s</span> infinite;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">right</span>: -<span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">background-image</span>: linear-gradient(-<span class="number">90deg</span>, transparent, <span class="number">#03e9f4</span>);</span><br><span class="line">      <span class="attribute">animation</span>: three <span class="number">4s</span> linear <span class="number">2s</span> infinite;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">      <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">background-image</span>: linear-gradient(<span class="number">360deg</span>, transparent, <span class="number">#03e9f4</span>);</span><br><span class="line">      <span class="attribute">animation</span>: four <span class="number">4s</span> linear <span class="number">3s</span> infinite;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> one &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> two &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> three &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> four &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>scroll滑动定位</title>
    <url>/taiaiac.gitee.io/2020/12/30/jQuery/scroll%E6%BB%91%E5%8A%A8%E5%AE%9A%E4%BD%8D/</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.nav&gt;ul&gt;li&#x27;</span>).on(<span class="string">&#x27;tap&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;.nav&gt;ul&gt;li&#x27;</span>).removeClass(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">  $(<span class="built_in">this</span>).addClass(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> left = <span class="built_in">this</span>.offsetLeft</span><br><span class="line">  <span class="keyword">if</span> (left &gt;= <span class="number">220</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">220</span> - left</span><br><span class="line">    $(<span class="built_in">this</span>)</span><br><span class="line">      .parent()</span><br><span class="line">      .css(&#123;</span><br><span class="line">        <span class="attr">transform</span>: <span class="string">`translateX(<span class="subst">$&#123;sum&#125;</span>px)`</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $(<span class="built_in">this</span>).parent().css(&#123;</span><br><span class="line">      <span class="attr">transform</span>: <span class="string">`translateX(0)`</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>jQuery</category>
      </categories>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>遮罩层</title>
    <url>/taiaiac.gitee.io/2020/12/30/html%E3%80%81css/%E9%81%AE%E7%BD%A9%E5%B1%82/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>遮罩层<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span><span class="selector-pseudo">:hover</span> + <span class="selector-class">.box2</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML、CSS</category>
      </categories>
      <tags>
        <tag>HTML、CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>选择器</title>
    <url>/taiaiac.gitee.io/2020/12/30/jQuery/%E9%80%89%E6%8B%A9%E5%99%A8/</url>
    <content><![CDATA[<h2 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1、标签选择器</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>).css(<span class="string">&#x27;font-size&#x27;</span>, <span class="string">&#x27;30px&#x27;</span>)</span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、类选择器</span></span><br><span class="line">$(<span class="string">&#x27;.p1&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、id选择器</span></span><br><span class="line">$(<span class="string">&#x27;#div4&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;green&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4、并集选择器</span></span><br><span class="line">$(<span class="string">&#x27;p,.p1,#div4&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">border</span>: <span class="string">&#x27;1px solid black&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5、通用选择器（全局选择器）</span></span><br><span class="line">$(<span class="string">&#x27;*&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">margin</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">padding</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">boxSizing</span>: <span class="string">&#x27;border-box&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="层级选择器"><a href="#层级选择器" class="headerlink" title="层级选择器"></a>层级选择器</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1、后代选择器 是包括子及孙元素</span></span><br><span class="line">$(<span class="string">&#x27;ul li&#x27;</span>).css(<span class="string">&#x27;border-bottom&#x27;</span>, <span class="string">&#x27;1px solid black&#x27;</span>)</span><br><span class="line">$(<span class="string">&#x27;ul li:first&#x27;</span>).css(<span class="string">&#x27;border-top&#x27;</span>, <span class="string">&#x27;1px solid black&#x27;</span>)</span><br><span class="line">$(<span class="string">&#x27;ol li&#x27;</span>).css(<span class="string">&#x27;border&#x27;</span>, <span class="string">&#x27;none&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、子选择器  父元素的直接子元素，不包括孙及以下元素</span></span><br><span class="line">$(<span class="string">&#x27;ul&gt;li&#x27;</span>).css(<span class="string">&#x27;border-bottom&#x27;</span>, <span class="string">&#x27;1px solid blue&#x27;</span>)</span><br><span class="line">$(<span class="string">&#x27;ul&gt;li:first&#x27;</span>).css(<span class="string">&#x27;border-top&#x27;</span>, <span class="string">&#x27;1px solid blue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、相邻兄弟选择器</span></span><br><span class="line">$(<span class="string">&#x27;li.second+li&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4、li.second同级别的兄弟元素li</span></span><br><span class="line">$(<span class="string">&#x27;li.second~li&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1、有属性class的a标签</span></span><br><span class="line">$(<span class="string">&#x27;a[class]&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;black&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、有属性class=box-alink的a标签</span></span><br><span class="line">$(<span class="string">&#x27;a[class=box-alink]&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、有属性class值不等于box-alink的a标签</span></span><br><span class="line">$(<span class="string">&#x27;a[class!=box-alink]&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;pink&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//4、href以www开头</span></span><br><span class="line">$(<span class="string">&#x27;a[href^=www]&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//5、href以.cn结尾</span></span><br><span class="line">$(<span class="string">&#x27;a[href$=\\.cn]&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">border</span>: <span class="string">&#x27;1px solid black&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//6、href包含#</span></span><br><span class="line">$(<span class="string">&#x27;a[href*=\\#]&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">backgroundColor</span>: <span class="string">&#x27;#ddd&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//7、多个属性交集</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">&#x27;input[id][name$=man]&#x27;</span>).val())</span><br></pre></td></tr></table></figure>

<h2 id="过滤选择器（17）"><a href="#过滤选择器（17）" class="headerlink" title="过滤选择器（17）"></a>过滤选择器（17）</h2><h4 id="li中的第一个元素"><a href="#li中的第一个元素" class="headerlink" title="li中的第一个元素"></a><code>li中的第一个元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:first&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="li中的最后一个元素"><a href="#li中的最后一个元素" class="headerlink" title="li中的最后一个元素"></a><code>li中的最后一个元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:last&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="index-0的偶数行"><a href="#index-0的偶数行" class="headerlink" title="index=0的偶数行"></a><code>index=0的偶数行</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:even&#x27;</span>).css(<span class="string">&#x27;background-color&#x27;</span>, <span class="string">&#x27;skyblue&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="index-0的奇数行"><a href="#index-0的奇数行" class="headerlink" title="index=0的奇数行"></a><code>index=0的奇数行</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:odd&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">border</span>: <span class="string">&#x27;1px solid blue&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="不是指定选择器的li"><a href="#不是指定选择器的li" class="headerlink" title="不是指定选择器的li"></a><code>不是指定选择器的li</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:not(.list-item)&#x27;</span>).css(&#123;</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="string">&#x27;24px&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="等于指定index的li-index-0"><a href="#等于指定index的li-index-0" class="headerlink" title="等于指定index的li index=0"></a><code>等于指定index的li index=0</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:eq(3)&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="下标大于index"><a href="#下标大于index" class="headerlink" title="下标大于index"></a><code>下标大于index</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:gt(3)&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;brown&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="下标小于index"><a href="#下标小于index" class="headerlink" title="下标小于index"></a><code>下标小于index</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;li:lt(3)&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;green&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="找到所有h1-h6元素"><a href="#找到所有h1-h6元素" class="headerlink" title="找到所有h1-h6元素"></a><code>找到所有h1-h6元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;:header:odd&#x27;</span>).css(<span class="string">&#x27;background-color&#x27;</span>, <span class="string">&#x27;skyblue&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="非动画效果的元素执行动画效果"><a href="#非动画效果的元素执行动画效果" class="headerlink" title="非动画效果的元素执行动画效果"></a><code>非动画效果的元素执行动画效果</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#run&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;#app:not(:animated)&#x27;</span>).animate(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">left</span>: <span class="string">&#x27;+=20&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">1000</span></span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="获得焦点的元素"><a href="#获得焦点的元素" class="headerlink" title="获得焦点的元素"></a><code>获得焦点的元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#username&#x27;</span>).focus(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value)</span><br><span class="line">  <span class="built_in">console</span>.log($(<span class="built_in">this</span>).val())</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获得焦点的元素document.activeElement</span></span><br><span class="line">    <span class="comment">//$(document.activeElement).addClass(&#x27;focused&#x27;)</span></span><br><span class="line">    $(<span class="string">&#x27;:focus&#x27;</span>).addClass(<span class="string">&#x27;focused&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="所有的隐藏元素"><a href="#所有的隐藏元素" class="headerlink" title="所有的隐藏元素"></a><code>所有的隐藏元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> hideElement = $(<span class="string">&#x27;:hidden&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hideElement.length; i++) &#123;</span><br><span class="line">  <span class="comment">//使用元素下标找到元素都是原生的dom元素</span></span><br><span class="line">  <span class="comment">// console.log(hideElement[i])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="所有的可见元素"><a href="#所有的可见元素" class="headerlink" title="所有的可见元素"></a><code>所有的可见元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> visibleElement = $(<span class="string">&#x27;:visible&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; visibleElement.length; i++) &#123;</span><br><span class="line">  <span class="comment">//使用元素下标找到元素都是原生的dom元素</span></span><br><span class="line">  <span class="comment">//console.log(visibleElement[i])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="root-html元素"><a href="#root-html元素" class="headerlink" title=":root===html元素"></a><code>:root===html元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="contains-text-判断是否有文本"><a href="#contains-text-判断是否有文本" class="headerlink" title=":contains(text) 判断是否有文本"></a><em>:contains(text) 判断是否有文本</em></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> divs = $(<span class="string">&#x27;p:contains(John)&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; divs.length; i++) &#123;</span><br><span class="line">  <span class="comment">//使用元素下标找到元素都是原生的dom元素</span></span><br><span class="line">  <span class="built_in">console</span>.log(divs[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="empty-找空的元素没有子元素和子节点"><a href="#empty-找空的元素没有子元素和子节点" class="headerlink" title=":empty 找空的元素没有子元素和子节点"></a>:empty 找空的元素没有子元素和子节点</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div:empty)&#x27;</span>).html(<span class="string">&#x27;&lt;p&gt;这是在空的div中添加的p&lt;/p&gt;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> (confirm(<span class="string">&#x27;empty?&#x27;</span>)) &#123;</span><br><span class="line">  <span class="comment">//清空元素函数</span></span><br><span class="line">  $(<span class="string">&#x27;#app&#x27;</span>).empty()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="判断是否有指定内容的元素-username并不是直接子元素"><a href="#判断是否有指定内容的元素-username并不是直接子元素" class="headerlink" title="判断是否有指定内容的元素,#username并不是直接子元素"></a><code>判断是否有指定内容的元素,#username并不是直接子元素</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = $(<span class="string">&#x27;div:has(#username)&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure>

<h2 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 找到同是兄弟关系的span元素且是第二个</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> $(<span class="string">&#x27;span:nth-of-type(2)&#x27;</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item.innerHTML)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="表单选择器-14"><a href="#表单选择器-14" class="headerlink" title="表单选择器(14)"></a>表单选择器(14)</h2><h4 id="表单选择器-匹配所有-input-textarea-select-和-button-元素"><a href="#表单选择器-匹配所有-input-textarea-select-和-button-元素" class="headerlink" title="表单选择器 匹配所有 input, textarea, select 和 button 元素"></a>表单选择器 匹配所有 input, <code>textarea</code>, select 和 button 元素</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> input = $(<span class="string">&#x27;:input&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> input) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="找文本框"><a href="#找文本框" class="headerlink" title="找文本框"></a>找文本框</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> text = $(<span class="string">&#x27;:text&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> text) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="找密码框"><a href="#找密码框" class="headerlink" title="找密码框"></a>找密码框</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pass = $(<span class="string">&#x27;:password&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> pass) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="找单选框"><a href="#找单选框" class="headerlink" title="找单选框"></a>找单选框</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> radio = $(<span class="string">&#x27;:radio:not(:checked)&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> radio) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="获得checkbox"><a href="#获得checkbox" class="headerlink" title="获得checkbox"></a>获得<code>checkbox</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> checkbox = $(<span class="string">&#x27;:checkbox&#x27;</span>)</span><br><span class="line">checkbox.change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="submit-默认找所有的-button-和-submit"><a href="#submit-默认找所有的-button-和-submit" class="headerlink" title=":submit 默认找所有的 button 和 submit"></a>:submit 默认找所有的 button 和 submit</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> submit = $(<span class="string">&#x27;input:submit&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> submit) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="image-匹配-input-type-’image’的元素，不找img元素"><a href="#image-匹配-input-type-’image’的元素，不找img元素" class="headerlink" title=":image 匹配 input type=’image’的元素，不找img元素"></a>:image 匹配 input type=’image’的元素，不找<code>img</code>元素</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> image = $(<span class="string">&#x27;:image&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> image) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="reset-匹配-reset-按钮"><a href="#reset-匹配-reset-按钮" class="headerlink" title=":reset 匹配 reset 按钮"></a>:reset 匹配 reset 按钮</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> reset = $(<span class="string">&#x27;:reset&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> reset) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="button-匹配-input-type-’button’和-button-元素"><a href="#button-匹配-input-type-’button’和-button-元素" class="headerlink" title=":button 匹配 input type=’button’和 button 元素"></a>:button 匹配 input type=’button’和 button 元素</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> button = $(<span class="string">&#x27;:button&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> button) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="file-找文件"><a href="#file-找文件" class="headerlink" title=":file 找文件"></a>:file 找文件</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> flies = $(<span class="string">&#x27;:file&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> flies) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="disabled-不可用元素"><a href="#disabled-不可用元素" class="headerlink" title=":disabled 不可用元素"></a>:disabled 不可用元素</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> disables = $(<span class="string">&#x27;:disabled&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> disables) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="可用的元素-enabled"><a href="#可用的元素-enabled" class="headerlink" title="可用的元素 :enabled"></a>可用的元素 :enabled</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> enables = $(<span class="string">&#x27;:enabled&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> enables) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="所有选中的元素-checked-包含-radio、checkbox、option"><a href="#所有选中的元素-checked-包含-radio、checkbox、option" class="headerlink" title="所有选中的元素 :checked 包含 radio、checkbox、option"></a>所有选中的元素 :checked 包含 radio、<code>checkbox</code>、option</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> checked = $(<span class="string">&#x27;input[type=checkbox]:not(:checked)&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> checked) &#123;</span><br><span class="line">  <span class="comment">//console.log(item)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="选中的-option-selected"><a href="#选中的-option-selected" class="headerlink" title="选中的 option :selected"></a>选中的 option :selected</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> select = $(<span class="string">&#x27;option:not(:selected)&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> select) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>jQuery</category>
      </categories>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>侧边slide</title>
    <url>/taiaiac.gitee.io/2020/12/30/jQuery/%E4%BE%A7%E8%BE%B9slide/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="comment">/*css声明变量*/</span></span><br><span class="line">  --<span class="attribute">color</span>: red;</span><br><span class="line">  --w-<span class="number">100</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--color);</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">var</span>(--w-<span class="number">100</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">var</span>(--w-<span class="number">100</span>);</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> id</span><br><span class="line">  <span class="keyword">let</span> app = $(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> width = <span class="built_in">parseInt</span>(app.width())</span><br><span class="line">  btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> display = app.css(<span class="string">&#x27;display&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (display === <span class="string">&#x27;block&#x27;</span>) &#123;</span><br><span class="line">      slideLeft()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      slideRight()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">slideLeft</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (id) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(id)</span><br><span class="line">    &#125;</span><br><span class="line">    id = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//修改display width</span></span><br><span class="line">      width--</span><br><span class="line">      <span class="keyword">if</span> (width &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(id)</span><br><span class="line">        app.hide()</span><br><span class="line">        width = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      app.css(<span class="string">&#x27;width&#x27;</span>, width + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">slideRight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    app.show()</span><br><span class="line">    <span class="keyword">if</span> (id) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(id)</span><br><span class="line">    &#125;</span><br><span class="line">    id = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//修改display width</span></span><br><span class="line">      width++</span><br><span class="line">      <span class="keyword">if</span> (width &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(id)</span><br><span class="line">        width = <span class="number">100</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      app.css(<span class="string">&#x27;width&#x27;</span>, width + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>jQuery</category>
      </categories>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>插件</title>
    <url>/taiaiac.gitee.io/2020/01/06/sublime/%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<ol>
<li><h1 id="AutoFileName"><a href="#AutoFileName" class="headerlink" title="AutoFileName"></a>AutoFileName</h1><p>路径提示插件。</p>
</li>
<li><h1 id="ayu"><a href="#ayu" class="headerlink" title="ayu"></a>ayu</h1><p>主题。</p>
</li>
<li><h1 id="BracketHighlighter"><a href="#BracketHighlighter" class="headerlink" title="BracketHighlighter"></a>BracketHighlighter</h1><p>代码高亮。</p>
</li>
<li><h1 id="ChineseLocalizations"><a href="#ChineseLocalizations" class="headerlink" title="ChineseLocalizations"></a>ChineseLocalizations</h1><p>汉化包。</p>
</li>
<li><h1 id="Color-Highlighter"><a href="#Color-Highlighter" class="headerlink" title="Color Highlighter"></a>Color Highlighter</h1><p>css颜色高亮。</p>
</li>
<li><h1 id="Emmet"><a href="#Emmet" class="headerlink" title="Emmet"></a>Emmet</h1><p>快捷生成代码块。</p>
</li>
<li><h1 id="FileIcons"><a href="#FileIcons" class="headerlink" title="FileIcons"></a>FileIcons</h1><p>文件图标。</p>
</li>
<li><h1 id="HTML-CSS-JS-Prettify"><a href="#HTML-CSS-JS-Prettify" class="headerlink" title="HTML-CSS-JS Prettify"></a>HTML-CSS-JS Prettify</h1><p>格式化。</p>
</li>
<li><h1 id="LESS"><a href="#LESS" class="headerlink" title="LESS"></a>LESS</h1><p>语法。</p>
</li>
<li><h1 id="Open-In-Browser"><a href="#Open-In-Browser" class="headerlink" title="Open In Browser"></a>Open In Browser</h1><p>打开到浏览器。</p>
</li>
<li><h1 id="Package-Control"><a href="#Package-Control" class="headerlink" title="Package Control"></a>Package Control</h1><p>插件管理。</p>
</li>
<li><h1 id="SideBarEnhancements"><a href="#SideBarEnhancements" class="headerlink" title="SideBarEnhancements"></a>SideBarEnhancements</h1><p>侧边栏。</p>
</li>
<li><h1 id="SublimeLinter"><a href="#SublimeLinter" class="headerlink" title="SublimeLinter"></a>SublimeLinter</h1><p>语法检测。</p>
</li>
<li><h1 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h1><p>终端。</p>
</li>
<li><h1 id="ZZZZZZZZ-localization"><a href="#ZZZZZZZZ-localization" class="headerlink" title="ZZZZZZZZ-localization"></a>ZZZZZZZZ-localization</h1><p>默认添加，解决汉化问题。</p>
<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/sublime.png" alt="image-20210111151412903"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>sublime</category>
      </categories>
      <tags>
        <tag>sublime</tag>
      </tags>
  </entry>
  <entry>
    <title>nuxtjs基础</title>
    <url>/taiaiac.gitee.io/2021/03/16/nuxt/nuxtjs%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<h3 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h3><blockquote>
<p><a href="https://www.nuxtjs.cn/guide">https://www.nuxtjs.cn/guide</a></p>
</blockquote>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><blockquote>
<p>🚀点亮你的Vue技术栈，万字Nuxt.js实践笔记来了</p>
<p><a href="https://juejin.cn/post/6844904160324747278">https://juejin.cn/post/6844904160324747278</a></p>
</blockquote>
<blockquote>
<p>肝了几个月nuxt项目，想把这些实用知识点分享给你（干货</p>
<p><a href="https://juejin.cn/post/6901467138599763975">https://juejin.cn/post/6901467138599763975</a></p>
</blockquote>
<h3 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h3><blockquote>
<p>千锋教育_前端Nuxt框架教程 开启SSR（服务器端渲染）</p>
<p><a href="https://www.bilibili.com/video/BV13Z4y1T74J">https://www.bilibili.com/video/BV13Z4y1T74J</a></p>
</blockquote>
]]></content>
      <categories>
        <category>nuxtjs</category>
      </categories>
      <tags>
        <tag>nuxtjs</tag>
      </tags>
  </entry>
  <entry>
    <title>nuxt部署</title>
    <url>/taiaiac.gitee.io/2021/03/24/nuxt/nuxt%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h2 id="静态部署"><a href="#静态部署" class="headerlink" title="静态部署"></a>静态部署</h2><blockquote>
<p><code>yarn generate</code></p>
<p>会在根目录下生成<code>dist</code>文件夹,通vue打包后一样部署即可.</p>
</blockquote>
<blockquote>
<p><code>srr</code>打包部署</p>
<p><code>yarn build</code></p>
<p>生成后的文件为<code>.nuxt</code></p>
</blockquote>
<p>部署需要</p>
<ul>
<li><code>.nuxt</code></li>
<li><code>static</code></li>
<li><code>package.json</code></li>
<li><code>nuxt.config.js</code></li>
<li><code>yarn.lock</code>   </li>
</ul>
<blockquote>
<p> 部署后的启动入口文件路径</p>
</blockquote>
<p>node_modules/nuxt/bin/nuxt.js</p>
<p>0.0.0.0意味着<strong>监听每一个可用的网络接口</strong> 这样 无论是内网还是外网都可以访问了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server: &#123;</span><br><span class="line">    port: 3000,</span><br><span class="line">    host: &#x27;0.0.0.0&#x27;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>nuxtjs</category>
      </categories>
      <tags>
        <tag>nuxtjs</tag>
      </tags>
  </entry>
  <entry>
    <title>混入</title>
    <url>/taiaiac.gitee.io/2020/12/30/sass/%E6%B7%B7%E5%85%A5/</url>
    <content><![CDATA[<h2 id="垂直水平居中"><a href="#垂直水平居中" class="headerlink" title="垂直水平居中"></a>垂直水平居中</h2><ul>
<li><pre><code class="scss">@mixin center &#123;
  display: grid;
  place-items: center;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## input、button 去边框</span><br><span class="line"></span><br><span class="line">- ```scss</span><br><span class="line">  @mixin border-none &#123;</span><br><span class="line">    border: none;</span><br><span class="line">    outline: none;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="内联-flexbox"><a href="#内联-flexbox" class="headerlink" title="内联 flexbox"></a>内联 flexbox</h2><ul>
<li><pre><code class="scss">@mixin badge &#123;
  display: inline-flex; /* where the magic happens */
  justify-content: center;
  align-items: center;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 相对定位微调</span><br><span class="line"></span><br><span class="line">- ```scss</span><br><span class="line">  @mixin top2 &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    top: 2px;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="清除样式"><a href="#清除样式" class="headerlink" title="清除样式"></a>清除样式</h2><ul>
<li><pre><code class="css">html,
body,
ul,
ol,
li,
span,
p,
div,
a,
form,
input,
button,
select,
option,
img,
h1,
h2,
h3,
h4,
h5,
h6,
i,
b,
em,
del,
strong,
table,
td,
th,
tr,
dd,
dl,
header,
nav,
main,
article,
aside,
section,
footer &#123;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
&#125;

html &#123;
  font-size: 100px;
&#125;

body &#123;
  font-family: arial &#39;宋体&#39;;
  font-size: 16px;
&#125;

ul,
ol,
li &#123;
  list-style: none;
&#125;

a &#123;
  text-decoration: none;
&#125;
</code></pre>
</li>
</ul>
]]></content>
      <categories>
        <category>sass</category>
      </categories>
      <tags>
        <tag>sass</tag>
      </tags>
  </entry>
  <entry>
    <title>安装方式</title>
    <url>/taiaiac.gitee.io/2020/12/30/sass/%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="下载插件"><a href="#下载插件" class="headerlink" title="下载插件"></a>下载插件</h2><p><img src="../imgs%5Cimage-20200916152936058.png" alt="image-20200916152936058"></p>
<h2 id="VScode-设置里粘贴代码"><a href="#VScode-设置里粘贴代码" class="headerlink" title="VScode 设置里粘贴代码"></a>VScode 设置里粘贴代码</h2><ul>
<li><h4 id="输入相对路径"><a href="#输入相对路径" class="headerlink" title="输入相对路径"></a>输入相对路径</h4></li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;easysass.formats&quot;</span>: [</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;expanded&quot;</span>, <span class="comment">//compressed 表示压缩</span></span><br><span class="line">         <span class="attr">&quot;extension&quot;</span>: <span class="string">&quot;.css&quot;</span></span><br><span class="line">       &#125;</span><br><span class="line">     ],</span><br><span class="line">     <span class="string">&quot;easysass.targetDir&quot;</span>: <span class="string">&quot;./移动端/css/&quot;</span> <span class="comment">// 自定义css输出文件路径</span></span><br></pre></td></tr></table></figure>

<h2 id="声明变量"><a href="#声明变量" class="headerlink" title="声明变量"></a>声明变量</h2><ul>
<li><h4 id="开头"><a href="#开头" class="headerlink" title="$开头"></a>$开头</h4><ul>
<li><pre><code class="scss">$theme-color: #ddd;
$w-100: 100px;

#app &#123;
  height: $w-100;
  width: $w-100;
  background: $theme-color;
  &amp;:hover &#123;
    background: blue;
  &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## mixin</span><br><span class="line"></span><br><span class="line">- ### 定义 Mixin</span><br><span class="line"></span><br><span class="line">  - ###### 通过[`@mixin`加名称的方式](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#mixins)就可以定义一个 Mixins 模块，在模块内你可以添加任何你想重复使用的样式.</span><br><span class="line"></span><br><span class="line">- #### 使用`@mixin`指令</span><br><span class="line"></span><br><span class="line">  - 你可以通过`@include`来调用具有相同名称的 mixin 模块。</span><br><span class="line"></span><br><span class="line">  - ```scss</span><br><span class="line">    @mixin bordered &#123;</span><br><span class="line">      border: 1px solid red;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #app &#123;</span><br><span class="line">      height: $w-100;</span><br><span class="line">      width: $w-100;</span><br><span class="line">      background: $theme-color;</span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        background: blue;</span><br><span class="line">      &#125;</span><br><span class="line">      @include bordered;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>sass</category>
      </categories>
      <tags>
        <tag>sass</tag>
      </tags>
  </entry>
  <entry>
    <title>插件</title>
    <url>/taiaiac.gitee.io/2020/12/30/vscode/%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="1、vscode-icons-美化插件，美化文件夹图标"><a href="#1、vscode-icons-美化插件，美化文件夹图标" class="headerlink" title="1、vscode-icons 美化插件，美化文件夹图标"></a>1、vscode-icons 美化插件，美化文件夹图标</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150638069.png" alt="image-20201106150638069"></p>
<h2 id="2、View-In-Browser，HTML-文件在浏览器打开"><a href="#2、View-In-Browser，HTML-文件在浏览器打开" class="headerlink" title="2、View In Browser，HTML 文件在浏览器打开"></a>2、View In Browser，HTML 文件在浏览器打开</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150805615.png" alt="image-20201106150653590"></p>
<h2 id="3、Vetur，vue-代码相关插件"><a href="#3、Vetur，vue-代码相关插件" class="headerlink" title="3、Vetur，vue 代码相关插件"></a>3、Vetur，vue 代码相关插件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150709162.png" alt="image-20201106150709162"></p>
<h2 id="4、px-to-rem，单位转化插件：选中后-all-z"><a href="#4、px-to-rem，单位转化插件：选中后-all-z" class="headerlink" title="4、px to rem，单位转化插件：选中后 all+z"></a>4、px to rem，单位转化插件：选中后 all+z</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150722722.png" alt="image-20201106150722722"></p>
<h2 id="5、Prettier-ESLint，代码规范格式化"><a href="#5、Prettier-ESLint，代码规范格式化" class="headerlink" title="5、Prettier ESLint，代码规范格式化"></a>5、Prettier ESLint，<strong>代码规范格式化</strong></h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150734622.png" alt="image-20201106150734622"></p>
<h2 id="6、open-in-browser，打开到浏览器"><a href="#6、open-in-browser，打开到浏览器" class="headerlink" title="6、open in browser，打开到浏览器"></a>6、open in browser，打开到浏览器</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150805615.png" alt="image-20201106150805615"></p>
<h2 id="7、One-Dark-Pro，美化，代码颜色主题设置"><a href="#7、One-Dark-Pro，美化，代码颜色主题设置" class="headerlink" title="7、One Dark Pro，美化，代码颜色主题设置"></a>7、One Dark Pro，美化，代码颜色主题设置</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150852086.png" alt="image-20201106150852086"></p>
<h2 id="8、Markdown-Preview-Enhanced，语法插件"><a href="#8、Markdown-Preview-Enhanced，语法插件" class="headerlink" title="8、Markdown Preview Enhanced，语法插件"></a>8、Markdown Preview Enhanced，语法插件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150904082.png" alt="image-20201106150904082"></p>
<h2 id="9、Live-Server，服务器方式打开文件"><a href="#9、Live-Server，服务器方式打开文件" class="headerlink" title="9、Live Server，服务器方式打开文件"></a>9、Live Server，服务器方式打开文件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150918463.png" alt="image-20201106150918463"></p>
<h2 id="10、jsdoc，函数注释"><a href="#10、jsdoc，函数注释" class="headerlink" title="10、jsdoc，函数注释"></a>10、jsdoc，函数注释</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150930787.png" alt="image-20201106150930787"></p>
<h2 id="11、Import-Cost，引入的包的大小"><a href="#11、Import-Cost，引入的包的大小" class="headerlink" title="11、Import Cost，引入的包的大小"></a>11、Import Cost，引入的包的大小</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150944386.png" alt="image-20201106150944386"></p>
<h2 id="12、Highlight，代码高亮"><a href="#12、Highlight，代码高亮" class="headerlink" title="12、Highlight，代码高亮"></a>12、Highlight，代码高亮</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106150958743.png" alt="image-20201106150958743"></p>
<h2 id="13、Gitee，码云"><a href="#13、Gitee，码云" class="headerlink" title="13、Gitee，码云"></a>13、Gitee，码云</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151008970.png" alt="image-20201106151008970"></p>
<h2 id="14、ESLint，代码规范"><a href="#14、ESLint，代码规范" class="headerlink" title="14、ESLint，代码规范"></a>14、ESLint，代码规范</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151020899.png" alt="image-20201106151020899"></p>
<h2 id="15、Easy-Sass，语法插件"><a href="#15、Easy-Sass，语法插件" class="headerlink" title="15、Easy Sass，语法插件"></a>15、Easy Sass，语法插件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151032946.png" alt="image-20201106151032946"></p>
<h2 id="16、Easy-LESS，语法插件"><a href="#16、Easy-LESS，语法插件" class="headerlink" title="16、Easy LESS，语法插件"></a>16、Easy LESS，语法插件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151044131.png" alt="image-20201106151044131"></p>
<h2 id="17、Debugger-for-Chrome，Chrome-调试器"><a href="#17、Debugger-for-Chrome，Chrome-调试器" class="headerlink" title="17、Debugger for Chrome，Chrome 调试器"></a>17、Debugger for Chrome，Chrome 调试器</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151100903.png" alt="image-20201106151100903"></p>
<h2 id="18、Code-Runner，运行-js-和-ts-文件"><a href="#18、Code-Runner，运行-js-和-ts-文件" class="headerlink" title="18、Code Runner，运行 js 和 ts 文件"></a>18、Code Runner，运行 js 和 ts 文件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151116878.png" alt="image-20201106151116878"></p>
<h2 id="19、Chinese-Simplified-Language-Pack-for-Visual-Studio-Code，汉化插件"><a href="#19、Chinese-Simplified-Language-Pack-for-Visual-Studio-Code，汉化插件" class="headerlink" title="19、Chinese (Simplified) Language Pack for Visual Studio Code，汉化插件"></a>19、Chinese (Simplified) Language Pack for Visual Studio Code，汉化插件</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151131366.png" alt="image-20201106151131366"></p>
<h2 id="20、Bracket-Pair-Colorizer，括号高亮"><a href="#20、Bracket-Pair-Colorizer，括号高亮" class="headerlink" title="20、Bracket Pair Colorizer，括号高亮"></a>20、Bracket Pair Colorizer，括号高亮</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151143350.png" alt="image-20201106151143350"></p>
<h2 id="21、Blade-Runner-Run-Task-When-Open，银翼杀手-打开时运行任务"><a href="#21、Blade-Runner-Run-Task-When-Open，银翼杀手-打开时运行任务" class="headerlink" title="21、Blade Runner - Run Task When Open，银翼杀手-打开时运行任务"></a>21、Blade Runner - Run Task When Open，银翼杀手-打开时运行任务</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151152671.png" alt="image-20201106151152671"></p>
<h2 id="22、Beautify-css-sass-scss-less，代码格式化"><a href="#22、Beautify-css-sass-scss-less，代码格式化" class="headerlink" title="22、Beautify css/sass/scss/less，代码格式化"></a>22、Beautify css/sass/scss/less，代码格式化</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151224152.png" alt="image-20201106151224152"></p>
<h2 id="23、Azure-Repos，代码存储库"><a href="#23、Azure-Repos，代码存储库" class="headerlink" title="23、Azure Repos，代码存储库"></a>23、Azure Repos，代码存储库</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151235921.png" alt="image-20201106151235921"></p>
<h2 id="24、Auto-Rename-Tag，标签自动补齐"><a href="#24、Auto-Rename-Tag，标签自动补齐" class="headerlink" title="24、Auto Rename Tag，标签自动补齐"></a>24、Auto Rename Tag，标签自动补齐</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151247062.png" alt="image-20201106151247062"></p>
<h2 id="25、Add-jsdoc-comments，函数注释"><a href="#25、Add-jsdoc-comments，函数注释" class="headerlink" title="25、Add jsdoc comments，函数注释"></a>25、Add jsdoc comments，函数注释</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151258583.png" alt="image-20201106151258583"></p>
<h2 id="26、码云（Gitee）常用功能，码云"><a href="#26、码云（Gitee）常用功能，码云" class="headerlink" title="26、码云（Gitee）常用功能，码云"></a>26、码云（Gitee）常用功能，码云</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201106151308285.png" alt="image-20201106151308285"></p>
<h2 id="27、Prettier-Code-formatter，代码格式化"><a href="#27、Prettier-Code-formatter，代码格式化" class="headerlink" title="27、Prettier - Code formatter，代码格式化"></a>27、Prettier - Code formatter，代码格式化</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/vscode%E6%8F%92%E4%BB%B6/image-20201125164540244.png" alt="image-20201125164540244"></p>
]]></content>
      <categories>
        <category>vscode</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>设置</title>
    <url>/taiaiac.gitee.io/2020/12/30/vscode/%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">//启用后，按下 TAB 键，将展开 Emmet 缩写。</span></span><br><span class="line">  <span class="attr">&quot;emmet.triggerExpansionOnTab&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//调整窗口的缩放级别。原始大小是 0，每次递增(例如 1)或递减(例如 -1)表示放大或缩小 20%。也可以输入小数以便以更精细的粒度调整缩放级别。</span></span><br><span class="line">  <span class="attr">&quot;window.zoomLevel&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="comment">//禁用弹出的消息</span></span><br><span class="line">  <span class="attr">&quot;liveServer.settings.donotShowInfoMsg&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//单位转换</span></span><br><span class="line">  <span class="attr">&quot;px-to-rem.px-per-rem&quot;</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="comment">//控制菜单栏的可见性。“切换”设置表示隐藏菜单栏，按一次 Alt 键则将显示此菜单栏。默认情况下，除非窗口为全屏，否则菜单栏可见。default: 菜单仅在全屏模式下隐藏。</span></span><br><span class="line">  <span class="attr">&quot;window.menuBarVisibility&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">  <span class="comment">//控制工作台底部状态栏的可见性。</span></span><br><span class="line">  <span class="attr">&quot;workbench.statusBar.visible&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//控制编辑器是否显示控制字符。</span></span><br><span class="line">  <span class="attr">&quot;editor.renderControlCharacters&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//控制资源管理器是否在把文件删除到废纸篓时进行确认。</span></span><br><span class="line">  <span class="attr">&quot;explorer.confirmDelete&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">//自定义浏览器</span></span><br><span class="line">  <span class="attr">&quot;liveServer.settings.CustomBrowser&quot;</span>: <span class="string">&quot;chrome&quot;</span>,</span><br><span class="line">  <span class="comment">//注释颜色</span></span><br><span class="line">  <span class="attr">&quot;editor.tokenColorCustomizations&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;comments&quot;</span>: <span class="string">&quot;#5FB878&quot;</span> <span class="comment">// 注释</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//控制折行的方式。</span></span><br><span class="line">  <span class="attr">&quot;editor.wordWrap&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">  <span class="comment">//终端在 Windows 上使用的 shell 的路径(默认:</span></span><br><span class="line">  <span class="attr">&quot;terminal.integrated.shell.windows&quot;</span>: <span class="string">&quot;C:\\Windows\\System32\\cmd.exe&quot;</span>,</span><br><span class="line">  <span class="comment">//指定工作台中使用的文件图标主题；若指定为 &quot;null&quot;，则不显示任何文件图标。</span></span><br><span class="line">  <span class="attr">&quot;workbench.iconTheme&quot;</span>: <span class="string">&quot;vscode-icons&quot;</span>,</span><br><span class="line">  <span class="comment">//控制编辑器是否显示缩进参考线。</span></span><br><span class="line">  <span class="attr">&quot;editor.renderIndentGuides&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//主题</span></span><br><span class="line">  <span class="attr">&quot;workbench.colorTheme&quot;</span>: <span class="string">&quot;One Dark Pro&quot;</span>,</span><br><span class="line">  <span class="comment">// 如果设置成&#x27;true&#x27;，关于新的版本消息将不再显示</span></span><br><span class="line">  <span class="attr">&quot;vsicons.dontShowNewVersionMessage&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//关闭提示警告消息，如果主体或头部或其他支持标签在您的HTML是缺失。</span></span><br><span class="line">  <span class="attr">&quot;liveServer.settings.donotVerifyTags&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 控制在资源管理器内拖放移动文件或文件夹时是否进行确认。</span></span><br><span class="line">  <span class="attr">&quot;explorer.confirmDragAndDrop&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">//未保存的编辑器永远不会自动保存</span></span><br><span class="line">  <span class="attr">&quot;files.autoSave&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">  <span class="comment">//使用eslint语法格式化代码</span></span><br><span class="line">  <span class="attr">&quot;prettier.eslintIntegration&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//自动提交</span></span><br><span class="line">  <span class="attr">&quot;git.enableSmartCommit&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;git.path&quot;</span>: <span class="string">&quot;D:/Git/Git/bin/git.exe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;team.showFarewellMessage&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;team.showWelcomeMessage&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;git.autofetch&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;lsby_gitee_vscode_plugin.personal_access_tokens&quot;</span>: <span class="string">&quot;890768a4a0d8fef582cd3cbbaade86c3&quot;</span>,</span><br><span class="line">  <span class="comment">//保存自动调整代码</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//保存自动调整代码</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnType&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//为指定的语法定义配置文件或使用带有特定规则的配置文件。</span></span><br><span class="line">  <span class="attr">&quot;emmet.syntaxProfiles&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;vue-html&quot;</span>: <span class="string">&quot;html&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;vue&quot;</span>: <span class="string">&quot;html&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//若为 true，Emmet 建议将显示为代码片段。可以在 #editor.snippetSuggestions# 设置中排列其顺序。</span></span><br><span class="line">  <span class="attr">&quot;emmet.showSuggestionsAsSnippets&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//控制是否在键入时自动显示建议</span></span><br><span class="line">  <span class="attr">&quot;editor.quickSuggestions&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">//开启自动显示建议</span></span><br><span class="line">    <span class="attr">&quot;other&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//在注释内启用快速建议</span></span><br><span class="line">    <span class="attr">&quot;comments&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//在字符串内启用快速建议</span></span><br><span class="line">    <span class="attr">&quot;strings&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;editor.tabSize&quot;</span>: <span class="number">2</span>, <span class="comment">//制表符符号eslint</span></span><br><span class="line">  <span class="comment">//在保存时运行的代码操作类型</span></span><br><span class="line">  <span class="attr">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;source.fixAll&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;source.fixAll.exlint&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//开启对.vue文件中错误的检查</span></span><br><span class="line">  <span class="attr">&quot;eslint.validate&quot;</span>: [<span class="string">&quot;javascript&quot;</span>, <span class="string">&quot;javascriptreact&quot;</span>, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;vue&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;eslint.format.enable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//控制侧边栏和活动栏的位置。它们可以显示在工作台的左侧或右侧</span></span><br><span class="line">  <span class="attr">&quot;workbench.sideBar.location&quot;</span>: <span class="string">&quot;left&quot;</span>,</span><br><span class="line">  <span class="comment">//配置语言的文件关联 (如: &quot;*.extension&quot;: &quot;html&quot;)。这些关联的优先级高于已安装语言的默认关联</span></span><br><span class="line">  <span class="attr">&quot;files.associations&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;*.wxss&quot;</span>: <span class="string">&quot;css&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;*.wxml&quot;</span>: <span class="string">&quot;html&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//  #去掉代码结尾的分号</span></span><br><span class="line">  <span class="attr">&quot;prettier.semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">//  #使用带引号替代双引号</span></span><br><span class="line">  <span class="attr">&quot;prettier.singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//tab缩进</span></span><br><span class="line">  <span class="attr">&quot;prettier.tabWidth&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="comment">//禁止随时添加逗号,这个很重要</span></span><br><span class="line">  <span class="attr">&quot;prettier.trailingComma&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  <span class="comment">//  #让函数(名)和后面的括号之间加个空格</span></span><br><span class="line">  <span class="attr">&quot;javascript.format.insertSpaceBeforeFunctionParenthesis&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//针对某种语言，配置替代编辑器设置。</span></span><br><span class="line">  <span class="attr">&quot;[html]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;vscode.html-language-features&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//sass的配置</span></span><br><span class="line">  <span class="attr">&quot;easysass.formats&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;expanded&quot;</span>, <span class="comment">//compressed 表示压缩</span></span><br><span class="line">      <span class="attr">&quot;extension&quot;</span>: <span class="string">&quot;.css&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">//less配置</span></span><br><span class="line">  <span class="attr">&quot;[less]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;michelemelluso.code-beautifier&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;less.compile&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;compress&quot;</span>: <span class="literal">true</span>, <span class="comment">//删除多余的空格</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span>: <span class="literal">false</span>, <span class="comment">//是否生成.css.map文件</span></span><br><span class="line">    <span class="comment">// &quot;out&quot;: &quot;..\\css\\&quot;, //输出文件的位置，这里设置的是LESS文件将转化在与父级同级css文件下面，如果想设置在根目录下面则为：&quot;$&#123;workspaceRoot&#125;\\css\\&quot;</span></span><br><span class="line">    <span class="attr">&quot;outExt&quot;</span>: <span class="string">&quot;.wxss&quot;</span> <span class="comment">//输出文件类型，默认CSS，微信就是.wxss</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[vue]&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 每次保存的时候将代码按eslint格式进行修复</span></span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[jsonc]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[css]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[javascript]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// #让vue中的js按&quot;prettier&quot;格式进行格式化</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.js&quot;</span>: <span class="string">&quot;prettier&quot;</span>,</span><br><span class="line">  <span class="comment">//所有默认格式化程序的选项</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatterOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;js-beautify-html&quot;</span>: &#123;</span><br><span class="line">      <span class="comment">// #vue组件中html代码格式化样式</span></span><br><span class="line">      <span class="attr">&quot;wrap_attributes&quot;</span>: <span class="string">&quot;force-aligned&quot;</span>, <span class="comment">//也可以设置为“auto”，效果会不一样</span></span><br><span class="line">      <span class="attr">&quot;wrap_line_length&quot;</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">&quot;end_with_newline&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//   &quot;easysass.targetDir&quot;: &quot;../css/&quot; // 自定义css输出文件路径</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vscode</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>PM2使用</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/PM2%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p><strong>1、官网地址</strong></p>
<p><strong><a href="https://pm2.keymetrics.io/docs/usage/quick-start/">https://pm2.keymetrics.io/docs/usage/quick-start/</a></strong></p>
<p><strong>2、PM2</strong></p>
<p>PM2 是一个守护进程管理器，它将帮助您管理和保持应用程序在线。开始使用 PM2 很简单，它提供了一个简单直观的 CLI，可以通过 NPM 安装。</p>
<p><strong>3、安装</strong></p>
<p>npm install pm2@latest -g</p>
<p><strong>4、启动服务程序</strong></p>
<p>pm2 start app.js –name <app_name></p>
<p><strong>5、重启指定名称应用程序</strong></p>
<p>pm2 restart app_name</p>
<p><strong>6、重新加载指定名称应用程序</strong></p>
<p>pm2 reload app_name</p>
<p><strong>7、停止指定名称应用程序</strong></p>
<p>pm2 stop app_name</p>
<p><strong>8、删除指定名称应用程序</strong></p>
<p>pm2 delete app_name</p>
<p><strong>9、查看当前管理的进程</strong></p>
<p>pm2 [list|ls|status]</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>笔记</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue-element-admin/note1/</url>
    <content><![CDATA[<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">├── build                      <span class="comment"># 构建相关</span></span><br><span class="line">├── mock                       <span class="comment"># 项目mock 模拟数据</span></span><br><span class="line">├── plop-templates             <span class="comment"># 基本模板</span></span><br><span class="line">├── public                     <span class="comment"># 静态资源</span></span><br><span class="line">│   │── favicon.ico            <span class="comment"># favicon图标</span></span><br><span class="line">│   └── index.html             <span class="comment"># html模板</span></span><br><span class="line">├── src                        <span class="comment"># 源代码</span></span><br><span class="line">│   ├── api                    <span class="comment"># 所有请求</span></span><br><span class="line">│   ├── assets                 <span class="comment"># 主题 字体等静态资源</span></span><br><span class="line">│   ├── components             <span class="comment"># 全局公用组件</span></span><br><span class="line">│   ├── directive              <span class="comment"># 全局指令</span></span><br><span class="line">│   ├── filters                <span class="comment"># 全局 filter</span></span><br><span class="line">│   ├── icons                  <span class="comment"># 项目所有 svg icons</span></span><br><span class="line">│   ├── lang                   <span class="comment"># 国际化 language</span></span><br><span class="line">│   ├── layout                 <span class="comment"># 全局 layout</span></span><br><span class="line">│   ├── router                 <span class="comment"># 路由</span></span><br><span class="line">│   ├── store                  <span class="comment"># 全局 store管理</span></span><br><span class="line">│   ├── styles                 <span class="comment"># 全局样式</span></span><br><span class="line">│   ├── utils                  <span class="comment"># 全局公用方法</span></span><br><span class="line">│   ├── vendor                 <span class="comment"># 公用vendor</span></span><br><span class="line">│   ├── views                  <span class="comment"># views 所有页面</span></span><br><span class="line">│   ├── App.vue                <span class="comment"># 入口页面</span></span><br><span class="line">│   ├── main.js                <span class="comment"># 入口文件 加载组件 初始化等</span></span><br><span class="line">│   └── permission.js          <span class="comment"># 权限管理</span></span><br><span class="line">├── tests                      <span class="comment"># 测试</span></span><br><span class="line">├── .env.xxx                   <span class="comment"># 环境变量配置</span></span><br><span class="line">├── .eslintrc.js               <span class="comment"># eslint 配置项</span></span><br><span class="line">├── .babelrc                   <span class="comment"># babel-loader 配置</span></span><br><span class="line">├── .travis.yml                <span class="comment"># 自动化CI配置</span></span><br><span class="line">├── vue.config.js              <span class="comment"># vue-cli 配置</span></span><br><span class="line">├── postcss.config.js          <span class="comment"># postcss 配置</span></span><br><span class="line">└── package.json               <span class="comment"># package.json</span></span><br></pre></td></tr></table></figure>

<h2 id="安装（中文版）"><a href="#安装（中文版）" class="headerlink" title="安装（中文版）"></a>安装（中文版）</h2><p>下载地址</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://github.com/PanJiaChen/vue-element-admin/tree/i18n</span><br></pre></td></tr></table></figure>

<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p><img src="https://panjiachen.gitee.io/gitee-cdn/vue-element-admin-site/7066d74f-12c5-47d6-b6ad-f22b43fec917.png" alt="img"></p>
<h2 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h2><p>路由配置项</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当设置 true 的时候该路由不会在侧边栏出现 如401，login等页面，或者如一些编辑页面/edit/1</span></span><br><span class="line"><span class="attr">hidden</span>: <span class="literal">true</span> <span class="comment">// (默认 false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//当设置 noRedirect 的时候该路由在面包屑导航中不可被点击</span></span><br><span class="line"><span class="attr">redirect</span>: <span class="string">&#x27;noRedirect&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当你一个路由下面的 children 声明的路由大于1个时，自动会变成嵌套的模式--如组件页面</span></span><br><span class="line"><span class="comment">// 只有一个时，会将那个子路由当做根路由显示在侧边栏--如引导页面</span></span><br><span class="line"><span class="comment">// 若你想不管路由下面的 children 声明的个数都显示你的根路由</span></span><br><span class="line"><span class="comment">// 你可以设置 alwaysShow: true，这样它就会忽略之前定义的规则，一直显示根路由</span></span><br><span class="line"><span class="attr">alwaysShow</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;router-name&#x27;</span> <span class="comment">// 设定路由的名字，一定要填写不然使用&lt;keep-alive&gt;时会出现各种问题</span></span><br><span class="line"><span class="attr">meta</span>: &#123;</span><br><span class="line">  <span class="attr">roles</span>: [<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;editor&#x27;</span>] <span class="comment">// 设置该路由进入的权限，支持多个权限叠加</span></span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;title&#x27;</span> <span class="comment">// 设置该路由在侧边栏和面包屑中展示的名字</span></span><br><span class="line">  <span class="attr">icon</span>: <span class="string">&#x27;svg-name&#x27;</span> <span class="comment">// 设置该路由的图标，支持 svg-class，也支持 el-icon-x element-ui 的 icon</span></span><br><span class="line">  <span class="attr">noCache</span>: <span class="literal">true</span> <span class="comment">// 如果设置为true，则不会被 &lt;keep-alive&gt; 缓存(默认 false)</span></span><br><span class="line">  <span class="attr">breadcrumb</span>: <span class="literal">false</span> <span class="comment">//  如果设置为false，则不会在breadcrumb面包屑中显示(默认 true)</span></span><br><span class="line">  <span class="attr">affix</span>: <span class="literal">true</span> <span class="comment">// 若果设置为true，它则会固定在tags-view中(默认 false)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当路由设置了该属性，则会高亮相对应的侧边栏。</span></span><br><span class="line">  <span class="comment">// 这在某些场景非常有用，比如：一个文章的列表页路由为：/article/list</span></span><br><span class="line">  <span class="comment">// 点击文章进入文章详情页，这时候路由为/article/1，但你想在侧边栏高亮文章列表的路由，就可以进行如下设置</span></span><br><span class="line">  <span class="attr">activeMenu</span>: <span class="string">&#x27;/article/list&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/permission&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: Layout,</span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&#x27;/permission/index&#x27;</span>, <span class="comment">//重定向地址，在面包屑中点击会重定向去的地址</span></span><br><span class="line">  <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// 不在侧边栏线上</span></span><br><span class="line">  <span class="attr">alwaysShow</span>: <span class="literal">true</span>, <span class="comment">//一直显示根路由</span></span><br><span class="line">  <span class="attr">meta</span>: &#123; <span class="attr">roles</span>: [<span class="string">&#x27;admin&#x27;</span>,<span class="string">&#x27;editor&#x27;</span>] &#125;, <span class="comment">//你可以在根路由设置权限，这样它下面所以的子路由都继承了这个权限</span></span><br><span class="line">  <span class="attr">children</span>: [&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;permission/index&#x27;</span>),</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;permission&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;permission&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;lock&#x27;</span>, <span class="comment">//图标</span></span><br><span class="line">      <span class="attr">roles</span>: [<span class="string">&#x27;admin&#x27;</span>,<span class="string">&#x27;editor&#x27;</span>], <span class="comment">//或者你可以给每一个子路由设置自己的权限</span></span><br><span class="line">      <span class="attr">noCache</span>: <span class="literal">true</span> <span class="comment">// 不会被 &lt;keep-alive&gt; 缓存</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>这里的路由分为两种，<code>constantRoutes</code> 和 <code>asyncRoutes</code>。</p>
<p>constantRoutes： 代表那些不需要动态判断权限的路由，如登录页、404、等通用页面。</p>
<p>asyncRoutes ： 代表那些需求动态判断权限并通过 <code>addRoutes</code> 动态添加的页面。</p>
<p>注意事项</p>
<p>如果这里有一个需要非常注意的地方就是 <code>404</code> 页面一定要最后加载，如果放在 constantRoutes 一同声明了 <code>404</code> ，后面的所以页面都会被拦截到<code>404</code></p>
<h3 id="this-route-变量"><a href="#this-route-变量" class="headerlink" title="this.$route 变量"></a>this.$route 变量</h3><p>this.$route.name : 页面名字。这个 name 就是在 router.js 中配置的那个 name, 这个 name 也是有大用处的，比如在<router-link>中使用“命名路由”的时候就是用到它，举例说明，通过在路由链接标签的 to 属性设置 name 和相应的参数，然后跳转效果和设置路由 path 是一样的：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;pageA&#x27;, params: &#123; id: 5188, name:&#x27;王大锤&#x27; &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>命名路由pageA&lt;/router-link</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>this.$route.path: 路由路径，包含路径参数，不包含查询参数</p>
</li>
<li><p>this.$route.fullPath： 路由全路径，包含路径参数和查询参数</p>
</li>
<li><p>this.$route.query: 路径所有查询参数</p>
</li>
<li><p>this.$route.params: 路径所有路径参数</p>
</li>
<li><p>this.$route.meta: 路由元信息，在配置路由的时候可以把自定义的一些数据存在 meta 中，用作其他用途</p>
</li>
<li><p>this.$route.matched: 里面包含了路由的一些匹配信息</p>
<h3 id="重定向页面-src-views-redirect"><a href="#重定向页面-src-views-redirect" class="headerlink" title="重定向页面 src\views\redirect"></a>重定向页面 src\views\redirect</h3></li>
</ul>
<h2 id="面包屑"><a href="#面包屑" class="headerlink" title="面包屑"></a>面包屑</h2>]]></content>
      <categories>
        <category>vue-element-admin</category>
      </categories>
      <tags>
        <tag>vue-element-admin</tag>
      </tags>
  </entry>
  <entry>
    <title>map遍历方式</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/map%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//目标类型 data = [&#123;&#125;,&#123;&#125;,&#123;&#125;...]</span></span><br><span class="line">data = <span class="built_in">this</span>.chartData.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newItem = &#123;</span><br><span class="line">    <span class="attr">value</span>: item.num,</span><br><span class="line">    <span class="attr">name</span>: item.title_name,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newItem</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>eslint命令fix文件</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/eslint%E5%91%BD%E4%BB%A4fix%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="eslint-命令-fix-文件"><a href="#eslint-命令-fix-文件" class="headerlink" title="eslint 命令 fix 文件"></a>eslint 命令 fix 文件</h1><h1 id="安装了-eslint-包"><a href="#安装了-eslint-包" class="headerlink" title="安装了 eslint 包"></a>安装了 eslint 包</h1><h1 id="package-json-中-script-中直接配置命令"><a href="#package-json-中-script-中直接配置命令" class="headerlink" title="package.json 中 script 中直接配置命令"></a>package.json 中 script 中直接配置命令</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;serve&quot;</span>: <span class="string">&quot;vue-cli-service serve&quot;</span>,</span><br><span class="line">   <span class="string">&quot;build&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span>,</span><br><span class="line">   <span class="string">&quot;lint&quot;</span>: <span class="string">&quot;vue-cli-service lint&quot;</span>,</span><br><span class="line">   <span class="string">&quot;eslint-fix&quot;</span>: <span class="string">&quot;eslint src/**/*.*  --fix&quot;</span>,</span><br><span class="line">   <span class="string">&quot;build:qa&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span>,</span><br><span class="line">   <span class="string">&quot;build:prd&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/14002348-a9a321b7e6d0ebfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/446/format/webp" alt="img"></p>
<p>image.png</p>
<p>就不用手动改了啊！！效率大大提升</p>
<h1 id="eslintrc-js-文件配置"><a href="#eslintrc-js-文件配置" class="headerlink" title=".eslintrc.js 文件配置"></a>.eslintrc.js 文件配置</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">    root: <span class="keyword">true</span>, <span class="comment">// 指定跟路径</span></span><br><span class="line">    parserOptions: &#123;</span><br><span class="line">        parser: <span class="string">&#x27;babel-eslint&#x27;</span> <span class="comment">// 解析器</span></span><br><span class="line">    &#125;,</span><br><span class="line">    env: &#123;</span><br><span class="line">        node: <span class="keyword">true</span>,</span><br><span class="line">        browser: <span class="keyword">true</span> <span class="comment">// 浏览器启用</span></span><br><span class="line">    &#125;,</span><br><span class="line">    extends: [</span><br><span class="line">        <span class="comment">// https://github.com/vuejs/eslint-plugin-vue#priority-a-essential-error-prevention</span></span><br><span class="line">        <span class="comment">// consider switching to `plugin:vue/strongly-recommended` or `plugin:vue/recommended` for stricter rules.</span></span><br><span class="line">        <span class="string">&#x27;plugin:vue/essential&#x27;</span>, <span class="comment">// vue基本规则</span></span><br><span class="line">        <span class="comment">// https://github.com/standard/standard/blob/master/docs/RULES-en.md</span></span><br><span class="line">        <span class="string">&#x27;@vue/standard&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// required to lint *.vue files</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="string">&#x27;vue&#x27;</span> <span class="comment">// 支持vue文件</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// add your custom rules here</span></span><br><span class="line">    rules: &#123;</span><br><span class="line">        indent: [<span class="string">&#x27;error&#x27;</span>, <span class="number">2</span>], <span class="comment">// 缩进宽度4个空格</span></span><br><span class="line">        <span class="string">&#x27;comma-dangle&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 允许行末逗号</span></span><br><span class="line">        <span class="string">&#x27;no-constant-condition&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 允许常量作为表达式条件</span></span><br><span class="line">        <span class="string">&#x27;no-delete-var&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 允许使用delete</span></span><br><span class="line">        <span class="string">&#x27;no-extend-native&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 允许扩展原生对象</span></span><br><span class="line">        <span class="string">&#x27;no-floating-decimal&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">//  允许省去小数点前的0</span></span><br><span class="line">        <span class="string">&#x27;no-multi-str&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 允许多行字符串</span></span><br><span class="line">        semi: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 允许使用分号</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// allow async-await</span></span><br><span class="line">        <span class="string">&#x27;generator-star-spacing&#x27;</span>: <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 关闭</span></span><br><span class="line">        <span class="comment">// 最大长度 120</span></span><br><span class="line">        <span class="string">&#x27;max-len&#x27;</span>: [</span><br><span class="line">            <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                code: <span class="number">180</span>,</span><br><span class="line">                ignoreComments: <span class="keyword">true</span>,</span><br><span class="line">                ignoreStrings: <span class="keyword">true</span>,</span><br><span class="line">                ignoreTemplateLiterals: <span class="keyword">true</span>,</span><br><span class="line">                ignoreUrls: <span class="keyword">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 最大行数 500</span></span><br><span class="line">        <span class="string">&#x27;max-lines&#x27;</span>: [</span><br><span class="line">            <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                max: <span class="number">1000</span>,</span><br><span class="line">                skipBlankLines: <span class="keyword">true</span>,</span><br><span class="line">                skipComments: <span class="keyword">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 要求使用 let 或 const 而不是 var</span></span><br><span class="line">        <span class="string">&#x27;no-var&#x27;</span>: [</span><br><span class="line">            <span class="string">&#x27;error&#x27;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// allow debugger during development</span></span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/14002348-ef830f97a38f5d50.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/589/format/webp" alt="img"></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>npm相关</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/npm%E7%9B%B8%E5%85%B3/</url>
    <content><![CDATA[<h2 id="1-npm-相关"><a href="#1-npm-相关" class="headerlink" title="1 npm 相关"></a>1 npm 相关</h2><h3 id="1-1-npm-是-基于-Node-js-的，所以要先安装-Node-js"><a href="#1-1-npm-是-基于-Node-js-的，所以要先安装-Node-js" class="headerlink" title="1.1 npm 是 基于 Node.js 的，所以要先安装 Node.js"></a>1.1 npm 是 基于 Node.js 的，所以要先安装 Node.js</h3><p>在浏览器地址栏输入<code>https://nodejs.org/en/</code>, 进入<code>Node.js</code>官网后，点击下载左边的稳定版本，如下图所示：</p>
<p><img src="https://img2018.cnblogs.com/blog/1426850/201811/1426850-20181114175124912-557196367.png" alt="img"></p>
<h3 id="1-2-npm-管理工作目录"><a href="#1-2-npm-管理工作目录" class="headerlink" title="1.2 npm 管理工作目录"></a>1.2 npm 管理工作目录</h3><p>对于要创建 Vue 项目的工作目录先通过 “npm init -y”的命令进行管理</p>
<h3 id="1-3-npm-下载依赖包"><a href="#1-3-npm-下载依赖包" class="headerlink" title="1.3 npm 下载依赖包"></a>1.3 npm 下载依赖包</h3><p>npm install(可以简写成 i）包的名称 @xxx(@xxx 是包的版本)</p>
<h3 id="1-4-npm-卸载包"><a href="#1-4-npm-卸载包" class="headerlink" title="1.4 npm 卸载包"></a>1.4 npm 卸载包</h3><p>npm uninstall (可以简写成 uni） 包名称</p>
<h3 id="1-5-npm-更新包"><a href="#1-5-npm-更新包" class="headerlink" title="1.5 npm 更新包"></a>1.5 npm 更新包</h3><p>npm update 包名称</p>
<h2 id="2、webpack-相关"><a href="#2、webpack-相关" class="headerlink" title="2、webpack 相关"></a>2、webpack 相关</h2><h3 id="2-1-webpack-的安装"><a href="#2-1-webpack-的安装" class="headerlink" title="2.1 webpack 的安装"></a>2.1 webpack 的安装</h3><p>npm install webpack webpack-cli(现在的 webpack 是和 webpack-cli 共同使用的）</p>
<p>npm install -g webpack 全局安装</p>
<h3 id="2-2-webpack-的模式切换"><a href="#2-2-webpack-的模式切换" class="headerlink" title="2.2 webpack 的模式切换"></a>2.2 webpack 的模式切换</h3><p>webpack –mode development 　　开发环境下的　　文件打包不压缩</p>
<p>webpack –mode production 　　生产环境下的　　将文件压缩</p>
<h3 id="2-3-默认的入口文件"><a href="#2-3-默认的入口文件" class="headerlink" title="2.3 默认的入口文件"></a>2.3 默认的入口文件</h3><p>src 文件夹下的 index.js 文件</p>
<h3 id="2-4-默认的出口文件"><a href="#2-4-默认的出口文件" class="headerlink" title="2.4 默认的出口文件"></a>2.4 默认的出口文件</h3><p>dist 文件夹下的 main.js 文件</p>
<h2 id="3、vue-cli-相关"><a href="#3、vue-cli-相关" class="headerlink" title="3、vue-cli 相关"></a>3、vue-cli 相关</h2><h3 id="3-1-vue-cli-的安装"><a href="#3-1-vue-cli-的安装" class="headerlink" title="3.1 vue-cli 的安装"></a>3.1 vue-cli 的安装</h3><p>npm install -g vue-cli 　　全局安装</p>
<p>指定文件下 npm install vue 　　局部安装</p>
<h3 id="3-2-创建一个-webpack-打包的项目"><a href="#3-2-创建一个-webpack-打包的项目" class="headerlink" title="3.2 创建一个 webpack 打包的项目"></a>3.2 创建一个 webpack 打包的项目</h3><p>vue init webpack 项目名称</p>
<h3 id="3-3-运行项目"><a href="#3-3-运行项目" class="headerlink" title="3.3 运行项目"></a>3.3 运行项目</h3><p>创建完成之后：</p>
<p>cd 到这个文件下</p>
<p>npm run dev 运行这个项目</p>
<h3 id="3-4-打包文件"><a href="#3-4-打包文件" class="headerlink" title="3.4 打包文件"></a>3.4 打包文件</h3><p>npm run build</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>prettierrc配置</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/prettierrc/</url>
    <content><![CDATA[<p>.prettierrc 文件常见配置</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// tab缩进大小,默认为2</span></span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span>: <span class="number">4</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用tab缩进，默认false</span></span><br><span class="line">  <span class="attr">&quot;useTabs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用分号, 默认true</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用单引号, 默认false(在jsx中配置无效, 默认都是双引号)</span></span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 行尾逗号,默认none,可选 none|es5|all</span></span><br><span class="line">  <span class="comment">// es5 包括es5中的数组、对象</span></span><br><span class="line">  <span class="comment">// all 包括函数对象等所有可选</span></span><br><span class="line">  <span class="attr">&quot;TrailingCooma&quot;</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对象中的空格 默认true</span></span><br><span class="line">  <span class="comment">// true: &#123; foo: bar &#125;</span></span><br><span class="line">  <span class="comment">// false: &#123;foo: bar&#125;</span></span><br><span class="line">  <span class="attr">&quot;bracketSpacing&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// JSX标签闭合位置 默认false</span></span><br><span class="line">  <span class="comment">// false: &lt;div</span></span><br><span class="line">  <span class="comment">//          className=&quot;&quot;</span></span><br><span class="line">  <span class="comment">//          style=&#123;&#123;&#125;&#125;</span></span><br><span class="line">  <span class="comment">//       &gt;</span></span><br><span class="line">  <span class="comment">// true: &lt;div</span></span><br><span class="line">  <span class="comment">//          className=&quot;&quot;</span></span><br><span class="line">  <span class="comment">//          style=&#123;&#123;&#125;&#125; &gt;</span></span><br><span class="line">  <span class="attr">&quot;jsxBracketSameLine&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 箭头函数参数括号 默认avoid 可选 avoid| always</span></span><br><span class="line">  <span class="comment">// avoid 能省略括号的时候就省略 例如x =&gt; x</span></span><br><span class="line">  <span class="comment">// always 总是有括号</span></span><br><span class="line">  <span class="attr">&quot;arrowParens&quot;</span>: <span class="string">&quot;avoid&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cli（脚手架使用）</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue-cli%EF%BC%88vue%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%89/</url>
    <content><![CDATA[<h2 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h2><p>都说 Vue2 简单上手容易，的确，看了官方文档确实觉得上手很快，除了<strong>ES6</strong>语法和<strong>webpack</strong>的配置让你感到陌生，重要的是思路的变换，以前用 jq 随便拿全局变量和修改 dom 的锤子不能用了，vue 只用关心数据本身，不用再频繁繁琐的操作 dom，注册事件、监听事件、取消事件。。。。（确实很烦）。vue 的官方文档还是不错的，由浅到深，如果不使用构建工具确实用的很爽，但是这在实际项目应用中是不可能的，当用<strong>vue-cli</strong>构建一个工程的时候，发现官方文档还是不够用，需要熟练掌握 es6，而 vue 的全家桶(vue-cli,vue-router,vue-resource,vuex)还是都要上的。</p>
<blockquote>
<p>vue.js 有著名的全家桶系列，包含了 vue-router，vuex， vue-resource，再加上构建工具 vue-cli，就是一个完整的 vue 项目的核心构成。</p>
</blockquote>
<p><strong>vue-cli</strong>这个构建工具大大降 低了 webpack 的使用难度，支持热更新，有<strong>webpack-dev-server</strong>的支持，相当于启动了一个请求服务器，给你搭建了一个测试环境，只关注开发就 OK。</p>
<h4 id="1-安装-vue-cli"><a href="#1-安装-vue-cli" class="headerlink" title="1.安装 vue-cli"></a>1.安装 vue-cli</h4><p><strong>①</strong> 使用 npm（需要安装 node 环境）<strong>全局安装 webpack</strong>，打开命令行工具输入：<code>npm install webpack -g</code>或者（<code>npm install -g webpack</code>），安装完成之后输入 <code>webpack -v</code>，如下图，如果出现相应的版本号，则说明安装成功。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-739f0863e454f1e3.png" alt="img"></p>
<p><strong>②</strong> <strong>全局安装 vue-cli</strong>，在 cmd 中输入命令:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install --global vue-cli</span><br></pre></td></tr></table></figure>

<p>（我已经安装过，为了更直观我在电脑上重新演示下）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-12cb0bef236c50fa.png" alt="img"></p>
<p>安装成功：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-ac2a13a62505d1ae.png" alt="img"></p>
<p>安装完成之后输入 vue -V（注意这里是大写的“V”），如下图，如果出现相应的版本号，则说明安装成功。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-d8e864620a0b5aef.png" alt="img"></p>
<p>打开 C:\Users\Andminster\AppData\Roaming\npm 目录下可以看到：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-9d5e131d9681c0d6.png" alt="img"></p>
<p>打开 node_modules 也可以看到：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-6e55eb6b7d70ac91.png" alt="img"></p>
<h4 id="2-用-vue-cli-来构建项目"><a href="#2-用-vue-cli-来构建项目" class="headerlink" title="2.用 vue-cli 来构建项目"></a>2.用 vue-cli 来构建项目</h4><p><strong>①</strong> 我首先在 D 盘新建一个文件夹（dxl_vue）作为项目存放地，然后使用命令行 cd 进入到项目目录输入：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">vue init webpack baoge</span><br></pre></td></tr></table></figure>

<p>baoge 是自定义的项目名称，命令执行之后，会在当前目录生成一个以该名称命名的项目文件夹。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-22cf1a5dc4cda33d.png" alt="img"></p>
<p>输入命令后，会跳出几个选项让你回答：</p>
<ul>
<li>Project name (baoge)： —–项目名称，直接回车，按照括号中默认名字（注意这里的名字不能有大写字母，如果有会报错 Sorry, name can no longer contain capital letters），阮一峰老师博客<a href="https://link.jianshu.com/?t=http://www.ruanyifeng.com/blog/2017/02/filename-should-be-lowercase.html">为什么文件名要小写</a> ，可以参考一下。</li>
<li>Project description (A Vue.js project)： —-项目描述，也可直接点击回车，使用默认名字</li>
<li>Author ()： —-作者，输入 dongxili<br>接下来会让用户选择：</li>
<li>Runtime + Compiler: recommended for most users 运行加编译，既然已经说了推荐，就选它了<br>Runtime-only: about 6KB lighter min+gzip, but templates (or any Vue-specificHTML) are ONLY allowed in .vue files - render functions are required elsewhere 仅运行时，已经有推荐了就选择第一个了</li>
<li>Install vue-router? (Y/n) 是否安装 vue-router，这是官方的路由，大多数情况下都使用，这里就输入“y”后回车即可。</li>
<li>Use ESLint to lint your code? (Y/n) 是否使用 ESLint 管理代码，ESLint 是个代码风格管理工具，是用来统一代码风格的，一般项目中都会使用。<br>接下来也是选择题 Pick an ESLint preset (Use arrow keys) 选择一个 ESLint 预设，编写 vue 项目时的代码风格，直接 y 回车</li>
<li>Setup unit tests with Karma + Mocha? (Y/n) 是否安装单元测试，我选择安装 y 回车</li>
<li>Setup e2e tests with Nightwatch(Y/n)? 是否安装 e2e 测试 ，我选择安装 y 回车</li>
</ul>
<p>回答完毕后上图就开始构建项目了。</p>
<p><strong>②</strong> 配置完成后，可以看到目录下多出了一个项目文件夹 baoge，然后 cd 进入这个文件夹：<br><strong>安装依赖</strong>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>( 如果安装速度太慢。可以安装淘宝镜像，打开命令行工具，输入：<br> <code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code><br>  然后使用<code>cnpm</code>来安装 )</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-a5701c92e10ce959.png" alt="img"></p>
<p>npm install ：安装所有的模块，如果是安装具体的哪个个模块，在 install 后面输入模块的名字即可。而只输入 install 就会按照项目的根目录下的 package.json 文件中依赖的模块安装（这个文件里面是不允许有任何注释的），每个使用 npm 管理的项目都有这个文件，是 npm 操作的入口文件。因为是初始项目，还没有任何模块，所以我用 npm install 安装所有的模块。安装完成后，目录中会多出来一个 node_modules 文件夹，这里放的就是所有依赖的模块。</p>
<p>然后现在，baoge 文件夹里的目录是这样的：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-84cb6c247eba4438.png" alt="img"></p>
<p>解释下每个文件夹代表的意思(仔细看一下这张图）：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-01a038fa573b22c8.png" alt="img"></p>
<p>image.png</p>
<h4 id="3-启动项目"><a href="#3-启动项目" class="headerlink" title="3.启动项目"></a>3.启动项目</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>如果浏览器打开之后，没有加载出页面，有可能是本地的 8080 端口被占用，需要修改一下配置文件 config 里的 index.js</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-3a6a5874d3e8d445.png" alt="img"></p>
<p>还有，如果本地调试项目时，建议将 build 里的<code>assetsPublicPath</code>的路径前缀修改为 ‘ ./ ‘（开始是 ‘ / ‘），因为打包之后，外部引入 js 和 css 文件时，如果路径以 ‘ / ‘ 开头，在本地是无法找到对应文件的（服务器上没问题）。所以<strong>如果需要在本地打开打包后的文件</strong>，就得修改文件路径。<br>我的端口没有被占用，直接成功（服务启动成功后浏览器会默认打开一个“欢迎页面”）：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-77b13bb61a67b83f.png" alt="img"></p>
<p><strong>注意：在进行 vue 页面调试时，一定要去谷歌商店下载一个 vue-tool 扩展程序。</strong></p>
<h4 id="4-vue-cli-的-webpack-配置分析"><a href="#4-vue-cli-的-webpack-配置分析" class="headerlink" title="4.vue-cli 的 webpack 配置分析"></a>4.vue-cli 的 webpack 配置分析</h4><ul>
<li><p>从</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">package<span class="selector-class">.json</span></span><br></pre></td></tr></table></figure>

<p>可以看到开发和生产环境的入口。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/10868449-255932a94e033291.png" alt="img"></p>
</li>
<li><p>可以看到 dev 中的设置，<strong>build/webpack.dev.conf.js</strong>，该文件是开发环境中 webpack 的配置入口。</p>
</li>
<li><p>在 webpack.dev.conf.js 中出现<strong>webpack.base.conf.js</strong>，这个文件是开发环境和生产环境，甚至测试环境，这些环境的公共 webpack 配置。可以说，这个文件相当重要。</p>
</li>
<li><p>还有<strong>config/index.js 、build/utils.js 、build/build.js</strong>等，具体请看这篇介绍：<br><a href="https://link.jianshu.com/?t=https://segmentfault.com/a/1190000008644830">https://segmentfault.com/a/1190000008644830</a></p>
</li>
</ul>
<h4 id="5-打包上线"><a href="#5-打包上线" class="headerlink" title="5.打包上线"></a>5.打包上线</h4><p>注意，自己的项目文件都需要放到 src 文件夹下。<br>在项目开发完成之后，可以输入 <code>npm run build</code> 来进行打包工作。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>另：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span><span class="selector-class">.npm</span> 开启了npm run dev以后怎么退出或关闭？</span><br><span class="line">ctrl+c</span><br><span class="line"><span class="number">2</span><span class="selector-class">.--save-dev</span></span><br><span class="line">自动把模块和版本号添加到模块配置文件package<span class="selector-class">.json</span>中的依赖里devdependencies部分</span><br><span class="line"><span class="number">3</span>. --save-dev 与 --save 的区别</span><br><span class="line">--save     安装包信息将加入到dependencies（生产阶段的依赖）</span><br><span class="line">--save-dev 安装包信息将加入到devDependencies（开发阶段的依赖），所以开发阶段一般使用它</span><br></pre></td></tr></table></figure>

<p>打包完成后，会生成 dist 文件夹，如果已经修改了文件路径，可以直接打开本地文件查看。<br>项目上线时，只需要将 dist 文件夹放到服务器就行了。</p>
<h4 id="6、解决打包时没有双引号"><a href="#6、解决打包时没有双引号" class="headerlink" title="6、解决打包时没有双引号"></a>6、解决打包时没有双引号</h4><p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201027171539016.png" alt="image-20201027171539016"></p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201027171618487.png" alt="image-20201027171618487"></p>
<h4 id="7、解决打包时路径前没有点的"><a href="#7、解决打包时路径前没有点的" class="headerlink" title="7、解决打包时路径前没有点的"></a>7、解决打包时路径前没有点的</h4><p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201027171648800.png" alt="image-20201027171648800"></p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201027171723752.png" alt="image-20201027171723752"></p>
<h2 id="vue-3-0"><a href="#vue-3-0" class="headerlink" title="vue 3.0:"></a><strong>vue 3.0:</strong></h2><h3 id="1-安装-vue3-新建一个文件夹，进入该文件夹下，执行-vue-create-项目名称-如下图："><a href="#1-安装-vue3-新建一个文件夹，进入该文件夹下，执行-vue-create-项目名称-如下图：" class="headerlink" title="1.安装 vue3:新建一个文件夹，进入该文件夹下，执行 vue create ( 项目名称) , 如下图："></a><strong>1.安装 vue3:新建一个文件夹，进入该文件夹下，执行 vue create ( 项目名称) , 如下图：</strong></h3><p><strong><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028092615185-1589435642.png" alt="img"></strong></p>
<h3 id="2、vuecli3-为项目名称，进入下一步，"><a href="#2、vuecli3-为项目名称，进入下一步，" class="headerlink" title="2、vuecli3 为项目名称，进入下一步，"></a>2、vuecli3 为项目名称，进入下一步，</h3><p><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028093428320-507310938.png" alt="img"></p>
<h3 id="3、上面提示：请选择一个配置。下面有-3-个选项，第一个-“myset-”-是-我自己手动选择的配置，你们第一个安装你没有这个选项，如果选择了第-3-个通过手动选择后，下次再安装时会出现在这里，第二个-“default”是默认的，第-3-个是-手动选择。我们先选择第-3-个，进入下一步，"><a href="#3、上面提示：请选择一个配置。下面有-3-个选项，第一个-“myset-”-是-我自己手动选择的配置，你们第一个安装你没有这个选项，如果选择了第-3-个通过手动选择后，下次再安装时会出现在这里，第二个-“default”是默认的，第-3-个是-手动选择。我们先选择第-3-个，进入下一步，" class="headerlink" title="3、上面提示：请选择一个配置。下面有 3 个选项，第一个 “myset ” 是 我自己手动选择的配置，你们第一个安装你没有这个选项，如果选择了第 3 个通过手动选择后，下次再安装时会出现在这里，第二个 “default”是默认的，第 3 个是 手动选择。我们先选择第 3 个，进入下一步，"></a>3、上面提示：请选择一个配置。下面有 3 个选项，第一个 “myset ” 是 我自己手动选择的配置，你们第一个安装你没有这个选项，如果选择了第 3 个通过手动选择后，下次再安装时会出现在这里，第二个 “default”是默认的，第 3 个是 手动选择。我们先选择第 3 个，进入下一步，</h3><p> <img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028212018916-994587669.png" alt="img"></p>
<h3 id="4、这里要我们选择一个配置，按住上下键进行调转，空格键进行选中或者取消，"><a href="#4、这里要我们选择一个配置，按住上下键进行调转，空格键进行选中或者取消，" class="headerlink" title="4、这里要我们选择一个配置，按住上下键进行调转，空格键进行选中或者取消，"></a>4、这里要我们选择一个配置，按住上下键进行调转，空格键进行选中或者取消，</h3><p> <strong><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028212721957-1641988505.png" alt="img"></strong></p>
<h3 id="5、这一步询问的是-把项目的配置文件放在独立的配置文件中还是放在-package-json-文件中，这里我们选择第一个，方便我们以后的修改，进行下一步"><a href="#5、这一步询问的是-把项目的配置文件放在独立的配置文件中还是放在-package-json-文件中，这里我们选择第一个，方便我们以后的修改，进行下一步" class="headerlink" title="5、这一步询问的是 把项目的配置文件放在独立的配置文件中还是放在 package.json 文件中，这里我们选择第一个，方便我们以后的修改，进行下一步"></a><strong>5、这一步询问的是 把项目的配置文件放在独立的配置文件中还是放在 package.json 文件中，这里我们选择第一个，方便我们以后的修改，进行下一步</strong></h3><p><strong><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028213120522-662115457.png" alt="img"></strong></p>
<h3 id="6、这里询问的是我们手动配置要不要进行保存，以便下次使用，也就是安装第一步的时候的选择，输入-y"><a href="#6、这里询问的是我们手动配置要不要进行保存，以便下次使用，也就是安装第一步的时候的选择，输入-y" class="headerlink" title="6、这里询问的是我们手动配置要不要进行保存，以便下次使用，也就是安装第一步的时候的选择，输入 y,"></a>6、这里询问的是我们手动配置要不要进行保存，以便下次使用，也就是安装第一步的时候的选择，输入 y,</h3><p><strong><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028213637897-1462510890.png" alt="img"></strong></p>
<p>这里要输入的是要保存的命字，进行一下步安装，</p>
<p><strong><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028214618286-1860541299.png" alt="img"></strong></p>
<p><strong>安装完成。</strong></p>
<p><strong>启动项目：</strong></p>
<p><strong><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028215057979-264657779.png" alt="img"> <img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028220020248-1865468608.png" alt="img"></strong></p>
<p>这是 vue3 的项目结构，显然和 vue2 的结构不一样,没有了 config 文件夹而且还多了一个.git 文件，方便我们项目管理，其中 public 相当于 vue2 中的 static 静态文件夹，相同文件我就不说了，我只说一下不同文件。</p>
<p>我们先看一下 package.json 文件，</p>
<p><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028220304989-911894080.png" alt="img"></p>
<p>开发依赖少了很多，因为 vue3.0 讲究的是 0 配置，因为不显示的这些文件不需要我们去改，我们通过 npm 安装的依赖会存在哪里呢？</p>
<p><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028222147423-2073306937.png" alt="img"></p>
<p>这里我安装了 2 个依赖，很显然是放在 package.json 文件下的，方便我们去管理自己的依赖。那默认的那些依赖存在哪里呢？</p>
<p>。其实是通过 “@vue/cli-service”: “^4.0.0”,去管理我们的依赖的，在 “node_modules” =&gt; “@vue” =&gt; cli-service =&gt; package.json，这里面就是隐藏的依赖。</p>
<p>vue2 中的 config 文件夹隐藏到了“node_modules” =&gt; “@vue” =&gt; cli-service =&gt; webpack.config.js 中，而在 webpack.config.js 中有这一行代码：</p>
<p><img src="https://img2018.cnblogs.com/blog/1219358/201910/1219358-20191028225647803-1676832087.png" alt="img"></p>
<p>所以再找到 Service.js 文件,这里面才是我们要的配置文件。</p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201030154855806.png" alt="image-20201030154855806"></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>VUEX</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vuex/</url>
    <content><![CDATA[<h2 id="组件之间共享数据的方式"><a href="#组件之间共享数据的方式" class="headerlink" title="组件之间共享数据的方式"></a><strong>组件之间共享数据的方式</strong></h2><p>父向子传值：[v-bind] 属性绑定</p>
<p>子向父传值：v-on 事件绑定</p>
<p>兄弟组件之间共享数据： <code>EventBus</code></p>
<p> $on 接收数据的那个组件</p>
<p> $emit 发送数据的那个组件</p>
<p><strong><code>Vuex</code> 是什么</strong></p>
<p><code>Vuex</code> 是实现组件全局状态（数据）管理的一种机制，可以方便的实现组件之间数据的共享。</p>
<p><img src="../public%5Cimage-20201103111011062.png" alt="image-20201103111011062"></p>
<p><strong>使用 <code>Vuex</code> 统一管理状态的好处</strong></p>
<p>① 能够在 <code>vuex</code> 中集中管理共享的数据，易于开发和后期维护</p>
<p>② 能够高效地实现组件之间的数据共享，提高开发效率</p>
<p>③ 存储在 <code>vuex</code> 中的数据都是响应式的，能够实时保持数据与页面的同步</p>
<p><strong>什么样的数据适合存储到 <code>Vuex</code> 中</strong></p>
<p>一般情况下，只有组件之间共享的数据，才有必要存储到 <code>vuex</code> 中；对于组件中的私有数据，依旧存储在组件</p>
<p>自身的 data 中即可。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>输入命令<code>vue add vuex</code>等候安装完成后会在<code>src</code>文件夹下出现<code>store</code>文件，<code>store</code>文件下的<code>index.js</code>为<code>vuex</code>的主文件。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">vue add vuex</span><br></pre></td></tr></table></figure>

<p><strong>将 store 对象挂载到 <code>vue</code> 实例中</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(app),</span><br><span class="line">  router,</span><br><span class="line">  <span class="comment">// 将创建的共享数据对象，挂载到 Vue 实例中</span></span><br><span class="line">  <span class="comment">// 所有的组件，就可以直接从 store 中获取全局的数据了</span></span><br><span class="line">  store,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="State"><a href="#State" class="headerlink" title="State"></a>State</h2><p>State 提供唯一的公共数据源，所有共享的数据都要统一放到 Store 的 State 中进行存储。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建store数据源，提供唯一公共数据</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在<code>vue</code>组件中我们可以通过<code>this.$store.state</code>来获取<code>vuex</code>下的<code>state</code>状态。</p>
<p>组件访问 State 中数据的第一种方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.state.全局数据名称</span><br></pre></td></tr></table></figure>

<p>组件访问 State 中数据的第二种方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 从 vuex 中按需导入 mapState 函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>

<p>通过刚才导入的 mapState 函数，将当前组件需要的全局数据，映射为当前组件的 computed 计算属性：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. 将全局数据，映射为当前组件的计算属性</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line"> ...mapState([<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Getter"><a href="#Getter" class="headerlink" title="Getter"></a>Getter</h2><p>Getter 用于对 Store 中的数据进行加工处理形成新的数据。</p>
<p>① Getter 可以对 Store 中已有的数据加工处理之后形成新的数据，类似 Vue 的计算属性。</p>
<p>② Store 中数据发生变化，Getter 的数据也会跟着变化。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义 Getter</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">showNum</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;当前最新的数量是【&#x27;</span> + state.count + <span class="string">&#x27;】&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用 getters 的第一种方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.getters.名称</span><br></pre></td></tr></table></figure>

<p>使用 getters 的第二种方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line"> ...mapGetters([<span class="string">&#x27;showNum&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h2><p>提交 mutation 是更改<code>Vuex</code>中的 store 中的状态的<code>唯一方法</code>。</p>
<p>mutation 必须是同步的，如果要异步需要使用 action。</p>
<p>可以在触发 mutations 时传递参数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义Mutation</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">addN</span>(<span class="params">state, step</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// 变更状态</span></span><br><span class="line">            state.count += step</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发mutation</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">handle2</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 在调用 commit 函数，</span></span><br><span class="line">        <span class="comment">// 触发 mutations 时携带参数</span></span><br><span class="line">        <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;addN&#x27;</span>, <span class="number">3</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>this.$store.commit() 是触发 mutations 的第一种方式，触发 mutations 的第二种方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 从 vuex 中按需导入 mapMutations 函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>

<p>通过刚才导入的 mapMutations 函数，将需要的 mutations 函数，映射为当前组件的 methods 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. 将指定的 mutations 函数，映射为当前组件的 methods 函数</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line"> ...mapMutations([<span class="string">&#x27;add&#x27;</span>, <span class="string">&#x27;addN&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>每个 mutation 都有一个字符串的 事件类型 (type) 和 一个 回调函数 (handler)。这个回调函数就是我们实际进行状态更改的地方，并且它会接受 state 作为第一个参数，提交载荷作为第二个参数。（提交荷载在大多数情况下应该是一个对象）,提交荷载也可以省略的。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">//无提交荷载</span></span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">        state.count++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//提交荷载</span></span><br><span class="line">    <span class="function"><span class="title">incrementN</span>(<span class="params">state, obj</span>)</span> &#123;</span><br><span class="line">      state.count += obj.n</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>你不能直接调用一个 mutation handler。这个选项更像是事件注册：“当触发一个类型为 increment 的 mutation 时，调用此函数。”要唤醒一个 mutation handler，你需要以相应的 type 调用 store.commit 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//无提交荷载</span></span><br><span class="line">store.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line"><span class="comment">//提交荷载</span></span><br><span class="line">store.commit(<span class="string">&#x27;incrementN&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">n</span>: <span class="number">100</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>对象风格的提交方式</p>
<p>我们也可以使用这样包含 type 属性的对象的提交方式。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.commit(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;incrementN&#x27;</span>,</span><br><span class="line">  <span class="attr">n</span>: <span class="number">10</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Mutations 需遵守 Vue 的响应规则</p>
<ul>
<li>最好提前在你的 store 中初始化好所有所需属性。</li>
<li>当需要在对象上添加新属性时，你应该<ul>
<li>使用 <code>Vue.set(obj, &#39;newProp&#39;, 123)</code>, 或者</li>
<li>以新对象替换老对象。例如，利用对象展开运算符我们可以这样写<code>state.obj = &#123;...state.obj, newProp: 123 &#125;</code></li>
</ul>
</li>
</ul>
<h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><ul>
<li><p>Action 用于处理异步任务。</p>
<p>如果通过异步操作变更数据，必须通过 Action，而不能使用 Mutation，但是在 Action 中还是要通过触发</p>
<p>Mutation 的方式间接变更数据。</p>
</li>
</ul>
<p>我们用如下例子 actions：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义 Action</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    <span class="comment">// ...省略其他代码</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">add</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">            state.count++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">addAsync</span>(<span class="params">context</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                context.commit(<span class="string">&#x27;add&#x27;</span>)</span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发 Action</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">handle</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 触发 actions 的第一种方式</span></span><br><span class="line">        <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;addAsync&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Action 通过 <code>store.dispatch</code> 方法触发：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 从 vuex 中按需导入 mapActions 函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>

<p>通过刚才导入的 mapActions 函数，将需要的 actions 函数，映射为当前组件的 methods 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. 将指定的 actions 函数，映射为当前组件的 methods 函数</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line"> ...mapActions([<span class="string">&#x27;addASync&#x27;</span>, <span class="string">&#x27;addNASync&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>我们将<code>store</code>分割成模块，每个模块拥有自己的 <code>state、mutation、action、getter</code>、甚至是嵌套子模块，这样的话就解决了多人写作开发中同名数据发生冲突导致被修改。</p>
<p>使用单一状态树，导致应用的所有状态集中到一个很大的对象。但是，当应用变得很大时，store 对象会变得臃肿不堪。</p>
<p>为了解决以上问题，Vuex 允许我们将 store 分割到模块（module）。每个模块拥有自己的 state、mutation、action、getters、甚至是嵌套子模块——从上至下进行类似的分割：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: moduleA,</span><br><span class="line">    <span class="attr">b</span>: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA 的状态</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB 的状态</span></span><br></pre></td></tr></table></figure>

<p>在模块内我们写有两个独立的模块<code>moduleA</code>和<code>moduleB</code>，每个模块也有着独立的五大核心概念。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;moduleA&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;moduleB&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;setage&quot;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; mapState, mapGetters, mapMutations, mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 收集并重命名模块A中的Action</span></span></span><br><span class="line"><span class="javascript">      ...mapActions(<span class="string">&#x27;moduleA&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">asychangeModuleA</span>: <span class="string">&#x27;asychangeName&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      &#125;),</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 收集并重命名模块B中的Action</span></span></span><br><span class="line"><span class="javascript">      ...mapActions(<span class="string">&#x27;moduleB&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">asychangeModuleB</span>: <span class="string">&#x27;asychangeName&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      &#125;),</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">setage</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 修改模块A中的数据</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.asychangeModuleA(<span class="string">&#x27;This is the value of moduleA I modified&#x27;</span>).then(</span></span><br><span class="line"><span class="javascript">          <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;修改moduleA成功&#x27;</span>)</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 修改模块B中的数据</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.asychangeModuleB(<span class="string">&#x27;This is the value of moduleB I modified&#x27;</span>).then(</span></span><br><span class="line"><span class="javascript">          <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;修改moduleB成功&#x27;</span>)</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 收集并重命名模块A中的State</span></span></span><br><span class="line"><span class="javascript">      ...mapState(<span class="string">&#x27;moduleA&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">moduleA</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> state.name,</span></span><br><span class="line"><span class="javascript">      &#125;),</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 收集并重命名模块B中的State</span></span></span><br><span class="line"><span class="javascript">      ...mapState(<span class="string">&#x27;moduleB&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">moduleB</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> state.name,</span></span><br><span class="line"><span class="javascript">      &#125;),</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>模块的局部状态</p>
<p>对于模块内部的 <code>mutation</code> 和 <code>getter</code>，接收的第一个参数是模块的局部状态,对于模块内部的 getter，根节点状态会作为第三个参数:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// state 模块的局部状态</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">doubleCount</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count * <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">sumWithRootCount</span>(<span class="params">state, getters, rootState</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + rootState.count</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样，对于模块内部的 action，<code>context.state</code> 是局部状态，根节点的状态是 <code>context.rootState</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">incrementIfOddOnRootSum</span>(<span class="params">context</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> ((context.state.count + context.rootState.count) % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><p><code>Vuex</code> 是一个单向数据流的模式，<code>State</code>中数据想要发生改变，根据规范需要在<code>Mutation</code>中去修改他，<code>Action</code>决定<code>Mutation</code>什么时候去执行，这就是一个单向数据流的模式。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly92dWV4LnZ1ZWpzLm9yZy92dWV4LnBuZw?x-oss-process=image/format,png#pic_center" alt="在这里插入图片描述"><br>开启严格模式，就必须通过<code>Mutation</code>来进行修改数据，否则将抛出错误。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">strict</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>请不要再发布环境中使用严格模式，严格模式会深度检测不符合规范的<code>State</code>更改，十分消耗性能，我们可以使用判断环境动态设置严格模式。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">strict</span>: process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="store-的辅助函数"><a href="#store-的辅助函数" class="headerlink" title="store 的辅助函数"></a>store 的辅助函数</h2><h3 id="commit-同步操作"><a href="#commit-同步操作" class="headerlink" title="commit() : 同步操作"></a>commit() : 同步操作</h3><p>存储</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//this.$store.commit(&#x27;mutations方法名&#x27;,值)</span></span><br><span class="line"><span class="built_in">this</span>.$store.commit(<span class="string">&#x27;changeValue&#x27;</span>, name)</span><br></pre></td></tr></table></figure>

<p>取值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.state.changeValue</span><br></pre></td></tr></table></figure>

<h3 id="dispatch-异步操作"><a href="#dispatch-异步操作" class="headerlink" title="dispatch() : 异步操作"></a>dispatch() : 异步操作</h3><p>存储</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//this.$store.dispatch(&#x27;action方法名&#x27;,值)</span></span><br><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;getlists&#x27;</span>, name)</span><br></pre></td></tr></table></figure>

<p>取值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.getters.getlists</span><br></pre></td></tr></table></figure>

<h3 id="常用辅助函数"><a href="#常用辅助函数" class="headerlink" title="常用辅助函数"></a>常用辅助函数</h3><ul>
<li>state — mapState</li>
<li>getter — mapGetters</li>
<li>mutation — mapMutations</li>
<li>action — mapActions</li>
</ul>
<h3 id="使用前引入"><a href="#使用前引入" class="headerlink" title="使用前引入"></a>使用前引入</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//import &#123; 辅助函数 &#125; from &#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="1、mapState"><a href="#1、mapState" class="headerlink" title="1、mapState"></a>1、mapState</h3><p> 快速获取到 state 中的参数,当一个组件需要获取多个状态时候，将这些状态都声明为计算属性会有些重复和冗余。为了解决这个问题，我们可以使用 mapState 辅助函数帮助我们生成计算属性。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在单独构建的版本中辅助函数为 Vuex.mapState</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">computed</span>: mapState(&#123;</span><br><span class="line">    <span class="comment">// 箭头函数可使代码更简练</span></span><br><span class="line">    <span class="attr">count</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传字符串参数 &#x27;count&#x27; 等同于 `state =&gt; state.count`</span></span><br><span class="line">    <span class="attr">countAlias</span>: <span class="string">&#x27;count&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为了能够使用 `this` 获取局部状态，必须使用常规函数</span></span><br><span class="line">    countPlusLocalState (state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + <span class="built_in">this</span>.localCount</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>当映射的计算属性的名称与 state 的子节点名称相同时，我们也可以给 mapState 传一个字符串数组。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: mapState([</span><br><span class="line">  <span class="comment">// 映射 this.count 为 store.state.count</span></span><br><span class="line">  <span class="string">&#x27;count&#x27;</span>,</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<p>对象展开运算符</p>
<p>mapState 函数返回的是一个对象。我们如何将它与局部计算属性混合使用呢？通常，我们需要使用一个工具函数将多个对象合并为一个，以使我们可以将最终对象传给 computed 属性。但是自从有了对象展开运算符，我们可以极大地简化写法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  localComputed () <span class="comment">//本地计算属性</span></span><br><span class="line">  <span class="comment">//使用对象展开运算符将此对象混入到外部对象中</span></span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    <span class="comment">//..</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对象运算符<br><code>...</code> 展开运算符（spread operator）允许一个表达式在某处展开。展开运算符在多个参数（用于函数调用）或多个元素（用于数组字面量）或者多个变量（用于解构赋值）的地方可以使用。</p>
<p>展开运算符不能用在对象当中，因为目前展开运算符只能在可遍历对象（iterables）可用。iterables 的实现是依靠[Symbol.iterator]函数，而目前只有 Array,Set,String 内置[Symbol.iterator]方法，而 Object 尚未内置该方法，因此无法使用展开运算符。不过 ES7 草案当中已经加入了对象展开运算符特性。</p>
<p>例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">  <span class="built_in">console</span>.log(c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">test(...args) <span class="comment">// 0  1  2</span></span><br></pre></td></tr></table></figure>

<h4 id="组件仍然保有局部状态"><a href="#组件仍然保有局部状态" class="headerlink" title="组件仍然保有局部状态"></a>组件仍然保有局部状态</h4><p>使用 Vuex 并不意味着你需要将所有的状态放入 Vuex。虽然将所有的状态放到 Vuex 会使状态变化更显式和易调试，但也会使代码变得冗长和不直观。</p>
<p>如果有些状态严格属于单个组件，最好还是作为组件的局部状态。你应该根据你的应用开发需要进行权衡和确定。</p>
<h3 id="2、mapGetters"><a href="#2、mapGetters" class="headerlink" title="2、mapGetters"></a>2、mapGetters</h3><p>mapGetters 辅助函数仅仅是将 store 中的 getters 映射到局部计算属性，与 state 类似.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// 使用对象展开运算符将 getters 混入 computed 对象中</span></span><br><span class="line">    ...mapGetters([</span><br><span class="line">      <span class="string">&#x27;countDouble&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;CountDoubleAndDouble&#x27;</span>,</span><br><span class="line">      <span class="comment">//..</span></span><br><span class="line">    ]),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你想将一个 getter 属性另取一个名字，使用对象形式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mapGetters(&#123;</span><br><span class="line">  <span class="comment">// 映射 this.double 为 store.getters.countDouble</span></span><br><span class="line">  <span class="attr">double</span>: <span class="string">&#x27;countDouble&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3、mapMutations"><a href="#3、mapMutations" class="headerlink" title="3、mapMutations"></a>3、mapMutations</h3><p>其他辅助函数类似，你可以在组件中使用 this.$store.commit(‘xxx’) 提交 mutation，或者使用 mapMutations 辅助函数将组件中的 methods 映射为 store.commit 调用（需要在根节点注入 store）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//..</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    ...mapMutations([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// 映射 this.increment() 为 this.$store.commit(&#x27;increment&#x27;)</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      <span class="attr">add</span>: <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// 映射 this.add() 为 this.$store.commit(&#x27;increment&#x27;)</span></span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、mapActions"><a href="#4、mapActions" class="headerlink" title="4、mapActions"></a>4、mapActions</h3><p>你在组件中使用 <code>this.$store.dispatch(&#39;xxx&#39;)</code> 分发 action，或者使用 <code>mapActions</code> 辅助函数将组件的 methods 映射为 <code>store.dispatch</code> 调用（需要先在根节点注入 <code>store</code>）:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//..</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">&#x27;incrementN&#x27;</span>, <span class="comment">//映射 this.incrementN() 为 this.$store.dispatch(&#x27;incrementN&#x27;)</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      <span class="attr">add</span>: <span class="string">&#x27;incrementN&#x27;</span>, <span class="comment">//映射 this.add() 为 this.$store.dispatch(&#x27;incrementN&#x27;)</span></span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vuex</category>
      </categories>
      <tags>
        <tag>vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>.sync修饰符</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E4%B8%AD.sync%E4%BF%AE%E9%A5%B0%E7%AC%A6/</url>
    <content><![CDATA[<p>vue 中我们经常会用 v-bind(缩写为:)给子组件传入参数。<br>或者我们会给子组件传入一个函数，子组件通过调用传入的函数来改变父组件的状态。<br>例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//父组件给子组件传入一个函数</span></span><br><span class="line"> &lt;MyFooter :age=<span class="string">&quot;age&quot;</span> @setAge=<span class="string">&quot;(res)=&gt; age = res&quot;</span>&gt;</span><br><span class="line"> &lt;/MyFooter&gt;</span><br><span class="line"> <span class="comment">//子组件通过调用这个函数来实现修改父组件的状态。</span></span><br><span class="line"> mounted () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.$emit(<span class="string">&#x27;setAge&#x27;</span>,<span class="number">1234567</span>));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>这时子组件触发了父组件的修改函数使父组件的 age 修改成了 1234567</p>
<p>这种情况比较常见切写法比较复杂。于是我们引出今天的主角 .sync</p>
<p>这时我们可以直接这样写</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//父组件将age传给子组件并使用.sync修饰符。</span></span><br><span class="line">&lt;MyFooter :age.sync=<span class="string">&quot;age&quot;</span>&gt;</span><br><span class="line">&lt;/MyFooter&gt;</span><br><span class="line"><span class="comment">//子组件触发事件</span></span><br><span class="line"> mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$emit(<span class="string">&#x27;update:age&#x27;</span>,<span class="number">1234567</span>));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>这里注意我们的事件名称被换成了 update:age<br>update：是被固定的也就是 vue 为我们约定好的名称部分<br>age 是我们要修改的状态的名称，是我们手动配置的，与传入的状态名字对应起来</p>
<p>这样就完成了，是不是感觉简单了很多。</p>
<p>注意事项：<br>这里我们必须在事件执行名称前加上 update：的前缀才能正确触发事件。</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>定时器</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. 导入Vue包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. 创建一个要控制的区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;浪起来&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;lang&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;低调&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;stop&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 注意：在 VM实例中，如果想要获取 data 上的数据，或者 想要调用 methods 中的 方法，必须通过 this.数据属性名  或  this.方法名 来进行访问，这里的this，就表示 我们 new 出来的  VM 实例对象</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="attr">msg</span>: <span class="string">&#x27;猥琐发育，别浪~~！&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">intervalId</span>: <span class="literal">null</span>, <span class="comment">// 在data上定义 定时器Id</span></span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">lang</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(this.msg)</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取到头的第一个字符</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// this</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">this</span>.intervalId != <span class="literal">null</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.intervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> start = <span class="built_in">this</span>.msg.substring(<span class="number">0</span>, <span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 获取到 后面的所有字符</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> end = <span class="built_in">this</span>.msg.substring(<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 重新拼接得到新的字符串，并赋值给 this.msg</span></span></span><br><span class="line"><span class="javascript">              <span class="built_in">this</span>.msg = end + start</span></span><br><span class="line"><span class="javascript">            &#125;, <span class="number">400</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 注意： VM实例，会监听自己身上 data 中所有数据的改变，只要数据一发生变化，就会自动把 最新的数据，从data 上同步到页面中去；【好处：程序员只需要关心数据，不需要考虑如何重新渲染DOM页面】</span></span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">stop</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 停止定时器</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.intervalId)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 每当清除了定时器之后，需要重新把 intervalId 置为 null</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.intervalId = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue学习</title>
    <url>/taiaiac.gitee.io/2020/01/14/vue/vue%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><ul>
<li>架构方式、开发思想</li>
<li>M：Model数据模型</li>
<li>V：View视图界面（HTML）</li>
<li>VM：ViewModel视图数据模型<ul>
<li>驱动视图改变data数据</li>
</ul>
</li>
</ul>
<h3 id="M：Model"><a href="#M：Model" class="headerlink" title="M：Model"></a>M：Model</h3><ul>
<li>服务端处理数据库交互<ul>
<li>mongoose</li>
<li>设计数据模型</li>
<li>models</li>
<li>find</li>
<li>new User().save()</li>
</ul>
</li>
<li>客户端要处理服务器的接口交互<ul>
<li>ajax(‘地址’)</li>
<li>GET <a href="http://127.0.0.1:3000/users">http://127.0.0.1:3000/users</a></li>
<li>POST <a href="http://127.0.0.1:3000/users/1">http://127.0.0.1:3000/users/1</a></li>
<li>PATCH <a href="http://127.0.0.1:3000/users/1">http://127.0.0.1:3000/users/1</a></li>
<li>DELETE <a href="http://127.0.0.1:3000/users/1">http://127.0.0.1:3000/users/1</a></li>
<li>没有表意性<ul>
<li>User.find()</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="V：View"><a href="#V：View" class="headerlink" title="V：View"></a>V：View</h3><h3 id="VM：ViewModel"><a href="#VM：ViewModel" class="headerlink" title="VM：ViewModel"></a>VM：ViewModel</h3><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li><strong>低耦合</strong>。视图（View）可以独立于Model变化和修改，一个VIewModel可以绑定到不同的“View”上，当View变化的时候Model可以不变，当Model变化的时候View也可以不变</li>
<li><strong>可重用性</strong>。你可以把一些视图逻辑放到一个VIewModel里面，让很多View重用这段视图逻辑。</li>
<li><strong>独立开发</strong>。开发人员可以专注于业务逻辑和数据的开发（ViewModel），设计人员可以专注于页面设计，使用Expression Blend可以很容易设计界面并生成xml代码</li>
<li><strong>可测试</strong>。界面素来是比较难于测试的，而现在测试可以针对ViewModel来写。</li>
</ul>
<h2 id="VM原理"><a href="#VM原理" class="headerlink" title="VM原理"></a>VM原理</h2><ul>
<li>事件观察者</li>
<li>事件发布 / 订阅模式</li>
<li>Object.defineProperty高级属性定义方式</li>
<li>所有关心message改变的 DOM 都订阅了 message 事件</li>
<li>当 message 改变的时候，就发布 message 事件</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>事件修饰符</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E4%B8%AD%E7%9A%84%E4%BF%AE%E9%A5%B0%E7%AC%A6/</url>
    <content><![CDATA[<h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-class">.inner</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: darkcyan;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-class">.outer</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 使用  .stop  阻止冒泡 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;div class=&quot;inner&quot; @click=&quot;div1Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type=&quot;button&quot; value=&quot;戳他&quot; @click.stop=&quot;btnHandler&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 使用 .prevent 阻止默认行为 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;a href=&quot;http://www.baidu.com&quot; @click.prevent=&quot;linkClick&quot;&gt;有问题，先去百度&lt;/a&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 使用  .capture 实现捕获触发事件的机制 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;div class=&quot;inner&quot; @click.capture=&quot;div1Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type=&quot;button&quot; value=&quot;戳他&quot; @click=&quot;btnHandler&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 使用 .self 实现只有点击当前元素时候，才会触发事件处理函数 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;div class=&quot;inner&quot; @click=&quot;div1Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type=&quot;button&quot; value=&quot;戳他&quot; @click=&quot;btnHandler&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 使用 .once 只触发一次事件处理函数 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;a href=&quot;http://www.baidu.com&quot; @click.prevent.once=&quot;linkClick&quot;&gt;有问题，先去百度&lt;/a&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 演示： .stop 和 .self 的区别 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;div class=&quot;outer&quot; @click=&quot;div2Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;div class=&quot;inner&quot; @click=&quot;div1Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;input type=&quot;button&quot; value=&quot;戳他&quot; @click.stop=&quot;btnHandler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;/div&gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- .self 只会阻止自己身上冒泡行为的触发，并不会真正阻止 冒泡的行为 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;div class=&quot;outer&quot; @click=&quot;div2Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;div class=&quot;inner&quot; @click.self=&quot;div1Handler&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;input type=&quot;button&quot; value=&quot;戳他&quot; @click=&quot;btnHandler&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;/div&gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 创建 Vue 实例，得到 ViewModel</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">data</span>: &#123;&#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">div1Handler</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;这是触发了 inner div 的点击事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">btnHandler</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;这是触发了 btn 按钮 的点击事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">linkClick</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;触发了连接的点击事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">div2Handler</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&#x27;这是触发了 outer div 的点击事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>.stop 阻止冒泡</p>
</li>
<li><p>.prevent 阻止默认事件</p>
</li>
<li><p>.capture 添加事件侦听器时使用事件捕获模式</p>
</li>
<li><p>.self 只当事件在该元素本身（比如不是子元素）触发时触发回调</p>
</li>
<li><p>.once 事件只触发一次</p>
</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>富文本编辑器</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/</url>
    <content><![CDATA[<h1 id="Vue-轻量级富文本编辑器-Vue-Quill-Editor"><a href="#Vue-轻量级富文本编辑器-Vue-Quill-Editor" class="headerlink" title="Vue 轻量级富文本编辑器-Vue-Quill-Editor"></a>Vue 轻量级富文本编辑器-Vue-Quill-Editor</h1><p><img src="https://img-blog.csdn.net/20180904192321893?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nlbm1hZ2U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>1、下载 Vue-Quill-Editor</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install vue-quill-editor --save</span><br></pre></td></tr></table></figure>

<p>2、下载 quill（Vue-Quill-Editor 需要依赖）</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install quill --save</span><br></pre></td></tr></table></figure>

<p>3、代码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;edit_container&quot;&gt;</span><br><span class="line">    &lt;quill-editor</span><br><span class="line">      v-model=&quot;content&quot;</span><br><span class="line">      ref=&quot;myQuillEditor&quot;</span><br><span class="line">      :options=&quot;editorOption&quot;</span><br><span class="line">      @blur=&quot;onEditorBlur($event)&quot;</span><br><span class="line">      @focus=&quot;onEditorFocus($event)&quot;</span><br><span class="line">      @change=&quot;onEditorChange($event)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/quill-editor&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; quillEditor &#125; from &#x27;vue-quill-editor&#x27; //调用编辑器</span><br><span class="line">import &#x27;quill/dist/quill.core.css&#x27;</span><br><span class="line">import &#x27;quill/dist/quill.snow.css&#x27;</span><br><span class="line">import &#x27;quill/dist/quill.bubble.css&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    quillEditor,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      content: `&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;&lt;em&gt;Or drag/paste an image here.&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;em&gt;rerew&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;em&gt;rtrete&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;em&gt;tytrytr&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;em&gt;uytu&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;&lt;/ol&gt;`,</span><br><span class="line">      editorOption: &#123;&#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onEditorReady(editor) &#123;</span><br><span class="line">      // 准备编辑器</span><br><span class="line">    &#125;,</span><br><span class="line">    onEditorBlur() &#123;&#125;, // 失去焦点事件</span><br><span class="line">    onEditorFocus() &#123;&#125;, // 获得焦点事件</span><br><span class="line">    onEditorChange() &#123;&#125;, // 内容改变事件</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    editor() &#123;</span><br><span class="line">      return this.$refs.myQuillEditor.quill</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>文件路径问题</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="vue-cli3-项目模板怎么使用-public-目录下的静态文件"><a href="#vue-cli3-项目模板怎么使用-public-目录下的静态文件" class="headerlink" title="vue@cli3 项目模板怎么使用 public 目录下的静态文件"></a>vue@cli3 项目模板怎么使用 public 目录下的静态文件</h1><p><a href="https://www.suibianlu.com/c/jishu/webqianduan/">WEB 前端</a> 2020-07-07 15</p>
<p>作为图片最好放在 static 目录下，但是 vue@cli3 没有 static，网上都说放在 public 目录下，行，那就放吧，可问题是图片放了怎么使用</p>
<p><strong>第一次尝试</strong></p>
<p>肯定用绝对路径这就不说了，用相对路径，webpack 会解析成 base64，可是绝对路径怎么输都不对，咋回事</p>
<p><img src="https://dx1.maozhew.com/jishu/p/2020/07/2020070711324642.png" alt="img"></p>
<p>后面看网上说把前面路径下的 public 路径去掉，好，开发环境没问题了，可打包报错怎么办，就这个我研究了好久。</p>
<p><strong>解决问题</strong></p>
<p>网上一大堆牛头不对马嘴的，我也是无语了<br>最后的最后，终于官网找到了完美的解决方案</p>
<p><img src="https://dx1.maozhew.com/jishu/p/2020/07/2020070711324943.png" alt="img"></p>
<p>如此设置，完美解决问题，如果你留心观察过，你会发现，index.html 文件的 ico 图标就已经这么使用了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;er&quot;&gt;</span><br><span class="line">    &lt;el-scrollbar style=&quot;height:100%&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;ds&quot;&gt;</span><br><span class="line">        &lt;img class=&quot;sdde&quot; :src=&quot;`$&#123;publicPath&#125;imges/but_play.png`&quot; \ /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-scrollbar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      publicPath: process.env.BASE_URL,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>项目目录介绍</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<p><strong>项目目录介绍：</strong></p>
<p><img src="../imgs/image-20201030142935452.png" alt="image"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、build  文件夹：webpack的一些相关配置；</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、config  文件夹：项目开发环境和生产环境的一些相关配置；</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、node_modules  文件夹 ：这里存放的是安装包，比如webpack、第三方插件库、项目的依赖文件；</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、<span class="attribute">src</span>  文件夹：我们将要写的代码放在这里面，打包上线时会进行编译、压缩等操作。</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、static 文件夹：这里存放的是一些静态文件比如图片、css文件、不需要进行压缩的js文件，打包时这个文件夹将原封不动的放到dist（打包时自动生产的文件夹）文件夹下面。</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>、<span class="selector-class">.babelrc</span> 文件：ES6语法编译配置，主要是将ES 转成ES 需要适配那些浏览器</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>、<span class="selector-class">.editorconfig</span> 文件：定义代码格式，对代码的风格进行一个统一。</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>、<span class="selector-class">.gitignore</span> 文件：git上传需要忽略的文件格式</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>、  <span class="selector-class">.postcssrc</span><span class="selector-class">.js</span> 文件：postcss配置文件</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>、 index<span class="selector-class">.html</span>  文件：要进行访问的首页面</span><br><span class="line"></span><br><span class="line"><span class="number">11</span>、package-lock<span class="selector-class">.json</span> 文件：锁定依赖模块和子模块的版本号</span><br><span class="line"></span><br><span class="line"><span class="number">12</span>、package<span class="selector-class">.json</span> 文件：项目基本信息,包依赖信息等</span><br><span class="line"></span><br><span class="line"><span class="number">13</span>、README<span class="selector-class">.md</span>  文件：项目说明文件</span><br></pre></td></tr></table></figure>

<p><img src="../imgs/image-20201030143142940.png" alt="image"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、node_modules  文件夹 ：这里存放的是安装包，比如webpack、第三方插件库、项目的依赖文件；</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、public 文件夹：这里存放的是一些静态文件比如图片、css文件、不需要进行压缩的js文件，打包时这个文件夹将原封不动的放到dist（打包时自动生产的文件夹）文件夹下面。</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、<span class="attribute">src</span>  文件夹：我们将要写的代码放在这里面，打包上线时会进行编译、压缩等操作。</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue的各种引入</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue%E7%9A%84%E5%90%84%E7%A7%8D%E5%BC%95%E5%85%A5/</url>
    <content><![CDATA[<h2 id="一、绝对路径直接引入，全局可用"><a href="#一、绝对路径直接引入，全局可用" class="headerlink" title="一、绝对路径直接引入，全局可用"></a>一、绝对路径直接引入，全局可用</h2><p>主入口页面 index.html 中用 <code>script</code> 标签引入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./static/jquery-1.12.4.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样，其实就已经可以在项目中使用 jQuery 了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mounted () &#123;</span><br><span class="line">  console.log($)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们来看一下 调试器 截图：<br><img src="http://img.blog.csdn.net/20171213184629873?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3Nkbl95dWRvbmc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>可以看到，我们是可以正常打印出 jQuery 的。<br>由于我的项目开启了 ESLint 检测，所以也会报一个 error ：<code>&#39;$&#39; is not defined</code> 。</p>
<p>我们可以让 ESLint 不检查这一行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mounted () &#123;</span><br><span class="line">  /* eslint-disable */</span><br><span class="line">  console.log($)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>加了 <code>/* eslint-disable */</code> 以后，就不会报那个错了。</p>
<h2 id="二、绝对路径直接引入，配置后，import-引入后再使用"><a href="#二、绝对路径直接引入，配置后，import-引入后再使用" class="headerlink" title="二、绝对路径直接引入，配置后，import 引入后再使用"></a>二、绝对路径直接引入，配置后，import 引入后再使用</h2><p>第一种方法有一个弊端就是：我们每一个使用了 <code>$</code> 的地方，都要再前面加上 <code>/* eslint-disable */</code> ，这显然是不方便的。</p>
<p>于是，我们有了第二种方法</p>
<p>还是先在主入口页面 index.html 中用 <code>script</code> 标签引入：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script src=&quot;./static/jquery-1.12.4.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>然后，我们可以在 webpack 中配置一个 externals</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">externals: &#123;</span><br><span class="line">  &#x27;jquery&#x27;: &#x27;jQuery&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样，我们就可以在每一个组件中用 <code>import</code> 来引用这个 jquery 了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import $ from &#x27;jquery&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log($)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>控制台截图如下：<br><img src="http://img.blog.csdn.net/20171213191210486?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3Nkbl95dWRvbmc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>很好，没有任何问题，我们可以在这个组件中 <strong>随意的 任意的 多次的</strong> 来使用 <code>$</code> 了。</p>
<hr>
<p>OK，咱们已经介绍两种方式了，它们有一个共同点：都需要在主入口页面 index.html 中，用 <code>script</code> 标签来引入 jQuery。</p>
<p>如果你不想在 inde.html 中使用 <code>script</code> 标签来引入 jQuery 的话，我们还有方法</p>
<hr>
<h2 id="三、webpack-中配置-alias，import-引入后再使用"><a href="#三、webpack-中配置-alias，import-引入后再使用" class="headerlink" title="三、webpack 中配置 alias，import 引入后再使用"></a>三、webpack 中配置 alias，import 引入后再使用</h2><p>我们不需要在主入口文件 index.html 中引入 jQuery 。我们只需要在 webpack 的配置文件中，在 resolve 中为 jQuery 添加一个 alias 。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  extensions: [&#x27;.js&#x27;, &#x27;.vue&#x27;, &#x27;.json&#x27;],</span><br><span class="line">  alias: &#123;</span><br><span class="line">    &#x27;@&#x27;: resolve(&#x27;src&#x27;),</span><br><span class="line">    &#x27;jquery&#x27;: resolve(&#x27;static/jquery-1.12.4.js&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么，我们就可以在任意组件中，通过 import 的方式来使用 jquery 了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import $ from &#x27;jquery&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log($)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>控制台截图：<br><img src="http://img.blog.csdn.net/20171213233605026?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3Nkbl95dWRvbmc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>OK，也是没有任何问题的</p>
<h2 id="四、webpack-中配置-plugins，无需-import-全局可用"><a href="#四、webpack-中配置-plugins，无需-import-全局可用" class="headerlink" title="四、webpack 中配置 plugins，无需 import 全局可用"></a>四、webpack 中配置 plugins，无需 import 全局可用</h2><p>在第三种的基础上，如果我们增加一个 plugins 的配置，那么，我们在使用的时候，无需 <code>import $ from &#39;jquery&#39;</code> 也可以。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  extensions: [&#x27;.js&#x27;, &#x27;.vue&#x27;, &#x27;.json&#x27;],</span><br><span class="line">  alias: &#123;</span><br><span class="line">    &#x27;@&#x27;: resolve(&#x27;src&#x27;),</span><br><span class="line">    &#x27;jquery&#x27;: resolve(&#x27;static/jquery-1.12.4.js&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">  new webpack.ProvidePlugin(&#123;</span><br><span class="line">    $: &#x27;jquery&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>这个时候，我们在项目中，就可以直接使用 <code>$</code> 了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;app&#x27;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    /* eslint-disable*/</span><br><span class="line">    console.log($)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>同理，由于我的项目使用了 ESLint ，所以需要在使用了 <code>$</code> 的代码前添加 <code>/* eslint-disable*/</code> 来去掉 ESLint 的检查，否则会报错：<code>&#39;$&#39; is not define</code></p>
<p><img src="http://img.blog.csdn.net/20171213234823000?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3Nkbl95dWRvbmc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>第一种和第四种方式使用的时候，不需要 import ，全局直接可用；第二种和第三种方式使用的时候，需要先 import 。</p>
<p>1、现在的项目一般都会加入 ESLint 代码检查，所以推荐使用第二种或者第三种方式（这两种方式在使用的时候都需要先 import 引入，然后再使用，也就不存在 ESLint 报 not defined 的问题）</p>
<p>2、如果你的项目没有使用 ESLint ，第一种和第四种也是不错的选择。</p>
<p>3、如果你使用了 ESLint，仍然想使用第一种或者第四种方式，那么，我们就得在 ESLint 的配置文件中添加规则：<code>&#39;no-undef&#39;: 0</code></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>指令</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="指令（Directive）"><a href="#指令（Directive）" class="headerlink" title="指令（Directive）"></a>指令（Directive）</h2><h3 id="是特殊的带有-v-前缀的特性"><a href="#是特殊的带有-v-前缀的特性" class="headerlink" title="是特殊的带有 v- 前缀的特性"></a>是特殊的带有 v- 前缀的特性</h3><p><img src="../imgs/image-20201019172856880.png" alt="image"></p>
<h3 id="当表达式的值改变时，将某些行为应用到-DOM-上"><a href="#当表达式的值改变时，将某些行为应用到-DOM-上" class="headerlink" title="当表达式的值改变时，将某些行为应用到 DOM 上"></a>当表达式的值改变时，将某些行为应用到 DOM 上</h3><h3 id="Vue-js-指令的书写规范"><a href="#Vue-js-指令的书写规范" class="headerlink" title="Vue.js 指令的书写规范"></a>Vue.js 指令的书写规范</h3><p>书写位置：任意 HTML 元素的开始标签内</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>现在你看到我了<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：一个开始标签内可写入多个指令，多个指令间使用空格分隔</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active:timeflag&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;queryAll(&#x27;time&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>全部&lt;/a</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>v-if：根据表达式的真假来插入和删除元素<br>v-else：v-else 指令为 v-if 添加一个“else 块”<br>v-show：控制切换一个元素的显示和隐藏<br>v-on：为 HTML 元素绑定事件监听<br>v-model：将用户的输入同步到视图上<br>v-bind：绑定 HTML 元素的属性<br>v-for ：遍历 data 中的数据，并在页面进行数据展示</p>
<h2 id="v-if-指令"><a href="#v-if-指令" class="headerlink" title="v-if 指令"></a>v-if 指令</h2><p>被称为条件渲染指令，它根据表达式的真假来插入和删除元素</p>
<p>v-if = 表达式</p>
<ul>
<li>根据表达式结果的真假，确定是否显示当前元素</li>
<li>true 表示显示该元素；false 表示隐藏该元素</li>
</ul>
<p>语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>表达式的值为真，我就能显示<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-else-指令"><a href="#v-else-指令" class="headerlink" title="v-else 指令"></a>v-else 指令</h2><p>v-else 指令为 v-if 添加一个“else 块”，v-else 元素必须立即跟在 v-if 元素的后面，否则不能被识别</p>
<p>v-else 后面不需要表达式</p>
<ul>
<li>v-if 为 true，后面的 v-else 不会渲染到 HTML</li>
<li>v-if 为 false，后面的 v-else 才会渲染到 HTML</li>
</ul>
<p>语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>表达式的值为真，我就能显示<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>v-if不成立的时候，我就显示出来了<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-show-指令"><a href="#v-show-指令" class="headerlink" title="v-show 指令"></a>v-show 指令</h2><p>控制切换一个元素的显示和隐藏</p>
<p>v-show = ‘表达式’</p>
<p>根据表达式结果的真假，确定是否显示当前元素</p>
<ul>
<li>true 表示显示该元素；false 表示隐藏该元素</li>
</ul>
<p>语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-if-与-v-show-区别"><a href="#v-if-与-v-show-区别" class="headerlink" title="v-if 与 v-show 区别"></a>v-if 与 v-show 区别</h2><p>v-show 指令的元素始终会被渲染到 HTML</p>
<ul>
<li>它只是简单地为元素设置 CSS 的 style 属性。当不满足条件的元素被设置 style=”display:none”样式</li>
</ul>
<p>v-if 指令满足条件是，会渲染到 html 中，不满足条件时，是不会渲染到 html 中的</p>
<p><img src="../public%5Cimage-20201019173510600.png" alt="image-20201019173510600"></p>
<h2 id="v-if-与-v-show-应用场景"><a href="#v-if-与-v-show-应用场景" class="headerlink" title="v-if 与 v-show 应用场景"></a>v-if 与 v-show 应用场景</h2><p>v-if 指令有更高的切换消耗</p>
<ul>
<li>v-if 当条件成立的时候会将元素加上，不成立的时候，就会移除 dom，并且内部的指令不会执行</li>
</ul>
<p>v-show 指令有更高的初始渲染消耗</p>
<ul>
<li>v-show 只是简单的隐藏和显示</li>
</ul>
<p>如果需要频繁切换使用 v‐show 较好，如果在运行时条件不大可能改变 使用 v‐if 较好</p>
<h2 id="v-on-指令"><a href="#v-on-指令" class="headerlink" title="v-on 指令"></a>v-on 指令</h2><p>为 HTML 元素绑定事件监听</p>
<p>v-on：事件名称 =‘函数名称()’</p>
<ul>
<li>表达式可以是一个方法的名字或一个内联语句</li>
</ul>
<p>简写语法：@事件名称 =‘函数名称()’</p>
<ul>
<li>注：函数定义在 methods 配置项中</li>
</ul>
<p>语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;fn()&quot;</span>&gt;</span>toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">//v-on: 可以简写成 @</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fn()&quot;</span>&gt;</span>toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-on-指令-1"><a href="#v-on-指令-1" class="headerlink" title="v-on 指令"></a>v-on 指令</h2><p>v-on 后面可以增加修饰符</p>
<ul>
<li>.stop：调用 event.stopPropagation()<ul>
<li>阻止冒泡</li>
</ul>
</li>
<li>.prevent : 调用 event.preventDefault()<ul>
<li>阻止事件</li>
</ul>
</li>
<li>.self : 只当时间是从侦听器绑定的元素本身触发时才触发回调</li>
<li>.{keycode} : 只在指定键上触发回调</li>
</ul>
<h2 id="v-model-指令"><a href="#v-model-指令" class="headerlink" title="v-model 指令"></a>v-model 指令</h2><p>能轻松实现表单输入和应用状态之间的双向绑定</p>
<p>双向绑定</p>
<ul>
<li> 指的是我们在 vue 实例中的 data 与其渲染的 dom 元素上的内容保持一致，两者无论谁被改变，另一方也会相应的更新为相同的数据</li>
</ul>
<p>语法</p>
<ul>
<li>v-model = 变量</li>
<li>v-model 指令只能用在<input>, <select>,<textarea>等这些表单元素上</li>
</ul>
<h2 id="v-bind-指令"><a href="#v-bind-指令" class="headerlink" title="v-bind 指令"></a>v-bind 指令</h2><p>v-bind 可以在其名称后面带一个参数，参数通常是 HTML 元素的特性（attribute），v-bind 是动态绑定指令，默认情况下自带属性的值是固定的，为了能够动态的给这些属性添加值可以使用 v-bind 指令</p>
<p>v-bind:属性名 = ‘表达式’</p>
<p>简写形式：v-bind 可以省略，直接书写为冒号 <code>:</code>属性名 = ‘表达式’</p>
<p>语法</p>
<ul>
<li><pre><code class="html">&lt;img v-bind:src=&quot;imageSrc&quot; /&gt; 等价于 &lt;img :src=&quot;imageSrc&quot; /&gt; //绑定一个属性
//绑定多个属性
&lt;div v-bind:class=&quot;&#123;&#39;textColor&#39;:isColor, &#39;textSize&#39;:isSize&#125;&quot;&gt;
  多个样式的绑定
&lt;/div&gt;
</code></pre>
</li>
</ul>
<h2 id="v-for-指令"><a href="#v-for-指令" class="headerlink" title="v-for 指令"></a>v-for 指令</h2><p>遍历 data 中的数据，并在页面进行数据展示</p>
<p>v-for = ‘(item, index) in items’</p>
<ul>
<li>item 表示每次遍历得到的元素</li>
<li>index 表示 item 的索引，可选参数</li>
<li>items 表示数组或者对象</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>日期处理</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/%E6%97%A5%E6%9C%9F%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">日期数据：<span class="number">1605233578</span></span><br></pre></td></tr></table></figure>

<h3 id="全局中使用过滤器"><a href="#全局中使用过滤器" class="headerlink" title="全局中使用过滤器"></a>全局中使用过滤器</h3><p>日期格式化</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.filter(<span class="string">&#x27;format&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(v)</span><br><span class="line">  <span class="keyword">let</span> y = date.getFullYear()</span><br><span class="line">  <span class="keyword">let</span> M = (date.getMonth() + <span class="number">1</span> + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> d = (date.getDate() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> h = (date.getHours() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> m = (date.getMinutes() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> s = (date.getSeconds() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;y&#125;</span>-<span class="subst">$&#123;M&#125;</span>-<span class="subst">$&#123;d&#125;</span> <span class="subst">$&#123;h&#125;</span>:<span class="subst">$&#123;m&#125;</span>:<span class="subst">$&#123;s&#125;</span>`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用过滤器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template v-slot=&quot;scope&quot;&gt;</span><br><span class="line">  &#123;&#123; scope.row.create_time | format &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="函数调用形式"><a href="#函数调用形式" class="headerlink" title="函数调用形式"></a>函数调用形式</h3><p>方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">dateFormate</span>(<span class="params">v</span>)</span> &#123;</span><br><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(v)</span><br><span class="line"><span class="keyword">let</span> y = date.getFullYear()</span><br><span class="line"><span class="keyword">let</span> M = (date.getMonth() + <span class="number">1</span> + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> d = (date.getDate() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> h = (date.getHours() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> m = (date.getMinutes() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> s = (date.getSeconds() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;y&#125;</span>-<span class="subst">$&#123;M&#125;</span>-<span class="subst">$&#123;d&#125;</span> <span class="subst">$&#123;h&#125;</span>:<span class="subst">$&#123;m&#125;</span>:<span class="subst">$&#123;s&#125;</span>`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//修改元素的日期格式</span></span><br><span class="line"><span class="built_in">this</span>.goodsList.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  item.add_time = <span class="built_in">this</span>.dateFormate(item.add_time)</span><br><span class="line">  item.upd_time = <span class="built_in">this</span>.dateFormate(item.upd_time)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>父子组件传值</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/</url>
    <content><![CDATA[<h2 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>vue 的组件传值分为三种方式：父传子、子传父、非父子组件传值</p>
<p>引用官网的一句话：父子组件的关系可以总结为 prop 向下传递，事件向上传递</p>
<p>父组件通过 prop 给子组件下发数据，子组件通过事件给父组件发送消息，如下图所示：</p>
<p><img src="https://img-blog.csdn.net/20181022105304290?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpeXVua3VuODg4/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p><strong>下面我们就开始用代码（**一言不合就上代码**）详细的介绍 vue 组件传值的三种方式</strong></p>
<h3 id="1、父传子"><a href="#1、父传子" class="headerlink" title="1、父传子"></a><strong>1、父传子</strong></h3><p><strong>子组件的代码：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">msg</span>: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&lt; style scoped&gt; #container &#123; color: red; margin - top: 50 px; &#125; &lt; /style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>父组件的代码：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;dataChange&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:msg</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">&#x27;@/components/Child&#x27;</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">text</span>: <span class="string">&#x27;父组件的值&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">dataChange</span>(<span class="params">data</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.msg = data</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">      Child,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>**父传子的实现方式就是通过 props 属性，子组件通过 props 属性接收从父组件传过来的值，而父组件传值的时候使用 v-bind 将子组件中预留的变量名绑定为 data 里面的数据即可**</strong></p>
<h3 id="2、子传父"><a href="#2、子传父" class="headerlink" title="2、子传父"></a><strong>2、子传父</strong></h3><p><strong>子组件代码：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;setData&quot;</span>&gt;</span>传递到父组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">msg</span>: <span class="string">&#x27;传递给父组件的值&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">setData</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;getData&#x27;</span>, <span class="built_in">this</span>.msg)</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>父组件代码：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Child</span> @<span class="attr">getData</span>=<span class="string">&quot;getData&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">&#x27;@/components/Child&#x27;</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">msg</span>: <span class="string">&#x27;父组件默认值&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">getData</span>(<span class="params">data</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.msg = data</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">      Child,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>子传父的实现方式就是用了 this.$emit 来遍历 getData 事件，首先用按钮来触发 setData 事件，在 setData 中 用 this.$emit 来遍历 getData 事件，最后返回 this.msg</strong></p>
<p><strong>总结：</strong></p>
<ul>
<li>子组件中需要以某种方式例如点击事件的方法来触发一个自定义事件</li>
<li>将需要传的值作为$emit 的第二个参数，该值将作为实参传给响应自定义事件的方法</li>
<li>在父组件中注册子组件并在子组件标签上绑定对自定义事件的监听</li>
</ul>
<h3 id="3、非父子"><a href="#3、非父子" class="headerlink" title="3、非父子"></a>3、非父子</h3><p><strong>vue 中没有直接子对子传参的方法，建议将需要传递数据的子组件，都合并为一个组件</strong></p>
<p><strong>如果一定需要子对子传参，可以先从传到父组件，再传到子组件（相当于一个公共 bus 文件）</strong></p>
<p><strong>为了便于开发，vue 推出了一个状态管理工具 vuex，可以很方便实现组件之间的参数传递</strong></p>
<h3 id="4、语法糖"><a href="#4、语法糖" class="headerlink" title="4、语法糖"></a>4、语法糖</h3><p>真正的双向绑定是有很高的代价的，因为这违反了数据从父组件流向子组件的规则。所以在 vue2.0 中，.sync 被去掉了。<br>在 vue2.30 中，.sync 作为语法糖被添加进来，我们可以将.sync 视为是子组件通过自定义事件向父组件传递信息的一种缩写。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;text-document</span><br><span class="line">  v-bind:title=&quot;doc.title&quot;</span><br><span class="line">  v-on:update:title=&quot;doc.title = $event&quot;</span><br><span class="line">&gt;&lt;/text-document&gt;</span><br></pre></td></tr></table></figure>

<p>缩写为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;text-document :title.sync=&quot;doc.title&quot;&gt;&lt;/text-document&gt;</span><br></pre></td></tr></table></figure>

<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>在子组件中调用的时候</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.$emit(&#x27;update:title&#x27;, value)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>生命周期</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="center">生命周期函数</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">beforeCreate（创建前）</td>
<td align="center">组件实例刚被创建，组件属性计算之前，比如 data 属性等等</td>
</tr>
<tr>
<td align="center">created（创建后）</td>
<td align="center">组件实例刚创建完成，属性已经绑定，当时 DOM 还未生成，$le 属性还不存在</td>
</tr>
<tr>
<td align="center">beforeMount(载入前)</td>
<td align="center">模板编译、挂载之前</td>
</tr>
<tr>
<td align="center">mounted（载入后）</td>
<td align="center">模板编译、挂载之后</td>
</tr>
<tr>
<td align="center">beforeUpdate（更新前）</td>
<td align="center">组件更新之前</td>
</tr>
<tr>
<td align="center">updated（更新后）</td>
<td align="center">组件更新之后</td>
</tr>
<tr>
<td align="center">beforeDestroy（销毁前）</td>
<td align="center">组件销毁前调用</td>
</tr>
<tr>
<td align="center">destroyed（销毁后）</td>
<td align="center">destroyed（销毁后）</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>解决服务端跨域</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/%E8%A7%A3%E5%86%B3%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/kuayu.png" alt="image"></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//配置webpack打包时的参数</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//所有资源使用相对路径</span></span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">  <span class="comment">//打包后资源存放的目录</span></span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">  <span class="comment">//设置所有标签属性有双引号</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    config.plugin(<span class="string">&#x27;html&#x27;</span>).tap(<span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">      args[<span class="number">0</span>].minify = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">return</span> args</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">    <span class="attr">https</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//以上的ip和端口是我们本机的</span></span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="comment">//配置跨域的请求路径 http://localhost:8080/api</span></span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">//需要跨域的地址</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;https://www.kuaidi100.com/autonumber/autoComNum&#x27;</span>,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">//允许跨域</span></span><br><span class="line">        <span class="attr">changOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="comment">//请求的时候使用这个api就可以</span></span><br><span class="line">          <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/kuaidi&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;https://www.kuaidi100.com/query&#x27;</span>,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">changOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;^/kuaidi&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue.config</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E5%A4%A7%E5%89%8D%E7%AB%AF/Vue.config/</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;/&#x27;</span>, <span class="comment">// 项目部署的基础路径 我们默认假设你的应用将会部署在域名的根部</span></span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;dist&#x27;</span>, <span class="comment">// 构建好的文件的输出地址</span></span><br><span class="line">  <span class="attr">assetsDir</span>: <span class="string">&#x27;static&#x27;</span>, <span class="comment">// 静态资源打包的地址</span></span><br><span class="line">  <span class="attr">lintOnSave</span>: process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>, <span class="comment">// 是否在保存时使用‘eslint-loader’进行检查 // 有效值: true | false | &#x27;error&#x27; ,设置为error时，检查出的错误会触发编译失败</span></span><br><span class="line">  <span class="attr">productionSourceMap</span>: <span class="literal">false</span>, <span class="comment">// 是否在构建生产包时生成 sourceMap 文件，false将提高构建速度  映射文件 打包时使用</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// 设置跨域</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;9527&#x27;</span>, <span class="comment">// 端口号</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 配置自动启动浏览器</span></span><br><span class="line">    <span class="attr">overlay</span>: &#123;</span><br><span class="line">      <span class="attr">warnings</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">errors</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="comment">// 代理服务器设置</span></span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 原理理解： 假设我的本地地址为: http://192.168.163.100:9527 (即http://localhost:9527)</span></span><br><span class="line"><span class="comment">       *            服务器地址为: http://11.12.11.205:9301;</span></span><br><span class="line"><span class="comment">       *            该服务器上的接口为：/api/xxx/xxx</span></span><br><span class="line"><span class="comment">       *            如果我通过axios将接口直接写成</span></span><br><span class="line"><span class="comment">       *            axios.get(http://11.12.11.205:9301/api/xxx/xxx)</span></span><br><span class="line"><span class="comment">       *            那么这个时候从http://192.168.163.100:9527 到 http://11.12.11.205:9301/api/xxx/xxx</span></span><br><span class="line"><span class="comment">       *            是存在跨域限制的。</span></span><br><span class="line"><span class="comment">       *</span></span><br><span class="line"><span class="comment">       *            所以，项目中在设置axios时是这样做的</span></span><br><span class="line"><span class="comment">       *            1. 设置了一个baseURL 为process.env.VUE_APP_BASE_API, 即&#x27;/api&#x27;</span></span><br><span class="line"><span class="comment">       *            2. 将axios的接口写成 baseURL+ 接口路径，即 /api +/api/xxx/xxx  (axios会在url前面加上配置的baseURL)</span></span><br><span class="line"><span class="comment">       *            3.请求的时候 浏览器上显示的是http://localhost:9527/api/api/xxx/xxx</span></span><br><span class="line"><span class="comment">       *            4.因为有config里面的代理设置，即遇到&#x27;/api&#x27;，将它前面的地址代理到http://11.12.11.205:9301，并且允许跨域</span></span><br><span class="line"><span class="comment">       *            5. 并且将&#x27;/api&#x27;重写为&#x27;&#x27;，即http://localhost:9527 变为了http://11.12.11.205:9301，&#x27;/api&#x27;变为了&#x27;&#x27;</span></span><br><span class="line"><span class="comment">       *            6. 那么现在请求到的地址变为http://11.12.11.205:9301/api/xxx/xxx</span></span><br><span class="line"><span class="comment">       *            7. 即成功代理给我们要访问的服务器，并解决了跨域问题</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="comment">// process.env.VUE_APP_BASE_API      &#x27;/api&#x27;</span></span><br><span class="line">      [process.env.VUE_APP_BASE_API]: &#123;</span><br><span class="line">        <span class="comment">// 当遇到&#x27;/api&#x27;的时候</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">`http://11.12.11.205:9301`</span>, <span class="comment">// 需要将目前的地址代理至target</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          [<span class="string">&#x27;^&#x27;</span> + process.env.VUE_APP_BASE_API]: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 将&#x27;/api&#x27; 重写为&#x27;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      [process.env.VUE_APP_BASE_FILES]: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">`http://11.12.11.205:9300`</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          [<span class="string">&#x27;^&#x27;</span> + process.env.VUE_APP_BASE_FILES]: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>eslint配置</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E5%A4%A7%E5%89%8D%E7%AB%AF/eslint%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>如果想保留 eslint 的语法检测，那就把不符合自己习惯的规则去掉吧。</p>
<p>配置文件在项目根目录里，文件名以 <code>.eslintrc.*</code> 为名。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="comment">//设置&quot;script&quot;（默认）或&quot;module&quot;如果你的代码是在ECMAScript中的模块。</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style</span></span><br><span class="line">  <span class="attr">extends</span>: <span class="string">&#x27;standard&#x27;</span>,</span><br><span class="line">  <span class="comment">// required to lint *.vue files</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;html&#x27;</span>],</span><br><span class="line">  <span class="comment">// add your custom rules here</span></span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="comment">// allow paren-less arrow functions</span></span><br><span class="line">    <span class="string">&#x27;arrow-parens&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// allow async-await</span></span><br><span class="line">    <span class="string">&#x27;generator-star-spacing&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// allow debugger during development</span></span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="number">2</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;no-unused-vars&#x27;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 允许声明未使用变量</span></span><br><span class="line">        <span class="attr">vars</span>: <span class="string">&#x27;local&#x27;</span>,</span><br><span class="line">        <span class="comment">// 参数不检查</span></span><br><span class="line">        <span class="attr">args</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 关闭语句强制分号结尾</span></span><br><span class="line">    <span class="attr">semi</span>: [<span class="number">0</span>],</span><br><span class="line">    <span class="comment">//空行最多不能超过100行</span></span><br><span class="line">    <span class="string">&#x27;no-multiple-empty-lines&#x27;</span>: [<span class="number">0</span>, &#123; <span class="attr">max</span>: <span class="number">100</span> &#125;],</span><br><span class="line">    <span class="comment">//关闭禁止混用tab和空格</span></span><br><span class="line">    <span class="string">&#x27;no-mixed-spaces-and-tabs&#x27;</span>: [<span class="number">0</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中 <code>rules</code> 就是配置规则的</p>
<h2 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rules: &#123;</span><br><span class="line">    <span class="string">&quot;规则名&quot;</span>: [规则值, 规则配置]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>规则值：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;off&quot;</span>或者<span class="number">0</span>    <span class="comment">//关闭规则关闭</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;warn&quot;</span>或者<span class="number">1</span>    <span class="comment">//在打开的规则作为警告（不影响退出代码）</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;error&quot;</span>或者<span class="number">2</span>    <span class="comment">//把规则作为一个错误（退出代码触发时为1）</span></span><br></pre></td></tr></table></figure>

<p>更多详细的说明请移步 <a href="http://eslint.org/docs/user-guide/configuring">configuring</a></p>
<h2 id="常见规则列表"><a href="#常见规则列表" class="headerlink" title="常见规则列表"></a>常见规则列表</h2><p>以下规则列表来自网络</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;no-alert&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用alert confirm prompt</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-array-constructor&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用数组构造器</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-bitwise&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用按位运算符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-caller&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止使用arguments.caller或arguments.callee</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-catch-shadow&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止catch子句参数与外部作用域变量同名</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-class-assign&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止给类赋值</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-cond-assign&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止在条件表达式中使用赋值语句</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-console&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用console</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-const-assign&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止修改const声明的变量</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-constant-condition&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止在条件中使用常量表达式 if(true) if(1)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-continue&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用continue</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-control-regex&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止在正则表达式中使用控制字符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-debugger&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用debugger</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-delete-var&quot;</span>: <span class="number">2</span>,<span class="comment">//不能对var声明的变量使用delete操作符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-div-regex&quot;</span>: <span class="number">1</span>,<span class="comment">//不能使用看起来像除法的正则表达式/=foo/</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-dupe-keys&quot;</span>: <span class="number">2</span>,<span class="comment">//在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-dupe-args&quot;</span>: <span class="number">2</span>,<span class="comment">//函数参数不能重复</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-duplicate-case&quot;</span>: <span class="number">2</span>,<span class="comment">//switch中的case标签不能重复</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-else-return&quot;</span>: <span class="number">2</span>,<span class="comment">//如果if语句里面有return,后面不能跟else语句</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-empty&quot;</span>: <span class="number">2</span>,<span class="comment">//块语句中的内容不能为空</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-empty-character-class&quot;</span>: <span class="number">2</span>,<span class="comment">//正则表达式中的[]内容不能为空</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-empty-label&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用空label</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-eq-null&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止对null使用==或!=运算符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-eval&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止使用eval</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-ex-assign&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止给catch语句中的异常参数赋值</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-extend-native&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止扩展native对象</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-extra-bind&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的函数绑定</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-extra-boolean-cast&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的bool转换</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-extra-parens&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止非必要的括号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-extra-semi&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止多余的冒号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-fallthrough&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止switch穿透</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-floating-decimal&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止省略浮点数中的0 .5 3.</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-func-assign&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止重复的函数声明</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-implicit-coercion&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止隐式转换</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-implied-eval&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用隐式eval</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-inline-comments&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止行内备注</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-inner-declarations&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;functions&quot;</span>],<span class="comment">//禁止在块语句中使用声明（变量或函数）</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-invalid-regexp&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止无效的正则表达式</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-invalid-this&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止无效的this，只能用在构造器，类，对象字面量</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-irregular-whitespace&quot;</span>: <span class="number">2</span>,<span class="comment">//不能有不规则的空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-iterator&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用__iterator__ 属性</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-label-var&quot;</span>: <span class="number">2</span>,<span class="comment">//label名不能与var声明的变量名相同</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-labels&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止标签声明</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-lone-blocks&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的嵌套块</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-lonely-if&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止else语句内只有if语句</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-loop-func&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-mixed-requires&quot;</span>: [<span class="number">0</span>, <span class="literal">false</span>],<span class="comment">//声明时不能混用声明类型</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-mixed-spaces-and-tabs&quot;</span>: [<span class="number">2</span>, <span class="literal">false</span>],<span class="comment">//禁止混用tab和空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;linebreak-style&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;windows&quot;</span>],<span class="comment">//换行风格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-multi-spaces&quot;</span>: <span class="number">1</span>,<span class="comment">//不能用多余的空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-multi-str&quot;</span>: <span class="number">2</span>,<span class="comment">//字符串不能用\换行</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-multiple-empty-lines&quot;</span>: [<span class="number">1</span>, &#123;<span class="string">&quot;max&quot;</span>: <span class="number">2</span>&#125;],<span class="comment">//空行最多不能超过2行</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-native-reassign&quot;</span>: <span class="number">2</span>,<span class="comment">//不能重写native对象</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-negated-in-lhs&quot;</span>: <span class="number">2</span>,<span class="comment">//in 操作符的左边不能有!</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-nested-ternary&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用嵌套的三目运算</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-new&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止在使用new构造一个实例后不赋值</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-new-func&quot;</span>: <span class="number">1</span>,<span class="comment">//禁止使用new Function</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-new-object&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用new Object()</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-new-require&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用new require</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-new-wrappers&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用new创建包装实例，new String new Boolean new Number</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-obj-calls&quot;</span>: <span class="number">2</span>,<span class="comment">//不能调用内置的全局对象，比如Math() JSON()</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-octal&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用八进制数字</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-octal-escape&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用八进制转义序列</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-param-reassign&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止给参数重新赋值</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-path-concat&quot;</span>: <span class="number">0</span>,<span class="comment">//node中不能使用__dirname或__filename做路径拼接</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-plusplus&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用++，--</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-process-env&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用process.env</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-process-exit&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用process.exit()</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-proto&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止使用__proto__属性</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-redeclare&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止重复声明变量</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-regex-spaces&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止在正则表达式字面量中使用多个空格 /foo bar/</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-restricted-modules&quot;</span>: <span class="number">0</span>,<span class="comment">//如果禁用了指定模块，使用就会报错</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-return-assign&quot;</span>: <span class="number">1</span>,<span class="comment">//return 语句中不能有赋值表达式</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-script-url&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用javascript:void(0)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-self-compare&quot;</span>: <span class="number">2</span>,<span class="comment">//不能比较自身</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-sequences&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用逗号运算符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-shadow&quot;</span>: <span class="number">2</span>,<span class="comment">//外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-shadow-restricted-names&quot;</span>: <span class="number">2</span>,<span class="comment">//严格模式中规定的限制标识符不能作为声明时的变量名使用</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-spaced-func&quot;</span>: <span class="number">2</span>,<span class="comment">//函数调用时 函数名与()之间不能有空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-sparse-arrays&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止稀疏数组， [1,,2]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-sync&quot;</span>: <span class="number">0</span>,<span class="comment">//nodejs 禁止同步方法</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-ternary&quot;</span>: <span class="number">0</span>,<span class="comment">//禁止使用三目运算符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-trailing-spaces&quot;</span>: <span class="number">1</span>,<span class="comment">//一行结束后面不要有空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-this-before-super&quot;</span>: <span class="number">0</span>,<span class="comment">//在调用super()之前不能使用this或super</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-throw-literal&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止抛出字面量错误 throw &quot;error&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-undef&quot;</span>: <span class="number">1</span>,<span class="comment">//不能有未定义的变量</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-undef-init&quot;</span>: <span class="number">2</span>,<span class="comment">//变量初始化时不能直接给它赋值为undefined</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-undefined&quot;</span>: <span class="number">2</span>,<span class="comment">//不能使用undefined</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-unexpected-multiline&quot;</span>: <span class="number">2</span>,<span class="comment">//避免多行表达式</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-underscore-dangle&quot;</span>: <span class="number">1</span>,<span class="comment">//标识符不能以_开头或结尾</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-unneeded-ternary&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的嵌套 var isYes = answer === 1 ? true : false;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-unreachable&quot;</span>: <span class="number">2</span>,<span class="comment">//不能有无法执行的代码</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-unused-expressions&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止无用的表达式</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-unused-vars&quot;</span>: [<span class="number">2</span>, &#123;<span class="string">&quot;vars&quot;</span>: <span class="string">&quot;all&quot;</span>, <span class="string">&quot;args&quot;</span>: <span class="string">&quot;after-used&quot;</span>&#125;],<span class="comment">//不能有声明后未被使用的变量或参数</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-use-before-define&quot;</span>: <span class="number">2</span>,<span class="comment">//未定义前不能使用</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-useless-call&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的call和apply</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-void&quot;</span>: <span class="number">2</span>,<span class="comment">//禁用void操作符</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-var&quot;</span>: <span class="number">0</span>,<span class="comment">//禁用var，用let和const代替</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-warning-comments&quot;</span>: [<span class="number">1</span>, &#123; <span class="string">&quot;terms&quot;</span>: [<span class="string">&quot;todo&quot;</span>, <span class="string">&quot;fixme&quot;</span>, <span class="string">&quot;xxx&quot;</span>], <span class="string">&quot;location&quot;</span>: <span class="string">&quot;start&quot;</span> &#125;],<span class="comment">//不能有警告备注</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;no-with&quot;</span>: <span class="number">2</span>,<span class="comment">//禁用with</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;array-bracket-spacing&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],<span class="comment">//是否允许非空数组里面有多余的空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;arrow-parens&quot;</span>: <span class="number">0</span>,<span class="comment">//箭头函数用小括号括起来</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;arrow-spacing&quot;</span>: <span class="number">0</span>,<span class="comment">//=&gt;的前/后括号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;accessor-pairs&quot;</span>: <span class="number">0</span>,<span class="comment">//在对象中使用getter/setter</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;block-scoped-var&quot;</span>: <span class="number">0</span>,<span class="comment">//块语句中使用var</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;brace-style&quot;</span>: [<span class="number">1</span>, <span class="string">&quot;1tbs&quot;</span>],<span class="comment">//大括号风格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;callback-return&quot;</span>: <span class="number">1</span>,<span class="comment">//避免多次调用回调什么的</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;camelcase&quot;</span>: <span class="number">2</span>,<span class="comment">//强制驼峰法命名</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;comma-dangle&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],<span class="comment">//对象字面量项尾不能有逗号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;comma-spacing&quot;</span>: <span class="number">0</span>,<span class="comment">//逗号前后的空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;comma-style&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;last&quot;</span>],<span class="comment">//逗号风格，换行时在行首还是行尾</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;complexity&quot;</span>: [<span class="number">0</span>, <span class="number">11</span>],<span class="comment">//循环复杂度</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;computed-property-spacing&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;never&quot;</span>],<span class="comment">//是否允许计算后的键名什么的</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;consistent-return&quot;</span>: <span class="number">0</span>,<span class="comment">//return 后面是否允许省略</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;consistent-this&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;that&quot;</span>],<span class="comment">//this别名</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;constructor-super&quot;</span>: <span class="number">0</span>,<span class="comment">//非派生类不能调用super，派生类必须调用super</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;curly&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;all&quot;</span>],<span class="comment">//必须使用 if()&#123;&#125; 中的&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;default-case&quot;</span>: <span class="number">2</span>,<span class="comment">//switch语句最后必须有default</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;dot-location&quot;</span>: <span class="number">0</span>,<span class="comment">//对象访问符的位置，换行的时候在行首还是行尾</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;dot-notation&quot;</span>: [<span class="number">0</span>, &#123; <span class="string">&quot;allowKeywords&quot;</span>: <span class="literal">true</span> &#125;],<span class="comment">//避免不必要的方括号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;eol-last&quot;</span>: <span class="number">0</span>,<span class="comment">//文件以单一的换行符结束</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;eqeqeq&quot;</span>: <span class="number">2</span>,<span class="comment">//必须使用全等</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;func-names&quot;</span>: <span class="number">0</span>,<span class="comment">//函数表达式必须有名字</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;func-style&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;declaration&quot;</span>],<span class="comment">//函数风格，规定只能使用函数声明/函数表达式</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;generator-star-spacing&quot;</span>: <span class="number">0</span>,<span class="comment">//生成器函数*的前后空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;guard-for-in&quot;</span>: <span class="number">0</span>,<span class="comment">//for in循环要用if语句过滤</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;handle-callback-err&quot;</span>: <span class="number">0</span>,<span class="comment">//nodejs 处理错误</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;id-length&quot;</span>: <span class="number">0</span>,<span class="comment">//变量名长度</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;indent&quot;</span>: [<span class="number">2</span>, <span class="number">4</span>],<span class="comment">//缩进风格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;init-declarations&quot;</span>: <span class="number">0</span>,<span class="comment">//声明时必须赋初值</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;key-spacing&quot;</span>: [<span class="number">0</span>, &#123; <span class="string">&quot;beforeColon&quot;</span>: <span class="literal">false</span>, <span class="string">&quot;afterColon&quot;</span>: <span class="literal">true</span> &#125;],<span class="comment">//对象字面量中冒号的前后空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;lines-around-comment&quot;</span>: <span class="number">0</span>,<span class="comment">//行前/行后备注</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;max-depth&quot;</span>: [<span class="number">0</span>, <span class="number">4</span>],<span class="comment">//嵌套块深度</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;max-len&quot;</span>: [<span class="number">0</span>, <span class="number">80</span>, <span class="number">4</span>],<span class="comment">//字符串最大长度</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;max-nested-callbacks&quot;</span>: [<span class="number">0</span>, <span class="number">2</span>],<span class="comment">//回调嵌套深度</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;max-params&quot;</span>: [<span class="number">0</span>, <span class="number">3</span>],<span class="comment">//函数最多只能有3个参数</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;max-statements&quot;</span>: [<span class="number">0</span>, <span class="number">10</span>],<span class="comment">//函数内最多有几个声明</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;new-cap&quot;</span>: <span class="number">2</span>,<span class="comment">//函数名首行大写必须使用new方式调用，首行小写必须用不带new方式调用</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;new-parens&quot;</span>: <span class="number">2</span>,<span class="comment">//new时必须加小括号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;newline-after-var&quot;</span>: <span class="number">2</span>,<span class="comment">//变量声明后是否需要空一行</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;object-curly-spacing&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;never&quot;</span>],<span class="comment">//大括号内是否允许不必要的空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;object-shorthand&quot;</span>: <span class="number">0</span>,<span class="comment">//强制对象字面量缩写语法</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;one-var&quot;</span>: <span class="number">1</span>,<span class="comment">//连续声明</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;operator-assignment&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;always&quot;</span>],<span class="comment">//赋值运算符 += -=什么的</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;operator-linebreak&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;after&quot;</span>],<span class="comment">//换行时运算符在行尾还是行首</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;padded-blocks&quot;</span>: <span class="number">0</span>,<span class="comment">//块语句内行首行尾是否要空行</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;prefer-const&quot;</span>: <span class="number">0</span>,<span class="comment">//首选const</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;prefer-spread&quot;</span>: <span class="number">0</span>,<span class="comment">//首选展开运算</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;prefer-reflect&quot;</span>: <span class="number">0</span>,<span class="comment">//首选Reflect的方法</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;quotes&quot;</span>: [<span class="number">1</span>, <span class="string">&quot;single&quot;</span>],<span class="comment">//引号类型 `` &quot;&quot; &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;quote-props&quot;</span>:[<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],<span class="comment">//对象字面量中的属性名是否强制双引号</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;radix&quot;</span>: <span class="number">2</span>,<span class="comment">//parseInt必须指定第二个参数</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;id-match&quot;</span>: <span class="number">0</span>,<span class="comment">//命名检测</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;require-yield&quot;</span>: <span class="number">0</span>,<span class="comment">//生成器函数必须有yield</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;semi&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],<span class="comment">//语句强制分号结尾</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;semi-spacing&quot;</span>: [<span class="number">0</span>, &#123;<span class="string">&quot;before&quot;</span>: <span class="literal">false</span>, <span class="string">&quot;after&quot;</span>: <span class="literal">true</span>&#125;],<span class="comment">//分号前后空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;sort-vars&quot;</span>: <span class="number">0</span>,<span class="comment">//变量声明时排序</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-after-keywords&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;always&quot;</span>],<span class="comment">//关键字后面是否要空一格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-before-blocks&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;always&quot;</span>],<span class="comment">//不以新行开始的块&#123;前面要不要有空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-before-function-paren&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;always&quot;</span>],<span class="comment">//函数定义时括号前面要不要有空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-in-parens&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;never&quot;</span>],<span class="comment">//小括号里面要不要有空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-infix-ops&quot;</span>: <span class="number">0</span>,<span class="comment">//中缀操作符周围要不要有空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-return-throw-case&quot;</span>: <span class="number">2</span>,<span class="comment">//return throw case后面要不要加空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;space-unary-ops&quot;</span>: [<span class="number">0</span>, &#123; <span class="string">&quot;words&quot;</span>: <span class="literal">true</span>, <span class="string">&quot;nonwords&quot;</span>: <span class="literal">false</span> &#125;],<span class="comment">//一元运算符的前/后要不要加空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;spaced-comment&quot;</span>: <span class="number">0</span>,<span class="comment">//注释风格要不要有空格什么的</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;strict&quot;</span>: <span class="number">2</span>,<span class="comment">//使用严格模式</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;use-isnan&quot;</span>: <span class="number">2</span>,<span class="comment">//禁止比较时使用NaN，只能用isNaN()</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;valid-jsdoc&quot;</span>: <span class="number">0</span>,<span class="comment">//jsdoc规则</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;valid-typeof&quot;</span>: <span class="number">2</span>,<span class="comment">//必须使用合法的typeof的值</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;vars-on-top&quot;</span>: <span class="number">2</span>,<span class="comment">//var必须放在作用域顶部</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;wrap-iife&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;inside&quot;</span>],<span class="comment">//立即执行函数表达式的小括号风格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;wrap-regex&quot;</span>: <span class="number">0</span>,<span class="comment">//正则表达式字面量用小括号包起来</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;yoda&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>]<span class="comment">//禁止尤达条件</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>element日期时间控件传参不准确踩坑</title>
    <url>/taiaiac.gitee.io/2021/03/08/%E5%A4%A7%E5%89%8D%E7%AB%AF/element%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E6%8E%A7%E4%BB%B6%E4%BC%A0%E5%8F%82%E4%B8%8D%E5%87%86%E7%A1%AE%E8%B8%A9%E5%9D%91/</url>
    <content><![CDATA[<h2 id="关于element日期时间选择器出现的小bug"><a href="#关于element日期时间选择器出现的小bug" class="headerlink" title="关于element日期时间选择器出现的小bug"></a>关于element日期时间选择器出现的小bug</h2><p>当作参数的日期时间数据一定要通过处理或者添加行内属性格式化一下,直接使用是万万不可的,问题查找还极其烧脑.</p>
<h3 id="1-添加value-format属性配置-插件自带格式化属性-时间数据可以直接拿来用"><a href="#1-添加value-format属性配置-插件自带格式化属性-时间数据可以直接拿来用" class="headerlink" title="1.添加value-format属性配置,插件自带格式化属性,时间数据可以直接拿来用"></a>1.添加value-format属性配置,插件自带格式化属性,时间数据可以直接拿来用</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag"><span class="attr">style</span>=<span class="string">&quot;width:100%&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-model</span>=<span class="string">&quot;pojoCheck.date&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">type</span>=<span class="string">&quot;date&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">placeholder</span>=<span class="string">&quot;日期&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-将时间转化为时间戳-使用getTime-方法-1000即可得到时间戳了-这是最好的方法"><a href="#2-将时间转化为时间戳-使用getTime-方法-1000即可得到时间戳了-这是最好的方法" class="headerlink" title="2. 将时间转化为时间戳,使用getTime 方法+ / 1000即可得到时间戳了,这是最好的方法"></a>2. 将时间转化为时间戳,使用getTime 方法+ / 1000即可得到时间戳了,这是最好的方法</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getTime() / <span class="number">1000</span></span><br></pre></td></tr></table></figure>

<p>时间戳转化可读的时间格式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1615199226326</span>).toLocaleString()</span><br><span class="line"><span class="comment">// &quot;2021/3/8下午6:27:06&quot;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1615199226326</span>).toDateString()</span><br><span class="line"><span class="comment">// &quot;Mon Mar 08 2021&quot;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1615199226326</span>).toLocaleDateString()</span><br><span class="line"><span class="comment">// &quot;2021/3/8&quot;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1615199226326</span>).toLocaleTimeString()</span><br><span class="line"><span class="comment">// &quot;下午6:27:06&quot;</span></span><br></pre></td></tr></table></figure>



<h4 id="选择开始时间大于当前时间-选择结束时间大于开始时间"><a href="#选择开始时间大于当前时间-选择结束时间大于开始时间" class="headerlink" title="选择开始时间大于当前时间,选择结束时间大于开始时间"></a>选择开始时间大于当前时间,选择结束时间大于开始时间</h4><p>使用picker-options属性添加方法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;考核开始日期&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">style</span>=<span class="string">&quot;width:100%&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">v-model</span>=<span class="string">&quot;pojoCheckPc.start_time&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">placeholder</span>=<span class="string">&quot;考核开始日期&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:disabled</span>=<span class="string">&quot;disabled1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:picker-options</span>=<span class="string">&quot;start_timeOptions&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;考核结束日期&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">style</span>=<span class="string">&quot;width:100%&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">v-model</span>=<span class="string">&quot;pojoCheckPc.end_time&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:picker-options</span>=<span class="string">&quot;end_timeOptions&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">placeholder</span>=<span class="string">&quot;选择考核结束日期&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:disabled</span>=<span class="string">&quot;disabled1&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<p>在data中引用methods中的方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">start_timeOptions</span>: <span class="built_in">this</span>.beginDate(),</span><br><span class="line">        <span class="attr">end_timeOptions</span>: <span class="built_in">this</span>.processDate()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="function"><span class="title">beginDate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">disabledDate</span>: <span class="function"><span class="params">time</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> time.getTime() &lt; <span class="built_in">Date</span>.now() - <span class="number">8.64e7</span>; <span class="comment">//开始时间不选时，结束时间最大值小于等于当天</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">            <span class="comment">//提出结束时间必须大于提出开始时间</span></span><br><span class="line">            <span class="function"><span class="title">processDate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">disabledDate</span>: <span class="function"><span class="params">time</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="built_in">this</span>.formData.start_date) &#123;</span><br><span class="line">                            <span class="keyword">return</span> (</span><br><span class="line">                                time.getTime() &lt;</span><br><span class="line">                                <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">this</span>.this.formData.start_date).getTime() - <span class="number">8640000</span></span><br><span class="line">                            );</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">return</span> time.getTime() &lt; <span class="built_in">Date</span>.now(); <span class="comment">//开始时间不选时，结束时间最大值小于等于当天</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>修改组件全局样式</title>
    <url>/taiaiac.gitee.io/2021/03/11/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="关于修改组件中一些默认样式-全局处理方法"><a href="#关于修改组件中一些默认样式-全局处理方法" class="headerlink" title="关于修改组件中一些默认样式,全局处理方法"></a>关于修改组件中一些默认样式,全局处理方法</h2><ul>
<li>创建全局css文件</li>
<li>通过main.js引入</li>
<li>添加样式</li>
</ul>
<p>例:修改全局input框中的placeholder属性样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">::-webkit-input-placeholder &#123;</span><br><span class="line">  color: <span class="number">#999</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-moz-input-placeholder &#123;</span><br><span class="line">  color: <span class="number">#999</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-moz-input-placeholder &#123;</span><br><span class="line">  color: <span class="number">#999</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>关于样式穿透</p>
<p>例:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 语法</span><br><span class="line">外层 /deep/ 第三方组件 &#123;</span><br><span class="line">    样式</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::v-deep .swiper-slide-active &#123;</span><br><span class="line">  z-index: <span class="number">1000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="样式穿透"><a href="#样式穿透" class="headerlink" title="样式穿透"></a>样式穿透</h1><p>目前有四种形式：</p>
<p>作者：studentliubo<br>链接：<a href="https://www.jianshu.com/p/f3558bd87048">https://www.jianshu.com/p/f3558bd87048</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<ul>
<li>1、<code>&gt;&gt;&gt;</code> // css</li>
</ul>
<p>下面的👇 这几种是有预处理器(less, scss, sass)的写法(推荐3):</p>
<ul>
<li>2、<code>/deep/</code></li>
<li>3、<code>::v-deep</code></li>
<li>4、<code>去掉scoped</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scope</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.form-container</span>  <span class="selector-class">.el-form-item</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="PS-上述代码是无效的，因为所有的scope中的css样式都会被编辑成如下格式：-form-container-data-v-6a0a3ec4-el-form-item-label，这也是为什么可以使用方法四的原因。"><a href="#PS-上述代码是无效的，因为所有的scope中的css样式都会被编辑成如下格式：-form-container-data-v-6a0a3ec4-el-form-item-label，这也是为什么可以使用方法四的原因。" class="headerlink" title="PS: 上述代码是无效的，因为所有的scope中的css样式都会被编辑成如下格式：.form-container[data-v-6a0a3ec4] .el-form-item__label，这也是为什么可以使用方法四的原因。"></a>PS: 上述代码是无效的，因为所有的scope中的css样式都会被编辑成如下格式：<code>.form-container[data-v-6a0a3ec4] .el-form-item__label</code>，这也是为什么可以使用方法四的原因。</h4>]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>vue后台管理权限思路</title>
    <url>/taiaiac.gitee.io/2021/04/13/%E5%A4%A7%E5%89%8D%E7%AB%AF/vue%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E6%9D%83%E9%99%90%E6%80%9D%E8%B7%AF/</url>
    <content><![CDATA[<h2 id="vue后台管理权限思路"><a href="#vue后台管理权限思路" class="headerlink" title="vue后台管理权限思路"></a>vue后台管理权限思路</h2><ul>
<li>通过动态加载路由</li>
<li>通过vuex状态管理控制页面内容</li>
</ul>
]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>在vue中使用swipre</title>
    <url>/taiaiac.gitee.io/2021/01/21/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E5%9C%A8vue%E4%B8%AD%E4%BD%BF%E7%94%A8swipre/</url>
    <content><![CDATA[<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>安装swiper低版本的包，如swiper^3.4.2</p>
<p>在mian.js中引入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/dist/css/swiper.min.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;swiper/dist/js/swiper.min&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="具体使用"><a href="#具体使用" class="headerlink" title="具体使用"></a>具体使用</h2><p>引入Swipre对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Swiper <span class="keyword">from</span> <span class="string">&#x27;swiper&#x27;</span></span><br></pre></td></tr></table></figure>

<p>创建Swipre对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">slidesPerView</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="attr">spaceBetween</span>: <span class="number">30</span>,</span><br><span class="line">      <span class="attr">autoplay</span>: <span class="number">2000</span>,</span><br><span class="line">      <span class="attr">centeredSlides</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">loop</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">pagination</span>: <span class="string">&#x27;.swiper-pagination&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>页面部分</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../assets/imgs/loop1.png&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../assets/imgs/loop1.png&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../assets/imgs/loop1.png&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../assets/imgs/loop1.png&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>样式部分</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.swiper-container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-slide</span> &#123;</span><br><span class="line">  <span class="comment">/* Center slide text vertically */</span></span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-pack: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-pack: center;</span><br><span class="line">  -webkit-<span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  -webkit-box-align: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-align: center;</span><br><span class="line">  -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">300ms</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">3.27rem</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">6.28rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiper-slide-active</span>,</span><br><span class="line"><span class="selector-class">.swiper-slide-duplicate-active</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>页面宽度不足时出现覆盖</p>
<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/swipre.png" alt="image-20210121165720684"></p>
<p>给active功能的class添加层级</p>
<p>  在样式前加::v-deep覆盖或者添加属性</p>
<p>::v-deep 是vue中样式穿透，覆盖和添加原有样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">::v-deep .swiper-slide-active &#123;</span><br><span class="line">  z-index: <span class="number">1000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>前端VUE项目开发规范</title>
    <url>/taiaiac.gitee.io/2021/05/06/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<blockquote>
<p>为了更好的阅读体验,下载专业md编辑器Typora</p>
</blockquote>
<h1 id="前端VUE项目开发规范"><a href="#前端VUE项目开发规范" class="headerlink" title="前端VUE项目开发规范"></a>前端VUE项目开发规范</h1><p>规范的目的是为了编写高质量的代码，让团队成员维护项目时少一点头疼点，大家在一起开发是快乐的。</p>
<p>引自《阿里规约》的开头片段：</p>
<p><em>—-现代软件架构的复杂性需要协同开发完成，如何高效地协同呢？无规矩不成方圆，无规范难以协同，比如，制订交通法规表面上是要限制行车权，实际上是保障公众的人身安全，试想如果没有限速，没有红绿灯，谁还敢上路行驶。对软件来说，适当的规范和标准绝不是消灭代码内容的创造性、优雅性，而是限制过度个性化，以一种普遍认可的统一方式一起做事，提升协作效率，降低沟通成本。代码的字里行间流淌的是软件系统的血液，质量的提升是尽可能少踩坑，杜绝踩重复的坑，切实提升系统稳定性，码出质量。</em></p>
<h2 id="一-文件命名规范"><a href="#一-文件命名规范" class="headerlink" title="(一)文件命名规范"></a>(一)文件命名规范</h2><h3 id="1-1-项目命名"><a href="#1-1-项目命名" class="headerlink" title="1.1 项目命名"></a>1.1 项目命名</h3><p>采用首字母大写单词隔开</p>
<p><code>My-Pro</code></p>
<h3 id="1-2-JS、CSS、SCSS、HTML、PNG-文件命名"><a href="#1-2-JS、CSS、SCSS、HTML、PNG-文件命名" class="headerlink" title="1.2 JS、CSS、SCSS、HTML、PNG 文件命名"></a>1.2 JS、CSS、SCSS、HTML、PNG 文件命名</h3><p>全部采用小写方式， 以中划线分隔</p>
<p>正例： <code>render-dom.js / signup.css / index.html / company-logo.png</code></p>
<p>反例： <code>renderDom.js / UserManagement.html</code></p>
<h3 id="1-3-目录命名"><a href="#1-3-目录命名" class="headerlink" title="1.3 目录命名"></a>1.3 目录命名</h3><blockquote>
<p> 为了达到目录清晰,列出下面常用目录,以此规范命名.</p>
<p> 以下仅列出需要配置的目录和文件</p>
</blockquote>
<ul>
<li>一级目录<ul>
<li><code>src</code>   项目主入口</li>
<li><code>public</code>   静态资源存放文件,项目全局公共资源文件,图片|字体|icon等,一般存放项目logo,网页角标ico图片</li>
<li><code>.env.development</code>   开发环境变量(一般只需要写开发环境的ip请求地址)</li>
<li><code>.env.production</code>    生产环境变量(生产环境的ip请求地址)</li>
<li><code>vue.config.js</code>    vue项目配置文件(一般无需特别配置,vue有一套现成的loader)</li>
</ul>
</li>
<li>二级目录<code>src</code><ul>
<li><code>api</code>     全局接口文件目录</li>
<li><code>assets</code>    统一资源目录文件目录</li>
<li><code>components</code>    全局公共组件目录</li>
<li><code>icons</code>      icon图片,按需使用</li>
<li><code>layout</code>    布局页面目录</li>
<li><code>mixins</code>       全局公共混入的代码目录</li>
<li><code>route</code>      路由配置目录</li>
<li><code>store</code>     vuex配置目录</li>
<li><code>styles</code>     全局css,less,sass,scss目录</li>
<li><code>utils</code>       全局方法,工具目录</li>
<li><code>plugins </code>    插件详细配置目录</li>
<li><code>views </code>     视图目录</li>
<li><code>App.vue</code>      项目入口</li>
<li><code>main.js </code>       全局配置文件</li>
</ul>
</li>
<li>区分目录功能,不要在main.js主要配置中写逻辑代码</li>
</ul>
<h3 id="1-4-特殊目录下文件命名"><a href="#1-4-特殊目录下文件命名" class="headerlink" title="1.4 特殊目录下文件命名"></a>1.4 特殊目录下文件命名</h3><ul>
<li>api,view,router中文件,组件名必须统一,一一对应,方便维护<ul>
<li><code>@/views/test.js</code></li>
<li><code>@/views/test/test.vue</code></li>
<li><code>@/route/modules/test.js</code></li>
</ul>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">├── views					<span class="comment">#页面</span></span><br><span class="line">|	├── <span class="built_in">test</span>				<span class="comment">#单页面目录</span></span><br><span class="line">|		├── test.vue		<span class="comment">#test页面</span></span><br><span class="line">|	├── api     				<span class="comment">#接口</span></span><br><span class="line">|		├── test.js				<span class="comment">#对应test.vue页面</span></span><br><span class="line">├── route					<span class="comment">#路由目录</span></span><br><span class="line">|	├── modules				<span class="comment">#模块目录</span></span><br><span class="line">|		└── test.js			<span class="comment">#test模块路由配置</span></span><br><span class="line">|	├── index.js			<span class="comment">#路由配置文件</span></span><br></pre></td></tr></table></figure>

<ul>
<li>路由中组件命名和页面命名统一(cv的事)</li>
<li>一个view页面对应一个api(同名js文件)</li>
<li>router中一个模块单分出一个文件导出(根据路由视图分解成模块化)</li>
<li>plugins目录中对于外部插件的单独配置(element,等)</li>
</ul>
<h3 id="1-5组件命名"><a href="#1-5组件命名" class="headerlink" title="1.5组件命名"></a>1.5组件命名</h3><p>采用首字母大写单词隔开</p>
<p><code>My-Component</code></p>
<p>全局组件命名</p>
<p>以<code>All</code>+组件名标记全局组件,做到一眼清</p>
<p><code>All-组件名</code></p>
<h3 id="1-6-页面配置"><a href="#1-6-页面配置" class="headerlink" title="1.6 页面配置"></a>1.6 页面配置</h3><p>一个拥有完整的运转，需要区分各个功能块，弹窗业务，子组件业务，接口业务，跟全局方法区分开。</p>
<p>目录如下:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">├── <span class="built_in">test</span>     						<span class="comment">#view页面</span></span><br><span class="line">|	├── index.vue					<span class="comment">#主要页面</span></span><br><span class="line">|	├── components					<span class="comment">#组件目录</span></span><br><span class="line">|	├── mixins						<span class="comment">#复用逻辑</span></span><br><span class="line">|	├── api							<span class="comment">#每个页面对应相应的api.js</span></span><br><span class="line">|	├── dialog						<span class="comment">#根据弹窗功能区分行为</span></span><br><span class="line">|		├── Add.dialog.vue			<span class="comment">#增</span></span><br><span class="line">|		├── See.dialog.vue			<span class="comment">#查</span></span><br><span class="line">|		├── Update.dialog.vue		<span class="comment">#改</span></span><br><span class="line">|		├── Xxx.dialog.vue			<span class="comment">#其他弹窗内容</span></span><br><span class="line">|		└── 其他...</span><br></pre></td></tr></table></figure>

<h3 id="1-6-组件文档"><a href="#1-6-组件文档" class="headerlink" title="1.6 组件文档"></a>1.6 组件文档</h3><p>能够全局复用的组件也不多,每个全局组件都需要有对应的文档,方便后续维护及优化</p>
<h4 id="文档格式"><a href="#文档格式" class="headerlink" title="文档格式"></a>文档格式</h4><ul>
<li>组件<ul>
<li>组件代码</li>
<li>参数说明</li>
</ul>
</li>
<li>使用方法<ul>
<li>逻辑部分使用mixins混入,不直接写入调用页面</li>
<li>传参说明</li>
</ul>
</li>
</ul>
<h2 id="二-代码规范"><a href="#二-代码规范" class="headerlink" title="(二)代码规范"></a>(二)代码规范</h2><blockquote>
<p> 模块化各类文件,拒绝一页到底的冗余和重复代码</p>
</blockquote>
<h3 id="1-1-语义化标签"><a href="#1-1-语义化标签" class="headerlink" title="1.1. 语义化标签"></a>1.1. 语义化标签</h3><p>HTML5 中新增很多语义化标签，所以优先使用语义化标签，避免一个页面都是 div 或者 p 标签</p>
<p>正例</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>反例</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-css规范"><a href="#1-2-css规范" class="headerlink" title="1.2. css规范"></a>1.2. css规范</h3><h4 id="1-按以下顺序组织"><a href="#1-按以下顺序组织" class="headerlink" title="1)按以下顺序组织"></a>1)按以下顺序组织</h4><p>1、@import;<br>2、变量声明;<br>3、样式声明;</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;mixins/size.scss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@default-text-color</span>: #<span class="number">333</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.page</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-重复样式的抽离提取为公共样式"><a href="#2-重复样式的抽离提取为公共样式" class="headerlink" title="2)重复样式的抽离提取为公共样式"></a>2)重复样式的抽离提取为公共样式</h4><p>抽离出通用性强,使用频繁的css语句,如:</p>
<ul>
<li>左右居中</li>
<li>上下居中</li>
<li>上下左右居中</li>
<li>清除浮动</li>
<li>margin,padding的常用值</li>
<li>….</li>
</ul>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">// scss变量</span></span><br><span class="line"><span class="keyword">@mixin</span> clearfix &#123;</span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">    content: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可传参的scss函数</span></span><br><span class="line"><span class="keyword">@mixin</span> <span class="attribute">color</span>(<span class="variable">$color</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">$color</span>;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">    &amp;:before,</span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">      background: <span class="variable">$color</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blue-btn</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> clearfix;</span><br><span class="line">  <span class="keyword">@include</span> <span class="attribute">color</span>(<span class="number">#ccc</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-关于主题样式抽离为css变量方便后续修改维护"><a href="#3-关于主题样式抽离为css变量方便后续修改维护" class="headerlink" title="3)关于主题样式抽离为css变量方便后续修改维护"></a>3)关于主题样式抽离为css变量方便后续修改维护</h4><p>如侧边栏,表格样式等</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">// sidebar</span></span><br><span class="line"><span class="variable">$is-color</span>:red;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出的变量可在vue模板中直接使用</span></span><br><span class="line">:export &#123;</span><br><span class="line">  isColor: <span class="variable">$is-color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 导出的变量为isColor</span></span><br></pre></td></tr></table></figure>

<h4 id="4-css文件的模块化"><a href="#4-css文件的模块化" class="headerlink" title="4) css文件的模块化"></a>4) css文件的模块化</h4><p>正常项目中肯定不止一个css样式文件,以styles目录下的index文件为出口,在<code>index.scss</code>中 <code>@import</code>导入其他css配置文件</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">├── styles     						<span class="comment">#全局样式目录</span></span><br><span class="line">|	├── index.scss					<span class="comment">#导出的样式文件</span></span><br><span class="line">|	├── common.scss					<span class="comment">#样式重置</span></span><br><span class="line">|	├── mixins.scss					<span class="comment">#scss变量</span></span><br><span class="line">|	├── element-ui.scss				<span class="comment">#插件样式的自定义</span></span><br><span class="line">|	└── 其他...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>styles/index.scss</p>
</blockquote>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./common.scss&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./mixin.scss&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./element-ui.scss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>最后在main.js中引入index.scss即可</p>
<h3 id="1-3-Javascript-规范"><a href="#1-3-Javascript-规范" class="headerlink" title="1.3. Javascript 规范"></a>1.3. <code>Javascript </code>规范</h3><h4 id="1-使用-2-个空格进行缩进"><a href="#1-使用-2-个空格进行缩进" class="headerlink" title="1) 使用 2 个空格进行缩进"></a>1) 使用 2 个空格进行缩进</h4><h4 id="2-统一使用单引号"><a href="#2-统一使用单引号" class="headerlink" title="2) 统一使用单引号"></a>2) 统一使用单引号</h4><p>api接口方法中需要字符串拼接接口时,使用es6模板字符串语法</p>
<p>反例:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/api/&#x27;</span>+<span class="string">&#x27;page=&#x27;</span> + page + <span class="string">&#x27;&amp;page_size=&#x27;</span> + page_size + <span class="string">&#x27;&amp;xx&#x27;</span> + xx</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>正例:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/api/page=<span class="subst">$&#123;page&#125;</span>&amp;page_size=<span class="subst">$&#123;page_size&#125;</span>&amp;xx=<span class="subst">$&#123;xx&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-优先使用es6-es7中新增的语法糖和函数"><a href="#3-优先使用es6-es7中新增的语法糖和函数" class="headerlink" title="3) 优先使用es6,es7中新增的语法糖和函数"></a>3) 优先使用es6,es7中新增的语法糖和函数</h4><p>比如箭头函数、await/async ， 解构， let ，const , for…of  ,  …(展开运算符)  等等</p>
<h4 id="4-三元运算符"><a href="#4-三元运算符" class="headerlink" title="4) 三元运算符"></a>4) 三元运算符</h4><ul>
<li>不要写太长的三元运算符!!!</li>
<li>简单明了的逻辑判断使用三元运算符</li>
<li>复杂判断方法使用计算属性</li>
<li>三元运算符不可超过三层.</li>
<li>多层if判断使用switch,更清晰明了.</li>
</ul>
<h4 id="5-console-log使用完毕后立马注释或者删除"><a href="#5-console-log使用完毕后立马注释或者删除" class="headerlink" title="5) console.log使用完毕后立马注释或者删除."></a>5) console.log使用完毕后立马注释或者删除.</h4><h4 id="后续按需求统一"><a href="#后续按需求统一" class="headerlink" title="后续按需求统一"></a>后续按需求统一</h4><h3 id="1-4-api规范"><a href="#1-4-api规范" class="headerlink" title="1.4. api规范"></a>1.4. api规范</h3><h4 id="1-使用全局唯一的封装的request方法请求接口并封装对应的方法-不要另起炉灶-凸显个性"><a href="#1-使用全局唯一的封装的request方法请求接口并封装对应的方法-不要另起炉灶-凸显个性" class="headerlink" title="1)使用全局唯一的封装的request方法请求接口并封装对应的方法,不要另起炉灶,凸显个性!!!!"></a>1)使用全局唯一的封装的request方法请求接口并封装对应的方法,不要另起炉灶,凸显个性!!!!</h4><h4 id="2-接口方法示例"><a href="#2-接口方法示例" class="headerlink" title="2) 接口方法示例"></a>2) 接口方法示例</h4><p>反例:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">editList</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> axios(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;put&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: URL + <span class="string">&quot;/curriculum/&quot;</span> + params.id,</span><br><span class="line">    <span class="attr">data</span>: params,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="attr">accessToken</span>: Cookies.get(<span class="string">&quot;accessToken&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正例:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> test = <span class="function"><span class="params">data</span> =&gt;</span></span><br><span class="line">  request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/curriculum/id=<span class="subst">$&#123;data.id&#125;</span>&amp;`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3-使用async-await"><a href="#3-使用async-await" class="headerlink" title="3)使用async / await"></a>3)使用async / await</h4><p>不要then来then去了!!</p>
<p>报错处理方法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">xxx</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> res = <span class="keyword">await</span> api().catch(<span class="function"><span class="params">e</span>=&gt;</span>e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-mixins规范"><a href="#1-5-mixins规范" class="headerlink" title="1.5. mixins规范"></a>1.5. mixins规范</h3><h4 id="1-变量命名"><a href="#1-变量命名" class="headerlink" title="1)变量命名"></a>1)变量命名</h4><p>因为是可以到处拿来即用的代码,为了避免冲突以及和其他代码块区分开来,变量命名为:</p>
<p><code>&#39;Mixin&#39; +  &#39;变量名&#39;  </code></p>
<p>全局通用逻辑不多,变量命名越详细越好</p>
<h4 id="2-代码块需要注释用途"><a href="#2-代码块需要注释用途" class="headerlink" title="2)代码块需要注释用途"></a>2)代码块需要注释用途</h4><p>这种跨文件的复用文件都需要注释.</p>
<h3 id="1-6-route规范"><a href="#1-6-route规范" class="headerlink" title="1.6. route规范"></a>1.6. route规范</h3><h4 id="1-区分以下三个模块"><a href="#1-区分以下三个模块" class="headerlink" title="1)区分以下三个模块"></a>1)区分以下三个模块</h4><ul>
<li>路由配置模块<ul>
<li><code>index.js</code></li>
</ul>
</li>
<li>路由守卫模块<ul>
<li><code>permission.js</code></li>
</ul>
</li>
<li>具体路由模块<ul>
<li><code>modules</code>目录</li>
<li><code>具体模块.js</code>,一般为一个侧边栏导航部分</li>
</ul>
</li>
</ul>
<h4 id="2-具体配置"><a href="#2-具体配置" class="headerlink" title="2) 具体配置"></a>2) 具体配置</h4><blockquote>
<p><code>route/modules/test.js</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">&#x27;@/layout&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: Layout,</span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&#x27;/test/index&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Test&#x27;</span>,</span><br><span class="line">  <span class="attr">meta</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;演示&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;TestIndex&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/test/index.vue&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;test&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      ...</span><br><span class="line">      &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> test</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>route/index.js</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">&#x27;./modules/test.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = &#123;</span><br><span class="line">    ...</span><br><span class="line">    test,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>反例:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">route.js</span><br><span class="line">一页到底式的路由配置</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">几百行...</span><br></pre></td></tr></table></figure>

<h3 id="1-7-vuex规范"><a href="#1-7-vuex规范" class="headerlink" title="1.7.  vuex规范"></a>1.7.  vuex规范</h3><h4 id="1-不要为了使用vuex而去用vuex"><a href="#1-不要为了使用vuex而去用vuex" class="headerlink" title="1)不要为了使用vuex而去用vuex!!!"></a>1)不要为了使用vuex而去用vuex!!!</h4><h4 id="2-列出以下几种场景"><a href="#2-列出以下几种场景" class="headerlink" title="2)列出以下几种场景"></a>2)列出以下几种场景</h4><ul>
<li><p>跨页面传递状态</p>
</li>
<li><p>多个页面或者组件中操作同一的数据,使用vuex管理状态比较方便</p>
</li>
<li><p>记录用户操作,如,弹框确认后不再显示等</p>
</li>
</ul>
<h3 id="1-8-环境变量"><a href="#1-8-环境变量" class="headerlink" title="1.8. 环境变量"></a>1.8. 环境变量</h3><h4 id="1-开发环境变量-本地"><a href="#1-开发环境变量-本地" class="headerlink" title="1)开发环境变量(本地)"></a>1)开发环境变量(本地)</h4><p><code>.env.development</code>文件</p>
<h4 id="2-生产环境变量-打包上线"><a href="#2-生产环境变量-打包上线" class="headerlink" title="2)生产环境变量(打包上线)"></a>2)生产环境变量(打包上线)</h4><p><code>.env.production</code>文件</p>
<h4 id="3-主要是配合axios使用"><a href="#3-主要是配合axios使用" class="headerlink" title="3)主要是配合axios使用"></a>3)主要是配合axios使用</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"># base api</span><br><span class="line">VUE_APP_BASE_API = <span class="string">&#x27;请求地址&#x27;</span></span><br></pre></td></tr></table></figure>

<p>使用webpack的api调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> request = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>当后端需要更换地址时更改<code>.env.production</code>中的<code>VUE_APP_BASE_API</code>就行了,这就是为什么上面需要全局使用统一的请求方法,使用环境变量应对这种情况会非常方便</p>
<h3 id="1-9-通知消息规范"><a href="#1-9-通知消息规范" class="headerlink" title="1.9. 通知消息规范"></a>1.9. 通知消息规范</h3><h4 id="1-网络请求"><a href="#1-网络请求" class="headerlink" title="1)网络请求"></a>1)网络请求</h4><p>关于网络请求统一使用Message展示请求状态</p>
<ul>
<li>请求成功</li>
<li>请求失败</li>
<li>请求超时</li>
<li>….</li>
</ul>
<h4 id="2-用户操作通知"><a href="#2-用户操作通知" class="headerlink" title="2)用户操作通知"></a>2)用户操作通知</h4><ul>
<li>操作成功</li>
<li>删除成功</li>
<li>不可删除</li>
<li>…</li>
</ul>
<h2 id="三-公共组件作为单文档编写"><a href="#三-公共组件作为单文档编写" class="headerlink" title="(三)公共组件作为单文档编写"></a>(三)公共组件作为单文档编写</h2><p>复用组件和复用逻辑封装</p>
<ul>
<li>分页统一</li>
<li>消息通知统一</li>
<li>request文件统一</li>
<li>一些工具类方法统一</li>
</ul>
]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序json字符串转二维码</title>
    <url>/taiaiac.gitee.io/2021/03/12/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fjson%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E4%BA%8C%E7%BB%B4%E7%A0%81/</url>
    <content><![CDATA[<h2 id="微信小程序json字符串转二维码"><a href="#微信小程序json字符串转二维码" class="headerlink" title="微信小程序json字符串转二维码"></a>微信小程序json字符串转二维码</h2><p>头大.</p>
<h3 id="提供两种方法"><a href="#提供两种方法" class="headerlink" title="提供两种方法"></a>提供两种方法</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p>下载插件</p>
<blockquote>
<p><a href="https://gitee.com/aidemin/wechat-applet-code-fragment/blob/master/JSON%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E4%BA%8C%E7%BB%B4%E7%A0%81/util">https://gitee.com/aidemin/wechat-applet-code-fragment/blob/master/JSON%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E4%BA%8C%E7%BB%B4%E7%A0%81/util</a></p>
</blockquote>
<p>.wxml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;view class=&quot;header&quot;&gt;</span><br><span class="line">  &lt;!-- fn1 --&gt;</span><br><span class="line">  &lt;canvas class=&#x27;canvas&#x27; canvas-id=&#x27;canvas&#x27;&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>.wxss</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.canvas &#123;</span><br><span class="line">  width: 150px;</span><br><span class="line">  height: 150px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.header&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  align-items: center;css</span><br><span class="line">  padding: 150rpx 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const app = getApp()</span><br><span class="line">// fn1</span><br><span class="line">const QRCode = require(&#x27;../util/weapp-qrcode&#x27;);</span><br><span class="line">let qrcodes;</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    testData: &#123;</span><br><span class="line">      name: &#x27;小民&#x27;,</span><br><span class="line">      sex: &#x27;男&#x27;,</span><br><span class="line">      number: &#x27;18&#x27;,</span><br><span class="line">      zhuanye: &#x27;前端bug师&#x27;,</span><br><span class="line">      banji: &#x27;小学二年级&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad: function () &#123;</span><br><span class="line">    this.fn1()</span><br><span class="line">  &#125;,</span><br><span class="line">  fn1() &#123;</span><br><span class="line">    qrcodes = new QRCode(&#x27;canvas&#x27;, &#123;</span><br><span class="line">      text: &quot;code=0000000000000&quot;, //为需要转化为二维码的字符串,随便填点,让二维码先展示</span><br><span class="line">      width: 150,</span><br><span class="line">      height: 150, //width和height为绘制出的二维码长宽，这里设置为跟canvas同样的长宽；</span><br><span class="line">      colorDark: &quot;#000000&quot;,</span><br><span class="line">      colorLight: &quot;#ffffff&quot;, //colorDark和colorLight为二维码交替的两种颜色</span><br><span class="line">      correctLevel: QRCode.CorrectLevel.H,</span><br><span class="line">    &#125;);</span><br><span class="line">    // 更新二维码内容</span><br><span class="line">    qrcodes.makeCode(JSON.stringify(this.data.testData));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><p>下载插件</p>
<blockquote>
<p><a href="https://gitee.com/aidemin/wechat-applet-code-fragment/blob/master/JSON%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E4%BA%8C%E7%BB%B4%E7%A0%81/utils">https://gitee.com/aidemin/wechat-applet-code-fragment/blob/master/JSON%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E4%BA%8C%E7%BB%B4%E7%A0%81/utils</a></p>
</blockquote>
<p>.wxml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;view class=&quot;header&quot;&gt;</span><br><span class="line">  &lt;!-- fn2 --&gt;</span><br><span class="line">  &lt;canvas canvas-id=&quot;barcode&quot; class=&quot;canvas1&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">  &lt;canvas canvas-id=&quot;qrcode&quot; class=&quot;canvas2&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<p>.wxss</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.header&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  align-items: center;</span><br><span class="line">  padding: 150rpx 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.canvas1 &#123;</span><br><span class="line">  width: 150px;</span><br><span class="line">  height: 60px;</span><br><span class="line">  margin: 30px;</span><br><span class="line">&#125;</span><br><span class="line">.canvas2 &#123;</span><br><span class="line">  width: 200px;</span><br><span class="line">  height: 200px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const app = getApp()</span><br><span class="line"></span><br><span class="line">// fn2</span><br><span class="line">const &#123;</span><br><span class="line">  barcode,</span><br><span class="line">  qrcode</span><br><span class="line">&#125; = require(&#x27;../utils/index&#x27;);</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    testData: &#123;</span><br><span class="line">      name: &#x27;小民&#x27;,</span><br><span class="line">      sex: &#x27;男&#x27;,</span><br><span class="line">      number: &#x27;18&#x27;,</span><br><span class="line">      zhuanye: &#x27;前端bug师&#x27;,</span><br><span class="line">      banji: &#x27;小学二年级&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad: function () &#123;</span><br><span class="line">    this.fn2()</span><br><span class="line">  &#125;,</span><br><span class="line">  fn2() &#123;</span><br><span class="line">    console.log(this.data.testData);</span><br><span class="line">    // 第一个参数是html页面里面canves的id，第二个参数是要转化的那串数字，后面两个参数分别是图片的宽高</span><br><span class="line">    // 条形码</span><br><span class="line">    barcode(&#x27;barcode&#x27;, this.data.testData, 200, 50);</span><br><span class="line">    // 二维码,需要转化成JSON字符串</span><br><span class="line">    qrcode(&#x27;qrcode&#x27;, JSON.stringify(this.data.testData), 400, 400, &#x27;utf82str&#x27;);</span><br><span class="line">    // 可能会出现码扫不了的问题，所以在设置宽高的时候要注意，设置的大小尺寸不合适可能造成二维码或者条形码展示不完全，然后码就扫不了</span><br><span class="line">    // &quot;&#123;&quot;name&quot;:&quot;Q&quot;,&quot;sex&quot;:/G&quot;,&quot;number&quot;:&quot;18&quot;,&quot;zhuanye&quot;:+gObuhx&quot;,&quot;banji&quot;:/läÉÇ&quot;&#125;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>第二种方法乱码问题已解决,可直接使用.</p>
]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>事件</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="定义段与⽰例⽅法"><a href="#定义段与⽰例⽅法" class="headerlink" title="定义段与⽰例⽅法"></a>定义段与⽰例⽅法</h2><p>Component 构造器可⽤于定义组件，调⽤ Component 构造器时可以指定组件的属性、数据、⽅法 等。</p>
<table>
<thead>
<tr>
<th align="center">定义段</th>
<th align="center">类型</th>
<th align="center">是 否 必 填</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">properties</td>
<td align="center">Object Map</td>
<td align="center">否</td>
<td align="left">组件的对外属性，是属性名到属性设置的映射表，参⻅下⽂</td>
</tr>
<tr>
<td align="center">data</td>
<td align="center">Object</td>
<td align="center">否</td>
<td align="left">组件的内部数据，和 properties ⼀同⽤于组件的模板渲</td>
</tr>
<tr>
<td align="center">observers</td>
<td align="center">Object</td>
<td align="center">否</td>
<td align="left">组件数据字段监听器，⽤于监听 properties 和 data 的变化，参⻅ 数据监听器</td>
</tr>
<tr>
<td align="center">methods</td>
<td align="center">Object</td>
<td align="center">否</td>
<td align="left">组件的⽅法，包括事件响应函数和任意的⾃定义⽅法，关于 事件响应函数的使⽤，参⻅ 组件事件</td>
</tr>
<tr>
<td align="center">created</td>
<td align="center">Function</td>
<td align="center">否</td>
<td align="left">组件⽣命周期函数，在组件实例刚刚被创建时执⾏，注意此 时不能调⽤ setData ，参⻅ 组件⽣命周期</td>
</tr>
<tr>
<td align="center">attached</td>
<td align="center">Function</td>
<td align="center">否</td>
<td align="left">组件⽣命周期函数，在组件实例进⼊⻚⾯节点树时执⾏，参 ⻅ 组件⽣命周期</td>
</tr>
<tr>
<td align="center">ready</td>
<td align="center">Function</td>
<td align="center">否</td>
<td align="left">组件⽣命周期函数，在组件布局完成后执⾏，参⻅ 组件⽣命 周期</td>
</tr>
<tr>
<td align="center">moved</td>
<td align="center">Function</td>
<td align="center">否</td>
<td align="left">组件⽣命周期函数，在组件实例被移动到节点树另⼀个位置 时执⾏，参⻅ 组件⽣命周期</td>
</tr>
<tr>
<td align="center">detached</td>
<td align="center">Function</td>
<td align="center">否</td>
<td align="left">组件⽣命周期函数，在组件实例被从⻚⾯节点树移除时执 ⾏，参⻅ 组件⽣命周期</td>
</tr>
</tbody></table>
<hr>
<h2 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h2><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">类型</th>
<th align="center">必填</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">onLaunch</td>
<td align="center">function</td>
<td align="center">否</td>
<td align="left">应用第一次启动就会触发的事件</td>
</tr>
<tr>
<td align="center">onShow</td>
<td align="center">function</td>
<td align="center">否</td>
<td align="left">应用被用户看到</td>
</tr>
<tr>
<td align="center">onHide</td>
<td align="center">function</td>
<td align="center">否</td>
<td align="left">监听⼩程序切后台。应用隐藏</td>
</tr>
<tr>
<td align="center">onError</td>
<td align="center">function</td>
<td align="center">否</td>
<td align="left">错误监听函数。</td>
</tr>
<tr>
<td align="center">onPageNotFound</td>
<td align="center">function</td>
<td align="center">否</td>
<td align="left">⻚⾯不存在监听函数。</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line">App(&#123;</span><br><span class="line">  <span class="comment">//  1 应用第一次启动的就会触发的事件</span></span><br><span class="line">  <span class="function"><span class="title">onLaunch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//  在应用第一次启动的时候 获取用户的个人信息</span></span><br><span class="line">    <span class="comment">// console.log(&quot;onLaunch&quot;);</span></span><br><span class="line">    <span class="comment">// aabbcc</span></span><br><span class="line">    <span class="comment">// js的方式来跳转 不能触发 onPageNotFound</span></span><br><span class="line">    <span class="comment">// wx.navigateTo(&#123;</span></span><br><span class="line">    <span class="comment">//   url: &#x27;/11/22/33&#x27;</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 2 应用 被用户看到</span></span><br><span class="line">  <span class="function"><span class="title">onShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 对应用的数据或者页面效果 重置</span></span><br><span class="line">    <span class="comment">// console.log(&quot;onShow&quot;);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 3 应用 被隐藏了</span></span><br><span class="line">  <span class="function"><span class="title">onHide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 暂停或者清除定时器</span></span><br><span class="line">    <span class="comment">// console.log(&quot;Hide&quot;);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 4 应用的代码发生了报错的时候 就会触发</span></span><br><span class="line">  <span class="function"><span class="title">onError</span>(<span class="params">err</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 在应用发生代码报错的时候，收集用户的错误信息，通过异步请求 将错误的信息发送后台去</span></span><br><span class="line">    <span class="comment">// console.log(&quot;onError&quot;);</span></span><br><span class="line">    <span class="comment">// console.log(err);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 5 页面找不到就会触发</span></span><br><span class="line">  <span class="comment">//  应用第一次启动的时候，如果找不到第一个入口页面 才会触发</span></span><br><span class="line">  <span class="function"><span class="title">onPageNotFound</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 如果页面不存在了 通过js的方式来重新跳转页面 重新跳到第二个首页</span></span><br><span class="line">    <span class="comment">// 不能跳到tabbar页面  导航组件类似</span></span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/demo09/demo09&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// console.log(&quot;onPageNotFound&quot;);</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h2><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">data</td>
<td align="center">Object</td>
<td>⻚⾯的初始数据</td>
</tr>
<tr>
<td align="center">onLoad</td>
<td align="center">function</td>
<td>⽣命周期回调—监听⻚⾯加载</td>
</tr>
<tr>
<td align="center">onShow</td>
<td align="center">function</td>
<td>⽣命周期回调—监听⻚⾯显⽰</td>
</tr>
<tr>
<td align="center">onReady</td>
<td align="center">function</td>
<td>⽣命周期回调—监听⻚⾯初次渲染完成</td>
</tr>
<tr>
<td align="center">onHide</td>
<td align="center">function</td>
<td>⽣命周期回调—监听⻚⾯隐藏</td>
</tr>
<tr>
<td align="center">onUnload</td>
<td align="center">function</td>
<td>⽣命周期回调—监听⻚⾯卸载</td>
</tr>
<tr>
<td align="center">onPullDownRefresh</td>
<td align="center">function</td>
<td>监听⽤⼾下拉动作</td>
</tr>
<tr>
<td align="center">onReachBottom</td>
<td align="center">function</td>
<td>⻚⾯上拉触底事件的处理函数</td>
</tr>
<tr>
<td align="center">onShareAppMessage</td>
<td align="center">function</td>
<td>⽤⼾点击右上⻆转发</td>
</tr>
<tr>
<td align="center">onPageScroll</td>
<td align="center">function</td>
<td>⻚⾯滚动触发事件的处理函数</td>
</tr>
<tr>
<td align="center">onResize</td>
<td align="center">function</td>
<td>⻚⾯尺⼨改变时触发，详⻅ 响应显⽰区域变化</td>
</tr>
<tr>
<td align="center">onTabItemTap</td>
<td align="center">function</td>
<td>当前是 tab ⻚时，点击 tab 时触发</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/demo18/demo18.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onLoad&#x27;</span>)</span><br><span class="line">    <span class="comment">// onLoad发送异步请求来初始化页面数据</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onShow&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onReady&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onHide&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载 也是可以通过点击超链接来演示</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onUnload&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onPullDownRefresh&#x27;</span>)</span><br><span class="line">    <span class="comment">// 页面的数据 或者效果 重新 刷新</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   * 需要让页面 出现上下滚动才行</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onReachBottom&#x27;</span>)</span><br><span class="line">    <span class="comment">// 上拉加载下一页数据</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onShareAppMessage&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面滚动 就可以触发</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onPageScroll</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onPageScroll&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的尺寸发生改变的时候 触发</span></span><br><span class="line"><span class="comment">   * 小程序 发生了 横屏竖屏 切换的时候触发</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onResize</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onResize&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 1 必须要求当前页面 也是tabbar页面</span></span><br><span class="line"><span class="comment">   * 2 点击的自己的tab item的时候才触发</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onTabItemTap</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onTabItemTap&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="常用的事件"><a href="#常用的事件" class="headerlink" title="常用的事件"></a>常用的事件</h2><p>点击事件：bindtap</p>
<p>输入事件：bindinput</p>
<p>change 事件： bindchange</p>
<p>bindgetuserinfo： 获得用户信息的事件</p>
<h2 id="1-需要给-input-标签绑定-input-事件"><a href="#1-需要给-input-标签绑定-input-事件" class="headerlink" title="1 需要给 input 标签绑定 input 事件"></a>1 需要给 input 标签绑定 input 事件</h2><p>​ 绑定关键字 bindinput</p>
<h2 id="2-如何获取-输入框的值"><a href="#2-如何获取-输入框的值" class="headerlink" title="2 如何获取 输入框的值"></a>2 如何获取 输入框的值</h2><p>​ 通过事件源对象来获取<br>​ e.detail.value</p>
<h2 id="3-把输入框的值-赋值到-data-当中"><a href="#3-把输入框的值-赋值到-data-当中" class="headerlink" title="3 把输入框的值 赋值到 data 当中"></a>3 把输入框的值 赋值到 data 当中</h2><p>​ 不能直接<br>​ 1 this.data.num=e.detail.value<br>​ 2 this.num=e.detail.value<br>​ 正确的写法<br>​ this.setData({<br>​ num:e.detail.value<br>​ })</p>
<h2 id="4-需要加入一个点击事件"><a href="#4-需要加入一个点击事件" class="headerlink" title="4 需要加入一个点击事件"></a>4 需要加入一个点击事件</h2><p>​ 1 bindtap<br>​ 2 无法在小程序当中的 事件中 直接传参<br>​ 3 通过自定义属性的方式来传递参数<br>​ 4 事件源中获取 自定义属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;handletap&quot;</span> <span class="attr">data-operation</span>=<span class="string">&quot;&#123;&#123;1&#125;&#125;&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;handletap&quot;</span> <span class="attr">data-operation</span>=<span class="string">&quot;&#123;&#123;-1&#125;&#125;&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> &#123;&#123;num&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 输入框的input事件的执行逻辑</span></span><br><span class="line">  <span class="function"><span class="title">handleInput</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(e.detail.value );</span></span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      <span class="attr">num</span>: e.detail.value,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 加 减 按钮的事件</span></span><br><span class="line">  <span class="function"><span class="title">handletap</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(e);</span></span><br><span class="line">    <span class="comment">// 1 获取自定义属性 operation</span></span><br><span class="line">    <span class="keyword">const</span> operation = e.currentTarget.dataset.operation</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="built_in">this</span>.data.num + operation,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>打包后资源路径错误</title>
    <url>/taiaiac.gitee.io/2021/01/22/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E6%89%93%E5%8C%85%E5%90%8E%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84%E9%94%99%E8%AF%AF/</url>
    <content><![CDATA[<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><p>配置vue.config.js中webpack配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//配置webpack打包时的参数</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//所有资源使用相对路径</span></span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">  <span class="comment">//打包后资源存放的目录</span></span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">  <span class="comment">//设置所有标签属性有双引号</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    config.plugin(<span class="string">&#x27;html&#x27;</span>).tap(<span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">      args[<span class="number">0</span>].minify = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">return</span> args</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>处理因文件路径问题导致的空白页面。</p>
]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>登录功能实现</title>
    <url>/taiaiac.gitee.io/2021/01/22/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h1 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h1><ul>
<li>表单<ul>
<li>数据绑定</li>
<li>数据验证</li>
<li>请求数据整理</li>
</ul>
</li>
<li>Cookie处理插件</li>
<li>axios插件</li>
<li>配置axios<ul>
<li>默认地址</li>
<li>请求延迟</li>
</ul>
</li>
<li>设置请求拦截器<ul>
<li>每次请求前添加token</li>
<li>配置进度条</li>
<li>。。。</li>
</ul>
</li>
<li>设置响应拦截器<ul>
<li>判断状态码做对应处理</li>
</ul>
</li>
<li>模块化处理<ul>
<li>exprort导出</li>
<li>import导入</li>
</ul>
</li>
<li>配置请求数据<ul>
<li>符合后端数据请求的option</li>
</ul>
</li>
<li>页面跳转</li>
<li>。。。</li>
</ul>
<h2 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h2><ul>
<li>简单验证</li>
<li>name：中文字符</li>
<li>id_card：身份证号</li>
<li>password：密码</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rules: &#123;</span><br><span class="line">       <span class="attr">name</span>: <span class="regexp">/^[\u4e00-\u9fa5]+$/</span>,</span><br><span class="line">       id_card: <span class="regexp">/^([1-6][1-9]|50)\d&#123;4&#125;(18|19|20)\d&#123;2&#125;((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d&#123;3&#125;[0-9Xx]$/</span>,</span><br><span class="line">       <span class="comment">// 密码至少包含 数字和英文，长度6-20</span></span><br><span class="line">       password: <span class="regexp">/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;6,20&#125;$/</span></span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<h2 id="Cookie处理文件"><a href="#Cookie处理文件" class="headerlink" title="Cookie处理文件"></a>Cookie处理文件</h2><ul>
<li>token处理</li>
<li>js-cookie插件</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @/utils/auth.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Cookies <span class="keyword">from</span> <span class="string">&#x27;js-cookie&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TokenKey = <span class="string">&#x27;accessToken&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getToken</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Cookies.get(TokenKey)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setToken</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Cookies.set(TokenKey, token)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removeToken</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Cookies.remove(TokenKey)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="请求处理"><a href="#请求处理" class="headerlink" title="请求处理"></a>请求处理</h2><ul>
<li>axios</li>
<li>create（创建+配置）<ul>
<li>默认baseURL</li>
<li>响应延迟</li>
</ul>
</li>
<li>interceptors（拦截器）<ul>
<li>axios.interceptors.request</li>
<li>request.interceptors.response</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @/utils/request.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Toast, Dialog &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://192.168.0.123:8098&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器，在请求头中添加token</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">    <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        config.headers[<span class="string">&#x27;accessToken&#x27;</span>] = getToken()</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios响应拦截器</span></span><br><span class="line">request.interceptors.response.use(</span><br><span class="line">    <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.data</span><br><span class="line">        <span class="keyword">switch</span> (res.code + <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> res</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">                Dialog.confirm(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;确认登出？&#x27;</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;你已经登出, 你可以取消登录页面, 或者重新登录&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                    .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(err)</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                Toast(&#123;</span><br><span class="line">                    <span class="attr">message</span>: res.msg || <span class="string">&#x27;错误&#x27;</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(res.msg || <span class="string">&#x27;错误&#x27;</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;err&#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">        Toast(&#123;</span><br><span class="line">            <span class="attr">message</span>: error || <span class="string">&#x27;请求超时&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure>



<h2 id="接口处理"><a href="#接口处理" class="headerlink" title="接口处理"></a>接口处理</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @/api/login.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">loginPost</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/api/recruit/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="保存Token"><a href="#保存Token" class="headerlink" title="保存Token"></a>保存Token</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setToken &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/auth&quot;</span>;</span><br><span class="line"></span><br><span class="line">loginPost(formData)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$toast(&#123;</span><br><span class="line">        <span class="attr">message</span>: res.msg,</span><br><span class="line">        <span class="attr">position</span>: <span class="string">&quot;top&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="comment">// 保存Token</span></span><br><span class="line">    setToken(res.data.accessToken);</span><br><span class="line">    <span class="built_in">this</span>.$router.push(<span class="string">&quot;/index&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>高精度权限控制</title>
    <url>/taiaiac.gitee.io/2021/02/21/%E5%A4%A7%E5%89%8D%E7%AB%AF/%E9%AB%98%E7%B2%BE%E5%BA%A6%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/</url>
    <content><![CDATA[<h2 id="高精度权限控制—自定义指令directive"><a href="#高精度权限控制—自定义指令directive" class="headerlink" title="高精度权限控制—自定义指令directive"></a><strong>高精度权限控制—自定义指令directive</strong></h2><p>我们通常给一个元素添加 v-if / v-show 来做权限管理，但如果判断条件繁琐且多个地方需要判断，这种方式的代码不仅不优雅而且冗余。</p>
<p>针对这种情况，我们可以通过全局自定义指令来处理：我们先在新建个 array.js 文件，用于存放与权限相关的全局函数；</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// array.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">checkArray</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;demo&#x27;</span>]  <span class="comment">//权限的验证项</span></span><br><span class="line">  <span class="keyword">let</span> index = arr.indexOf(key)</span><br><span class="line">  <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// 有权限</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// 无权限</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在将 array 文件挂载到全局中:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; checkArray &#125; <span class="keyword">from</span> <span class="string">&quot;./common/array&quot;</span>;</span><br><span class="line">Vue.directive(<span class="string">&quot;permission&quot;</span>, &#123;</span><br><span class="line">  inserted (el, binding) &#123;</span><br><span class="line">    <span class="keyword">let</span> permission = binding.value; <span class="comment">// 获取到 v-permission的值</span></span><br><span class="line">    <span class="keyword">if</span> (permission) &#123;</span><br><span class="line">      <span class="keyword">let</span> hasPermission = checkArray(permission);</span><br><span class="line">      <span class="keyword">if</span> (!hasPermission) &#123; <span class="comment">// 没有权限 移除Dom元素</span></span><br><span class="line">        el.parentNode &amp;&amp; el.parentNode.removeChild(el);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>最后我们在页面中就可以通过自定义指令 v-permission 来判断：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btns&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-permission</span>=<span class="string">&quot;&#x27;1&#x27;&quot;</span>&gt;</span>权限按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span>  // 会显示</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-permission</span>=<span class="string">&quot;&#x27;10&#x27;&quot;</span>&gt;</span>权限按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span>  // 无显示</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-permission</span>=<span class="string">&quot;&#x27;demo&#x27;&quot;</span>&gt;</span>权限按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span> // 会显示</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>大前端</category>
      </categories>
      <tags>
        <tag>大前端</tag>
      </tags>
  </entry>
  <entry>
    <title>基础</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="text"><a href="#text" class="headerlink" title="text"></a>text</h3><p>相当于以前 web 中的 span 标签 行内元素 不会换行</p>
<h3 id="view"><a href="#view" class="headerlink" title="view"></a>view</h3><p>相当于以前 web 中的 div 标签 块级元素 会换行</p>
<h3 id="checkbox"><a href="#checkbox" class="headerlink" title="checkbox"></a>checkbox</h3><p>以前的复选框标签</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>2<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="模板字符串语法"><a href="#模板字符串语法" class="headerlink" title="模板字符串语法"></a>模板字符串语法</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1 字符串 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> &#123;&#123;msg&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2 数字类型 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 3 bool类型  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> 是否是伪娘: &#123;&#123;isGirl&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 4 object类型 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;person.age&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;person.height&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;person.weight&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;person.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 5 在标签的属性中使用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-num</span>=<span class="string">&quot;&#123;&#123;num&#125;&#125;&quot;</span>&gt;</span> 自定义属性<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="运算-gt-表达式"><a href="#运算-gt-表达式" class="headerlink" title="运算 =&gt; 表达式"></a>运算 =&gt; 表达式</h3><p>​ 1 可以在花括号中 加入 表达式 – “语句”<br>​ 2 表达式<br>​ 指的是一些简单 运算 数字运算 字符串 拼接 逻辑运算。。<br>​ 1 数字的加减。。<br>​ 2 字符串拼接<br>​ 3 三元表达式<br>​ 3 语句<br>​ 1 复杂的代码段<br>​ 1 if else<br>​ 2 switch<br>​ 3 do while 。。。。<br>​ 4 for 。。。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;1+1&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;&#x27;1&#x27;+&#x27;1&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; 11%2===0 ? &#x27;偶数&#x27; : &#x27;奇数&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="列表循环"><a href="#列表循环" class="headerlink" title="列表循环"></a>列表循环</h3><p>​ 1 wx:for=”“ wx:for-item=”循环项的名称” wx:for-index=”循环项的索引”<br>​ 2 wx:key=”唯一的值” 用来提高列表渲染的性能<br>​ 1 wx:key 绑定一个普通的字符串的时候 那么这个字符串名称 肯定是 循环数组 中的 对象的 唯一属性<br>​ 2 wx:key =”*this” 就表示 你的数组 是一个普通的数组 *this 表示是 循环项<br>​ [1,2,3,44,5]<br>​ [“1”,”222”,”adfdf”]<br>​ 3 当出现 数组的嵌套循环的时候 尤其要注意 以下绑定的名称 不要重名<br>​ wx:for-item=”item” wx:for-index=”index”<br>​ 4 默认情况下 我们 不写<br>​ wx:for-item=”item” wx:for-index=”index”<br>​ 小程序也会把 循环项的名称 和 索引的名称 item 和 index<br>​ 只有一层循环的话 （wx:for-item=”item” wx:for-index=”index”） 可以省略</p>
<h3 id="对象循环"><a href="#对象循环" class="headerlink" title="对象循环"></a>对象循环</h3><p>​ 1 wx:for=”“ wx:for-item=”对象的值” wx:for-index=”对象的属性”<br>​ 2 循环对象的时候 最好把 item 和 index 的名称都修改一下<br>​ wx:for-item=”value” wx:for-index=”key”</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    索引：&#123;&#123;index&#125;&#125; -- 值:&#123;&#123;item.name&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>对象循环<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;person&#125;&#125;&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;value&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;key&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line">    属性:&#123;&#123;key&#125;&#125; -- 值:&#123;&#123;value&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="block"><a href="#block" class="headerlink" title="block"></a>block</h3><p>​ 1 占位符的标签<br>​ 2 写代码的时候 可以看到这标签存在<br>​ 3 页面渲染 小程序会把它移除掉</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:for-item</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:for-index</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;my_list&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    索引：&#123;&#123;index&#125;&#125; -- 值:&#123;&#123;item.name&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><p>​ 1 wx:if=”Infinity“<br>​ 1 if , else , if else<br>​ wx:if<br>​ wx:elif<br>​ wx:else</p>
<h3 id="hidden"><a href="#hidden" class="headerlink" title="hidden"></a>hidden</h3><p>​ 1 在标签上直接加入属性 hidden<br>​ 2 hidden=”true“</p>
<h3 id="什么场景下用哪个"><a href="#什么场景下用哪个" class="headerlink" title="什么场景下用哪个"></a>什么场景下用哪个</h3><p>​ 1 当标签不是频繁的切换显示 优先使用 wx:if<br>​ 直接把标签从 页面结构给移除掉<br>​ 2 当标签频繁的切换显示的时候 优先使用 hidden<br>​ 通过添加样式的方式来切换显示<br>​ hidden 属性 不要和 样式 display 一起使用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>条件渲染<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;flase&#125;&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;flase&#125;&#125;&quot;</span>&gt;</span>2 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span> 3 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>---------------<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>&gt;</span>hidden1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span>&gt;</span>hidden2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>-----000-------<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span>&gt;</span>wx:if<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span>hidden<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><p>1 小程序中 不需要主动来引入样式文件<br>2 需要把页面中某些元素的单位 由 px 改成 rpx<br>1 设计稿 750x<br>750 px = 750 rpx<br>1 px = 1 rpx<br>2 把屏幕宽度 改成 375px<br>375 px = 750 rpx<br>1 px = 2rpx<br>1rpx = 0.5px<br>3 存在一个设计稿 宽度 414 或者 未知 page<br>1 设计稿 page 存在一个元素 宽度 100px<br>2 拿以上的需求 去实现 不同宽度的页面适配</p>
<p>page px = 750 rpx<br>1 px = 750 rpx / page<br>100 px = 750 rpx * 100 / page<br>假设 page = 375px<br>4 利用 一个属性 calc 属性 css 和 wxss 都支持 一个属性<br>1 750 和 rpx 中间不要留空格<br>2 运算符的两边也不要留空格</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">1 引入的 代码 是通过 @import 来引入</span></span><br><span class="line"><span class="comment">2 路径 只能写相对路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../../styles/common.wxss&#x27;</span>;</span><br><span class="line"></span><br><span class="line">view &#123;</span><br><span class="line">  <span class="comment">/* width: 200rpx; */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: aqua;</span><br><span class="line">  <span class="comment">/* 以下代码写法是错误  */</span></span><br><span class="line">  <span class="comment">/*  width:750 rpx * 100 / 375 ;  */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">750</span>rpx * <span class="number">100</span> / <span class="number">375</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="css-中外部文件的引入"><a href="#css-中外部文件的引入" class="headerlink" title="css 中外部文件的引入"></a>css 中外部文件的引入</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">1 引入的 代码 是通过 @import 来引入</span></span><br><span class="line"><span class="comment">2 路径 只能写相对路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../../styles/common.wxss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="使用-less"><a href="#使用-less" class="headerlink" title="使用 less"></a>使用 less</h3><p>less 文件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 1 定义less变量 */</span></span><br><span class="line"><span class="keyword">@color</span>: yellow;</span><br><span class="line">text &#123;</span><br><span class="line">  <span class="comment">/* 2 使用变量 */</span></span><br><span class="line">  <span class="attribute">color</span>: @color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">view &#123;</span><br><span class="line">  <span class="selector-class">.vie1</span> &#123;</span><br><span class="line">    text &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导入 */</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../../styles/reset.less&#x27;</span>;</span><br><span class="line">view &#123;</span><br><span class="line">  <span class="attribute">color</span>: @themeColor;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="comment">/* </span></span><br><span class="line"><span class="comment">  1 less中 支持 两种注释  多行  单行</span></span><br><span class="line"><span class="comment">  2 wxss 不能写 单行注释 因为 写了 和没写是一样！！！</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="comment">/* font-size: 200px; */</span></span><br><span class="line">  // <span class="attribute">font-size</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>css 文件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 1 定义less变量 */</span></span><br><span class="line">text &#123;</span><br><span class="line">  <span class="comment">/* 2 使用变量 */</span></span><br><span class="line">  <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line">view <span class="selector-class">.vie1</span> text &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 导入 */</span></span><br><span class="line">view &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="comment">/* </span></span><br><span class="line"><span class="comment">  1 less中 支持 两种注释  多行  单行</span></span><br><span class="line"><span class="comment">  2 wxss 不能写 单行注释 因为 写了 和没写是一样！！！</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="comment">/* font-size: 200px; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="长按文字复制-selectable"><a href="#长按文字复制-selectable" class="headerlink" title="长按文字复制 selectable"></a>长按文字复制 selectable</h3><p>对文本内容 进行 解码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">selectable</span> <span class="attr">decode</span>&gt;</span> text <span class="symbol">&amp;nbsp;</span> 123 <span class="symbol">&amp;lt;</span> <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="image-图片标签"><a href="#image-图片标签" class="headerlink" title="image 图片标签"></a>image 图片标签</h3><p>1 src 指定要加载的图片的路径<br>图片存在默认的宽度和高度 320 _ 240 原图大小是 200 _ 100<br>2 mode 决定 图片内容 如何 和 图片标签 宽高 做适配<br>1 scaleToFill 默认值 不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素<br>2 aspectFit 保持宽高比 确保图片的长边 显示出来 页面轮播图 常用<br>3 aspectFill 保持纵横比缩放图片，只保证图片的 短 边能完全显示出来。 少用<br>4 widthFix 以前 web 的图片的 宽度指定了之后 高度 会自己按比例来调整 常用<br> 5 bottom。。 类似以前的 backgroud-position<br>3 小程序当中的图片 直接就支持 懒加载 lazy-load<br>1 lazy-load 会自己判断 当 图片 出现在 视口 上下 三屏的高度 之内的时候 自己开始加载图片</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span></span></span><br><span class="line"><span class="tag">  <span class="attr">mode</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">lazy-load</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://tva2.sinaimg.cn/large/007DFXDhgy1g51jlzfb4lj305k02s0sp.jpg&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="轮播图-swiper"><a href="#轮播图-swiper" class="headerlink" title="轮播图 swiper"></a>轮播图 swiper</h3><p>1 轮播图外层容器 swiper<br>2 每一个轮播项 swiper-item<br>3 swiper 标签 存在默认样式<br>1 width 100%<br>2 height 150px image 存在默认宽度和高度 320 _ 240<br>3 swiper 高度 无法实现由内容撑开<br>4 先找出来 原图的宽度和高度 等比例 给 swiper 定 宽度和高度<br>原图的宽度和高度 1125 _ 352 px<br>swiper 宽度 / swiper 高度 = 原图的宽度 / 原图的高度<br>swiper 高度 = swiper 宽度 _ 原图的高度 / 原图的宽度<br>height: 100vw _ 352 / 1125<br>5 autoplay 自动轮播<br>6 interval 修改轮播时间<br>7 circular 衔接轮播<br>8 indicator-dots 显示 指示器 分页器 索引器<br>9 indicator-color 指示器的未选择的颜色<br>10 indicator-active-color 选中的时候的指示器的颜色</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper</span></span></span><br><span class="line"><span class="tag">  <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">  <span class="attr">interval</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">circular</span></span></span><br><span class="line"><span class="tag">  <span class="attr">indicator-dots</span></span></span><br><span class="line"><span class="tag">  <span class="attr">indicator-color</span>=<span class="string">&quot;#0094ff&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">indicator-active-color</span>=<span class="string">&quot;#ff0094&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">&quot;//gw.alicdn.com/imgextra/i1/44/O1CN013zKZP11CCByG5bAeF_!!44-0-lubanu.jpg&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">&quot;//aecpm.alicdn.com/simba/img/TB1CWf9KpXXXXbuXpXXSutbFXXX.jpg_q50.jpg&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">&quot;//gw.alicdn.com/imgextra/i2/37/O1CN01syHZxs1C8zCFJj97b_!!37-0-lubanu.jpg&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">swiper &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* height: calc(100vw * 352 /  1125); */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">31.28vw</span>;</span><br><span class="line">&#125;</span><br><span class="line">image &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="导航组件-navigator"><a href="#导航组件-navigator" class="headerlink" title="导航组件 navigator"></a>导航组件 navigator</h3><p>0 块级元素 默认会换行 可以直接加宽度和高度<br>1 url 要跳转的页面路径 绝对路径 相对路径<br>2 target 要跳转到当前的小程序 还是其他的小程序的页面<br>self 默认值 自己 小程序的页面<br>miniProgram 其他的小程序的页面<br>3 open-type 跳转的方式<br>1 navigate 默认值 保留当前页面，跳转到应用内的某个页面，但是不能跳到 tabbar 页面<br>2 redirect 关闭当前页面，跳转到应用内的某个页面，但是不允许跳转到 tabbar 页面。<br>3 switchTab 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面<br>4 reLaunch 关闭所有页面，打开到应用内的某个页面</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/demo10/demo10&quot;</span>&gt;</span> 轮播图页面 <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/index/index&quot;</span>&gt;</span> 直接跳转到 tabbar页面 <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">open-type</span>=<span class="string">&quot;redirect&quot;</span> <span class="attr">url</span>=<span class="string">&quot;/pages/demo10/demo10&quot;</span>&gt;</span></span><br><span class="line">  轮播图页面 redirect</span><br><span class="line"><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">open-type</span>=<span class="string">&quot;switchTab&quot;</span> <span class="attr">url</span>=<span class="string">&quot;/pages/index/index&quot;</span>&gt;</span></span><br><span class="line">  switchTab直接跳转到 tabbar页面</span><br><span class="line"><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">open-type</span>=<span class="string">&quot;reLaunch&quot;</span> <span class="attr">url</span>=<span class="string">&quot;/pages/index/index&quot;</span>&gt;</span></span><br><span class="line">  reLaunch 可以随便跳</span><br><span class="line"><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="rich-text-富文本标签"><a href="#rich-text-富文本标签" class="headerlink" title="rich-text 富文本标签"></a>rich-text 富文本标签</h3><p>nodes 属性来实现<br>1 接收标签字符串<br>2 接收对象数组</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">nodes</span>=<span class="string">&quot;&#123;&#123;html&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//pages</span></span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">  <span class="attr">html</span>: <span class="string">&#x27;标签字符串 &#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="button-标签"><a href="#button-标签" class="headerlink" title="button 标签"></a>button 标签</h3><p>1 外观的属性<br>1 size 控制按钮的大小<br>1 default 默认大小<br>2 mini 小尺寸<br>2 type 用来控制按钮的颜色<br>1 default 灰色<br>2 primary 绿色<br>3 warn 红色<br>3 plain 按钮是否镂空，背景色透明<br>4 loading 文字前显示正在等待图标</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>默认按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span>mini 默认按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>primary 按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;warn&quot;</span>&gt;</span>warn 按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;warn&quot;</span> <span class="attr">plain</span>&gt;</span>plain 按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">loading</span>&gt;</span>loading 按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>开发能力</p>
<h4 id="open-type："><a href="#open-type：" class="headerlink" title="open-type："></a>open-type：</h4><h4 id="1-contact"><a href="#1-contact" class="headerlink" title="1 contact"></a>1 contact</h4><p>直接打开 客服对话功能 需要在微信小程序的后台配置 只能够通过真机调试来打开</p>
<h4 id="2-share"><a href="#2-share" class="headerlink" title="2 share"></a>2 share</h4><p>转发当前的小程序 到微信朋友中 不能把小程序 分享到 朋友圈</p>
<h4 id="3-getPhoneNumber"><a href="#3-getPhoneNumber" class="headerlink" title="3 getPhoneNumber"></a>3 getPhoneNumber</h4><p>获取当前用户的手机号码信息 结合一个事件来使用 不是企业的小程序账号 没有权限来获取用户的手机号码<br>1 绑定一个事件</p>
<h4 id="bindgetphonenumber"><a href="#bindgetphonenumber" class="headerlink" title="bindgetphonenumber"></a>bindgetphonenumber</h4><p>​ 2 在事件的回调函数中 通过参数来获取信息<br>​ 3 获取到的信息 已经加密过了<br>​ 需要用户自己待见小程序的后台服务器，在后台服务器中进行解析 手机号码，返回到小程序中 就可以看到信息了</p>
<h4 id="4-getUserInfo"><a href="#4-getUserInfo" class="headerlink" title="4 getUserInfo"></a>4 getUserInfo</h4><p>获取当前用户的个人信息<br>1 使用方法 类似 获取用户的手机号码<br>2 可以直接获取 不存在加密的字段</p>
<h4 id="5-launchApp"><a href="#5-launchApp" class="headerlink" title="5 launchApp"></a>5 launchApp</h4><p>在小程序当中 直接打开 app<br>1 需要现在 app 中 通过 app 的某个链接 打开 小程序<br>2 在小程序 中 再通过 这个功能 重新打开 app<br>3 找到 京东的 app 和 京东的小程序</p>
<h4 id="6-openSetting"><a href="#6-openSetting" class="headerlink" title="6 openSetting"></a>6 openSetting</h4><p>打开小程序内置的 授权页面<br>1 授权页面中 只会出现 用户曾经点击过的 权限</p>
<h4 id="7-feedback"><a href="#7-feedback" class="headerlink" title="7 feedback"></a>7 feedback</h4><p>打开 小程序内置的 意见反馈页面<br>1 只能够通过真机调试来打开</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;contact&quot;</span>&gt;</span>contact<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;share&quot;</span>&gt;</span>share<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;getPhoneNumber&quot;</span> <span class="attr">bindgetphonenumber</span>=<span class="string">&quot;getPhoneNumber&quot;</span>&gt;</span></span><br><span class="line">  getPhoneNumber</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span> <span class="attr">bindgetuserinfo</span>=<span class="string">&quot;getUserInfo&quot;</span>&gt;</span></span><br><span class="line">  getUserInfo</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;launchApp&quot;</span>&gt;</span>launchApp<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;openSetting&quot;</span>&gt;</span>openSetting<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;feedback&quot;</span>&gt;</span>feedback<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">// 获取用户的手机号码信息</span></span><br><span class="line">  <span class="function"><span class="title">getPhoneNumber</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取用户个人信息</span></span><br><span class="line">  <span class="function"><span class="title">getUserInfo</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="小程序中的字体图标"><a href="#小程序中的字体图标" class="headerlink" title="小程序中的字体图标"></a>小程序中的字体图标</h3><p>1 type 图标的类型<br>success|success_no_circle|info|warn|waiting|cancel|download|search|clear<br>2 size 大小<br>3 color 图标的颜色</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">icon</span> <span class="attr">type</span>=<span class="string">&quot;cancel&quot;</span> <span class="attr">size</span>=<span class="string">&quot;60&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#0094ff&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="radio-单选框"><a href="#radio-单选框" class="headerlink" title="radio 单选框"></a>radio 单选框</h3><p>1 radio 标签 必须要和 父元素 radio-group 来使用<br>2 value 选中的单选框的值<br>3 需要给 radio-group 绑定 change 事件<br>4 需要在页面中显示 选中的值</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">radio-group</span> <span class="attr">bindchange</span>=<span class="string">&quot;handleChange&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">radio</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">radio</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">radio-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>您选中的是:&#123;&#123;gender&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">handleChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1 获取单选框中的值</span></span><br><span class="line">    <span class="keyword">let</span> gender = e.detail.value</span><br><span class="line">    <span class="comment">// 2 把值 赋值给 data中的数据</span></span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      <span class="comment">// gender:gender</span></span><br><span class="line">      gender,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="复选框-checkbox"><a href="#复选框-checkbox" class="headerlink" title="复选框 checkbox"></a>复选框 checkbox</h3><p>和单选框相同 checkbox-group</p>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><p>创建注册组件</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;component&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用组件</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//<span class="selector-class">.json</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;</span><br><span class="line">    <span class="string">&quot;my-header&quot;</span>: <span class="string">&quot;/components/myHeader/myHeader&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//<span class="selector-class">.wxml</span></span><br><span class="line">&lt;my-<span class="selector-tag">header</span>&gt;&lt;/my-<span class="selector-tag">header</span>&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>子父组件传值</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%AD%90%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/</url>
    <content><![CDATA[<h2 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h2><p>父组件(页面) 向子组件 传递数据 通过 标签属性的方式来传递</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-header</span> <span class="attr">tabs</span>=<span class="string">&quot;&#123;&#123; tabs &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-header</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在子组件上进行接收</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 里面存放的是 要从父组件中接收的数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="comment">// 要接收的数据的名称</span></span><br><span class="line">    <span class="attr">tabs</span>: &#123;</span><br><span class="line">      <span class="comment">// type  要接收的数据的类型</span></span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="comment">// value  默认值</span></span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>把这个数据当成是 data 中的数据直接用即可</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> &#123;&#123; tabs &#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h2><p>子向父传递数据 通过事件的方式传递</p>
<p>在子组件的标签上加入一个事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;hanldeItemTap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        child: <span class="string">&#x27;这是子组件传过来的值&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="built_in">hanldeItemTap</span>(e) &#123;</span><br><span class="line">            this.<span class="built_in">triggerEvent</span>(<span class="string">&quot;itemChange&quot;</span>, this.data.child)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在父组件中接收后使用</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.triggerEvent(<span class="string">&quot;itemChange&quot;</span>, <span class="built_in">this</span>.data.child)</span><br><span class="line">在父组件中</span><br><span class="line">&lt;my-header binditemChange=<span class="string">&quot;handleItemChange&quot;</span>&gt;&lt;/my-header&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">child</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">handleItemChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      <span class="attr">child</span>: e.detail,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-header</span> <span class="attr">binditemChange</span>=<span class="string">&quot;handleItemChange&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-header</span>&gt;</span></span><br><span class="line">//渲染</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; child &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>子：事件</p>
<p>父：自定义事件</p>
<p>点击到子组件的事件 ===》</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> 事件<span class="attr">API</span>=<span class="string">&quot;事件API触发的函数&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>触发子组件中的函数 ===》</p>
<p>子组件函数中的事件监听 this.triggerEvent(“写在父组件中的自定义的事件”, 传递的参数 ); ===》</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">事件API触发的函数(e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(e)</span><br><span class="line">      <span class="built_in">this</span>.triggerEvent(<span class="string">&#x27;父组件中的自定义事件&#x27;</span>, 传递的参数)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>​ 触发父组件中的自定义事件 ===》</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-header</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bind</span>父组件中的自定义事件=<span class="string">&quot;父组件中被自定义事件触发的函数&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">my-header</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​ 父组件中被自定义事件触发的函数 ===》</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">父组件中被自定义事件触发的函数(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      子组件传递的参数: e.detail</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>​ 获取到子组件传给父组件的参数渲染 ===》 end</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; 子组件传递的参数 &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>flex弹性盒模型</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/flex/</url>
    <content><![CDATA[<h1 id="flex-弹性盒模型"><a href="#flex-弹性盒模型" class="headerlink" title="flex 弹性盒模型"></a>flex 弹性盒模型</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: flex;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">作用在 flex 容器上</th>
<th align="center">作用在 flex 子项</th>
</tr>
</thead>
<tbody><tr>
<td align="center">flex-direction</td>
<td align="center">order</td>
</tr>
<tr>
<td align="center">flex-wrap</td>
<td align="center">flex-grow</td>
</tr>
<tr>
<td align="center">flex-flow</td>
<td align="center">flex-shrink</td>
</tr>
<tr>
<td align="center">justify-content</td>
<td align="center">flex-basis</td>
</tr>
<tr>
<td align="center">align-items</td>
<td align="center">flex</td>
</tr>
<tr>
<td align="center"><code>align-centent</code></td>
<td align="center">align-self</td>
</tr>
</tbody></table>
<h2 id="1、flex-direction"><a href="#1、flex-direction" class="headerlink" title="1、flex-direction"></a>1、<code>flex-direction</code></h2><ul>
<li><h6 id="flex-direction用来控制子项整体布局方向，是从左往右还是从右往左，是从上往下还是从下往上。"><a href="#flex-direction用来控制子项整体布局方向，是从左往右还是从右往左，是从上往下还是从下往上。" class="headerlink" title="flex-direction用来控制子项整体布局方向，是从左往右还是从右往左，是从上往下还是从下往上。"></a><code>flex-direction</code>用来控制子项整体布局方向，是从左往右还是从右往左，是从上往下还是从下往上。</h6></li>
</ul>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">row</td>
<td align="center">默认值，显示为行。方向为当前文档水平流方向，默认情况下是从左往右。(从左向右排列)</td>
</tr>
<tr>
<td align="center">row-reverse</td>
<td align="center">显示为行。但方向和 row 属性值是反的（从右向左排列）</td>
</tr>
<tr>
<td align="center">column</td>
<td align="center">显示为列（从上向下排列）</td>
</tr>
<tr>
<td align="center">clunmn-reverse</td>
<td align="center">显示为列，但方向和 column 属性值是反的（从下向上排列）</td>
</tr>
</tbody></table>
<h2 id="2、flex-wrap"><a href="#2、flex-wrap" class="headerlink" title="2、flex-wrap"></a>2、<code>flex-wrap</code></h2><ul>
<li><h6 id="flex-wrap用来控制子项整体是单行显示还是换行显示。"><a href="#flex-wrap用来控制子项整体是单行显示还是换行显示。" class="headerlink" title="flex-wrap用来控制子项整体是单行显示还是换行显示。"></a><code>flex-wrap</code>用来控制子项整体是单行显示还是换行显示。</h6></li>
</ul>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>nowrap</code></td>
<td align="center">默认值，表示单行显示，不换行</td>
</tr>
<tr>
<td align="center">wrap</td>
<td align="center">宽度不足换行显示</td>
</tr>
<tr>
<td align="center">wrap-reverse</td>
<td align="center">宽度不足换行显示，但是从下往上开始，也就是原本换行在下面的子项现在跑到上面。</td>
</tr>
</tbody></table>
<h2 id="3、flex-flow"><a href="#3、flex-flow" class="headerlink" title="3、flex-flow"></a>3、flex-flow</h2><ul>
<li><h6 id="flex-flow-属性是flex-directinon和-flex-wrap-的缩写，表示-flex-布局的-flow-流动特性。第一个值表示方向，第二个值表示换行，中间用空格隔开。"><a href="#flex-flow-属性是flex-directinon和-flex-wrap-的缩写，表示-flex-布局的-flow-流动特性。第一个值表示方向，第二个值表示换行，中间用空格隔开。" class="headerlink" title="flex-flow 属性是flex-directinon和 flex-wrap 的缩写，表示 flex 布局的 flow 流动特性。第一个值表示方向，第二个值表示换行，中间用空格隔开。"></a>flex-flow 属性是<code>flex-directinon</code>和 flex-wrap 的缩写，表示 flex 布局的 flow 流动特性。第一个值表示方向，第二个值表示换行，中间用空格隔开。</h6></li>
<li><pre><code class="css">flex-flow：column wrap；
</code></pre>
</li>
</ul>
<h2 id="4、-justify-content"><a href="#4、-justify-content" class="headerlink" title="4、 justify-content"></a>4、 justify-content</h2><ul>
<li><h6 id="justify-content-属性决定了主轴方向上子项的对齐和分布方式。"><a href="#justify-content-属性决定了主轴方向上子项的对齐和分布方式。" class="headerlink" title="justify-content 属性决定了主轴方向上子项的对齐和分布方式。"></a>justify-content 属性决定了主轴方向上子项的对齐和分布方式。</h6></li>
</ul>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">flex-start</td>
<td align="center">默认值，表现为起始位置对齐</td>
</tr>
<tr>
<td align="center">flex-end</td>
<td align="center">表现为结束位置对齐</td>
</tr>
<tr>
<td align="center">center</td>
<td align="center">表现为居中对齐</td>
</tr>
<tr>
<td align="center">space-between</td>
<td align="center">表现为两端对齐。between 是中间的意思，意思是多余的空白间距只在元素中间区域分配。</td>
</tr>
<tr>
<td align="center">space-around</td>
<td align="center">around 是环绕的意思，意思是每个 flex 子项两侧都环绕互不干扰的等宽的空白间距，最终视觉上边缘两侧的空白只有中间空白宽度一半。</td>
</tr>
<tr>
<td align="center">space-evenly</td>
<td align="center">evenly 是匀称、平等的意思。也就是视觉上，每个 flex 子项两侧空白间距完全相等。</td>
</tr>
</tbody></table>
<h2 id="5、align-items"><a href="#5、align-items" class="headerlink" title="5、align-items"></a>5、align-items</h2><ul>
<li><h6 id="align-items-中的-items-值得就是-flex-子项们，因此-align-items-指的就是-flex-子项们相对于-flex-容器在侧轴方向上的对齐方式。"><a href="#align-items-中的-items-值得就是-flex-子项们，因此-align-items-指的就是-flex-子项们相对于-flex-容器在侧轴方向上的对齐方式。" class="headerlink" title="align-items 中的 items 值得就是 flex 子项们，因此 align-items 指的就是 flex 子项们相对于 flex 容器在侧轴方向上的对齐方式。"></a>align-items 中的 items 值得就是 flex 子项们，因此 align-items 指的就是 flex 子项们相对于 flex 容器在侧轴方向上的对齐方式。</h6></li>
</ul>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">stretch</td>
<td align="center">默认值，flex 子项拉伸</td>
</tr>
<tr>
<td align="center">flex-start</td>
<td align="center">表现为容器顶部对齐</td>
</tr>
<tr>
<td align="center">flex-end</td>
<td align="center">表现为容器底部对齐</td>
</tr>
<tr>
<td align="center">center</td>
<td align="center">表现为垂直居中对齐</td>
</tr>
</tbody></table>
<h2 id="6、align-content"><a href="#6、align-content" class="headerlink" title="6、align-content"></a>6、align-content</h2><ul>
<li><h6 id="align-content-可以看成和-justify-content-是相似且对立的属性，如果所有-flex-子项只有一行则-align-content-属性是没有任何效果的。"><a href="#align-content-可以看成和-justify-content-是相似且对立的属性，如果所有-flex-子项只有一行则-align-content-属性是没有任何效果的。" class="headerlink" title="align-content 可以看成和 justify-content 是相似且对立的属性，如果所有 flex 子项只有一行则 align-content 属性是没有任何效果的。"></a>align-content 可以看成和 justify-content 是相似且对立的属性，如果所有 flex 子项只有一行则 align-content 属性是没有任何效果的。</h6></li>
</ul>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">stretch</td>
<td align="center">默认值。每一行 flex 子元素都等比例拉伸。例如，如果共两行 flex 子元素，则每一行拉伸高度是 50%。</td>
</tr>
<tr>
<td align="center">flex-start</td>
<td align="center">表现为起始位置对齐</td>
</tr>
<tr>
<td align="center">flex-end</td>
<td align="center">表现为结束位置对齐。</td>
</tr>
<tr>
<td align="center">center</td>
<td align="center">表现为居中对齐。</td>
</tr>
<tr>
<td align="center">space-between</td>
<td align="center">表现为两端对齐。</td>
</tr>
<tr>
<td align="center">space-around</td>
<td align="center">每一行元素上下都有享有独立不重叠的空白空间</td>
</tr>
<tr>
<td align="center">space-evenly</td>
<td align="center">每一行元素都完全上下等分</td>
</tr>
</tbody></table>
<h2 id="7、作用在-flex-子项上的css属性"><a href="#7、作用在-flex-子项上的css属性" class="headerlink" title="7、作用在 flex 子项上的css属性"></a>7、作用在 flex 子项上的<code>css</code>属性</h2><blockquote>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">order</td>
<td align="center">可以通过设置 order 改变某一个 flex 子项的排序位置。所有 flex 子项的默认 order 属性值是 0.</td>
</tr>
<tr>
<td align="center">flex-grow</td>
<td align="center">属性中的 grow 是扩展的意思，扩展的就是 flex 子项所占据的宽度，扩展所侵占的空间就是除去元素外的剩余的空白间隙。默认值是 0.</td>
</tr>
<tr>
<td align="center">flex-shrink</td>
<td align="center">属性中的 shrink 是“收缩”的意思，flex-shrink 主要处理当 flex 容器空间不足时候，单个元素的收缩比例。默认值是 1.</td>
</tr>
<tr>
<td align="center">flex-basis</td>
<td align="center">flex-basis 定义了在分配剩余空间之前元素的默认大小。</td>
</tr>
<tr>
<td align="center">flex</td>
<td align="center">flex 属性是 flex-grow，flex-shrink 和 flex-basis 的缩写。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>flex：0 1 auto；</code>（默认值）</td>
</tr>
<tr>
<td align="center">align-self</td>
<td align="center">align-self 指控制单独某一个 flex 子项的垂直对齐方式。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">align-self 和 align-items 功能相同作用对象不同</td>
</tr>
</tbody></table>
</blockquote>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>grid网格布局</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/grid/</url>
    <content><![CDATA[<h1 id="grid-网格布局"><a href="#grid-网格布局" class="headerlink" title="grid 网格布局"></a>grid 网格布局</h1><ul>
<li><p>​ grid 布局是一个二维的布局方法，纵横两个方向总是同时存在。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>：grid；</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">作用在 grid 容器上</th>
<th align="center">作用在 grid 子项上</th>
</tr>
</thead>
<tbody><tr>
<td align="center">grid-template-columns</td>
<td align="center">grid-column-start</td>
</tr>
<tr>
<td align="center">grid-template-rows</td>
<td align="center">grid-column-end</td>
</tr>
<tr>
<td align="center">grid-template-ares</td>
<td align="center">grid-row-start</td>
</tr>
<tr>
<td align="center">grid-column-gap</td>
<td align="center">grid-cloumn</td>
</tr>
<tr>
<td align="center">grid-gap</td>
<td align="center">grid-row</td>
</tr>
<tr>
<td align="center">justify-items</td>
<td align="center">grid-area</td>
</tr>
<tr>
<td align="center">align-items</td>
<td align="center">align-self</td>
</tr>
<tr>
<td align="center">palace-items</td>
<td align="center">place-self</td>
</tr>
<tr>
<td align="center">justify-content</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">align-content</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">space-content</td>
<td align="center"></td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="1、grid-template-cloumns-和-grid-template-rows"><a href="#1、grid-template-cloumns-和-grid-template-rows" class="headerlink" title="1、grid-template-cloumns 和 grid-template-rows"></a>1、grid-template-cloumns 和 grid-template-rows</h2><ul>
<li><p>对网格进行纵横划分，形成二维布局。单位可以使像素，百分比，自适应以及 fr 单位（网格剩余空间比例单位）。</p>
</li>
<li><pre><code class="css">grid-template-cloumns：1fr 1fr 1fr；（三行，每行三分之一）
grid-template-rows：1fr 1fr 1fr；（三列，每列三分之一）
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 有时候，我们网格的划分是很规律的，如果需要添加多个纵横网格时，可以利用 repeat（）语法进行简化操作。</span><br><span class="line"></span><br><span class="line">- 简写方式：</span><br><span class="line"></span><br><span class="line">- ```css</span><br><span class="line">  grid-template-cloumns：repeat（3,1fr）；（三行，每行三分之一）</span><br><span class="line">  grid-template-rows：repeat（3,1fr）；（三列，每列三分之一）</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="2、grid-template-areas-和-grid-template"><a href="#2、grid-template-areas-和-grid-template" class="headerlink" title="2、grid-template-areas 和 grid-template"></a>2、grid-template-areas 和 grid-template</h2><ul>
<li><p>area 是区域的意思，grid-template-areas 就是给我们的网格划分区域的。此时 grid 子项只要使用 grid-area 属性指定其隶属于那个区。</p>
</li>
<li><pre><code class="css">grid-template-ateas：
                        “a1 a1 a1”
                        “a2 a2 a3”
                        “a2 a2 a3”；
                        grid-area：a1；
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- grid-template 是 grid-template-rows，grid-template-cloumns 和 grid-template-areas 属性的缩写。</span><br><span class="line"></span><br><span class="line">- ```css</span><br><span class="line">  grid-template：</span><br><span class="line">                  “a1 a1 a1” 1fr</span><br><span class="line">                  “a2 a2 a3” 1fr</span><br><span class="line">                  “a2 a2 a3” 1fr</span><br><span class="line">                  /1fr 1fr 1fr;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="3、grid-column-gap-和-grid-row-gap"><a href="#3、grid-column-gap-和-grid-row-gap" class="headerlink" title="3、grid-column-gap 和 grid-row-gap"></a>3、grid-column-gap 和 grid-row-gap</h2><ul>
<li><p>​ grid-column-gap 和 grid-row-gap 属性用来定义网格中网格间隙的尺寸。</p>
</li>
<li><pre><code class="css">grid-column-gap：**px；grid-row-gap：**px；
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- CSS grid-gap 属性是 grid-column-gap 和 grid-row-gap 属性的缩写。</span><br><span class="line"></span><br><span class="line">- ```css</span><br><span class="line">  grid-gap：横向间距px 纵向间距px；</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="4、justify-itemsalign-items"><a href="#4、justify-itemsalign-items" class="headerlink" title="4、justify-itemsalign-items"></a>4、justify-itemsalign-items</h2><ul>
<li><p>​ justify-items 指定了网格元素的水平呈现方式，是水平拉伸显示，还是左中右对齐。</p>
</li>
<li><table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">stretch</td>
<td align="center">默认值，拉伸。表现为水平或垂直填充。</td>
</tr>
<tr>
<td align="center">start</td>
<td align="center">表现为容器左侧或顶部对齐</td>
</tr>
<tr>
<td align="center">end</td>
<td align="center">表现为容器右侧或底部对齐</td>
</tr>
<tr>
<td align="center">center</td>
<td align="center">表现为水平或垂直居中对齐</td>
</tr>
</tbody></table>
</li>
<li><p>​ align-items 指定了网格元素的垂直呈现方式，是垂直拉伸显示，还是上中下对齐。</p>
</li>
<li><p>​ placa-items 可以让 align-items 和 justify-items 属性写在单个声明中。</p>
<ul>
<li><pre><code class="css">place-items：start end；
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="5、justify-congtent-和-align-congtent"><a href="#5、justify-congtent-和-align-congtent" class="headerlink" title="5、justify-congtent 和 align-congtent"></a>5、justify-congtent 和 align-congtent</h2><ul>
<li><p>​ justify-content 指定了网格元素的水平分布方式。</p>
</li>
<li><p>​ align-content 指定了网格元素的垂直分布方式。</p>
</li>
<li><table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">stretch</td>
<td align="center">默认值，拉伸。表现为水平或垂直填充。</td>
</tr>
<tr>
<td align="center">start</td>
<td align="center">表现为容器左侧或顶部对齐</td>
</tr>
<tr>
<td align="center">end</td>
<td align="center">表现为容器右侧或底部对齐</td>
</tr>
<tr>
<td align="center">center</td>
<td align="center">表现为水平或垂直居中对齐</td>
</tr>
<tr>
<td align="center">space-between</td>
<td align="center">表现为两端对齐</td>
</tr>
<tr>
<td align="center">space-around</td>
<td align="center">享有独立不重叠的空白空间</td>
</tr>
<tr>
<td align="center">space-evenly</td>
<td align="center">平均分配空白空间</td>
</tr>
</tbody></table>
</li>
<li><p>​ place-content 可以让 align-content 和 justify-content 属性写在一个 css 声明中。</p>
</li>
</ul>
<h2 id="6、作用在-grid-子项上的-css-属性"><a href="#6、作用在-grid-子项上的-css-属性" class="headerlink" title="6、作用在 grid 子项上的 css 属性"></a>6、作用在 grid 子项上的 css 属性</h2><table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">grid-column-start</td>
<td align="center">水平方向上占据的起始位置。（值是第 x 条线）</td>
</tr>
<tr>
<td align="center">grid-column-end</td>
<td align="center">水平方向上占据的结束位置。（span 属性）</td>
</tr>
<tr>
<td align="center">grid-row-start</td>
<td align="center">垂直方向上占据的起始位置。（值是第 x 条线）</td>
</tr>
<tr>
<td align="center">grid-row-end</td>
<td align="center">垂直方向上占据的结束位置。（span 属性 单位）</td>
</tr>
<tr>
<td align="center">grid-column</td>
<td align="center">grid-column-start+grid-cloumn-end 的缩写。grid-column：2/3;</td>
</tr>
<tr>
<td align="center">grid-row</td>
<td align="center">grid-row-start+grid-row-end 的缩写。 grid-row:2/3；</td>
</tr>
<tr>
<td align="center">grid-area</td>
<td align="center">表示当前网格所占用的区域，名字和位置两种表示方法。grid-area：2/2/2/2;横向的起始/纵向的起始/横向的结束/纵向的结束；</td>
</tr>
<tr>
<td align="center">justify-self</td>
<td align="center">单个网格元素的水平对齐方式</td>
</tr>
<tr>
<td align="center">align-self</td>
<td align="center">单个网格元素的垂直对齐方式</td>
</tr>
<tr>
<td align="center">place-self</td>
<td align="center">align-self 和 justify-self 的缩写</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>zepto+touch插件</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/zepto+touch%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/common.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/rem.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/touch-0.2.14.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/zepto.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0.2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#app</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0.1rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0.2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">0.32rem</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//所有的事件名称都是touch.js声明的</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box1&#x27;</span>).on(<span class="string">&#x27;tap&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box1被单击了&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box2&#x27;</span>).on(<span class="string">&#x27;doubletap&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box2被双击了&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box3&#x27;</span>).on(<span class="string">&#x27;swipe&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box3触发了滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box4&#x27;</span>).on(<span class="string">&#x27;swipeleft&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box4触发了左滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box5&#x27;</span>).on(<span class="string">&#x27;swiperight&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box5触发了右滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box6&#x27;</span>).on(<span class="string">&#x27;swipeup&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box6触发了上滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box7&#x27;</span>).on(<span class="string">&#x27;swipedown&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box7触发了下滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box8&#x27;</span>).on(<span class="string">&#x27;hold&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box8触发了长按事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>单击事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>双击事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span>滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span>左滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span>右滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box6&quot;</span>&gt;</span>上滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box7&quot;</span>&gt;</span>下滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box8&quot;</span>&gt;</span>长按事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>touch对象详情</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/touch%E5%AF%B9%E8%B1%A1%E8%AF%A6%E6%83%85/</url>
    <content><![CDATA[<h1 id="touch-对象详情"><a href="#touch-对象详情" class="headerlink" title="touch 对象详情"></a>touch 对象详情</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>touch对象详情<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/rem.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> app = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    app.addEventListener(</span></span><br><span class="line"><span class="javascript">      <span class="string">&#x27;touchstart&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> touch = e.touches[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> id = touch.identifier</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> target = touch.target</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> clientX = touch.clientX</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> clientY = touch.clientY</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> pageX = touch.pageX</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> pageY = touch.pageY</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> screenX = touch.screenX</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> screenY = touch.screenY</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> box = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.box&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> str = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`id=<span class="subst">$&#123;id&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`target.nodeName=<span class="subst">$&#123;target.nodeName&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`clientX=<span class="subst">$&#123;clientX&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`clientY=<span class="subst">$&#123;clientY&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`pageX=<span class="subst">$&#123;pageX&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`pageY=<span class="subst">$&#123;pageY&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`screenX=<span class="subst">$&#123;screenX&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        str += <span class="string">`screenY=<span class="subst">$&#123;screenY&#125;</span>&lt;br/&gt;`</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.style.backgroundColor = <span class="string">&#x27;blue&#x27;</span></span></span><br><span class="line"><span class="javascript">        box.innerHTML = str</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">      <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    )</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>事件模型</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th align="center">事件</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>touchstart</code></td>
<td align="center">手指刚接触屏幕时触发</td>
</tr>
<tr>
<td align="center"><code>touchmove</code></td>
<td align="center">手指在屏幕上移动时触发</td>
</tr>
<tr>
<td align="center"><code>touchend</code></td>
<td align="center">手指从屏幕上移开时触发</td>
</tr>
<tr>
<td align="center"><code>touchcancel</code></td>
<td align="center">一些更高级别的操作</td>
</tr>
</tbody></table>
<h2 id="移动端事件"><a href="#移动端事件" class="headerlink" title="移动端事件"></a>移动端事件</h2><ol>
<li><p>点击事件</p>
</li>
<li><p>双击事件</p>
</li>
<li><p>滑动事件</p>
<ul>
<li>上滑、下滑、左滑、右滑</li>
</ul>
</li>
<li><p>长按事件</p>
</li>
<li><p>摇一摇、重力感应等</p>
</li>
</ol>
<h2 id="touch-事件模型"><a href="#touch-事件模型" class="headerlink" title="touch 事件模型"></a>touch 事件模型</h2><ol>
<li><code>touchstart</code> 手指刚接触屏幕时触发</li>
<li><code>touchmove</code> 手指在屏幕上移动时触发</li>
<li><code>touchend</code> 手指从屏幕上移开时触发</li>
<li><code>touchcancel</code> 一些更高级别的事件发生时（如电话接入或者弹出信息）会取消当前的 touch 操作，即触发<code>touchcancel</code>。一般会在<code>touchcancel</code>时暂停游戏、存档等操作</li>
</ol>
<p>* 在 Chrome 移动模拟器中模拟，发现鼠标触摸 span 元素没有任何效果 解决方法：<code>addEventListener</code></p>
<h2 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener"></a><code>addEventListener</code></h2><ol>
<li><p>是一个侦听事件并处理相应的函数</p>
</li>
<li><p>一般有三个参数，第一个是事件的类型，第二个是侦听到事件后处理事件的函数，第三个参数是事件捕获（值就只有两个，true 或 false）</p>
</li>
<li><pre><code class="javascript">app.addEventListener(&#39;事件&#39;,function()&#123;
    ...
&#125;,false)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 跟踪触摸的属性</span><br><span class="line"></span><br><span class="line">1. touches：表示当前跟踪的触摸操作的 touch 对象的数组</span><br><span class="line"></span><br><span class="line">2. - 当一个手指在触屏上时，`event.touches.length=1`</span><br><span class="line">   - 当两个手指在触屏上时，`event.touches.length=2`，以此类推</span><br><span class="line"></span><br><span class="line">3. `changedTouches`：导致触摸事件被触发的触摸点数组</span><br><span class="line"></span><br><span class="line">4. `targetTouches`：特定于事件目标的 touch 对象数组</span><br><span class="line"></span><br><span class="line">## 触摸事件坐标</span><br><span class="line"></span><br><span class="line">|    属性    |           属性            |</span><br><span class="line">| :--------: | :-----------------------: |</span><br><span class="line">| `clientX`  | 触摸目标在视口中的 x 坐标 |</span><br><span class="line">| `clientY`  | 触摸目标在视口中的 y 坐标 |</span><br><span class="line">| identifier |     标识触摸的唯一 ID     |</span><br><span class="line">|  `pageX`   | 触摸目标在页面中的 x 坐标 |</span><br><span class="line">|  `pageY`   | 触摸目标在页面中的 y 坐标 |</span><br><span class="line">| `screenX`  | 触摸目标在屏幕中的 x 坐标 |</span><br><span class="line">| `screenY`  | 触摸目标在屏幕中的 y 坐标 |</span><br><span class="line">|  `target`  |    触摸的 DOM 节点目标    |</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">/* 触摸事件坐标的使用方法 */</span><br><span class="line">function handleTouch(e)&#123;</span><br><span class="line">//  如果需要，用pageX或pageY代替clientX或clientY</span><br><span class="line">var touch = e.changedTouches[0];</span><br><span class="line">var coorX = touch.clientX;</span><br><span class="line">var coorY = touch.clientY;</span><br><span class="line">&#125;</span><br><span class="line">* clientX/Y和pageX/Y的区别在于前者相对于视觉视口的左上角，后者相对布局视口的左上角。布局视口 是可以滚动的</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
<h2 id="移动端事件封装"><a href="#移动端事件封装" class="headerlink" title="移动端事件封装"></a>移动端事件封装</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 单击事件 */</span></span><br><span class="line">element.addEventListener(‘touchstart‘, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> touches = e.touches[<span class="number">0</span>];</span><br><span class="line">    startTx = touches.clientX;</span><br><span class="line">    startTy = touches.clientY;</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">* 案例中通过调用tap（封装的单击事件），可以很大程度上简化代码量，方便我们开发</span><br><span class="line"><span class="comment">/* 长按事件 */</span></span><br><span class="line"><span class="keyword">var</span> touches = e.touches[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 长按 750ms 才去执行 fn函数</span></span><br><span class="line">lTapTimer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  fn();  &#125;, <span class="number">750</span>);</span><br><span class="line">e.preventDefault();</span><br><span class="line">* 在touchmove中需要判断水平或者垂直方向的坐标距离，如果大于某个值，我们就不再认为是长按操作了</span><br></pre></td></tr></table></figure>

<h2 id="FastClick库"><a href="#FastClick库" class="headerlink" title="FastClick库"></a><code>FastClick</code>库</h2><ol>
<li><p>定义</p>
</li>
<li><ul>
<li>一个简单易用的库，用于消除 click 移动浏览器上物理点击和事件触发之间的 300 毫秒延迟</li>
</ul>
</li>
<li><p>网址</p>
</li>
<li><ul>
<li><a href="https://github.com/ftlabs/fastclick">https://github.com/ftlabs/fastclick</a></li>
<li>截至 2015 年底，大多数移动浏览器（特别是 Chrome 和 Safari）不再具有<code>300ms</code>的触摸延迟，因此<code>fastclick</code>对新型浏览器没有任何好处，并且可能会在应用程序中引入错误。仔细考虑你是否真的需要使用它</li>
</ul>
</li>
<li><p>使用方法</p>
</li>
<li><ul>
<li><p>引入插件的<code>javascript</code>文件到你的 HTML 网页中</p>
</li>
<li><pre><code class="html">&lt;script type=&quot;application/javascript&quot; src=&quot;/path/to/fastclick.js&quot;&gt;&lt;/script&gt;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - 注意：</span><br><span class="line"></span><br><span class="line">   - - type 属性在`HTML5`网页中可以省略不写</span><br><span class="line">     - 脚本必须加载到实例化`fastclick`在页面的任何元素之前</span><br><span class="line">     - 实例化 `fastclick` 最好在 body 元素的前面</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">1 /*  实例化 */</span><br><span class="line">2 if (‘addEventListener‘ in document) &#123;</span><br><span class="line">3     document.addEventListener(‘DOMContentLoaded‘, function() &#123;</span><br><span class="line">4         FastClick.attach(document.body);</span><br><span class="line">5     &#125;, false);</span><br><span class="line">6 &#125;</span><br><span class="line">7 * 引入库和实例化推荐写到body元素的前面</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ol>
<h2 id="移动端事件库"><a href="#移动端事件库" class="headerlink" title="移动端事件库"></a>移动端事件库</h2><ol>
<li><p><code>touch.js</code></p>
</li>
<li><ul>
<li>百度<code>touch.js</code> 是 Web 移动端 touch 点击事件不错的解决方案</li>
</ul>
</li>
<li><p>网站</p>
</li>
<li><ul>
<li><a href="https://github.com/Clouda-team/touchjs">https://github.com/Clouda-team/touchjs</a></li>
</ul>
</li>
<li><p>支持移动端事件</p>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">操作</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>tap</code></td>
<td align="center">单击屏幕</td>
</tr>
<tr>
<td align="center"><code>doubletap</code></td>
<td align="center">双击屏幕</td>
</tr>
<tr>
<td align="center"><code>hold</code></td>
<td align="center">长安屏幕</td>
</tr>
<tr>
<td align="center"><code>swipe</code></td>
<td align="center">滑动</td>
</tr>
<tr>
<td align="center"><code>swipeleft</code></td>
<td align="center">向左滑动</td>
</tr>
<tr>
<td align="center"><code>swiperight</code></td>
<td align="center">向右滑动</td>
</tr>
<tr>
<td align="center"><code>swipeup</code></td>
<td align="center">向上滑动</td>
</tr>
<tr>
<td align="center"><code>swipedown</code></td>
<td align="center">向下滑动</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>商品排序</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E5%95%86%E5%93%81%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>响应式布局<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;link rel=&quot;shortcut icon&quot; href=&quot;../img/logo.png&quot; type=&quot;image/x-icon&quot; /&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/common.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/demo.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- banner --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../img/banner.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 2、导航列表 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav-list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 3、图文列表 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/demo.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述 请求数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-09-21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    axios</span><br><span class="line">      .get(<span class="string">&#x27;../js/msg.json&#x27;</span>)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        resolve(res.data)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        reject(e)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">rander</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; arrNav, goodList &#125; = <span class="keyword">await</span> request()</span><br><span class="line">  <span class="built_in">console</span>.log(arrNav)</span><br><span class="line">  <span class="built_in">console</span>.log(goodList)</span><br><span class="line">  <span class="comment">//先拼接ul</span></span><br><span class="line">  <span class="keyword">let</span> ul = <span class="string">&#x27;&lt;ul&gt;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arrNav.length; i++) &#123;</span><br><span class="line">    ul += <span class="string">`&lt;li&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;item&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;text&quot;&gt;<span class="subst">$&#123;arrNav[i]&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;arrow-right&quot;&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  ul += <span class="string">&#x27;&lt;/ul&gt;&#x27;</span></span><br><span class="line">  <span class="keyword">let</span> navList = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;nav-list&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">  <span class="built_in">console</span>.log(navList)</span><br><span class="line">  navList.innerHTML = ul</span><br><span class="line"></span><br><span class="line">  <span class="comment">//拼接商品</span></span><br><span class="line">  <span class="keyword">let</span> goods = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; goodList.length; i++) &#123;</span><br><span class="line">    goods += <span class="string">`&lt;div class=&quot;goods-wrap&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;item&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;img src=&quot;<span class="subst">$&#123;goodList[i].goodsImg&#125;</span>&quot; alt=&quot;&quot; class=&quot;goods-img&quot; /&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&#x27;goods-desc&#x27;&gt;<span class="subst">$&#123;goodList[i].goodsDesc&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&#x27;price&#x27;&gt;￥<span class="subst">$&#123;goodList[i].price&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;price-befor&quot;&gt;￥<span class="subst">$&#123;goodList[i][<span class="string">&#x27;price-befor&#x27;</span>]&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;buy&quot;&gt;点击购买&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> gdsList = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;goods-list&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">  gdsList.innerHTML = goods</span><br><span class="line">  <span class="built_in">Math</span>.random()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//一加载页面，就渲染数据</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  rander()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#011b58</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">320px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//1、banner样式</span></span><br><span class="line">  <span class="selector-class">.banner</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">img</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2、导航列表</span></span><br><span class="line">  <span class="selector-class">.nav-list</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">ul</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">      <span class="selector-tag">li</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0.05rem</span>;</span><br><span class="line">        <span class="attribute">color</span>: white;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.item</span> &#123;</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">0.05rem</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="number">#6745b5</span>;</span><br><span class="line">          <span class="attribute">position</span>: relative;</span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">0rem</span> <span class="number">0.1rem</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">0.5rem</span>;</span><br><span class="line">          <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.text</span> &#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">0.24rem</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">transform</span>: translate(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.arrow-right</span> &#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">0.18rem</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">0.22rem</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.22rem</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: <span class="number">#011b58</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">right</span>: <span class="number">0.1rem</span>;</span><br><span class="line">            <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">transform</span>: translateY(-<span class="number">50%</span>);</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">0.05rem</span>;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">align-items</span>: center;</span><br><span class="line">            <span class="attribute">justify-content</span>: center;</span><br><span class="line">            <span class="attribute">font-weight</span>: bold;</span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">span</span> &#123;</span><br><span class="line">              <span class="attribute">margin-top</span>: -<span class="number">0.02rem</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//3、商品列表</span></span><br><span class="line">  <span class="selector-class">.goods-list</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.goods-wrap</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">      <span class="attribute">float</span>: left;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0.1rem</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.item</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0.2rem</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">0.1rem</span>;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.goods-img</span> &#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">0.2rem</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.goods-desc</span> &#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">          <span class="attribute">overflow</span>: hidden;</span><br><span class="line">          <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">          <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">0.2rem</span>;</span><br><span class="line">          <span class="attribute">font-weight</span>: bold;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.price</span> &#123;</span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">0.2rem</span>;</span><br><span class="line">          <span class="attribute">font-weight</span>: bold;</span><br><span class="line">          <span class="attribute">color</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.price-befor</span> &#123;</span><br><span class="line">          <span class="attribute">color</span>: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.603</span>);</span><br><span class="line">          <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.buy</span> &#123;</span><br><span class="line">          <span class="attribute">position</span>: absolute;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">0.5rem</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: red;</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">0.2rem</span>;</span><br><span class="line">          <span class="attribute">bottom</span>: <span class="number">0.1rem</span>;</span><br><span class="line">          <span class="attribute">right</span>: <span class="number">0.1rem</span>;</span><br><span class="line">          <span class="attribute">text-align</span>: center;</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">0.05rem</span>;</span><br><span class="line">          <span class="attribute">font-weight</span>: bold;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="selector-class">.nav-list</span> &#123;</span><br><span class="line">      <span class="selector-tag">ul</span> &#123;</span><br><span class="line">        <span class="selector-tag">li</span> &#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.goods-list</span> &#123;</span><br><span class="line">      <span class="selector-class">.goods-wrap</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">33.33333%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">480px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="selector-class">.nav-list</span> &#123;</span><br><span class="line">      <span class="selector-tag">ul</span> &#123;</span><br><span class="line">        <span class="selector-tag">li</span> &#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.item</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.4rem</span>;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.text</span> &#123;</span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">0.16rem</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.arrow-right</span> &#123;</span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">0.16rem</span>;</span><br><span class="line">              <span class="attribute">width</span>: <span class="number">0.2rem</span>;</span><br><span class="line">              <span class="attribute">height</span>: <span class="number">0.2rem</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.goods-list</span> &#123;</span><br><span class="line">      <span class="selector-class">.goods-wrap</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">479px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="selector-class">.nav-list</span> &#123;</span><br><span class="line">      <span class="selector-tag">ul</span> &#123;</span><br><span class="line">        <span class="selector-tag">li</span> &#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">33.33333%</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.item</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.35rem</span>;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.text</span> &#123;</span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">0.14rem</span>;</span><br><span class="line">              <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.arrow-right</span> &#123;</span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">0.14rem</span>;</span><br><span class="line">              <span class="attribute">width</span>: <span class="number">0.16rem</span>;</span><br><span class="line">              <span class="attribute">height</span>: <span class="number">0.16rem</span>;</span><br><span class="line">              <span class="attribute">right</span>: <span class="number">0.03rem</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.goods-list</span> &#123;</span><br><span class="line">      <span class="selector-class">.goods-wrap</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>百分比布局原理</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E7%99%BE%E5%88%86%E6%AF%94%E5%B8%83%E5%B1%80%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h1 id="原生-JS-根据视口动态修改-html-的-font-size"><a href="#原生-JS-根据视口动态修改-html-的-font-size" class="headerlink" title="原生 JS 根据视口动态修改 html 的 font-size"></a>原生 JS 根据视口动态修改 html 的 font-size</h1><h2 id="1、获得视口宽度"><a href="#1、获得视口宽度" class="headerlink" title="1、获得视口宽度"></a>1、获得视口宽度</h2><ul>
<li><pre><code class="javascript">let winWidth = document.documentElement.clientWidth
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 2、指定设计尺寸，一般为 750</span><br><span class="line"></span><br><span class="line">- ```javascript</span><br><span class="line">  let uiSize = 750</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="3、动态修改-html-的尺寸"><a href="#3、动态修改-html-的尺寸" class="headerlink" title="3、动态修改 html 的尺寸"></a>3、动态修改 html 的尺寸</h2><ul>
<li><pre><code class="javascript">if (winWidth &gt;= uiSize) &#123;
  app.style.width = uiSize + &#39;px&#39;
  app.style.margin = &#39;0 auto&#39;
  html.style.fontSize = 100 + &#39;px&#39;
&#125; else &#123;
  let rate = winWidth / uiSize
  html.style.fontSize = 100 * rate + &#39;px&#39;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## 总结</span><br><span class="line"></span><br><span class="line">- ### onresize</span><br><span class="line"></span><br><span class="line">  - 屏幕尺寸发生变化时触发的事件</span><br><span class="line"></span><br><span class="line">- ```javascript</span><br><span class="line">  function setRem() &#123;</span><br><span class="line">    //1、获得视口的宽度</span><br><span class="line">    let html = document.documentElement</span><br><span class="line">    let winWidth = html.clientWidth</span><br><span class="line">    //2、指定设计尺寸</span><br><span class="line">    let uiSize = 750</span><br><span class="line">    let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">    if (winWidth &gt;= uiSize) &#123;</span><br><span class="line">      app.style.width = uiSize + &#x27;px&#x27;</span><br><span class="line">      app.style.margin = &#x27;0 auto&#x27;</span><br><span class="line">      html.style.fontSize = 100 + &#x27;px&#x27;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      let rate = winWidth / uiSize</span><br><span class="line">      html.style.fontSize = 100 * rate + &#x27;px&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onload = function () &#123;</span><br><span class="line">    setRem()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onresize = function () &#123;</span><br><span class="line">    setRem()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>插件</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/common.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/rem.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/touch-0.2.14.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/zepto.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0.2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#app</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0.1rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0.2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">0.32rem</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//所有的事件名称都是touch.js声明的</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box1&#x27;</span>).on(<span class="string">&#x27;tap&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box1被单击了&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box2&#x27;</span>).on(<span class="string">&#x27;doubletap&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box2被双击了&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box3&#x27;</span>).on(<span class="string">&#x27;swipe&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box3触发了滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box4&#x27;</span>).on(<span class="string">&#x27;swipeleft&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box4触发了左滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box5&#x27;</span>).on(<span class="string">&#x27;swiperight&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box5触发了右滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box6&#x27;</span>).on(<span class="string">&#x27;swipeup&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box6触发了上滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box7&#x27;</span>).on(<span class="string">&#x27;swipedown&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box7触发了下滑动事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.box8&#x27;</span>).on(<span class="string">&#x27;hold&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;box8触发了长按事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>单击事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>双击事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span>滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span>左滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box5&quot;</span>&gt;</span>右滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box6&quot;</span>&gt;</span>上滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box7&quot;</span>&gt;</span>下滑动事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box8&quot;</span>&gt;</span>长按事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>移动端适配方案</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/</url>
    <content><![CDATA[<h2 id="移动端适配方案"><a href="#移动端适配方案" class="headerlink" title="移动端适配方案"></a>移动端适配方案</h2><ol>
<li>百分比布局，也叫流式布局。代表网站：优酷、百度、天猫、腾讯。</li>
<li>等比缩放布局，也叫 rem 布局。代表网站：网易、爱奇艺、淘宝、美团。</li>
</ol>
<h2 id="rem-布局"><a href="#rem-布局" class="headerlink" title="rem 布局"></a>rem 布局</h2><ul>
<li>​ 等比缩放</li>
</ul>
<table>
<thead>
<tr>
<th align="center">动态设置 font-size：</th>
<th align="center">单位：</th>
</tr>
</thead>
<tbody><tr>
<td align="center">通过<code>JS</code></td>
<td align="center">em：是一个相对单位，<code>1em</code>等于当前元素或父元素的 font-size 值。</td>
</tr>
<tr>
<td align="center">通过<code>vw</code></td>
<td align="center">rem：是一个相对单位，<code>1rem</code>等于根元素的 font-size 值。</td>
</tr>
<tr>
<td align="center">注：要给 body 重置一下<code>font-size：16px</code>；</td>
<td align="center"><code>vw/vh</code>：把屏幕分为 100 份，<code>1vw</code>等于屏幕宽的 1%。</td>
</tr>
</tbody></table>
<h2 id="viewport设置"><a href="#viewport设置" class="headerlink" title="viewport设置"></a><code>viewport</code>设置</h2><ul>
<li><h4 id="通过标签进行设置，name-属性指定viewport值，content-属性进行视口配置。"><a href="#通过标签进行设置，name-属性指定viewport值，content-属性进行视口配置。" class="headerlink" title="通过标签进行设置，name 属性指定viewport值，content 属性进行视口配置。"></a>通过<meta>标签进行设置，name 属性指定<code>viewport</code>值，content 属性进行视口配置。</h4></li>
</ul>
<table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
<th>参数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">width</td>
<td align="center">设置 layout <code>viewport</code>的宽度特定值，device-width 表示自适应设备宽。<code>width：device-width；</code></td>
<td><code>num</code></td>
</tr>
<tr>
<td align="center">height</td>
<td align="center">设置 layout <code>viewport</code>的高度特定值，一般不进行设置</td>
<td><code>num</code></td>
</tr>
<tr>
<td align="center">initial-scale</td>
<td align="center">设置页面的初始缩放</td>
<td><code>num</code></td>
</tr>
<tr>
<td align="center">minimum-scale</td>
<td align="center">设置页面的最小缩放</td>
<td><code>num</code></td>
</tr>
<tr>
<td align="center">maximum-scale</td>
<td align="center">设置页面的最大缩放</td>
<td><code>num</code></td>
</tr>
<tr>
<td align="center">user-scalable</td>
<td align="center">设置页面能否进行缩放</td>
<td>yes,no</td>
</tr>
</tbody></table>
<h2 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h2><ul>
<li><p>利用媒体查询，即 media queries，可以针对不同的媒体类型定义不同的样式，从而实现响应式布局。</p>
</li>
<li><table>
<thead>
<tr>
<th align="center">取值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">all</td>
<td align="center">用于所有设备</td>
</tr>
<tr>
<td align="center">print</td>
<td align="center">用于打印机和打印预览</td>
</tr>
<tr>
<td align="center">screen</td>
<td align="center">用于电脑屏幕，平板电脑，智能手机等。</td>
</tr>
<tr>
<td align="center">speech</td>
<td align="center">应用于屏幕阅读器等发声设备。</td>
</tr>
</tbody></table>
</li>
<li><p>常见选项：</p>
</li>
<li><p>媒体类型：</p>
<ul>
<li><p>and、 not、only</p>
</li>
<li><p>min-width、max-width</p>
</li>
<li><p><code>orientation：portrait</code>、<code>orientation：landscape</code></p>
</li>
<li><pre><code class="css">&lt;link&gt;
@media all and (min-width:500px) and (max-width:700px)&#123;&#125;
&lt;link rel=&quot;stylesheet&quot; href=&quot;base.css&quot; media=&quot;all and  (min-width:500px) &quot;&gt;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 常见修改样式：</span><br><span class="line"></span><br><span class="line">  - display</span><br><span class="line">  - `floati`</span><br><span class="line">  - width</span><br><span class="line">  - 注：响应式代码写到要适配的`css`后面。</span><br><span class="line"></span><br><span class="line">## 自适应布局</span><br><span class="line"></span><br><span class="line">- 自适应只要时指宽度的自适应</span><br><span class="line">- 百分比的流式布局</span><br><span class="line">  - `vw`</span><br><span class="line">  - `vh`</span><br><span class="line"></span><br><span class="line">## `css`架构</span><br><span class="line"></span><br><span class="line">- 在一个大型项目中，由于页面过多，导致`css`代码难以维护和开发。所以`css`架构可以帮助我们解决文件管理与文件划分等问题。</span><br><span class="line">  首先要对`css`进行模块化处理，一个模块负责一类操作行为。可利用 sass 或 less 来实现。</span><br><span class="line"></span><br><span class="line">- |   文件夹   |                            含义                             |</span><br><span class="line">  | :--------: | :---------------------------------------------------------: |</span><br><span class="line">  |    base    |  一些初始的通用`css`，如重置默认样式，动画，工具，打印等。  |</span><br><span class="line">  | components |    用于构建页面的所有组件，如按钮，表单，表格，弹窗等。     |</span><br><span class="line">  |   layout   | 用于布局页面的不同部分，如页眉特殊样式，列表页特殊样式等。  |</span><br><span class="line">  |   pages    |          放置页面之间不同的样式，列表特殊样式等。           |</span><br><span class="line">  |   themes   |       应用不同的主题样式时，如管理员，卖家，买家等。        |</span><br><span class="line">  | abstracts  |      放置一些如：变量，函数，响应式等辅助开发部分等。       |</span><br><span class="line">  |  vendors   | 放置一些第三方独立的`css`文件，如 bootstrap，`iconfont`等。 |</span><br><span class="line"></span><br><span class="line">## `css`新特性</span><br><span class="line"></span><br><span class="line">- 自定义属性</span><br><span class="line"></span><br><span class="line">  - `css`自定义属性（也称为“`css`变量”），在目前所有的现代浏览器找那个都得到了支持。</span><br><span class="line">  - 定义与使用</span><br><span class="line">  - 计算</span><br><span class="line">  - 默认值</span><br><span class="line">  - 作用域</span><br><span class="line"></span><br><span class="line">- shapes</span><br><span class="line"></span><br><span class="line">  - ` CSS``shapes `布局可以实现不规则的文字环绕效果，需要和浮动配合使用。</span><br><span class="line"></span><br><span class="line">  - shape-outside</span><br><span class="line"></span><br><span class="line">    - ```css</span><br><span class="line">      shape-outside：margin-box；</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>clip-path</p>
</li>
<li><p>shape-margin</p>
</li>
</ul>
</li>
<li><p>scrollbar</p>
<ul>
<li><code>css</code> scrollbar 用于实现自定义滚动条样式。<ul>
<li><code>::-webkit-scrollbar</code></li>
<li><code>::-webkit-scrollbar-thumb</code></li>
<li><code>::-webkit-scrollbar-track</code></li>
</ul>
</li>
</ul>
</li>
<li><p>scroll snap</p>
<ul>
<li><code>css scrollsnap</code>（<code>css</code>滚动捕捉）允许你在用户完成滚动后多锁定特定的元素或位置。</li>
<li>scroll-snap-type<ul>
<li>x</li>
<li>mandatory</li>
</ul>
</li>
<li>scroll-snap-align<ul>
<li>start</li>
<li>center</li>
<li>end</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>移动端事件封装</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6%E5%B0%81%E8%A3%85/</url>
    <content><![CDATA[<h1 id="移动端事件封装"><a href="#移动端事件封装" class="headerlink" title="移动端事件封装"></a>移动端事件封装</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/rem.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0.1rem</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">0.1rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>单击事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span>长按事件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//封装事件对象</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> touchEvent = &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * 描述 单击事件的封装</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * <span class="doctag">@date </span>2020-09-22</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * <span class="doctag">@param <span class="type">&#123;Object&#125;</span></span>&#125; element 指定的元素</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * <span class="doctag">@param <span class="type">&#123;function&#125;</span> </span>fn 元素上单击时执行的函数</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       */</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">tab</span>: <span class="function"><span class="keyword">function</span> (<span class="params">element, fn</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> startX, startY, endX, endY</span></span><br><span class="line"><span class="javascript">        <span class="comment">//触摸开始使用</span></span></span><br><span class="line"><span class="javascript">        element.addEventListener(</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;touchstart&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> touch = e.touches[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">            startX = touch.clientX</span></span><br><span class="line"><span class="javascript">            startY = touch.clientY</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        element.addEventListener(</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;touchend&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> touch = e.changedTouches[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">            endX = touch.clientX</span></span><br><span class="line"><span class="javascript">            endY = touch.clientY</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(endX - startX) &lt; <span class="number">10</span> &amp;&amp; <span class="built_in">Math</span>.abs(endY - startY) &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="javascript">              fn()</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * 描述 长按事件的封装函数</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * <span class="doctag">@date </span>2020-09-22</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> <span class="variable">element</span></span></span></span></span><br><span class="line"><span class="comment"><span class="javascript">       * <span class="doctag">@param <span class="type">&#123;function&#125;</span> </span>fn 元素element长按时触发的回调函数</span></span></span><br><span class="line"><span class="comment"><span class="javascript">       */</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">longTab</span>: <span class="function"><span class="keyword">function</span> (<span class="params">element, fn</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//起始触摸点的位置和定时器的id</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> startX, startY, id</span></span><br><span class="line"><span class="javascript">        <span class="comment">//1、touchstart</span></span></span><br><span class="line"><span class="javascript">        element.addEventListener(</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;touchstart&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//先清空定时器</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (id) &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">clearTimeout</span>(id)</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> touch = e.touches[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">            startX = touch.clientX</span></span><br><span class="line"><span class="javascript">            startY = touch.clientY</span></span><br><span class="line"><span class="javascript">            <span class="comment">//启动定时器</span></span></span><br><span class="line"><span class="javascript">            id = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              fn()</span></span><br><span class="line"><span class="javascript">            &#125;, <span class="number">750</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">//阻止屏幕的默认事件</span></span></span><br><span class="line"><span class="javascript">            e.preventDefault()</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        <span class="comment">//2、touchmove:如果在750ms内发生了滑动就取消长按事件的执行</span></span></span><br><span class="line"><span class="javascript">        element.addEventListener(</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;touchmove&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> touch = e.touches[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> endX = touch.clientX</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> endY = touch.clientY</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> flag =</span></span><br><span class="line"><span class="javascript">              id &amp;&amp;</span></span><br><span class="line"><span class="javascript">              (<span class="built_in">Math</span>.abs(endX - startX) &gt; <span class="number">10</span> || <span class="built_in">Math</span>.abs(endY - startY) &gt; <span class="number">10</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">//如果滑动，就取消长按事件</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (flag) &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(<span class="string">&#x27;你的手指滑动了！长按取消&#x27;</span>)</span></span><br><span class="line"><span class="javascript">              <span class="built_in">clearTimeout</span>(id)</span></span><br><span class="line"><span class="javascript">              id = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        <span class="comment">//3、touchend</span></span></span><br><span class="line"><span class="javascript">        element.addEventListener(</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;touchend&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (id) &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">clearTimeout</span>(id)</span></span><br><span class="line"><span class="javascript">              id = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> app = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;app&#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    touchEvent.tab(app, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      app.style.backgroundColor = <span class="string">&#x27;blue&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    touchEvent.longTab(box, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">&#x27;box上发生了长按事件&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>移动端</category>
      </categories>
      <tags>
        <tag>移动端</tag>
      </tags>
  </entry>
  <entry>
    <title>file模块</title>
    <url>/taiaiac.gitee.io/2020/12/30/Node.js/file%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<h2 id="fs-常用-API"><a href="#fs-常用-API" class="headerlink" title="fs 常用 API"></a>fs 常用 API</h2><h3 id="fs-readFile-：用来读取文件内容的函数"><a href="#fs-readFile-：用来读取文件内容的函数" class="headerlink" title="fs.readFile()：用来读取文件内容的函数"></a>fs.readFile()：用来读取文件内容的函数</h3><h3 id="fs-readdir-：读取一个文件夹的内容"><a href="#fs-readdir-：读取一个文件夹的内容" class="headerlink" title="fs.readdir()：读取一个文件夹的内容"></a>fs.readdir()：读取一个文件夹的内容</h3><h3 id="fs-writeFile-：文件写入内容"><a href="#fs-writeFile-：文件写入内容" class="headerlink" title="fs.writeFile()：文件写入内容"></a>fs.writeFile()：文件写入内容</h3><h3 id="fs-write-：向客户端发送数据"><a href="#fs-write-：向客户端发送数据" class="headerlink" title="fs.write()：向客户端发送数据"></a>fs.write()：向客户端发送数据</h3><h3 id="fs-stat-：查询文件信息"><a href="#fs-stat-：查询文件信息" class="headerlink" title="fs.stat() ：查询文件信息"></a>fs.stat() ：查询文件信息</h3><h2 id="查询文件信息-fs-stat"><a href="#查询文件信息-fs-stat" class="headerlink" title="查询文件信息 fs.stat()"></a>查询文件信息 fs.stat()</h2><blockquote>
<h2 id="fs-stat-path-callback"><a href="#fs-stat-path-callback" class="headerlink" title="fs.stat(path, callback)"></a>fs.stat(path, callback)</h2></blockquote>
<p>fs.stat() 方法用于查询文件信息，可以用于查询文件的大小、创建时间、权限等相关信息。fs.stat() 是异步方法，还有一个同步方法 fs.statSync(path)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line"></span><br><span class="line">fs.stat(&#x27;./package.json&#x27;, (err, stats) =&gt; &#123;</span><br><span class="line">  console.log(stats)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//结果：</span><br><span class="line">Stats &#123;</span><br><span class="line">  dev: 3398770662,</span><br><span class="line">  mode: 33206,</span><br><span class="line">  nlink: 1,</span><br><span class="line">  uid: 0,</span><br><span class="line">  gid: 0,</span><br><span class="line">  rdev: 0,</span><br><span class="line">  blksize: undefined,</span><br><span class="line">  ino: 281474977191181,</span><br><span class="line">  size: 102,</span><br><span class="line">  blocks: undefined,</span><br><span class="line">  atimeMs: 1539916950573.615,</span><br><span class="line">  mtimeMs: 1539847217956.458,</span><br><span class="line">  ctimeMs: 1539847217956.458,</span><br><span class="line">  birthtimeMs: 1539847139123.2393,</span><br><span class="line">  atime: 2018-10-19T02:42:30.574Z,</span><br><span class="line">  mtime: 2018-10-18T07:20:17.956Z,</span><br><span class="line">  ctime: 2018-10-18T07:20:17.956Z,</span><br><span class="line">  birthtime: 2018-10-18T07:18:59.123Z</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行后，会将 stat 类的实例返回给其回调函数。可以通过 stat 类中的提供方法判断文件的相关属性。</p>
<h3 id="判断是否为标准文件"><a href="#判断是否为标准文件" class="headerlink" title="判断是否为标准文件"></a>判断是否为标准文件</h3><blockquote>
<h2 id="stats-isFile"><a href="#stats-isFile" class="headerlink" title="stats.isFile()"></a>stats.isFile()</h2></blockquote>
<h3 id="判断是否为路径"><a href="#判断是否为路径" class="headerlink" title="判断是否为路径"></a>判断是否为路径</h3><blockquote>
<h2 id="stats-isDirectory"><a href="#stats-isDirectory" class="headerlink" title="stats. isDirectory()"></a>stats. isDirectory()</h2></blockquote>
<h3 id="stats-isBlockDevice"><a href="#stats-isBlockDevice" class="headerlink" title="stats. isBlockDevice()"></a>stats. isBlockDevice()</h3><ul>
<li>如果是块设备，返回 true，大多数情况下类 UNIX 系统的块设备都位于/dev 目录下</li>
</ul>
<h3 id="stats-isCharacterDevice"><a href="#stats-isCharacterDevice" class="headerlink" title="stats. isCharacterDevice()"></a>stats. isCharacterDevice()</h3><ul>
<li>如果是字符设备，返回 true</li>
</ul>
<h3 id="stats-isSymbolicLink"><a href="#stats-isSymbolicLink" class="headerlink" title="stats. isSymbolicLink()"></a>stats. isSymbolicLink()</h3><ul>
<li>如果是符号连接，返回 true。（ fs.lstat() 方法返回的 stats 对象才有此方法）</li>
</ul>
<h3 id="stats-isFIFO"><a href="#stats-isFIFO" class="headerlink" title="stats.isFIFO()"></a>stats.isFIFO()</h3><ul>
<li>如果是 FIFO，返回 true。FIFO 是 UNIX 中的一种特殊类型的命令管道</li>
</ul>
<h3 id="stats-isSocket"><a href="#stats-isSocket" class="headerlink" title="stats. isSocket()"></a>stats. isSocket()</h3><ul>
<li>如果是 UNIX 套接字，返回 true</li>
</ul>
<h2 id="打开文件-fs-open"><a href="#打开文件-fs-open" class="headerlink" title="打开文件 fs.open"></a>打开文件 fs.open</h2><blockquote>
<h2 id="fs-open-path-flags-mode-callback"><a href="#fs-open-path-flags-mode-callback" class="headerlink" title="fs.open(path, flags[, mode], callback)"></a>fs.open(path, flags[, mode], callback)</h2></blockquote>
<ul>
<li>操作文件前需要选对文件进行打开操作。fs.open()方法用于打开文件，打开文件后，文件描述符 fs 会调用 open 方法的回调函数，然后就可以通过文件描述符 fs 对文件进行读写等操作了。同步版的方法名为 fs.openSync(path, flags[, mode])</li>
<li>fs.open()方法第一个参数是文件路径。第二个参数是标志位，标志位表示文件的打开模式。标志含义与 UNIX 中 fopen 的标识位相同：<br><strong>r</strong> 打开文本文件进行读取，数据流位置在文件起始处<br><strong>r+</strong> 打开文本文件进行读写，数据流位置在文件起始处<br><strong>w</strong> 如果文件存在，将其清零，不存在创建写入文件。数据流位置在文件起始处<br><strong>w+</strong> 打开文件进行读写，如果文件存在，将其清零，不存在创建写入文件。数据流位置在文件起始处</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line"></span><br><span class="line">fs.open(&#x27;./package.json&#x27;, &#x27;w&#x27;, (err, fd) =&gt; &#123;</span><br><span class="line">  console.log(fd) // 3</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.open(&#x27;./test&#x27;, &#x27;r&#x27;, (err, fd) =&gt; &#123;</span><br><span class="line">  console.log(fd) // 4   (test是文件夹)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="读取文件信息-fs-read"><a href="#读取文件信息-fs-read" class="headerlink" title="读取文件信息 fs.read()"></a>读取文件信息 fs.read()</h2><blockquote>
<h2 id="fs-read-fd-buffer-offset-length-position-callback"><a href="#fs-read-fd-buffer-offset-length-position-callback" class="headerlink" title="fs.read(fd, buffer, offset, length, position, callback)"></a>fs.read(fd, buffer, offset, length, position, callback)</h2></blockquote>
<p>下面的代码，文件打开后，会从第 5 个字节开始，读取其后的 1024 个字节的数据。读取完成后，fs.read()会回调最后一个回调方法，然后就可以可以处理读取到的的缓冲的数据了。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.open(<span class="string">&#x27;./package.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> readBuffer = <span class="keyword">new</span> Buffer(<span class="number">1024</span>),</span><br><span class="line">    offset = <span class="number">0</span>,</span><br><span class="line">    len = readBuffer.length,</span><br><span class="line">    filePostion = <span class="number">5</span>;</span><br><span class="line">  fs.read(fd, readBuffer, offset, len, filePostion, <span class="function"><span class="keyword">function</span> (<span class="params">err, readByte</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;读取数据总数：&#x27;</span> + readByte + <span class="string">&#x27; bytes&#x27;</span>); <span class="comment">// ==&gt;读取数据总数：2 bytes</span></span><br><span class="line">    <span class="built_in">console</span>.log(readBuffer.slice(<span class="number">0</span>, readByte)); <span class="comment">//数据已被填充到readBuffer中</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 打印结果：</span></span><br><span class="line">读取数据总数：<span class="number">97</span> bytes</span><br><span class="line">&lt;Buffer <span class="number">22</span> 6e <span class="number">61</span> 6d <span class="number">65</span> <span class="number">22</span> 3a <span class="number">20</span> <span class="number">22</span> <span class="number">66</span> <span class="number">69</span> 6c <span class="number">65</span> 2d <span class="number">65</span> <span class="number">78</span> <span class="number">70</span> 6c 6f <span class="number">65</span> <span class="number">72</span> <span class="number">22</span> 2c 0d 0a <span class="number">20</span> <span class="number">20</span> <span class="number">22</span> <span class="number">76</span> <span class="number">65</span> <span class="number">72</span> <span class="number">73</span> <span class="number">69</span> 6f 6e <span class="number">22</span> 3a <span class="number">20</span> <span class="number">22</span> <span class="number">30</span> 2e <span class="number">30</span> 2e <span class="number">31</span> <span class="number">22</span> 2c 0d 0a <span class="number">20</span> <span class="number">20</span> ... &gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<h2 id="fs-readFile-path-options-callback"><a href="#fs-readFile-path-options-callback" class="headerlink" title="fs.readFile(path[,options],callback)"></a>fs.readFile(path[,options],callback)</h2></blockquote>
<p>该方法用于读取指定文件当中的内容，path 参数为该文件的绝对物理路径，其中 options 参数可选，可以传入编码格式，如读取文本文件时，可传入’utf8’,若不指定编码格式，则默认输出读取的文件内容为 Buffer 形式，故一般都会传入该参数。callback 回调参数当中有两个参数 err 和 data，其中 err 为错误信息参数，一般在在文件不存在或者读取文件失败时触发调用，data 为文件内容。</p>
<h2 id="写入文件-fs-write"><a href="#写入文件-fs-write" class="headerlink" title="写入文件 fs.write()"></a>写入文件 fs.write()</h2><blockquote>
<h2 id="fs-write-fd-buffer-offset-length-position-callback"><a href="#fs-write-fd-buffer-offset-length-position-callback" class="headerlink" title="fs.write(fd, buffer, offset, length[, position], callback)"></a>fs.write(fd, buffer, offset, length[, position], callback)</h2></blockquote>
<p>文件打开后，可以通过 fs.write()方法传递一个数据缓冲区，以向打开的文件中写入数据。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.open(<span class="string">&#x27;./fs.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> writeBuffer = <span class="keyword">new</span> Buffer(<span class="string">&#x27;这是要写入的字符串&#x27;</span>),</span><br><span class="line">    offset = <span class="number">0</span>,</span><br><span class="line">    len = writeBuffer.length,</span><br><span class="line">    filePostion = <span class="literal">null</span></span><br><span class="line">  fs.write(fd, writeBuffer, offset, len, filePostion, <span class="function"><span class="keyword">function</span> (<span class="params">err, readByte</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;写数据总数：&#x27;</span> + readByte + <span class="string">&#x27; bytes&#x27;</span>) <span class="comment">//  写数据总数：27 bytes</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="追加写入内容"><a href="#追加写入内容" class="headerlink" title="追加写入内容"></a>追加写入内容</h3><blockquote>
<h2 id="fs-appendFile-path-data-options-callback"><a href="#fs-appendFile-path-data-options-callback" class="headerlink" title="fs.appendFile(path,data[,options],callback)"></a>fs.appendFile(path,data[,options],callback)</h2></blockquote>
<p>该方法可用于往指定文件当中追加写入内容，该内容不会覆盖文件当中原有的内容，只会在原有内容的基础上进行追加。若传入的文件路径当中的文件不存在，则先完成该文件的穿件，再往里面写入指定内容。path 参数为该文件的绝对物理路径，data 为需要写入该文件当中的数据内容，其中 options 参数可选，可以传入编码格式，若不传则默认为 utf8。callback 回调参数当中只有一个错误信息参数 err，一般在追加写入失败时触发调用。</p>
<h2 id="关闭文件-fs-close"><a href="#关闭文件-fs-close" class="headerlink" title="关闭文件 fs.close()"></a>关闭文件 fs.close()</h2><blockquote>
<h2 id="fs-close-fd-callback"><a href="#fs-close-fd-callback" class="headerlink" title="fs.close(fd, callback)"></a>fs.close(fd, callback)</h2></blockquote>
<p>在前面读写文件的操作中，Node 进程退出后就会关闭文件。在实际使用中，不能依靠进程退出来关闭文件，因此必须跟踪那些已打开的文件描述，在使用完毕后使用 fs.close()方法关闭文件。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.open(<span class="string">&#x27;./fs.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//对文件一些操作</span></span><br><span class="line">  fs.close(fd, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//操作完成后，关闭文件</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="确定文件是否存在-fs-stat"><a href="#确定文件是否存在-fs-stat" class="headerlink" title="确定文件是否存在 fs.stat()"></a>确定文件是否存在 fs.stat()</h2><blockquote>
<h2 id="fs-stat"><a href="#fs-stat" class="headerlink" title="fs.stat()"></a>fs.stat()</h2></blockquote>
<p><code>fs.stat()</code>方法用于查询文件信息，其回调函数中有两个参数<code>(err, stats)</code>。<code>stats</code>是一个<a href="http://itbilu.com/nodejs/core/4y-N3wJS.html#stat">fs.Stats</a>对象，该对象中包含一个<code>stats.isFile()</code>方法，如果<code>stats</code>对象存在且<code>stats.isFile()</code>为<code>true</code>才能确认要修改或删除的文件存在。</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.stat(<span class="string">&#x27;/xxx&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (stat &amp;&amp; stat.isFile()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件存在&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件不存在或不是标准文件&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<h2 id="fs-access"><a href="#fs-access" class="headerlink" title="fs.access()"></a>fs.access()</h2></blockquote>
<p><code>fs.access()</code>用于检查到指定<code>path</code>路径的目录或文件的访问权限。其回调函数中有一个参数<code>(err)</code>，如果检查失败则会出现错误参数的响应。<code>mode</code>是要检查的权限掩码，它可以是以下枚举值之一:</p>
<ul>
<li><code>fs.F_OK</code> - 文件是对于进程是否可见，可以用来检查文件是否存在。也是<code>mode</code> 的默认值</li>
<li><code>fs.R_OK</code> - 文件对于进程是否可读</li>
<li><code>fs.W_OK</code> - 文件对于进程是否可写</li>
<li><code>fs.X_OK</code> - 文件对于进程是否可执行。（Windows 系统不可用，执行效果等同<code>fs.F_OK</code>）</li>
</ul>
<h3 id="使用fs-access-方法检查文件是否存在，可以使用以下方法："><a href="#使用fs-access-方法检查文件是否存在，可以使用以下方法：" class="headerlink" title="使用fs.access()方法检查文件是否存在，可以使用以下方法："></a>使用<code>fs.access()</code>方法检查文件是否存在，可以使用以下方法：</h3><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.access(<span class="string">&#x27;/etc/passwd&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err ? <span class="string">&#x27;文件存在&#x27;</span> : <span class="string">&#x27;文件不存在&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="使用fs-access-方法检查是否对文件是否有读写权限，可以使用以下方法："><a href="#使用fs-access-方法检查是否对文件是否有读写权限，可以使用以下方法：" class="headerlink" title="使用fs.access()方法检查是否对文件是否有读写权限，可以使用以下方法："></a>使用<code>fs.access()</code>方法检查是否对文件是否有读写权限，可以使用以下方法：</h3><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.access(<span class="string">&#x27;/etc/passwd&#x27;</span>, fs.R_OK | fs.W_OK, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.lo(err ? <span class="string">&#x27;不可操作!&#x27;</span> : <span class="string">&#x27;可以读/写&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="关于fs-stat-和fs-access-的同步方法"><a href="#关于fs-stat-和fs-access-的同步方法" class="headerlink" title="关于fs.stat()和fs.access()的同步方法"></a><strong>关于<code>fs.stat()</code>和<code>fs.access()</code>的同步方法</strong></h2><p><code>fs.stat()</code>和<code>fs.access()</code>都有对应的同步方法<code>fs.statSync()</code>和<code>fs.accessSync()</code>。使用这两个同步方法时当操作成功时返回值和异步方法执行成功相同，但操作失败时会抛出异常，所以使用这两个方法应该注意，个人比较推荐使用异步方法。</p>
<h2 id="文件删除：fs-unlink-path-callback"><a href="#文件删除：fs-unlink-path-callback" class="headerlink" title="文件删除：fs.unlink(path, callback)"></a>文件删除：fs.unlink(path, callback)</h2><p>不在使用的文件可以用 fs.unlink()方法进行删除，删除前应使用 fs.exists()方法检查文件是否存在。path 参数为该文件的绝对物理路径，callback 回调参数当中只有一个错误信息参数 err，一般在该文件不存在或者删除文件失败时触发调用。fs.unlinkSync()是其同步版本</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> file = path.join(__dirname, <span class="string">&#x27;./fs.txt&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> (fs.existsSync(file)) &#123;</span><br><span class="line">  fs.unlink(file, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="文件夹操作"><a href="#文件夹操作" class="headerlink" title="文件夹操作"></a>文件夹操作</h2><blockquote>
<h2 id="fs-mkdir-path-model-callback"><a href="#fs-mkdir-path-model-callback" class="headerlink" title="fs.mkdir(path[,model],callback)"></a>fs.mkdir(path[,model],callback)</h2></blockquote>
<p>该方法可以用于创建一个目录文件夹，其中 path 为该目录的绝对物理路径，callback 回调函数当中也只有一个错误信息参数，一般在目录创建失败时触发调用。<br><strong>注意</strong>：该方法不能完成多级目录的创建，node 当中要求要创建的那个文件夹所在的文件夹必须能都存在。否则就会出现报错信息。</p>
<blockquote>
<h2 id="fs-rename-oldPath-newPath-callback"><a href="#fs-rename-oldPath-newPath-callback" class="headerlink" title="fs.rename(oldPath,newPath,callback)"></a>fs.rename(oldPath,newPath,callback)</h2></blockquote>
<p>该方法可用于移动或重命名指定文件。oldPath 参数为该文件原来的路径，newPath 参数为该文件移动或重命名之后的路径，这两个参数都必须能传入文件完整的绝对物理路径。callback 回调参数当中只有一个错误信息参数，一般在 oldPath 当中指定的文件不存在或者该操作失败时触发调用。</p>
<blockquote>
<h2 id="fs-rmdir-path-callback"><a href="#fs-rmdir-path-callback" class="headerlink" title="fs.rmdir(path,callback)"></a>fs.rmdir(path,callback)</h2></blockquote>
<p>该方法可以用于删除一个<strong>空目录</strong>。其中 path 为该目录的绝对物理路径，callback 回调函数当中也只有一个错误信息参数，一般在该目录不存在或者删除操作失败时触发调用。<br><strong>注意</strong>：该传入的目录路径当中的目录必须能为一个空目录，否则会出现报错信息，也不能完成删除操作。</p>
<blockquote>
<h2 id="fs-readdir-path-callback"><a href="#fs-readdir-path-callback" class="headerlink" title="fs.readdir(path,callback)"></a>fs.readdir(path,callback)</h2></blockquote>
<p>该方法可以用于读取一个指定目录当中的信息。其中 path 为该目录的绝对物理路径，callback 回调函数当中有两个参数 err 和 files，err 为错误信息参数，一般在该目录不存在或读取失败时触发调用，files 为一个数组对象，包含该目录下的所有文件夹与文件的名字。（仅为文件夹的名字和文件名，不是路径形式）。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="终端"><a href="#终端" class="headerlink" title="终端"></a>终端</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>) <span class="comment">// 引入http模块</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>) <span class="comment">//引入url模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;./node12_readFlie&#x27;</span>) <span class="comment">//引入外部文件</span></span><br><span class="line"><span class="keyword">const</span> query = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>) <span class="comment">//引入querystring解析模块</span></span><br><span class="line"><span class="keyword">const</span> log = <span class="built_in">console</span>.log</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并监听服务器</span></span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//设置跨域</span></span><br><span class="line">    res.setHeader(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">    <span class="comment">//解析地址</span></span><br><span class="line">    <span class="keyword">let</span> reqUrl = url.parse(req.url)</span><br><span class="line">    <span class="comment">// 解析路径</span></span><br><span class="line">    <span class="keyword">let</span> pathname = reqUrl.pathname</span><br><span class="line">    <span class="built_in">console</span>.log(pathname)</span><br><span class="line">    <span class="comment">// 查找关于img</span></span><br><span class="line">    <span class="keyword">let</span> index = pathname.indexOf(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    <span class="comment">// 判否</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//请求的是图片资源</span></span><br><span class="line">      <span class="keyword">let</span> data = <span class="keyword">await</span> fs.getPic(pathname)</span><br><span class="line">      res.write(data)</span><br><span class="line">      <span class="comment">// 结束</span></span><br><span class="line">      <span class="keyword">return</span> res.end()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 判断路径</span></span><br><span class="line">    <span class="keyword">if</span> (pathname === <span class="string">&#x27;/favicon.ico&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> data = <span class="keyword">await</span> fs.favicon()</span><br><span class="line">      res.write(data)</span><br><span class="line">      res.end()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="comment">// 显示首页</span></span><br><span class="line">      <span class="keyword">let</span> index = <span class="keyword">await</span> fs.index()</span><br><span class="line">      res.write(index)</span><br><span class="line">      res.end()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/list&#x27;</span>) &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="keyword">let</span> r = <span class="keyword">await</span> fs.readFiles(<span class="string">&#x27;./asserts/list.json&#x27;</span>)</span><br><span class="line">      res.write(r)</span><br><span class="line">      res.end()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/userList&#x27;</span>) &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="keyword">let</span> r = <span class="keyword">await</span> fs.readFiles(<span class="string">&#x27;./asserts/txt/user.txt&#x27;</span>)</span><br><span class="line">      res.write(r)</span><br><span class="line">      res.end()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/nameList&#x27;</span>) &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="keyword">let</span> arr = <span class="keyword">await</span> fs.readDirs(<span class="string">&#x27;F:/我的笔记/web18/10-6作业&#x27;</span>)</span><br><span class="line">      res.write(<span class="built_in">JSON</span>.stringify(arr))</span><br><span class="line">      res.end()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/register&#x27;</span>) &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="keyword">let</span> object = query.parse(reqUrl.query)</span><br><span class="line">      <span class="keyword">let</span> r = <span class="keyword">await</span> fs.appendFile(object)</span><br><span class="line">      res.write(r + <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      res.end()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="comment">//如何获得参数？</span></span><br><span class="line">      <span class="keyword">let</span> chunk = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="comment">//监听接收参数过程</span></span><br><span class="line">      req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data) <span class="comment">// &lt;Buffer 75 73 65 72 6e 61 6d 65 3d 61 73 64 73 31 32 26 70 61 73 73 77 6f 72 64 3d 64 61 73&gt;</span></span><br><span class="line">        <span class="comment">// 转化字符串</span></span><br><span class="line">        chunk += data</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">//参数传递结束时触发的函数</span></span><br><span class="line">      req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;参数接收结束了&#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(chunk) <span class="comment">// username=xxx&amp;password=xxx</span></span><br><span class="line">        <span class="comment">// 字符串解析成对象</span></span><br><span class="line">        <span class="keyword">let</span> object = query.parse(chunk)</span><br><span class="line">        <span class="built_in">console</span>.log(object) <span class="comment">//type Object</span></span><br><span class="line">        <span class="comment">// 数据验证</span></span><br><span class="line">        <span class="keyword">if</span> (object.username === <span class="string">&#x27;admin&#x27;</span> &amp;&amp; object.password === <span class="string">&#x27;123456&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">// 对象解构</span></span><br><span class="line">          <span class="keyword">let</span> r = &#123;</span><br><span class="line">            <span class="attr">data</span>: object,</span><br><span class="line">            <span class="attr">meta</span>: &#123;</span><br><span class="line">              <span class="attr">status</span>: <span class="number">200</span>, <span class="comment">//状态码</span></span><br><span class="line">              <span class="attr">msg</span>: <span class="string">&#x27;登录成功&#x27;</span>, <span class="comment">//弹窗内容</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;</span><br><span class="line">          res.write(<span class="built_in">JSON</span>.stringify(r)) <span class="comment">//json字符串转化</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> r = &#123;</span><br><span class="line">            <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">meta</span>: &#123;</span><br><span class="line">              <span class="attr">status</span>: <span class="number">203</span>,</span><br><span class="line">              <span class="attr">msg</span>: <span class="string">&#x27;登录失败&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;</span><br><span class="line">          res.write(<span class="built_in">JSON</span>.stringify(r))</span><br><span class="line">        &#125;</span><br><span class="line">        res.end()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      <span class="keyword">let</span> html404 = <span class="keyword">await</span> fs.notFound()</span><br><span class="line">      res.write(html404)</span><br><span class="line">      res.end()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">5000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Server is running on http://127.0.0.1:5000&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="被引入的模块"><a href="#被引入的模块" class="headerlink" title="被引入的模块"></a>被引入的模块</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.appendFile = appendFile</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拼接对象的函数，不覆盖</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">object</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">appendFile</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 读取数据</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="keyword">await</span> readFiles(<span class="string">&#x27;./asserts/txt/user.txt&#x27;</span>)</span><br><span class="line">  <span class="comment">// 转化为对象</span></span><br><span class="line">  <span class="keyword">let</span> arr = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">  <span class="comment">// 拼接成数组</span></span><br><span class="line">  arr.push(object)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.writeFile(</span><br><span class="line">      <span class="string">&#x27;./asserts/txt/user.txt&#x27;</span>,</span><br><span class="line">      <span class="built_in">JSON</span>.stringify(arr),</span><br><span class="line">      &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 处理报错</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          reject(<span class="literal">false</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(<span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.register = register</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注册功能，会清空覆盖</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">object</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!object) &#123;</span><br><span class="line">      <span class="keyword">return</span> reject(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//把object，写到path目录对应的文件</span></span><br><span class="line">    fs.writeFile(</span><br><span class="line">      <span class="string">&#x27;./asserts/txt/user.txt&#x27;</span>,</span><br><span class="line">      <span class="built_in">JSON</span>.stringify(object),</span><br><span class="line">      &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 处理报错</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err)</span><br><span class="line">          reject(<span class="literal">false</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(<span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取文件的内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">path</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFiles</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(path, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 处理报错</span></span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取目录中的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">path</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readDirs</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readdir(path, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 处理报错</span></span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取目录中的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(</span><br><span class="line">      <span class="string">&#x27;../html/index.html&#x27;</span>,</span><br><span class="line">      &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 处理报错</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(data)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取图片</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">favicon</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(<span class="string">&#x27;../img/logo.png&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 处理报错</span></span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取404.html</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">notFound</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(</span><br><span class="line">      <span class="string">&#x27;../html/404.html&#x27;</span>,</span><br><span class="line">      &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 处理报错</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(data)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取图片的过程</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2020-10-07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> <span class="variable">path</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;any&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPic</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(<span class="string">&#x27;./&#x27;</span> + path, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 处理报错</span></span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exports</span>.readFiles = readFiles</span><br><span class="line"><span class="built_in">exports</span>.readDirs = readDirs</span><br><span class="line"><span class="built_in">exports</span>.index = index</span><br><span class="line"><span class="built_in">exports</span>.favicon = favicon</span><br><span class="line"><span class="built_in">exports</span>.notFound = notFound</span><br><span class="line"><span class="built_in">exports</span>.getPic = getPic</span><br></pre></td></tr></table></figure>

<h3 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../node_modules/jquery/dist/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../node_modules/axios/dist/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> btn = $(<span class="string">&#x27;#submit&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        btn.on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:5000/register&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">              <span class="attr">username</span>: $(<span class="string">&#x27;#username&#x27;</span>).val(),</span></span><br><span class="line"><span class="javascript">              <span class="attr">password</span>: $(<span class="string">&#x27;#password&#x27;</span>).val(),</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">error</span>(<span class="params">e</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(res)</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">          &#125;)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../img/logo.png&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../node_modules/_jquery@3.5.1@jquery/dist/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.btn&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//点击发送请求给服务端</span></span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">url</span>: <span class="string">&#x27;http://127.0.0.1:5000/login&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">//携带参数</span></span></span><br><span class="line"><span class="javascript">              <span class="attr">username</span>: $(<span class="string">&#x27;#username&#x27;</span>).val(),</span></span><br><span class="line"><span class="javascript">              <span class="attr">password</span>: $(<span class="string">&#x27;#password&#x27;</span>).val(),</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 判空</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">if</span> (res) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> obj = <span class="built_in">JSON</span>.parse(res)</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(obj) <span class="comment">//json对象</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 对象解构</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> &#123;</span></span><br><span class="line"><span class="javascript">                  <span class="attr">data</span>: user,</span></span><br><span class="line"><span class="javascript">                  <span class="attr">meta</span>: r, <span class="comment">//别名</span></span></span><br><span class="line"><span class="javascript">                &#125; = obj</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 判断状态码</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (r.status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">                  alert(r.msg)</span></span><br><span class="line"><span class="javascript">                  <span class="comment">//浏览器自带的本地储存</span></span></span><br><span class="line"><span class="javascript">                  sessionStorage.setItem(<span class="string">&#x27;USER_LOGIN&#x27;</span>, <span class="built_in">JSON</span>.stringify(user))</span></span><br><span class="line"><span class="javascript">                  <span class="comment">// 跳转链接</span></span></span><br><span class="line"><span class="javascript">                  location = <span class="string">&#x27;welcome.html&#x27;</span></span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                  alert(r.msg)</span></span><br><span class="line"><span class="javascript">                &#125;</span></span><br><span class="line"><span class="javascript">              &#125;</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">error</span>(<span class="params">e</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">          &#125;)</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>欢迎<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../img/logo.png&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// sessionStorage本地存储</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> str = sessionStorage.getItem(<span class="string">&#x27;USER_LOGIN&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (str) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> user = <span class="built_in">JSON</span>.parse(str)</span></span><br><span class="line"><span class="javascript">      app.innerHTML = <span class="string">`欢迎您：<span class="subst">$&#123;user.username&#125;</span>`</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>alpine官方文档</title>
    <url>/taiaiac.gitee.io/2021/03/15/apline/alpine%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h1 id="Alpine-js"><a href="#Alpine-js" class="headerlink" title="Alpine.js"></a>Alpine.js</h1><p><img src="https://img.shields.io/bundlephobia/minzip/alpinejs" alt="npm bundle size"><br><img src="https://img.shields.io/npm/v/alpinejs" alt="npm version"><br><a href="https://alpinejs.codewithhugo.com/chat/"><img src="https://img.shields.io/badge/chat-on%20discord-7289da.svg?sanitize=true" alt="Chat"></a></p>
<p>Alpine.js 通过很低的成本提供了于 Vue 或 React 这类大型框架相近的响应式和声明式特性。</p>
<p>你可以继续操作 DOM，并在需要的时候使用 Alpine.js。</p>
<p>可以理解为 JavaScript 版本的 <a href="https://tailwindcss.com/">Tailwind</a>。</p>
<blockquote>
<p>备注：Alpine.js 的语法几乎完全借用自 <a href="https://vuejs.org/">Vue</a> （并用 <a href="https://angularjs.org/">Angular</a> 的语法做了些扩展）。在此由衷感谢他们对 Web 世界的贡献。</p>
<p><a href="https://github.com/alpinejs/alpine">https://github.com/alpinejs/alpine</a></p>
</blockquote>
<h2 id="安装-Install"><a href="#安装-Install" class="headerlink" title="安装 Install"></a>安装 Install</h2><p><strong>使用 CDN：</strong> 把以下脚本加入到你的 <code>&lt;head&gt;</code> 尾部.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就是这样，Alpine.js 会自行初始化。</p>
<p>生产环境中，建议在链接中锁定特定版本号，以此避免新版本中的变更造成问题。<br>例如，锁定版本为 <code>2.8.1</code> (最新版本):</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.1/dist/alpine.min.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>使用 npm：</strong> 从 npm 安装依赖包。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm i alpinejs</span><br></pre></td></tr></table></figure>

<p>并在你的脚本中引入它。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;alpinejs&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>需要 IE11 支持的场景</strong> 改用这段脚本。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">nomodule</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine-ie11.min.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这一写法使用了 <a href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/">module/nomodule 模式（英文）</a> ，这样的写法可以让现代浏览器自动加载模块版本依赖，而在 IE11 或其他早期浏览器中自动加载专属兼容版本。</p>
<h2 id="使用-Use"><a href="#使用-Use" class="headerlink" title="使用 Use"></a>使用 Use</h2><p><em>下拉菜单（Dropdown）/模态弹窗（Modal）</em></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; open: false &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;open = true&quot;</span>&gt;</span>Open Dropdown<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-show</span>=<span class="string">&quot;open&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click.away</span>=<span class="string">&quot;open = false&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        Dropdown Body</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>标签页 Tabs</em></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; tab: &#x27;foo&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;active&#x27;: tab === &#x27;foo&#x27; &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;tab = &#x27;foo&#x27;&quot;</span>&gt;</span>Foo<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;active&#x27;: tab === &#x27;bar&#x27; &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;tab = &#x27;bar&#x27;&quot;</span>&gt;</span>Bar<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show</span>=<span class="string">&quot;tab === &#x27;foo&#x27;&quot;</span>&gt;</span>Tab Foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show</span>=<span class="string">&quot;tab === &#x27;bar&#x27;&quot;</span>&gt;</span>Tab Bar<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样的写法也可以用在其他地方：<br><em>鼠标悬停时从服务器预加载下拉菜单中的 HTML 内容。</em></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; open: false &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">mouseenter.once</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            fetch(&#x27;/dropdown-partial.html&#x27;)</span></span></span><br><span class="line"><span class="string"><span class="tag">                .then(response =&gt; response.text())</span></span></span><br><span class="line"><span class="string"><span class="tag">                .then(html =&gt; &#123; $refs.dropdown.innerHTML = html &#125;)</span></span></span><br><span class="line"><span class="string"><span class="tag">        &quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;open = true&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>Show Dropdown<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-ref</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">x-show</span>=<span class="string">&quot;open&quot;</span> @<span class="attr">click.away</span>=<span class="string">&quot;open = false&quot;</span>&gt;</span></span><br><span class="line">        Loading Spinner...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="学习-Learn"><a href="#学习-Learn" class="headerlink" title="学习 Learn"></a>学习 Learn</h2><p>当前共有 14 个指令可用，如下所示：</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a href="#x-data"><code>x-data</code></a></td>
<td>定义一个新的组件作用域。</td>
</tr>
<tr>
<td><a href="#x-init"><code>x-init</code></a></td>
<td>组件初始化时运行其中的表达式。</td>
</tr>
<tr>
<td><a href="#x-show"><code>x-show</code></a></td>
<td>根据表达式结果（true 或 false）控制元素的 <code>display: none;</code>（译者注：控制模块显示/隐藏）</td>
</tr>
<tr>
<td><a href="#x-bind"><code>x-bind</code></a></td>
<td>将当前属性的值设定为指令中表达式的结果。</td>
</tr>
<tr>
<td><a href="#x-on"><code>x-on</code></a></td>
<td>向元素上挂载事件监听器。当事件触发时执行其中的表达式。</td>
</tr>
<tr>
<td><a href="#x-model"><code>x-model</code></a></td>
<td>向当前元素新增「双向数据绑定」。保持输入元素与组件数据同步。</td>
</tr>
<tr>
<td><a href="#x-text"><code>x-text</code></a></td>
<td>和 <code>x-bind</code> 类似，但更新的是元素的 <code>innerText</code>。</td>
</tr>
<tr>
<td><a href="#x-html"><code>x-html</code></a></td>
<td>和 <code>x-bind</code> 类似，但更新的是元素的 <code>innerHTML</code>。</td>
</tr>
<tr>
<td><a href="#x-ref"><code>x-ref</code></a></td>
<td>在组件外获取原始 DOM 元素的简便方法。</td>
</tr>
<tr>
<td><a href="#x-if"><code>x-if</code></a></td>
<td>值为 false 时将从 DOM 中完全移除元素。需要在 <code>&lt;template&gt;</code> 标签中使用。</td>
</tr>
<tr>
<td><a href="#x-for"><code>x-for</code></a></td>
<td>为数组中的每一项创建一个新的 DOM 节点。需要在 <code>&lt;template&gt;</code> 标签中使用。</td>
</tr>
<tr>
<td><a href="#x-transition"><code>x-transition</code></a></td>
<td>用于在过渡（CSS Translation）的各个阶段中为元素添加 class 的指令。</td>
</tr>
<tr>
<td><a href="#x-spread"><code>x-spread</code></a></td>
<td>为了更好的复用，可以绑定一个带有 Alpine 指令（作为 key）的对象到元素上。</td>
</tr>
<tr>
<td><a href="#x-cloak"><code>x-cloak</code></a></td>
<td>这一属性会在 Alpine 初始化完成后被移除，可以用来隐藏未初始化的 DOM。</td>
</tr>
</tbody></table>
<p>以及 6 个魔法属性：</p>
<table>
<thead>
<tr>
<th>魔法属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a href="#el"><code>$el</code></a></td>
<td>获取根元素的 DOM 节点。</td>
</tr>
<tr>
<td><a href="#refs"><code>$refs</code></a></td>
<td>获取组件中标记有 <code>x-ref</code> 的 DOM 元素。</td>
</tr>
<tr>
<td><a href="#event"><code>$event</code></a></td>
<td>在事件监听器中获取浏览器原生的「Event」对象。</td>
</tr>
<tr>
<td><a href="#dispatch"><code>$dispatch</code></a></td>
<td>创建一个「CustomEvent」并使用其内部的 <code>.dispatchEvent()</code> 方法进行分发。</td>
</tr>
<tr>
<td><a href="#nexttick"><code>$nextTick</code></a></td>
<td>在 Alpine 做出响应式 DOM 更新后，执行一个给出的表达式。</td>
</tr>
<tr>
<td><a href="#watch"><code>$watch</code></a></td>
<td>当监听的组件属性发生变化时，触发给定的回调函数。</td>
</tr>
</tbody></table>
<h2 id="赞助商-Sponsors"><a href="#赞助商-Sponsors" class="headerlink" title="赞助商 Sponsors"></a>赞助商 Sponsors</h2><img width="33%" src="https://refactoringui.nyc3.cdn.digitaloceanspaces.com/tailwind-logo.svg" alt="Tailwind CSS">

<p><strong>想让你的 Logo 也出现在这? <a href="https://twitter.com/calebporzio">到 Twitter 发送 DM</a></strong></p>
<h2 id="社区相关项目-Community-Projects"><a href="#社区相关项目-Community-Projects" class="headerlink" title="社区相关项目 Community Projects"></a>社区相关项目 Community Projects</h2><ul>
<li><a href="https://alpinejs.codewithhugo.com/newsletter/">AlpineJS 周报（英文）</a></li>
<li><a href="https://github.com/ryangjchandler/spruce">Spruce （状态管理框架/英文）</a></li>
<li><a href="https://github.com/SimoTod/alpine-turbolinks-adapter">Turbolinks Adapter（英文）</a></li>
<li><a href="https://github.com/KevinBatdorf/alpine-magic-helpers">Alpine Magic Helpers（英文）</a></li>
<li><a href="https://github.com/ryangjchandler/awesome-alpine">Awesome Alpine（英文）</a></li>
</ul>
<h3 id="指令-Directives"><a href="#指令-Directives" class="headerlink" title="指令 Directives"></a>指令 Directives</h3><hr>
<h3 id="x-data"><a href="#x-data" class="headerlink" title="x-data"></a><code>x-data</code></h3><p><strong>例如：</strong> <code>&lt;div x-data=&quot;&#123; foo: &#39;bar&#39; &#125;&quot;&gt;...&lt;/div&gt;</code></p>
<p><strong>结构：</strong> <code>&lt;div x-data=&quot;[可迭代对象]&quot;&gt;...&lt;/div&gt;</code></p>
<p><code>x-data</code> 将定义一个新的组件作用域。它将通知框架初始化带有传入数据的一个新组件。</p>
<p>类似 Vue 组件中的 data 属性。</p>
<p><strong>抽离组件逻辑</strong></p>
<p>你可以把数据（以及行为）通过一个可复用的函数抽离出来：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;dropdown()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">x-on:click</span>=<span class="string">&quot;open&quot;</span>&gt;</span>Open<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show</span>=<span class="string">&quot;isOpen()&quot;</span> <span class="attr">x-on:click.away</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">        // Dropdown</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">dropdown</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">show</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">open</span>(<span class="params"></span>)</span> &#123; <span class="built_in">this</span>.show = <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">close</span>(<span class="params"></span>)</span> &#123; <span class="built_in">this</span>.show = <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">isOpen</span>(<span class="params"></span>)</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.show === <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>各位 Bundler 使用者</strong>，注意 Alpine.js 操作的函数都在全局作用域（<code>window</code>），你需要把 <code>x-data</code> 使用的函数声明到 <code>window</code> 上，例如 <code>window.dropdown = function () &#123;&#125;</code> (因为在 Webpack, Rollup, Parcel 等工具中，<code>function</code> 默认会被挂载模块作用域，而非 <code>window</code>).</p>
</blockquote>
<p>你也可以通过对象解构语法，把多个数据对象混合起来：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123;...dropdown(), ...tabs()&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="x-init"><a href="#x-init" class="headerlink" title="x-init"></a><code>x-init</code></h3><p><strong>例如：</strong> <code>&lt;div x-data=&quot;&#123; foo: &#39;bar&#39; &#125;&quot; x-init=&quot;foo = &#39;baz&#39;&quot;&gt;&lt;/div&gt;</code></p>
<p><strong>结构：</strong> <code>&lt;div x-data=&quot;...&quot; x-init=&quot;[表达式]&quot;&gt;&lt;/div&gt;</code></p>
<p><code>x-init</code> 将在组件初始化时运行给定的表达式。</p>
<p>如果你希望代码在 Alpine 对 DOM 进行初始化更新后再调用（类似 VueJS 中的 <code>mounted()</code> 钩子），你可以传入一个回调函数，它将在 DOM 操作完成后被调用，例如：</p>
<p><code>x-init=&quot;() =&gt; &#123; // we have access to the post-dom-initialization state here // &#125;&quot;</code></p>
<hr>
<h3 id="x-show"><a href="#x-show" class="headerlink" title="x-show"></a><code>x-show</code></h3><p><strong>例如:</strong> <code>&lt;div x-show=&quot;open&quot;&gt;&lt;/div&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;div x-show=&quot;[表达式]&quot;&gt;&lt;/div&gt;</code></p>
<p><code>x-show</code> 将根据表达式结果（true 或 false）控制元素的 <code>display: none;</code>（译者注：控制模块显示/隐藏）</p>
<p><strong>x-show.transition</strong></p>
<p><code>x-show.transition</code> 是一个可以让你在使用 <code>x-show</code> 操作 CSS 过渡（Transition）时更爽的简便 API。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show.transition</span>=<span class="string">&quot;open&quot;</span>&gt;</span></span><br><span class="line">    这段内容会在过渡中滑入/滑出。</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>x-show.transition</code></td>
<td>同时滑入/滑出并缩放（默认值：opacity, scale: 0.95, timing-function: cubic-bezier(0.4, 0.0, 0.2, 1), duration-in: 150ms, duration-out: 75ms）</td>
</tr>
<tr>
<td><code>x-show.transition.in</code></td>
<td>仅滑入</td>
</tr>
<tr>
<td><code>x-show.transition.out</code></td>
<td>仅滑出</td>
</tr>
<tr>
<td><code>x-show.transition.opacity</code></td>
<td>仅使用淡入淡出</td>
</tr>
<tr>
<td><code>x-show.transition.scale</code></td>
<td>仅使用缩放</td>
</tr>
<tr>
<td><code>x-show.transition.scale.75</code></td>
<td>自定义 CSS 缩放转换为 <code>transform: scale(.75)</code>.</td>
</tr>
<tr>
<td><code>x-show.transition.duration.200ms</code></td>
<td>设定 “in” 的的过渡时间为 200ms。出动作（”out”）将是它的一半 (100ms).</td>
</tr>
<tr>
<td><code>x-show.transition.origin.top.right</code></td>
<td>自定义 CSS 转换起始位置为 <code>transform-origin: top right</code>.</td>
</tr>
<tr>
<td><code>x-show.transition.in.duration.200ms.out.duration.50ms</code></td>
<td>为 “in” 和 “out” 设定不同的过渡时间。</td>
</tr>
</tbody></table>
<blockquote>
<p>备注： 所有的过渡修饰符都可组合使用。也就是说可以这么用（虽然真这么用过于粗暴23333）: <code>x-show.transition.in.duration.100ms.origin.top.right.opacity.scale.85.out.duration.200ms.origin.bottom.left.opacity.scale.95</code></p>
</blockquote>
<blockquote>
<p>备注： <code>x-show</code> 将等待子元素完成 out。如果你希望跳过这一行为，可以添加 <code>.immediate</code> 修饰符：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show.immediate</span>=<span class="string">&quot;open&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-show.transition</span>=<span class="string">&quot;open&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="x-bind"><a href="#x-bind" class="headerlink" title="x-bind"></a><code>x-bind</code></h3><blockquote>
<p>备注：可以用 “:” 简写语法替代，例如： <code>:type=&quot;...&quot;</code>.</p>
</blockquote>
<p><strong>例如:</strong> <code>&lt;input x-bind:type=&quot;inputType&quot;&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;input x-bind:[HTML属性]=&quot;[表达式]&quot;&gt;</code></p>
<p><code>x-bind</code> 将当前属性的值设定为指令中表达式的结果。 这一表达式可以访问组件数据对象中的所有 key，并在每次数据更新时重算结果。</p>
<blockquote>
<p>备注： 属性数据绑定只会在依赖的值更新时被重算。框架足够智能，可以观测数据变化并检测绑定是否关心这些变化。</p>
</blockquote>
<p><strong><code>x-bind</code> 到 class 属性</strong></p>
<p><code>x-bind</code> 在完成到 <code>class</code> 属性的绑定时，行为略有不同。</p>
<p>对于 class，你可以传入一个对象，key 为 class 名，值为布尔量，用来表示对应 class 是否应该生效。</p>
<p>例如：<br><code>&lt;div x-bind:class=&quot;&#123; &#39;hidden&#39;: foo &#125;&quot;&gt;&lt;/div&gt;</code></p>
<p>在这一例子中，”hidden” 这一 class 将只会在 foo 数据属性为 <code>true</code> 时有效。</p>
<p><strong><code>x-bind</code> 到布尔值属性</strong></p>
<p><code>x-bind</code> 支持布尔值属性，与其他 value 属性一样，使用变量或者其他结果为 <code>true</code> 或 <code>false</code> 的表达式作为其条件。</p>
<p>例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 给定值: --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">x-bind:disabled</span>=<span class="string">&quot;myVar&quot;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 当 myVar == true: --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 当 myVar == false: --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这将在 <code>myVar</code> 为 true 或 false 时分别新增或删除 <code>disabled</code> 属性。</p>
<p><a href="https://html.spec.whatwg.org/multipage/indices.html#attributes-3:boolean-attribute">HTML specification 文档（英文）</a>中列出的布尔值属性都被支持，例如： <code>disabled</code>, <code>readonly</code>, <code>required</code>, <code>checked</code>, <code>hidden</code>, <code>selected</code>, <code>open</code> 等等。</p>
<blockquote>
<p>备注：如果你需要一个 false 状态来展示你的属性，如：<code>aria-*</code>，要用对绑定值使用链式的 <code>.toString()</code>。例如： <code>:aria-expanded=&quot;isOpen.toString()&quot;</code> 将在 <code>isOpen</code> 为 <code>true</code> 或 <code>false</code> 时都能保持属性存在。</p>
</blockquote>
<p><strong><code>.camel</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;svg x-bind:view-box.camel=&quot;viewBox&quot;&gt;</code></p>
<p><code>camel</code> 修饰符用来绑定等效驼峰写法的属性名。如上面的例子，<code>viewBox</code> 的值将被绑定到 <code>viewBox</code> 属性，他被表示为 <code>view-box</code>。</p>
<hr>
<h3 id="x-on"><a href="#x-on" class="headerlink" title="x-on"></a><code>x-on</code></h3><blockquote>
<p>备注：你可以直接使用简化的 “@” 语法，例如：<code>@click=&quot;...&quot;</code>。</p>
</blockquote>
<p><strong>例如:</strong> <code>&lt;button x-on:click=&quot;foo = &#39;bar&#39;&quot;&gt;&lt;/button&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;button x-on:[事件]=&quot;[表达式]&quot;&gt;&lt;/button&gt;</code></p>
<p><code>x-on</code> 挂载一个事件监听器到声明的元素昂，当事件触发后，传入的表达式将被执行。你可以在指令所在元素可用的任何事件上使用 <code>x-on</code>，完整的事件列表，可以参考 <a href="https://developer.mozilla.org/en-US/docs/Web/Events">MDN 上的事件参考文档</a>。</p>
<p>如果表达式中的进行了任何数据变动，其他绑定到这些数据的元素属性将被更新。</p>
<blockquote>
<p>备注：你也可以直接使用 JavaScript 函数名。</p>
</blockquote>
<p><strong>例如:</strong> <code>&lt;button x-on:click=&quot;myFunction&quot;&gt;&lt;/button&gt;</code></p>
<p>这等效于：<code>&lt;button x-on:click=&quot;myFunction($event)&quot;&gt;&lt;/button&gt;</code></p>
<p><strong><code>keydown</code> 修饰符</strong></p>
<p><strong>例如:</strong> <code>&lt;input type=&quot;text&quot; x-on:keydown.escape=&quot;open = false&quot;&gt;</code></p>
<p>你可以通过向 <code>x-on:keydown</code> 指令增加 keydown 修饰符来指定特定需要监听的按钮。注意修饰符是 <code>Event.key</code> 值的短横线隔开写法（kebab-cased）版本。</p>
<p>例如：<code>enter</code>, <code>escape</code>, <code>arrow-up</code>, <code>arrow-down</code></p>
<blockquote>
<p>备注：你也可以这样监听混合的系统修饰符： <code>x-on:keydown.cmd.enter=&quot;foo&quot;</code></p>
</blockquote>
<p><strong><code>.away</code> 修饰符</strong></p>
<p><strong>例如:</strong> <code>&lt;div x-on:click.away=&quot;showModal = false&quot;&gt;&lt;/div&gt;</code></p>
<p>当 <code>.away</code> 修饰符存在时，事件处理器将在源头不是他们自己或他们的子元素时被触发。</p>
<p>这对下拉菜单或模态框中处理用户点击其外部的位置关闭的交互动作非常有用。</p>
<p><strong><code>.prevent</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;input type=&quot;checkbox&quot; x-on:click.prevent&gt;</code></p>
<p>增加 <code>.prevent</code> 到事件监听器上，将会调用触发事件的 <code>preventDefault</code> 方法。在上面的例子中，这意味着这个 checkbox 在用户点击时不会真的被选中。</p>
<p><strong><code>.stop</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;div x-on:click=&quot;foo = &#39;bar&#39;&quot;&gt;&lt;button x-on:click.stop&gt;&lt;/button&gt;&lt;/div&gt;</code></p>
<p>增加 <code>.stop</code> 到事件监听器上，将会调用触发事件的 <code>stopPropagation</code> 方法。在上面的例子中，这意味着点击事件不会从这个按钮冒泡到其他 div 上。换句话说，用户点击按钮时 <code>foo</code> 并不会被置为 <code>bar</code>。</p>
<p><strong><code>.self</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;div x-on:click.self=&quot;foo = &#39;bar&#39;&quot;&gt;&lt;button&gt;&lt;/button&gt;&lt;/div&gt;</code></p>
<p>增加 <code>.self</code> 到事件监听器上，将会使得处理器只在 <code>$event.target</code> 为元素自己的时候被调用。在上面的例子中，这意味着按钮的点击事件会冒泡的上层的 <code>&lt;div&gt;</code> 时，将 <strong>不会</strong> 调用处理器函数。</p>
<p><strong><code>.window</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;div x-on:resize.window=&quot;isOpen = window.outerWidth &gt; 768 ? false : open&quot;&gt;&lt;/div&gt;</code></p>
<p>增加 <code>.window</code> 到事件监听器上，将会安装监听器到全局的 window 对象而不是实际声明的 DOM 节点。当你需要在 window 上的属性变化（如 resize 事件）时修改自己组件的状态，这会非常有用。在例子中，当窗口宽度扩大到 768 像素以上时我们就会关闭模态框/下拉菜单，否则保持已有状态。</p>
<blockquote>
<p>备注：你也可以使用 <code>.document</code> 修饰符来挂载监听器到<code>document</code> 而不是 <code>window</code></p>
</blockquote>
<p><strong><code>.once</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;button x-on:mouseenter.once=&quot;fetchSomething()&quot;&gt;&lt;/button&gt;</code></p>
<p>增加 <code>.once</code> 修饰符到事件监听器上，将会确保监听器只被调用一次。这对于那些你只想调一次的事件来说超有用，比如请求 HTML 片段之类的。</p>
<p><strong><code>.passive</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;button x-on:mousedown.passive=&quot;interactive = true&quot;&gt;&lt;/button&gt;</code></p>
<p>增加 <code>.passive</code> 修饰符到事件监听器上，将会使监听器为 passive 状态，这意味着 <code>preventDefault()</code>不能工作。这可以帮助处理触摸设备上的滑动性能问题。</p>
<p><strong><code>.debounce</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;input x-on:input.debounce=&quot;fetchSomething()&quot;&gt;</code></p>
<p><code>debounce</code> 修饰符允许你对事件处理器进行「防抖」。换句话说，事件处理器将会在上次触发完成后等待一段时间才会再次触发。当处理器准备好后再处理上一个调用。</p>
<p>默认的防抖「等待」时间是 250 毫秒。</p>
<p>如果你打算自定义它，可以这样指定：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input x-on:input.debounce.750=&quot;fetchSomething()&quot;&gt;</span><br><span class="line">&lt;input x-on:input.debounce.750ms=&quot;fetchSomething()&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><strong><code>.camel</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;input x-on:event-name.camel=&quot;doSomething()&quot;&gt;</code></p>
<p><code>camel</code> 修饰符用来挂载等效驼峰写法的事件监听器。如上面的例子，表达式将在 <code>eventName</code> 事件触发时被执行。</p>
<hr>
<h3 id="x-model"><a href="#x-model" class="headerlink" title="x-model"></a><code>x-model</code></h3><p><strong>例如:</strong> <code>&lt;input type=&quot;text&quot; x-model=&quot;foo&quot;&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;input type=&quot;text&quot; x-model=&quot;[data item]&quot;&gt;</code></p>
<p><code>x-model</code> 新增「双向数据绑定」到一个元素上。换句话说，输入元素的 value 值将于组件中数据项的值维持同步。</p>
<blockquote>
<p>备注：<code>x-model</code> 可以智能地检测文字输入框(input)、多选框(checkbox)、单选框(radio button)、文本输入区(textarea)、下拉选择(select)、下拉多选(multi selects)。他的行为及使用场景和 <a href="https://vuejs.org/v2/guide/forms.html">Vue</a> 别无二致。</p>
</blockquote>
<p><strong><code>.number</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;input x-model.number=&quot;age&quot;&gt;</code></p>
<p><code>number</code> 修饰符将转换输入的值为数据为数字类型，如果不能被成功转换，将返回原始值。</p>
<p><strong><code>.debounce</code> 修饰符</strong><br><strong>例如:</strong> <code>&lt;input x-model.debounce=&quot;search&quot;&gt;</code></p>
<p><code>debounce</code> 修饰符允许你对值的更新进行「防抖」。换句话说，事件处理器将会在上次触发完成后等待一段时间才会再次触发。当处理器准备好后再处理上一个调用。</p>
<p>默认的防抖「等待」时间是 250 毫秒。</p>
<p>如果你打算自定义它，可以这样指定：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input x-model.debounce.750=&quot;search&quot;&gt;</span><br><span class="line">&lt;input x-model.debounce.750ms=&quot;search&quot;&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="x-text"><a href="#x-text" class="headerlink" title="x-text"></a><code>x-text</code></h3><p><strong>例如:</strong> <code>&lt;span x-text=&quot;foo&quot;&gt;&lt;/span&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;span x-text=&quot;[表达式]&quot;</code></p>
<p><code>x-text</code> 与 <code>x-bind</code> 十分相似，只不过当属性中的值更新时，他会更新元素的 <code>innerText</code>。</p>
<hr>
<h3 id="x-html"><a href="#x-html" class="headerlink" title="x-html"></a><code>x-html</code></h3><p><strong>例如:</strong> <code>&lt;span x-html=&quot;foo&quot;&gt;&lt;/span&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;span x-html=&quot;[表达式]&quot;</code></p>
<p><code>x-html</code> 与 <code>x-bind</code> 十分相似，只不过当属性中的值更新时，他会更新元素的 <code>innerHTML</code>。</p>
<blockquote>
<p>:warning: <strong>只能用在可信内容上，绝不要直接展示用户的内容</strong> :warning:</p>
<p>动态渲染第三方来源的 HTML 会非常容易造成 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting">XSS 漏洞（英文）</a>。</p>
</blockquote>
<hr>
<h3 id="x-ref"><a href="#x-ref" class="headerlink" title="x-ref"></a><code>x-ref</code></h3><p><strong>例如:</strong> <code>&lt;div x-ref=&quot;foo&quot;&gt;&lt;/div&gt;&lt;button x-on:click=&quot;$refs.foo.innerText = &#39;bar&#39;&quot;&gt;&lt;/button&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;div x-ref=&quot;[ref 名称]&quot;&gt;&lt;/div&gt;&lt;button x-on:click=&quot;$refs.[ref 名称].innerText = &#39;bar&#39;&quot;&gt;&lt;/button&gt;</code></p>
<p><code>x-ref</code> 提供了一种在组件外获取原始 DOM 元素的简便方法。通过设置元素上的 <code>x-ref</code> 属性，你可在任何事件处理中通过内置对象（魔法属性） <code>$refs</code> 和标记的 refName 拿到 DOM。</p>
<p>它可以帮助你在任何地方替代设置id再通过 <code>document.querySelector</code> 取值的做法。</p>
<blockquote>
<p>备注：如果你需要，也可以绑个动态值到 x-ref <code>&lt;span :x-ref=&quot;item.id&quot;&gt;&lt;/span&gt;</code>。</p>
</blockquote>
<hr>
<h3 id="x-if"><a href="#x-if" class="headerlink" title="x-if"></a><code>x-if</code></h3><p><strong>例如:</strong> <code>&lt;template x-if=&quot;true&quot;&gt;&lt;div&gt;Some Element&lt;/div&gt;&lt;/template&gt;</code></p>
<p><strong>结构:</strong> <code>&lt;template x-if=&quot;[表达式]&quot;&gt;&lt;div&gt;Some Element&lt;/div&gt;&lt;/template&gt;</code></p>
<p>有的时候，<code>x-show</code> 可能会不太好用（它会在值为 false 时为元素增加 <code>display: none</code> 样式），<code>x-if</code> 可以真实的完整的把元素从 DOM 中删除。</p>
<p>但要注意，<code>x-if</code> 只能在 <code>&lt;template&gt;&lt;/template&gt;</code> 标签中使用，因为 Alpine 没有使用虚拟 DOM。这一实现允许 Alpine 保持简洁，直接使用真实的 DOM 来完成动态部分（magic）。</p>
<blockquote>
<p>备注：<code>x-if</code> 要求在 <code>&lt;template&gt;&lt;/template&gt;</code> 标签中有单一的根元素。</p>
</blockquote>
<blockquote>
<p>备注：当在 <code>svg</code> 标签中使用 <code>template</code> 的时候，你需要增加 <a href="https://github.com/alpinejs/alpine/issues/637#issuecomment-654856538">polyfill</a> 在初始化 Alpine 之前运行它。</p>
</blockquote>
<hr>
<h3 id="x-for"><a href="#x-for" class="headerlink" title="x-for"></a><code>x-for</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>备注：<code>:key</code> 绑定时可选的，但是强烈推荐，使用它在列表渲染中是必要的。</p>
</blockquote>
<p><code>x-for</code> 可以用于为数组中的每一项创建一个新的 DOM 节点。这一特性与 Vue 中的 <code>v-for</code> 非常类似，他也需要在 <code>template</code> 标签上使用，不能是普通的 DOM 元素。</p>
<p>如果需要使用当前迭代中的索引，可以这样写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;(item, index) in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 你可以在需要时直接使用索引值 index。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>若果你需要在迭代中访问原始数组对象，可以这样写：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;(item, index, collection) in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 你可以在需要时直接使用数组原始值 collection。 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 当前项 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 和上一行效果一致 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;collection[index]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 上一项 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;collection[index - 1]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>备注：<code>x-for</code> 要求在 <code>&lt;template&gt;&lt;/template&gt;</code> 标签中有单一的根元素。</p>
</blockquote>
<blockquote>
<p>备注：当在 <code>svg</code> 标签中使用 <code>template</code> 的时候，你需要增加 <a href="https://github.com/alpinejs/alpine/issues/637#issuecomment-654856538">polyfill</a> 在初始化 Alpine 之前运行它。</p>
</blockquote>
<h4 id="嵌套-x-for"><a href="#嵌套-x-for" class="headerlink" title="嵌套 x-for"></a>嵌套 <code>x-for</code></h4><p>可以嵌套使用 <code>x-for</code> 循环，但是你必须为每个循环外面都包裹一个元素，如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;subItem in item.subItems&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">x-text</span>=<span class="string">&quot;subItem&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="范围内迭代"><a href="#范围内迭代" class="headerlink" title="范围内迭代"></a>范围内迭代</h4><p>Alpine 支持 <code>i in n</code> 语法，当 n 是整数时，就可以完成在一个固定范围内迭代的目标了。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">x-for</span>=<span class="string">&quot;i in 10&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">x-text</span>=<span class="string">&quot;i&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="x-transition"><a href="#x-transition" class="headerlink" title="x-transition"></a><code>x-transition</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-show</span>=<span class="string">&quot;open&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-transition:enter</span>=<span class="string">&quot;transition ease-out duration-300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-transition:enter-start</span>=<span class="string">&quot;opacity-0 transform scale-90&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-transition:enter-end</span>=<span class="string">&quot;opacity-100 transform scale-100&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-transition:leave</span>=<span class="string">&quot;transition ease-in duration-300&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-transition:leave-start</span>=<span class="string">&quot;opacity-100 transform scale-100&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-transition:leave-end</span>=<span class="string">&quot;opacity-0 transform scale-90&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">x-if</span>=<span class="string">&quot;open&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-transition:enter</span>=<span class="string">&quot;transition ease-out duration-300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-transition:enter-start</span>=<span class="string">&quot;opacity-0 transform scale-90&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-transition:enter-end</span>=<span class="string">&quot;opacity-100 transform scale-100&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-transition:leave</span>=<span class="string">&quot;transition ease-in duration-300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-transition:leave-start</span>=<span class="string">&quot;opacity-100 transform scale-100&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-transition:leave-end</span>=<span class="string">&quot;opacity-0 transform scale-90&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个例子使用了 <a href="https://tailwindcss.com/">Tailwind CSS</a> 中提供的 class。</p>
</blockquote>
<p>Alpine 提供了 6 个不同的过渡指令用来在元素过渡（Transition）的显示/隐藏状态下不同阶段生效不同的 class。这些指令都能和 <code>x-show</code> 还有 <code>x-if</code> 一起使用。</p>
<p>这些行为与 VueJS 的过渡指令完全一致。只是用了更清晰的命名。</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>:enter</code></td>
<td>在整个 Enter 阶段都生效</td>
</tr>
<tr>
<td><code>:enter-start</code></td>
<td>在元素被插入前生效，在元素被插入的后1帧被删除</td>
</tr>
</tbody></table>
<p>| <code>:enter-end</code> | 在元素被插入后1帧（<code>enter-start</code> 被移除的同时）生效，在过渡/动画结束后被删除 ｜<br>| <code>:leave</code> | 在整个 Leave 阶段都生效 |<br>| <code>:leave-start</code> | 在 Leave 过渡触发后立即生效，1帧即被删除 |<br>| <code>:leave-end</code> | 在 Leave 过渡触发后（<code>leave-start</code> 删除的同时）1 帧新增，并在过渡/动画结束时删除。｜</p>
<hr>
<h3 id="x-spread"><a href="#x-spread" class="headerlink" title="x-spread"></a><code>x-spread</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;dropdown()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">x-spread</span>=<span class="string">&quot;trigger&quot;</span>&gt;</span>Open Dropdown<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">x-spread</span>=<span class="string">&quot;dialogue&quot;</span>&gt;</span>Dropdown Contents<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">dropdown</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">open</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">trigger</span>: &#123;</span></span><br><span class="line"><span class="javascript">                [<span class="string">&#x27;@click&#x27;</span>]() &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.open = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="attr">dialogue</span>: &#123;</span></span><br><span class="line"><span class="javascript">                [<span class="string">&#x27;x-show&#x27;</span>]() &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="built_in">this</span>.open</span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">                [<span class="string">&#x27;@click.away&#x27;</span>]() &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.open = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>x-spread</code> 允许你展开一个可以复用的对象，其中包括元素的 Alpine 绑定。</p>
<p>这一对象的 key 是指令（当然也可以包括修饰符），value 是可被 Alpine 执行的回调。</p>
<blockquote>
<p>备注： x-spread 有以下两点需要注意</p>
<ul>
<li>当被展开的指令是 <code>x-for</code> 时，你需要在回调中返回一个表达式字符串，如：<code>[&#39;x-for&#39;]() &#123; return &#39;item in items&#39; &#125;</code>.</li>
<li><code>x-data</code> 和 <code>x-init</code> 不能在「spread」对象中使用。</li>
</ul>
</blockquote>
<hr>
<h3 id="x-cloak"><a href="#x-cloak" class="headerlink" title="x-cloak"></a><code>x-cloak</code></h3><p><strong>例如:</strong> <code>&lt;div x-data=&quot;&#123;&#125;&quot; x-cloak&gt;&lt;/div&gt;</code></p>
<p><code>x-cloak</code> 属性将在 Alpine 初始化后被移除。这对于隐藏未初始化完毕的 DOM 非常有效，一种典型的通过全局样式的工作方式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-attr">[x-cloak]</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: none <span class="meta">!important</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="魔法属性-Magic-Properties"><a href="#魔法属性-Magic-Properties" class="headerlink" title="魔法属性 Magic Properties"></a>魔法属性 Magic Properties</h3><blockquote>
<p>除 <code>$el</code> 外，魔法属性 <strong>在 <code>x-data</code> 中的无法使用</strong>，因为那时组件还没初始化。</p>
</blockquote>
<hr>
<h3 id="el"><a href="#el" class="headerlink" title="$el"></a><code>$el</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$el.innerHTML = &#x27;foo&#x27;&quot;</span>&gt;</span>Replace me with &quot;foo&quot;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>$el</code> 是一个用来获取根组件 DOM 节点的魔法属性。</p>
<h3 id="refs"><a href="#refs" class="headerlink" title="$refs"></a><code>$refs</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">x-ref</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">x-on:click</span>=<span class="string">&quot;$refs.foo.innerText = &#x27;bar&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>$refs</code> 是一个用来在组件中获取原生 DOM 元素的魔法属性。这可以帮助你在需要时手动拿到原始的 DOM 元素。</p>
<hr>
<h3 id="event"><a href="#event" class="headerlink" title="$event"></a><code>$event</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">x-on:input</span>=<span class="string">&quot;alert($event.target.value)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>$event</code> 是一个用来在事件监听器中接受浏览器原生「Event」对象的魔法属性。</p>
<blockquote>
<p>备注: $event 属性只在 DOM 表达式中有效。</p>
</blockquote>
<p>如果你需要在一个 JavaScript 函数中使用 $event，可以直接这么干：</p>
<p><code>&lt;button x-on:click=&quot;myFunction($event)&quot;&gt;&lt;/button&gt;</code></p>
<hr>
<h3 id="dispatch"><a href="#dispatch" class="headerlink" title="$dispatch"></a><code>$dispatch</code></h3><p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">custom-event</span>=<span class="string">&quot;console.log($event.detail.foo)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$dispatch(&#x27;custom-event&#x27;, &#123; foo: &#x27;bar&#x27; &#125;)&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 点击时，将触发 console.log --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>有关事件传播 (Event Propagation)</strong></p>
<p>请注意，因为 <a href="https://en.wikipedia.org/wiki/Event_bubbling">事件冒泡机制</a> 的存在，当你需要从相同层级节点上拦截已触发的事件时，需要增加 <a href="https://github.com/alpinejs/alpine#x-on"><code>.window</code></a> 修饰符：</p>
<p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> @<span class="attr">custom-event</span>=<span class="string">&quot;console.log($event.detail.foo)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$dispatch(&#x27;custom-event&#x27;, &#123; foo: &#x27;bar&#x27; &#125;)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的例子是错误示范，不能正常工作，因为 <code>custom-event</code> 被触发时，他只会传播到共同的祖先，上级的 <code>div</code> 元素。</p>
</blockquote>
<p><strong>分发到组件</strong></p>
<p>也可以刚才这一技巧在组件之间通信使用：</p>
<p><strong>例如:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span> @<span class="attr">custom-event.window</span>=<span class="string">&quot;console.log($event.detail)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">x-data</span> @<span class="attr">click</span>=<span class="string">&quot;$dispatch(&#x27;custom-event&#x27;, &#x27;Hello World!&#x27;)&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 当点击发生时，将会 console.log &quot;Hello World!&quot;. --&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>$dispatch</code> 是一个创建 <code>CustomEvent</code> 并使用其内部的 <code>.dispatchEvent()</code> 进行分发的快捷方式。有很多使用自定义事件在组件间传递数据的优秀用例。<a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events">参考这篇文档</a> 来获取更多关于浏览器中 <code>CustomEvent</code> 的信息。</p>
<p>可以注意到，放在 <code>$dispatch(&#39;some-event&#39;, &#123; some: &#39;data&#39; &#125;)</code> 第二个参数的数据，在新事件上可通过「detail」属性来拿到：<code>$event.detail.some</code>。将自定义事件的数据附加到 .detail 属性是在浏览器中 <code>CustomEvent</code> 的标准实践。更多信息参阅 <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail">这篇文档（英文）</a>。</p>
<p>你也可以使用 <code>$dispatch()</code> 来触发 <code>x-model</code> 绑定的数据更新。例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; foo: &#x27;bar&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">x-model</span>=<span class="string">&quot;foo&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$dispatch(&#x27;input&#x27;, &#x27;baz&#x27;)&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 按钮被点击后，`x-model` 将获得冒泡的 「input」事件，并更新 foo 为 「baz」。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>备注：$dispatch 属性只在 DOM 表达式中有效。</p>
</blockquote>
<p>如果你需要在一个 JavaScript 函数中使用 $dispatch，可以直接这么干：</p>
<p><code>&lt;button x-on:click=&quot;myFunction($dispatch)&quot;&gt;&lt;/button&gt;</code></p>
<hr>
<h3 id="nextTick"><a href="#nextTick" class="headerlink" title="$nextTick"></a><code>$nextTick</code></h3><p><strong>例如：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; fruit: &#x27;apple&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-on:click</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            fruit = &#x27;pear&#x27;;</span></span></span><br><span class="line"><span class="string"><span class="tag">            $nextTick(() =&gt; &#123; console.log($event.target.innerText) &#125;);</span></span></span><br><span class="line"><span class="string"><span class="tag">        &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">x-text</span>=<span class="string">&quot;fruit&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>$nextTick</code> 是一个运行你在 Alpine 做出响应式 DOM 更新后，执行一个给定表达式的指令。这在你需要在完成数据更新后用 DOM 状态做交互时非常有用。</p>
<hr>
<h3 id="watch"><a href="#watch" class="headerlink" title="$watch"></a><code>$watch</code></h3><p><strong>例如：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">x-data</span>=<span class="string">&quot;&#123; open: false &#125;&quot;</span> <span class="attr">x-init</span>=<span class="string">&quot;$watch(&#x27;open&#x27;, value =&gt; console.log(value))&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;open = ! open&quot;</span>&gt;</span>Toggle Open<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>你可以通过 <code>$watch</code> 魔法方法「监听」一个组件属性。在上面的例子中，当按钮被点击且 open 被改变时，你提供的回调函数会被调用，<code>console.log</code> 新的 value。</p>
<h2 id="安全相关-Security"><a href="#安全相关-Security" class="headerlink" title="安全相关 Security"></a>安全相关 Security</h2><p>如果你发现了安全漏洞，请发邮件到 <a href="">calebporzio@gmail.com</a>.</p>
<p>Alpine 依赖对 <code>Function</code> 对象的自定义实现来运行指令。虽然比 <code>eval()</code> 安全一，但在某些环境下这一方法也不可用，例如 Google Chrome App 使用的限制性内容安全策略（Content Security Policy/CSP）.</p>
<p>如果你在使用 Alpin 的网站上处理敏感数据，就需要设置 <a href="https://csp.withgoogle.com/docs/strict-csp.html">CSP</a> 使之包括 <code>unsafe-eval</code>。正确设置安全的策略有助于保护用户的个人隐私数据。</p>
<p>由于策略设置会适用于页面中所有脚本，务必要检查页面引入的其他外部依赖，避免它们引发 XSS 漏洞、通过 <code>eval()</code> 修改 DOM 注入恶意代码。</p>
<h2 id="V3-路线图-Roadmap"><a href="#V3-路线图-Roadmap" class="headerlink" title="V3 路线图 Roadmap"></a>V3 路线图 Roadmap</h2><ul>
<li>从<code>x-ref</code> 迁移到 <code>ref</code> 以与 Vue 保持一致？</li>
<li>新增 <code>Alpine.directive()</code></li>
<li>新增 <code>Alpine.component(&#39;foo&#39;, &#123;...&#125;)</code> (通过 <code>__init()</code> 魔法方法)</li>
<li>分发 Alpine 的 “loaded”, “transition-start” 等多个事件 (<a href="https://github.com/alpinejs/alpine/pull/299">#299</a>) ？</li>
<li>移除 <code>x-bind:class=&quot;&#123; &#39;foo&#39;: true &#125;&quot;</code> 中的使用对象（以及数组）的语法 (<a href="https://github.com/alpinejs/alpine/pull/236">#236</a> 并增加在 <code>style</code> 中使用对象的支持</li>
<li>优化 <code>x-for</code> 的响应式效果 (<a href="https://github.com/alpinejs/alpine/pull/165">#165</a>)</li>
<li>增加 “deep watching” 支持 (<a href="https://github.com/alpinejs/alpine/pull/294">#294</a>)</li>
<li>增加 <code>$el</code> 快捷方式</li>
<li>修改 <code>@click.away</code> 为 <code>@click.outside</code>?</li>
</ul>
<h2 id="许可证-License"><a href="#许可证-License" class="headerlink" title="许可证 License"></a>许可证 License</h2><p>Copyright © 2019-2020 Caleb Porzio 与仓库所有贡献者 版权所有</p>
<p>基于 MIT 许可证开源，查看 <a href="LICENSE.md">LICENSE.md</a> 获取详情。</p>
]]></content>
      <categories>
        <category>Alpine.js</category>
      </categories>
      <tags>
        <tag>Alpine.js</tag>
      </tags>
  </entry>
  <entry>
    <title>nuxtjs项目搭建</title>
    <url>/taiaiac.gitee.io/2021/03/17/nuxt/nuxtjs%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="1-命令行创建项目"><a href="#1-命令行创建项目" class="headerlink" title="1.命令行创建项目"></a>1.命令行创建项目</h2><ul>
<li><code>npx create-nuxt-app &lt;项目名&gt;</code></li>
<li><code>yarn create nuxt-app &lt;项目名&gt;</code></li>
</ul>
<h2 id="2-选项配置"><a href="#2-选项配置" class="headerlink" title="2.选项配置"></a>2.选项配置</h2><p>项目配置：</p>
<ul>
<li><p>语言: JavaScript</p>
</li>
<li><p>包管理 : yarn</p>
</li>
<li><p>UI框架：Element</p>
</li>
<li><p>使用集成的 :  Axios -  Promise based HTTP client</p>
</li>
<li><p>代码检测 : Prettier</p>
</li>
<li><p>测试框架：None</p>
</li>
<li><p>Nuxt模式：Universal (服务端渲染)</p>
</li>
<li><p>部署目标 :  服务器 or 静态托管</p>
</li>
<li><p>开发工具 : jsconfig.json(vs code)</p>
</li>
<li><p>版本控制 : git</p>
</li>
</ul>
<h2 id="3-项目目录"><a href="#3-项目目录" class="headerlink" title="3.项目目录"></a>3.项目目录</h2><h4 id="重要目录"><a href="#重要目录" class="headerlink" title="重要目录"></a>重要目录</h4><ul>
<li>.nuxt<ul>
<li>打包后的文件,如查看router生成后的文件</li>
</ul>
</li>
<li>assets<ul>
<li>全局文件目录css,js,img…..</li>
</ul>
</li>
<li>components<ul>
<li>全局组件</li>
</ul>
</li>
<li>layouts<ul>
<li>default.vue为全局默认布局</li>
<li>其他布局,和组件调用方式一致</li>
</ul>
</li>
<li>middleware<ul>
<li>中间件目录</li>
<li>auth.js一般作为全局路由使用</li>
</ul>
</li>
<li>pages<ul>
<li>项目目录即是路由视图</li>
<li>约定式路由,自动生成路由视图</li>
</ul>
</li>
<li>plugins<ul>
<li>插件目录</li>
<li>全局资源配置</li>
</ul>
</li>
<li>static<ul>
<li>静态资源目录</li>
<li>无需打包的文件存放地</li>
</ul>
</li>
<li>store<ul>
<li>vuex状态树</li>
<li>保存状态,记录操作….</li>
</ul>
</li>
<li>utils<ul>
<li>工具</li>
<li>一些封装的拿来即用的方法函数</li>
</ul>
</li>
<li>nuxt.config.js<ul>
<li>项目配置目录</li>
<li>很重要</li>
</ul>
</li>
<li>dist<ul>
<li><code>yarn generate</code>命令生成静态部署包</li>
<li>客户端渲染的包</li>
</ul>
</li>
</ul>
<h2 id="4-环境搭建"><a href="#4-环境搭建" class="headerlink" title="4.环境搭建"></a>4.环境搭建</h2><h3 id="安装项目必备的插件"><a href="#安装项目必备的插件" class="headerlink" title="安装项目必备的插件"></a>安装项目必备的插件</h3><ul>
<li><code>yarn add  @nuxtjs/axios @nuxtjs/proxy  cookie-universal-nuxt </code><ul>
<li>axios,配置代理,cookie工具</li>
</ul>
</li>
<li><code>yarn add  node-sass sass-loader  scss-loader</code><ul>
<li>css预处理器</li>
</ul>
</li>
<li><code>@nuxtjs/style-resources</code><ul>
<li>sass,less变量全局使用插件,无需引入</li>
</ul>
</li>
</ul>
<h3 id="nuxt-config-js配置"><a href="#nuxt-config-js配置" class="headerlink" title="nuxt.config.js配置"></a>nuxt.config.js配置</h3><ul>
<li>server<ul>
<li>port 端口</li>
<li>host  地址</li>
</ul>
</li>
<li>head<ul>
<li>全局head标签内容</li>
</ul>
</li>
<li>css<ul>
<li>全局css的引入</li>
</ul>
</li>
<li>router<ul>
<li>middleware 全局中间件</li>
<li>路由配置</li>
</ul>
</li>
<li>plugins<ul>
<li>全局插件注入,注意前后顺序</li>
<li>引入plugins目录的插件</li>
</ul>
</li>
<li>loading<ul>
<li>定义系统默认loading效果,或者指定loading组件</li>
<li><code>loading: &#123; color: &#39;#007fff&#39;, height: &#39;50px&#39; &#125;</code></li>
<li><code>loading: &#39;~/components/loading.vue&#39;</code></li>
</ul>
</li>
<li>modules<ul>
<li>模块</li>
<li><code>modules: [&#39;@nuxtjs/axios&#39;, &#39;cookie-universal-nuxt&#39;, &#39;@nuxtjs/style-resources&#39;]</code></li>
</ul>
</li>
<li>axios<ul>
<li>axios相关配置</li>
</ul>
</li>
<li>proxy<ul>
<li>配置代理</li>
</ul>
</li>
<li>components<ul>
<li><code>components: true</code></li>
<li>开启全局组件,无需引用直接使用</li>
</ul>
</li>
<li>styleResources<ul>
<li>全局样式变量</li>
<li><code>scss: [&#39;~/assets/scss/variable.scss&#39;]</code></li>
</ul>
</li>
</ul>
<h2 id="5-路由"><a href="#5-路由" class="headerlink" title="5.路由"></a>5.路由</h2><ul>
<li><p><code>layouts/default.vue</code>中<code>&lt;nuxt /&gt;</code>下的为一级路由视图</p>
</li>
<li><p>一级路由即<code>pages</code>目录下的<code>.vue</code>文件</p>
</li>
<li><p>二级路由视图标签为<code>&lt;NuxtChild /&gt;</code></p>
</li>
<li><p>约定式路由中实现重定向</p>
<ul>
<li><code>index.vue</code>为默认展示页,也就是重定向</li>
<li>重定向需要与父路由名相同的文件目录下的<code>index.vue</code></li>
<li>也就是<code>pages/home.vue</code>中的<code>&lt;NuxtChild /&gt;</code>默认显示的页面为<code>pages/home/index.vue</code></li>
<li>同一目录下跳转为同级路由跳转,会按照父路由展示点展示</li>
</ul>
</li>
<li><p>动态路由</p>
<ul>
<li>动态路由的页面必须在文件名前加<code>_</code></li>
<li>如给<code>_id.vue</code>动态传参</li>
<li>字符串方式<ul>
<li><code>home/see/1?a=1&amp;b=2</code>       <code>home/see/2?a=11&amp;b=22</code></li>
</ul>
</li>
<li>对象方式(params对等文件名,传递的是id)<ul>
<li><code>&#123;name:&#39;home-id&#39;,params:3,query:&#123;a:111,b:222&#125;&#125;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>路由传值</p>
<ul>
<li>使用asyncData接受到的值可以直接使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">asyncData</span>(<span class="params">&#123; params, query &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      params,</span><br><span class="line">      query</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="路由切换动态效果"><a href="#路由切换动态效果" class="headerlink" title="路由切换动态效果"></a>路由切换动态效果</h3><blockquote>
<p> 配置全局路由切换动效</p>
<p><code>assets\css\transition.css</code></p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 路由统一动效 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* page前缀为全局样式无需引入 */</span></span><br><span class="line"><span class="comment">/* 动画形式 */</span></span><br><span class="line"><span class="selector-class">.page-enter-active</span>,</span><br><span class="line"><span class="selector-class">.page-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 入 退 */</span></span><br><span class="line"><span class="selector-class">.page-enter</span>,</span><br><span class="line"><span class="selector-class">.page-leave</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 需要引入 transition: &#x27;test&#x27;, */</span></span><br><span class="line"><span class="comment">/* 单路由 */</span></span><br><span class="line"><span class="selector-class">.test-enter-active</span>,</span><br><span class="line"><span class="selector-class">.test-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> ease all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test-enter</span>,</span><br><span class="line"><span class="selector-class">.test-leave</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 在全局配置中css选项引入</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">css: [<span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>, <span class="string">&#x27;assets/css/global.css&#x27;</span>, <span class="string">&#x27;assets/css/transition.css&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h3><blockquote>
<p>多种选择,取其几种</p>
</blockquote>
<h4 id="1-使用中间件"><a href="#1-使用中间件" class="headerlink" title="1.使用中间件"></a>1.使用中间件</h4><blockquote>
<p>nuxt.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> defalut&#123;</span><br><span class="line">    <span class="attr">router</span>: &#123;</span><br><span class="line">    	<span class="attr">middleware</span>: <span class="string">&#x27;auth&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>middleware\auth.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; $cookies, redirect, route, params, query, req, res, $message &#125;) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 全局中间件业务,每次跳转都经过这里</span></span><br><span class="line">  <span class="comment">// context 服务端上下文</span></span><br><span class="line">  <span class="comment">// store 状态树信息</span></span><br><span class="line">  <span class="comment">// route 一条目标路由的信息</span></span><br><span class="line">  <span class="comment">// redirect  强制跳转</span></span><br><span class="line">  <span class="comment">//  params,query 校验参数合理性</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;middleware&#x27;);</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;path&#x27;, route.path)</span></span><br><span class="line">  <span class="keyword">if</span> (route.path !== <span class="string">&#x27;/&#x27;</span> || route.path !== <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> cookieToken = $cookies.get(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!cookieToken) &#123;</span><br><span class="line">      redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-路由守卫-全局"><a href="#2-路由守卫-全局" class="headerlink" title="2.路由守卫(全局)"></a>2.路由守卫(全局)</h4><blockquote>
<p>nuxt.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> defalut&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/router&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>plugins\router.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; app, $cookies, $alert &#125;) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 前置</span></span><br><span class="line">  app.router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">&#x27;/&#x27;</span> || to.path === <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> next()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断用户是否登录，没有登录就到登录界面，否则放行</span></span><br><span class="line">    <span class="keyword">const</span> token = $cookies.get(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">      $alert(<span class="string">&#x27;即将跳转登录页面,请重新登录&#x27;</span>, <span class="string">&#x27;登录状态失效&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span><br><span class="line">        <span class="attr">callback</span>: <span class="function">() =&gt;</span> next(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    next()</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 后置</span></span><br><span class="line">  <span class="comment">// app.router.afterEach((to, from) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   next()</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-路由守卫-页面级"><a href="#3-路由守卫-页面级" class="headerlink" title="3.路由守卫(页面级)"></a>3.路由守卫(页面级)</h4><blockquote>
<p>页面中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 指向全局的middleware</span></span><br><span class="line">  <span class="comment">// middleware:&#x27;auth&#x27;</span></span><br><span class="line">  <span class="comment">// 页面内部的middleware</span></span><br><span class="line">  <span class="function"><span class="title">middleware</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;页面级别的middleware&#x27;)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-插件工具整理和封装注入"><a href="#6-插件工具整理和封装注入" class="headerlink" title="6.插件工具整理和封装注入"></a>6.插件工具整理和封装注入</h2><blockquote>
<p>element-ui</p>
<p>nuxt.config.js</p>
</blockquote>
<p>直接在全局配置中注入即可全面使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">css</span>: [<span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/element-ui&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>plugins\element-ui.js</p>
<p>按需引入</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> locale <span class="keyword">from</span> <span class="string">&#x27;element-ui/lib/locale/lang/en&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//按需引入elment-ui的组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Button,</span><br><span class="line">  Message,</span><br><span class="line">  MessageBox,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载组件</span></span><br><span class="line">Vue.use(Button)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过inject添加原型链,通过$ + utils 访问</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (context, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;message&#x27;</span>, Message)</span><br><span class="line">  inject(<span class="string">&#x27;alert&#x27;</span>, MessageBox.alert)</span><br><span class="line">  inject(<span class="string">&#x27;confirm&#x27;</span>, MessageBox.confirm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="7-引入-挂载-注入"><a href="#7-引入-挂载-注入" class="headerlink" title="7.引入,挂载,注入"></a>7.引入,挂载,注入</h2><blockquote>
<p> context 是从 Nuxt 额外提供的对象,全局方法和属性都会挂载到 context 上</p>
</blockquote>
<h3 id="封装请求"><a href="#封装请求" class="headerlink" title="封装请求"></a>封装请求</h3><ul>
<li>全局配置</li>
<li>拦截器</li>
<li>请求方法</li>
<li>挂载注入api</li>
</ul>
<blockquote>
<p>全局配置</p>
<p>nuxt.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="comment">// 注入插件的顺序有前后需求,注意引用关系</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/axios&#x27;</span> &#125;, <span class="comment">// 1</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/request&#x27;</span> &#125;, <span class="comment">// 2 </span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/api&#x27;</span> &#125; <span class="comment">// 3</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">modules</span>: [<span class="string">&#x27;@nuxtjs/axios&#x27;</span>, <span class="string">&#x27;cookie-universal-nuxt&#x27;</span>, <span class="string">&#x27;@nuxtjs/style-resources&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>拦截器</p>
<p>plugins\axios.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">&#123; app: &#123; $axios, $cookies, $message &#125;, redirect &#125;</span>) </span>&#123;</span><br><span class="line">  $axios.defaults.baseURL = <span class="string">&#x27;http://152.136.105.192:3000/api/private/v1/&#x27;</span></span><br><span class="line">  $axios.defaults.timeout = <span class="number">30000</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 请求拦截器，在请求头中添加token</span></span><br><span class="line">  $axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 头部带上验证信息</span></span><br><span class="line">    config.headers[<span class="string">&#x27;Authorization&#x27;</span>] = $cookies.get(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 响应拦截器</span></span><br><span class="line">  $axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(res, &#x27;来自响应拦截器&#x27;)</span></span><br><span class="line">    <span class="keyword">let</span> status = res.data.meta.status</span><br><span class="line">    <span class="keyword">let</span> msg = res.data.meta.msg</span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">        $message.success(<span class="string">`状态码:<span class="subst">$&#123;status&#125;</span>,提示:<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span> res.data.data</span><br><span class="line">      <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">        $message.error(<span class="string">`状态码:<span class="subst">$&#123;status&#125;</span>,提示:<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        $message.warning(<span class="string">`状态码:<span class="subst">$&#123;status&#125;</span>,提示:<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>请求方法封装</p>
<p>注入$request</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; <span class="attr">app</span>: &#123; $axios &#125; &#125;, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;request&#x27;</span>, &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">url, params</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        params</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">post</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">put</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">delete</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>挂载注入api</p>
<p>将所有api集中管理注入到</p>
<p>plugins\api.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; $request &#125;, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;api&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">// 登录验证</span></span><br><span class="line">    <span class="function"><span class="title">login</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $request.post(<span class="string">&#x27;login&#x27;</span>, data)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 请求列表</span></span><br><span class="line">    <span class="function"><span class="title">getMenuList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $request.get(<span class="string">&#x27;menus&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">     <span class="comment">// 后续还可以继续加</span></span><br><span class="line">  &#125;)</span><br><span class="line">  inject(<span class="string">&#x27;user&#x27;</span>, user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>页面中使用时直接可以访问实例下的<code>$api.login</code>使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.$api.login(<span class="built_in">this</span>.loginForm)</span><br></pre></td></tr></table></figure>

<h2 id="8-全局组件的引入"><a href="#8-全局组件的引入" class="headerlink" title="8.全局组件的引入"></a>8.全局组件的引入</h2><blockquote>
<p>plugins目录下的文件都需要注册到nuxt.config.js中的plugins选项中</p>
</blockquote>
<blockquote>
<p>plugins\vue-global.js(相当于vue中的main.js)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入树形表格组件 tree-table</span></span><br><span class="line"><span class="keyword">import</span> ZkTable <span class="keyword">from</span> <span class="string">&#x27;vue-table-with-tree-grid&#x27;</span></span><br><span class="line"><span class="comment">//Vue.use(ZkTable)注册组件</span></span><br><span class="line"><span class="comment">// 引入工具</span></span><br><span class="line"><span class="keyword">import</span> utils <span class="keyword">from</span> <span class="string">&#x27;~/utils/utils&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载</span></span><br><span class="line">Vue.use(utils)</span><br><span class="line"><span class="comment">// 注册为全局组件</span></span><br><span class="line">Vue.component(<span class="string">&#x27;tree-table&#x27;</span>, ZkTable)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过inject添加原型链,通过$ + utils 访问</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (ctx, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;utils&#x27;</span>, utils)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要使用上下文和注入必须通过nuxt.config.js的注册</p>
<p>而不需要访问上下文的插件utils可以放在utils目录下,只需导出即可</p>
<p>通过vue-global.js注入utils</p>
<p>utils\utils.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&#x27;html2canvas&#x27;</span></span><br><span class="line"><span class="keyword">import</span> jspdf <span class="keyword">from</span> <span class="string">&#x27;jspdf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置登录验证信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述   导出excel</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>fileName 文件名</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>List 表格数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">exportToExcel</span>(<span class="params">fileName, List</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//1、获得当前要导出的数据源</span></span><br><span class="line">    <span class="keyword">let</span> arr = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(List))</span><br><span class="line">    <span class="keyword">if</span> (!arr.length) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;导出数据不能为空&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2、获得第一个元素对象</span></span><br><span class="line">    <span class="keyword">let</span> object = arr[<span class="number">0</span>]</span><br><span class="line">    <span class="comment">//3、获得object的所有属性数组</span></span><br><span class="line">    <span class="keyword">let</span> attrs = <span class="built_in">Object</span>.keys(object)</span><br><span class="line">    <span class="comment">// console.log(attrs)</span></span><br><span class="line">    <span class="keyword">if</span> (!attrs.length) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;对象的属性不能为空&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4、拼接表头单元格</span></span><br><span class="line">    <span class="keyword">let</span> str = attrs.join(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    <span class="comment">//5、换行</span></span><br><span class="line">    str += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    <span class="comment">//6、拼接所有元素属性的值</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> arr[i]) &#123;</span><br><span class="line">        str += <span class="string">`<span class="subst">$&#123;arr[i][key] + <span class="string">&#x27;\t&#x27;</span>&#125;</span>,`</span></span><br><span class="line">      &#125;</span><br><span class="line">      str += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(str)</span><br><span class="line">    <span class="comment">//7、创建a</span></span><br><span class="line">    <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    link.href = <span class="string">&#x27;data:text/csv;charset=utf-8,\ufeff&#x27;</span> + <span class="built_in">encodeURIComponent</span>(str)</span><br><span class="line">    link.download = fileName + <span class="string">&#x27;.csv&#x27;</span></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(link)</span><br><span class="line">    link.click()</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(link)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述   导出pdf</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>fileName 文件名</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>id 元素id名</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">exportToPDF</span>(<span class="params">fileName, id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> ele = <span class="built_in">document</span>.getElementById(id)</span><br><span class="line">    <span class="comment">//let ele = this.$refs[&#x27;goodsTable&#x27;]</span></span><br><span class="line">    <span class="comment">// console.log(ele)</span></span><br><span class="line">    ele.style.background = <span class="string">&#x27;#ffffff&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> eleW = ele.offsetWidth <span class="comment">// 获得该容器的宽</span></span><br><span class="line">    <span class="keyword">let</span> eleH = ele.offsetHeight <span class="comment">// 获得该容器的高</span></span><br><span class="line">    <span class="keyword">let</span> eleOffsetTop = ele.offsetTop <span class="comment">// 获得该容器到文档顶部的距离</span></span><br><span class="line">    <span class="keyword">let</span> eleOffsetLeft = ele.offsetLeft <span class="comment">// 获得该容器到文档最左的距离</span></span><br><span class="line">    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> abs = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> win_in = <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth <span class="comment">// 获得当前可视窗口的宽度（不包含滚动条）</span></span><br><span class="line">    <span class="keyword">let</span> win_out = <span class="built_in">window</span>.innerWidth <span class="comment">// 获得当前窗口的宽度（包含滚动条）</span></span><br><span class="line">    <span class="keyword">if</span> (win_out &gt; win_in) &#123;</span><br><span class="line">      <span class="comment">// abs = (win_o - win_i)/2;    // 获得滚动条长度的一半</span></span><br><span class="line">      abs = (win_out - win_in) / <span class="number">2</span> <span class="comment">// 获得滚动条宽度的一半</span></span><br><span class="line">      <span class="comment">// console.log(a, &#x27;新abs&#x27;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    canvas.width = eleW * <span class="number">2</span> <span class="comment">// 将画布宽&amp;&amp;高放大两倍</span></span><br><span class="line">    canvas.height = eleH * <span class="number">2</span></span><br><span class="line">    <span class="keyword">let</span> context = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">    context.scale(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">    context.translate(-eleOffsetLeft - abs, -eleOffsetTop)</span><br><span class="line">    <span class="comment">// 这里默认横向没有滚动条的情况，因为offset.left(),有无滚动条的时候存在差值，因此</span></span><br><span class="line">    <span class="comment">// translate的时候，要把这个差值去掉</span></span><br><span class="line">    <span class="comment">// html2canvas(element).then( (canvas)=&gt;&#123; //报错</span></span><br><span class="line">    <span class="comment">// html2canvas(element[0]).then( (canvas)=&gt;&#123;</span></span><br><span class="line">    html2canvas(ele, &#123;</span><br><span class="line">      <span class="attr">dpi</span>: <span class="number">1080</span>,</span><br><span class="line">      <span class="comment">// allowTaint: true,  //允许 canvas 污染， allowTaint参数要去掉，否则是无法通过toDataURL导出canvas数据的</span></span><br><span class="line">      <span class="attr">useCORS</span>: <span class="literal">true</span> <span class="comment">//允许canvas画布内 可以跨域请求外部链接图片, 允许跨域请求。</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">canvas</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> contentWidth = canvas.width</span><br><span class="line">      <span class="keyword">let</span> contentHeight = canvas.height</span><br><span class="line">      <span class="comment">//一页pdf显示html页面生成的canvas高度;</span></span><br><span class="line">      <span class="keyword">let</span> pageHeight = (contentWidth / <span class="number">592.28</span>) * <span class="number">841.89</span></span><br><span class="line">      <span class="comment">//未生成pdf的html页面高度</span></span><br><span class="line">      <span class="keyword">let</span> leftHeight = contentHeight</span><br><span class="line">      <span class="comment">//页面偏移</span></span><br><span class="line">      <span class="keyword">let</span> position = <span class="number">0</span></span><br><span class="line">      <span class="comment">//a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高</span></span><br><span class="line">      <span class="keyword">let</span> imgWidth = <span class="number">595.28</span></span><br><span class="line">      <span class="keyword">let</span> imgHeight = (<span class="number">595.28</span> / contentWidth) * contentHeight</span><br><span class="line">      <span class="keyword">let</span> pageData = canvas.toDataURL(<span class="string">&#x27;image/jpeg&#x27;</span>, <span class="number">1.0</span>)</span><br><span class="line">      <span class="keyword">let</span> pdf = <span class="keyword">new</span> jspdf(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;pt&#x27;</span>, <span class="string">&#x27;a4&#x27;</span>)</span><br><span class="line">      <span class="comment">//有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)</span></span><br><span class="line">      <span class="comment">//当内容未超过pdf一页显示的范围，无需分页</span></span><br><span class="line">      <span class="keyword">if</span> (leftHeight &lt; pageHeight) &#123;</span><br><span class="line">        <span class="comment">//在pdf.addImage(pageData, &#x27;JPEG&#x27;, 左，上，宽度，高度)设置在pdf中显示；</span></span><br><span class="line">        pdf.addImage(pageData, <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, imgWidth, imgHeight)</span><br><span class="line">        <span class="comment">//pdf.addImage(pageData, &#x27;JPEG&#x27;, 20, 40, imgWidth, imgHeight);</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 分页</span></span><br><span class="line">        <span class="keyword">while</span> (leftHeight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          pdf.addImage(pageData, <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, position, imgWidth, imgHeight)</span><br><span class="line">          leftHeight -= pageHeight</span><br><span class="line">          position -= <span class="number">841.89</span></span><br><span class="line">          <span class="comment">//避免添加空白页</span></span><br><span class="line">          <span class="keyword">if</span> (leftHeight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            pdf.addPage()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//可动态生成</span></span><br><span class="line">      pdf.save(<span class="string">`<span class="subst">$&#123;fileName&#125;</span>.pdf`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述  保存数据到cookies</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>ctx  上下文</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>res  数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">setCookies</span>(<span class="params">ctx, res</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cookies</span><br><span class="line">    <span class="keyword">if</span> (process.client) &#123;</span><br><span class="line">      cookies = ctx.$cookies</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.server) &#123;</span><br><span class="line">      cookies = ctx.app.$cookies</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cookies) &#123;</span><br><span class="line">      cookies.set(<span class="string">&#x27;email&#x27;</span>, res.email)</span><br><span class="line">      cookies.set(<span class="string">&#x27;id&#x27;</span>, res.id)</span><br><span class="line">      cookies.set(<span class="string">&#x27;mobile&#x27;</span>, res.mobile)</span><br><span class="line">      cookies.set(<span class="string">&#x27;rid&#x27;</span>, res.rid)</span><br><span class="line">      cookies.set(<span class="string">&#x27;token&#x27;</span>, res.token)</span><br><span class="line">      cookies.set(<span class="string">&#x27;username&#x27;</span>, res.username)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;储存token完成&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述 移除登录验证信息</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>ctx 上下文</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">removeCookies</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> $cookies</span><br><span class="line">    <span class="comment">// 客户端</span></span><br><span class="line">    <span class="keyword">if</span> (process.client) &#123;</span><br><span class="line">      $cookies = ctx.$cookies</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 服务端</span></span><br><span class="line">    <span class="keyword">if</span> (process.server) &#123;</span><br><span class="line">      $cookies = ctx.app.$cookies</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($cookies) &#123;</span><br><span class="line">      $cookies.removeAll(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-重要的api"><a href="#9-重要的api" class="headerlink" title="9.重要的api"></a>9.重要的api</h2><blockquote>
<p> 可访问到context的文件中,第一个参数为上下文,第二个为inject注入函数.</p>
</blockquote>
<h3 id="context"><a href="#context" class="headerlink" title="context"></a>context</h3><table>
<thead>
<tr>
<th>属性字段</th>
<th>类型</th>
<th>可用</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>app</code></td>
<td>Vue 根实例</td>
<td>客户端 &amp; 服务端</td>
<td>包含所有插件的 Vue 根实例。例如：在使用 <code>axios</code> 的时候，你想获取 <code>$axios</code> 可以直接通过 <code>context.app.$axios</code> 来获取</td>
</tr>
<tr>
<td><code>isClient</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否来自客户端渲染（废弃。请使用 <code>process.client</code> ）</td>
</tr>
<tr>
<td><code>isServer</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否来自服务端渲染（废弃。请使用 <code>process.server</code> ）</td>
</tr>
<tr>
<td><code>isStatic</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否来自 <code>nuxt generate</code> 静态化（预渲染）（废弃。请使用 <code>process.static</code> ）</td>
</tr>
<tr>
<td><code>isDev</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否是开发 dev 模式，在生产环境的数据缓存中用到</td>
</tr>
<tr>
<td><code>isHMR</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否是通过模块热替换 <code>webpack hot module replacement</code> (<em>仅在客户端以 dev 模式</em>)</td>
</tr>
<tr>
<td><code>route</code></td>
<td><a href="https://router.vuejs.org/zh/api/#%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7">Vue Router 路由</a></td>
<td>客户端 &amp; 服务端</td>
<td>Vue Router 路由实例</td>
</tr>
<tr>
<td><code>store</code></td>
<td><a href="https://vuex.vuejs.org/zh/api/">Vuex 数据</a></td>
<td>客户端 &amp; 服务端</td>
<td><code>Vuex.Store</code> 实例。<strong>只有<a href="https://www.nuxtjs.cn/guide/vuex-store">vuex 数据流</a>存在相关配置时可用</strong></td>
</tr>
<tr>
<td><code>env</code></td>
<td><code>Object</code></td>
<td>客户端 &amp; 服务端</td>
<td><code>nuxt.config.js</code> 中配置的环境变量，见 <a href="https://www.nuxtjs.cn/api/configuration-env">环境变量 api</a></td>
</tr>
<tr>
<td><code>params</code></td>
<td><code>Object</code></td>
<td>客户端 &amp; 服务端</td>
<td><code>route.params</code> 的别名</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>Object</code></td>
<td>客户端 &amp; 服务端</td>
<td><code>route.query</code> 的别名</td>
</tr>
<tr>
<td><code>req</code></td>
<td><a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage"><code>http.Request</code></a></td>
<td>服务端</td>
<td>Node.js API 的 Request 对象。如果 Nuxt 以中间件形式使用的话，这个对象就根据你所使用的框架而定。*<code>nuxt generate</code> 不可用*</td>
</tr>
<tr>
<td><code>res</code></td>
<td><a href="https://nodejs.org/api/http.html#http_class_http_serverresponse"><code>http.Response</code></a></td>
<td>服务端</td>
<td>Node.js API 的 Response 对象。如果 Nuxt 以中间件形式使用的话，这个对象就根据你所使用的框架而定。*<code>nuxt generate</code> 不可用*</td>
</tr>
<tr>
<td><code>redirect</code></td>
<td><code>Function</code></td>
<td>客户端 &amp; 服务端</td>
<td>用这个方法重定向用户请求到另一个路由。状态码在服务端被使用，默认 302 <code>redirect([status,] path [, query])</code></td>
</tr>
<tr>
<td><code>error</code></td>
<td><code>Function</code></td>
<td>客户端 &amp; 服务端</td>
<td>用这个方法展示错误页：<code>error(params)</code> 。<code>params</code> 参数应该包含 <code>statusCode</code> 和 <code>message</code> 字段</td>
</tr>
<tr>
<td><code>nuxtState</code></td>
<td><code>Object</code></td>
<td>客户端</td>
<td>Nuxt 状态，在使用 <code>beforeNuxtRender</code> 之前，用于客户端获取 Nuxt 状态，仅在 <code>universal</code> 模式下可用</td>
</tr>
<tr>
<td><code>beforeNuxtRender(fn)</code></td>
<td><code>Function</code></td>
<td>服务端</td>
<td>使用此方法更新 <code>__NUXT__</code> 在客户端呈现的变量，<code>fn</code> 调用 (可以是异步) <code>&#123; Components, nuxtState &#125;</code> ，参考 <a href="https://github.com/nuxt/nuxt.js/blob/cf6b0df45f678c5ac35535d49710c606ab34787d/test/fixtures/basic/pages/special-state.vue">示例</a></td>
</tr>
</tbody></table>
<h3 id="asyncData-方法"><a href="#asyncData-方法" class="headerlink" title="asyncData 方法"></a>asyncData 方法</h3><blockquote>
<p>你可能想要在服务器端获取并渲染数据。Nuxt.js 添加了<code>asyncData</code>方法使得你能够在渲染组件之前异步获取数据。</p>
</blockquote>
<ul>
<li><strong>类型：</strong> <code>Function</code></li>
</ul>
<p><code>asyncData</code>方法会在组件（<strong>限于页面组件</strong>）每次加载之前被调用。它可以在服务端或路由更新之前被调用。在这个方法被调用的时候，第一个参数被设定为当前页面的<strong>上下文对象</strong>，你可以利用 <code>asyncData</code>方法来获取数据并返回给当前组件。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">project</span>: <span class="string">&#x27;default&#x27;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">asyncData</span>(<span class="params">context</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">project</span>: <span class="string">&#x27;nuxt&#x27;</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 注意：由于<code>asyncData</code>方法是在组件 <strong>初始化</strong> 前被调用的，所以在方法内是没有办法通过 <code>this</code> 来引用组件</p>
</blockquote>
<h3 id="middleware"><a href="#middleware" class="headerlink" title="middleware"></a>middleware</h3><blockquote>
<p>在应用中的特定页面设置中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">middleware</span>: <span class="string">&#x27;auth&#x27;</span></span><br><span class="line">    <span class="comment">// 指使用middleware/auth.js中间件方法</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>自定义页面级中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  &#123;</span><br><span class="line">    <span class="attr">middleware</span>: (&#123; store, redirect &#125;) &#123;</span><br><span class="line">    <span class="comment">// If the user is not authenticated</span></span><br><span class="line">    <span class="keyword">if</span> (!store.state.authenticated) &#123;</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><blockquote>
<p>写入vuex状态树</p>
<p><em>fetch 方法用于在渲染页面前填充应用的状态树（store）数据， 与 asyncData 方法类似，不同的是它不会设置组件的数据。</em></p>
</blockquote>
<h3 id="validate-方法"><a href="#validate-方法" class="headerlink" title="validate 方法"></a>validate 方法</h3><blockquote>
<p>Nuxt.js 可以让你在动态路由对应的页面组件中配置一个校验方法用于校验动态路由参数的有效性。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">validate</span>(<span class="params">&#123; params, query &#125;</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// 如果参数有效</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// 参数无效，Nuxt.js 停止渲染当前页面并显示错误页面</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果校验方法返回的值不为 <code>true</code>， Nuxt.js 将自动加载显示 404 错误页面。</p>
</blockquote>
<h2 id="10-错误页面"><a href="#10-错误页面" class="headerlink" title="10.错误页面"></a>10.错误页面</h2><blockquote>
<p>自定义错误页面可以在<code>layouts</code>目录下创建<code>error.vue</code>页面</p>
<p>通过prop属性接受错误信息,后续处理并展示</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error-page&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;where-is-panfish&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem bg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/bg.1f516b3.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem panfish&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/panfish.9be67f5.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem sea&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/sea.892cf5d.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem spray&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/spray.bc638d2.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; statusCode &#125;&#125; - &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nuxt-link</span> <span class="attr">class</span>=<span class="string">&quot;error-link&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>回到首页<span class="tag">&lt;/<span class="name">nuxt-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">error</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">default</span>: <span class="literal">null</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">statusCode</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> (<span class="built_in">this</span>.error &amp;&amp; <span class="built_in">this</span>.error.statusCode) || <span class="number">500</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">message</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> <span class="built_in">this</span>.error.message || <span class="string">&#x27;Error&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.error-page</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">background</span>: <span class="number">#f7f8fb</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">color</span>: <span class="number">#47494e</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">flex-direction</span>: column;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-family</span>: sans-serif;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-weight</span>: <span class="number">100</span> <span class="meta">!important</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -ms-text-size-adjust: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -webkit-text-size-adjust: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.error</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">flex-direction</span>: column;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">960px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.title</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">color</span>: <span class="number">#ed556a</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.error-link</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">display</span>: block;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">margin-top</span>: <span class="number">24px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding</span>: <span class="number">14px</span> <span class="number">24px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">background-color</span>: <span class="number">#007fff</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.where-is-panfish</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">width</span>: <span class="number">624px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">max-width</span>: <span class="number">70%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding-top</span>: <span class="number">48%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.elem</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">top</span>: <span class="number">35%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">left</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.bg</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">77.724%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.panfish</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">20.994%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">32%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">animation</span>: panfish <span class="number">2s</span> ease-in-out infinite alternate;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.sea</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">99.199%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">75.3%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">opacity</span>: <span class="number">0.7</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.spray</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">40.545%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">162%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">opacity</span>: <span class="number">0.4</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="keyword">@keyframes</span> panfish &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="number">0%</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">30%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="number">100%</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">36%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>nuxtjs</category>
      </categories>
      <tags>
        <tag>nuxtjs</tag>
      </tags>
  </entry>
  <entry>
    <title>基本用法</title>
    <url>/taiaiac.gitee.io/2020/12/30/swiper/%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<h2 id="Swiper-常用于移动端网站的内容触摸滑动"><a href="#Swiper-常用于移动端网站的内容触摸滑动" class="headerlink" title="Swiper 常用于移动端网站的内容触摸滑动"></a>Swiper 常用于移动端网站的内容触摸滑动</h2><ul>
<li><strong>Swiper</strong>是纯 javascript 打造的滑动特效插件，面向手机、平板电脑等移动终端。</li>
<li><strong>Swiper</strong>能实现触屏焦点图、触屏 Tab 切换、触屏多图切换等常用效果。</li>
<li><strong>Swiper</strong>开源、免费、稳定、使用简单、功能强大，是架构移动终端网站的重要选择！</li>
</ul>
<h2 id="简单用法"><a href="#简单用法" class="headerlink" title="简单用法"></a>简单用法</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/swiper-bundle.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/swiper-bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1、轮播图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;loop/loop1(960x540).png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;swiper-img&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;loop/loop2.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;swiper-img&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;loop/loop3.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;swiper-img&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;loop/loop4.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;swiper-img&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;loop/loop5.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;swiper-img&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果需要分页器 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/loop.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//轮播图</span></span><br><span class="line"><span class="selector-class">.swiper-container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.swiper-wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.swiper-slide</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-tag">img</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">2.5rem</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//修改分页器颜色位置</span></span><br><span class="line">  <span class="comment">// .swiper-pagination &#123;</span></span><br><span class="line">  <span class="comment">//     display: flex;</span></span><br><span class="line">  <span class="comment">//     justify-content: flex-end;</span></span><br><span class="line">  <span class="comment">//     span &#123;</span></span><br><span class="line">  <span class="comment">//         background: $c1;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//轮播图</span></span><br><span class="line"><span class="keyword">let</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">direction</span>: <span class="string">&#x27;horizontal&#x27;</span>, <span class="comment">// 垂直切换选项</span></span><br><span class="line">  <span class="attr">loop</span>: <span class="literal">true</span>, <span class="comment">// 循环模式选项</span></span><br><span class="line">  <span class="attr">autoplay</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 如果需要分页器</span></span><br><span class="line">  <span class="attr">pagination</span>: &#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// effect: &#x27;flip&#x27;,</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="effect"><a href="#effect" class="headerlink" title="effect"></a>effect</h2><ul>
<li>slide 的切换效果，默认为”slide”（位移切换），可设置为’slide’（普通切换、默认）,”fade”（淡入）”cube”（方块）”coverflow”（3d 流）”flip”（3d 翻转）。</li>
</ul>
<h2 id="组件列表"><a href="#组件列表" class="headerlink" title="组件列表"></a>组件列表</h2><table>
<thead>
<tr>
<th>组件</th>
<th>功能</th>
<th>版本</th>
</tr>
</thead>
<tbody><tr>
<td>Navigation</td>
<td>按钮</td>
<td></td>
</tr>
<tr>
<td>Pagination</td>
<td>分页器</td>
<td></td>
</tr>
<tr>
<td>Scrollbar</td>
<td>滚动条</td>
<td></td>
</tr>
<tr>
<td>Autoplay</td>
<td>自动切换</td>
<td></td>
</tr>
<tr>
<td>Lazy Loading</td>
<td>延迟加载图片</td>
<td></td>
</tr>
<tr>
<td>Fade Effect</td>
<td>渐变过渡</td>
<td></td>
</tr>
<tr>
<td>Coverflow Effect</td>
<td>行进翻转过渡</td>
<td></td>
</tr>
<tr>
<td>Flip Effect</td>
<td>翻转过渡</td>
<td></td>
</tr>
<tr>
<td>Cube Effect</td>
<td>方块过渡</td>
<td></td>
</tr>
<tr>
<td>Zoom</td>
<td>缩放</td>
<td></td>
</tr>
<tr>
<td>Keyboard Control</td>
<td>键盘</td>
<td></td>
</tr>
<tr>
<td>Mousewheel Control</td>
<td>鼠标</td>
<td></td>
</tr>
<tr>
<td>Virtual Slides</td>
<td>虚拟块</td>
<td></td>
</tr>
<tr>
<td>Hash Navigation</td>
<td>锚导航</td>
<td></td>
</tr>
<tr>
<td>History Navigation</td>
<td>历史导航</td>
<td></td>
</tr>
<tr>
<td>Controller</td>
<td>双向控制</td>
<td></td>
</tr>
<tr>
<td>Thumbs</td>
<td>缩略图</td>
<td>4.4.1</td>
</tr>
<tr>
<td>Accessibility</td>
<td>障碍使用辅助</td>
<td></td>
</tr>
</tbody></table>
<h1 id="new-Swiper-swiperContainer-parameters"><a href="#new-Swiper-swiperContainer-parameters" class="headerlink" title="new Swiper(swiperContainer, parameters)"></a>new Swiper(swiperContainer, parameters)</h1><p>用于初始化一个 Swiper，返回初始化后的 Swiper 实例。</p>
<table>
<thead>
<tr>
<th align="left">参数名</th>
<th align="left">类型</th>
<th align="left">是否必填</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">swiperContainer</td>
<td align="left">HTMLElement or string</td>
<td align="left">必选</td>
<td align="left">Swiper 容器的 css 选择器，例如<code>&quot;.swiper-container&quot;</code></td>
</tr>
<tr>
<td align="left">parameters</td>
<td align="left">object</td>
<td align="left">可选</td>
<td align="left">Swiper 的个性化配置</td>
</tr>
</tbody></table>
<p>一个页面中引用多个 Swiper，可以给每个容器加上 ID 或 Class 区分，要保留默认的类名 swiper-container。<br><strong>HTML</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swiper1&quot;</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swiper2&quot;</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;swiper3&quot;</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>JS</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> swiper1 = <span class="keyword">new</span> Swiper(<span class="string">&#x27;#swiper1&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> swiper2 = <span class="keyword">new</span> Swiper(<span class="string">&#x27;#swiper2&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> swiper3 = <span class="keyword">new</span> Swiper(<span class="string">&#x27;#swiper3&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="使用方法示例"><a href="#使用方法示例" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>slider1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>slider2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>slider3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">autoplay</span>: <span class="literal">true</span>, <span class="comment">//可选选项，自动滑动</span></span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//如果你初始化时没有定义Swiper实例，后面也可以通过Swiper的HTML元素来获取该实例</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.swiper-container&#x27;</span>).swiper</span></span><br><span class="line"><span class="javascript">  mySwiper.slideNext()</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="initialSlide"><a href="#initialSlide" class="headerlink" title="initialSlide"></a>initialSlide</h1><p>设定初始化时 slide 的索引。Swiper 默认初始化时显示第一个 slide，有时想初始化时直接显示其他 slide，可以做此设置。</p>
<h2 id="initialSlide-信息"><a href="#initialSlide-信息" class="headerlink" title="initialSlide 信息"></a>initialSlide 信息</h2><ul>
<li><p>类型：</p>
<p>number</p>
</li>
<li><p>默认：</p>
<p>0</p>
</li>
<li><p>举例：</p>
<p>2</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<p>设置为 2 后，Swiper 初始化时 activeSlide 成了第三个</p>
<h2 id="使用方法示例-1"><a href="#使用方法示例-1" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">initialSlide</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="direction"><a href="#direction" class="headerlink" title="direction"></a>direction</h1><p>Swiper 的滑动方向，可设置为水平方向切换(horizontal)或垂直方向切换(vertical)。</p>
<p>可使用断点（breakpoints,4.5.0 后）设置不同分辨率下的切换方向。<br>可使用 swiper.changeDirection()方法动态更改切换方向。</p>
<h2 id="direction-信息"><a href="#direction-信息" class="headerlink" title="direction 信息"></a>direction 信息</h2><ul>
<li><p>类型：</p>
<p>string</p>
</li>
<li><p>默认：</p>
<p>horizontal</p>
</li>
<li><p>举例：</p>
<p>vertical</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<p>horizontal：横向切换</p>
<p>vertical：竖向切换</p>
<h2 id="使用方法示例-2"><a href="#使用方法示例-2" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">direction</span>: <span class="string">&#x27;vertical&#x27;</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="speed"><a href="#speed" class="headerlink" title="speed"></a>speed</h1><p>切换速度，即 slider 自动滑动开始到结束的时间（单位 ms），也是触摸滑动时释放至贴合的时间。</p>
<h2 id="speed-信息"><a href="#speed-信息" class="headerlink" title="speed 信息"></a>speed 信息</h2><ul>
<li><p>类型：</p>
<p>number</p>
</li>
<li><p>默认：</p>
<p>300</p>
</li>
<li><p>举例：</p>
<p>1000</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-3"><a href="#使用方法示例-3" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">speed</span>: <span class="number">300</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">autoplay</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">delay</span>: <span class="number">3000</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="grabCursor"><a href="#grabCursor" class="headerlink" title="grabCursor"></a>grabCursor</h1><p>该选项给 Swiper 用户提供小小的贴心应用，设置为 true 时，鼠标覆盖 Swiper 时指针会变成手掌形状，拖动时指针会变成抓手形状。（根据浏览器形状有所不同）</p>
<h2 id="grabCursor-信息"><a href="#grabCursor-信息" class="headerlink" title="grabCursor 信息"></a>grabCursor 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-4"><a href="#使用方法示例-4" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">grabCursor</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="parallax"><a href="#parallax" class="headerlink" title="parallax"></a>parallax</h1><p>设置为 true 开启 Swiper 的视差效果，内容在切换时更有层次感。<br>效果可以应用于 container 或 slide 的子元素。当应用于 container 的子元素（常用于视差背景图），每次切换时视差效果仅有设定值的 slide 个数-1 分之 1</p>
<p><strong>1.视差位移变化</strong><br>在所需要的元素上增加<strong>data-swiper-parallax</strong>属性（与 Swiper 切换方向相同）或<strong>data-swiper-parallax-x</strong> （x 方向） <strong>data-swiper-parallax-y</strong>（y 方向）</p>
<p><strong>data-swiper-parallax</strong>接受两种类型的参数。<br>number（单位：px），如-300，从右边 300px 进入左边出去。<br>percentage（百分比），移动距离=该元素宽度 * percentage。</p>
<p><strong>2.视差透明度变化</strong><br>在所需要的元素上增加<strong>data-swiper-parallax-opacity</strong>属性。可选值 0-1，如 0.5，从半透明进入半透明出去</p>
<p><strong>3.视差缩放变化</strong><br>在所需要的元素上增加<strong>data-swiper-parallax-scale</strong>属性。可选值如 0.5，从一半大小进入一半大小出去</p>
<p>还可通过<strong>data-swiper-parallax-duration</strong>设定视差动画持续时间（ms）。默认值是 Swiper 的 speed，与切换时间同步。</p>
<p>*设定透明度或缩放必须同时设定位移，否则无效(4.0.5) <code>&lt;div data-swiper-parallax=&quot;0&quot; data-swiper-parallax-opacity=&quot;0.5&quot; &gt;透明度变化&lt;/div&gt;</code></p>
<h2 id="parallax-信息"><a href="#parallax-信息" class="headerlink" title="parallax 信息"></a>parallax 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示"><a href="#效果演示" class="headerlink" title="效果演示"></a>效果演示</h2><iframe height="300" src="https://www.swiper.com.cn/demo/360-parallax.html" width="800" style="margin: 0px; padding: 0px; border: 0px; font-size: 13px; vertical-align: baseline;"></iframe>

<h2 id="使用方法示例-5"><a href="#使用方法示例-5" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;background-image:url(/img/Parallax.jpg)&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-swiper-parallax</span>=<span class="string">&quot;-23%&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-swiper-parallax-duration</span>=<span class="string">&quot;3000&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">data-swiper-parallax</span>=<span class="string">&quot;-100&quot;</span>&gt;</span>从右边100px开始进入<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subtitle&quot;</span> <span class="attr">data-swiper-parallax</span>=<span class="string">&quot;-200&quot;</span>&gt;</span></span><br><span class="line">        从右边200px开始进入</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-swiper-parallax</span>=<span class="string">&quot;-300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-swiper-parallax-duration</span>=<span class="string">&quot;600&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>从右边300px开始进入，时间600ms<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-swiper-parallax</span>=<span class="string">&quot;0&quot;</span> <span class="attr">data-swiper-parallax-opacity</span>=<span class="string">&quot;0.5&quot;</span>&gt;</span></span><br><span class="line">        透明度变化</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-swiper-parallax-scale</span>=<span class="string">&quot;0.15&quot;</span>&gt;</span>缩放变化<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">parallax</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="setWrapperSize"><a href="#setWrapperSize" class="headerlink" title="setWrapperSize"></a>setWrapperSize</h1><p>Swiper 使用 flexbox 布局(display: flex)，开启这个设定会在 Wrapper 上添加等于 slides 相加的宽或高，在对 flexbox 布局的支持不是很好的浏览器中可能需要用到。</p>
<h2 id="setWrapperSize-信息"><a href="#setWrapperSize-信息" class="headerlink" title="setWrapperSize 信息"></a>setWrapperSize 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-6"><a href="#使用方法示例-6" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">setWrapperSize</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//获取全部slide相加(wrapper)的宽度</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(mySwiper.$wrapperEl.css(<span class="string">&#x27;width&#x27;</span>)) <span class="comment">//2400px</span></span></span><br><span class="line"><span class="javascript">  或者</span></span><br><span class="line"><span class="javascript">  mySwiper.virtualSize <span class="comment">//2400</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="virtualTranslate"><a href="#virtualTranslate" class="headerlink" title="virtualTranslate"></a>virtualTranslate</h1><p>虚拟的位移。当你启用这个参数，Slide 不会移动，但是 Swiper 还是在运行，例如 progress，active-slide，各种回调等。当你想自定义一些 slide 切换效果时可以用。例如配合上 progress。<br>启用这个选项时 slideChange 和 transition 等事件有效（与 Swiper3.x 不同）。</p>
<p>还可以用来使 Swiper 的滑动停止（锁定）。<br>*可能会使鼠标滚动失效。<br>*开启 preventInteractionOnTransition 会使 progress 无效</p>
<h2 id="virtualTranslate-信息"><a href="#virtualTranslate-信息" class="headerlink" title="virtualTranslate 信息"></a>virtualTranslate 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-7"><a href="#使用方法示例-7" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">virtualTranslate</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript">  <span class="comment">//mySwiper.params.virtualTranslate=true;</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="a11y"><a href="#a11y" class="headerlink" title="a11y"></a>a11y</h1><p>辅助，无障碍阅读。开启本参数为屏幕阅读器添加语音提示等信息，方便视觉障碍者。基于 ARIA 标准。</p>
<p>prevSlideMessage 类型：string 默认：’Previous slide’ 在屏幕阅读器为上一页按钮添加信息。<br>nextSlideMessage 类型：string 默认： ‘Next slide’ 在屏幕阅读器为下一页按钮添加信息。<br>firstSlideMessage 类型：string 默认： ‘This is the first slide’ 在屏幕阅读器当处于第一个 slide 为上一页按钮添加信息。<br>lastSlideMessage 类型：string 默认： ‘This is the last slide’ 在屏幕阅读器当处于最后一个 slide 为下一页按钮添加信息。<br>paginationBulletMessage 类型：string 默认： ‘Go to slide ‘ 在屏幕阅读器为分页器小点添加信息。<br>notificationClass 类型：string 默认：’swiper-notification’ A11y 公告部分的类名。</p>
<h2 id="a11y-信息"><a href="#a11y-信息" class="headerlink" title="a11y 信息"></a>a11y 信息</h2><ul>
<li><p>类型：</p>
<p>object/boolean</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-1"><a href="#效果演示-1" class="headerlink" title="效果演示"></a>效果演示</h2><p>slider1</p>
<p>slider2</p>
<p>slider3</p>
<h2 id="使用方法示例-8"><a href="#使用方法示例-8" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">navigation</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">nextEl</span>: <span class="string">&#x27;.swiper-button-next&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">prevEl</span>: <span class="string">&#x27;.swiper-button-prev&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">pagination</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">el</span>: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">a11y</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">prevSlideMessage</span>: <span class="string">&#x27;Previous slide&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">nextSlideMessage</span>: <span class="string">&#x27;Next slide&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">firstSlideMessage</span>: <span class="string">&#x27;This is the first slide&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">lastSlideMessage</span>: <span class="string">&#x27;This is the last slide&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">paginationBulletMessage</span>: <span class="string">&#x27;Go to slide &#123;&#123;index&#125;&#125;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">notificationClass</span>: <span class="string">&#x27;swiper-notification&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="width"><a href="#width" class="headerlink" title="width"></a>width</h1><p>强制 Swiper 的宽度(px)，当你的 Swiper 在隐藏状态下初始化时用得上。这个参数会使自适应失效。<br>可设置为 undefined 使这个参数无效。</p>
<h2 id="width-信息"><a href="#width-信息" class="headerlink" title="width 信息"></a>width 信息</h2><ul>
<li><p>类型：</p>
<p>number</p>
</li>
<li><p>举例：</p>
<p>500</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-2"><a href="#效果演示-2" class="headerlink" title="效果演示"></a>效果演示</h2><p><a href="https://www.swiper.com.cn/api/parameters/274.html#">显示 Swiper</a></p>
<h2 id="使用方法示例-9"><a href="#使用方法示例-9" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>,&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//设置固定宽度，隐藏时初始化swiper</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">width</span>: <span class="number">800</span>,</span></span><br><span class="line"><span class="javascript">    <span class="comment">//设置宽度为全屏</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">width</span>: <span class="built_in">window</span>.innerWidth,</span></span><br><span class="line"><span class="javascript">    <span class="comment">//设置断点宽度</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">breakpoints</span>: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="number">1024</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">width</span>: <span class="number">500</span>,</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="number">768</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">width</span>: <span class="literal">undefined</span>,<span class="comment">//取消width，恢复自适应</span></span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">//窗口缩放时设置width</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">on</span>: &#123;</span></span><br><span class="line"><span class="javascript">         <span class="attr">resize</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">           <span class="built_in">this</span>.params.width = <span class="built_in">window</span>.innerWidth;</span></span><br><span class="line"><span class="javascript">           <span class="built_in">this</span>.update();</span></span><br><span class="line"><span class="javascript">         &#125;,</span></span><br><span class="line"><span class="javascript">      &#125; ,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*隐藏状态显示后再初始化swiper</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  function initSwiper()&#123;</span></span></span><br><span class="line"><span class="comment"><span class="javascript">    var mySwiper = new Swiper (&#x27;.swiper-container&#x27;, &#123;</span></span></span><br><span class="line"><span class="comment"><span class="javascript">      ...</span></span></span><br><span class="line"><span class="comment"><span class="javascript">    &#125;</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  &#125;</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  $(&quot;.page&quot;).css(&#x27;display&#x27;,&#x27;block&#x27;);</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  setTimeout(&#x27;initSwiper()&#x27;, 100);</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  */</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="height"><a href="#height" class="headerlink" title="height"></a>height</h1><p>强制 Swiper 的高度(px)，当你的 Swiper 在隐藏状态下初始化时且切换方向为垂直才用得上。这个参数会使自适应失效。</p>
<h2 id="height-信息"><a href="#height-信息" class="headerlink" title="height 信息"></a>height 信息</h2><ul>
<li><p>类型：</p>
<p>number</p>
</li>
<li><p>举例：</p>
<p>300</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-3"><a href="#效果演示-3" class="headerlink" title="效果演示"></a>效果演示</h2><p><a href="https://www.swiper.com.cn/api/parameters/275.html#">显示 Swiper</a></p>
<h2 id="使用方法示例-10"><a href="#使用方法示例-10" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">direction</span>: <span class="string">&#x27;vertical&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">height</span>: <span class="number">300</span>, <span class="comment">//你的slide高度</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//全屏  height : window.innerHeight,</span></span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="roundLengths"><a href="#roundLengths" class="headerlink" title="roundLengths"></a>roundLengths</h1><p>如果设置为 true，则将 slide 的宽和高取整(四舍五入)，以防止某些分辨率的屏幕上文字或边界(border)模糊。<br>例如当你设定 slidesPerView: 3 的时候，则可能出现 slide 的宽度为 341.33px，开启 roundLengths 后宽度取整数 341px。</p>
<h2 id="roundLengths-信息"><a href="#roundLengths-信息" class="headerlink" title="roundLengths 信息"></a>roundLengths 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-11"><a href="#使用方法示例-11" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">roundLengths</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="breakpoints"><a href="#breakpoints" class="headerlink" title="breakpoints"></a>breakpoints</h1><p>断点设定：根据屏幕宽度设置某参数为不同的值，类似于响应式布局的 media only screen and (min-width: 480px)<br>只有部分不需要变换布局方式和逻辑结构的参数支持断点设定，如<strong>slidesPerView、slidesPerGroup、 spaceBetween、slidesPerColumn、slidesPerGroupSkip</strong>，而像<strong>loop、direction、effect</strong>等则无效。<br>5.3.0 开始支持按宽高比例的断点。</p>
<p>*Swiper4 与 Swiper5 判断方式相反，swiper4 不支持 slidesPerColumn。</p>
<h2 id="breakpoints-信息"><a href="#breakpoints-信息" class="headerlink" title="breakpoints 信息"></a>breakpoints 信息</h2><ul>
<li><p>类型：</p>
<p>object</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-4"><a href="#效果演示-4" class="headerlink" title="效果演示"></a>效果演示</h2><p>缩放浏览器 Swiper 将重新排列</p>
<p>slider1</p>
<p>slider2</p>
<p>slider3</p>
<p>slider4</p>
<p>slider5</p>
<p>slider6</p>
<p>slider7</p>
<p>slider8</p>
<p>slider9</p>
<h2 id="使用方法示例-12"><a href="#使用方法示例-12" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>,&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">slidesPerView</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">spaceBetween</span>: <span class="number">40</span>,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">breakpoints</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="number">320</span>: &#123;  <span class="comment">//当屏幕宽度大于等于320</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">slidesPerView</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">spaceBetween</span>: <span class="number">10</span></span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">      <span class="number">768</span>: &#123;  <span class="comment">//当屏幕宽度大于等于768</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">slidesPerView</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">spaceBetween</span>: <span class="number">20</span></span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">      <span class="number">1280</span>: &#123;  <span class="comment">//当屏幕宽度大于等于1280</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">slidesPerView</span>: <span class="number">4</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">spaceBetween</span>: <span class="number">30</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">breakpoints</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="string">&#x27;@0.75&#x27;</span>: &#123;  <span class="comment">//当屏幕宽高比大于等于0.75</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">slidesPerView</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">spaceBetween</span>: <span class="number">20</span>,</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">      <span class="string">&#x27;@1.00&#x27;</span>: &#123;  <span class="comment">//当屏幕宽高比大于等于1</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">slidesPerView</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">spaceBetween</span>: <span class="number">40</span>,</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">      <span class="string">&#x27;@1.50&#x27;</span>: &#123;  <span class="comment">//当屏幕宽高比大于等于1.5</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">slidesPerView</span>: <span class="number">4</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">spaceBetween</span>: <span class="number">50</span>,</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//Swiper4.x版本为小于</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">breakpoints</span>: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="number">1280</span>: &#123;  <span class="comment">//当屏幕宽度小于等于1280</span></span></span><br><span class="line"><span class="javascript">            <span class="attr">slidesPerView</span>: <span class="number">4</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">spaceBetween</span>: <span class="number">30</span></span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="number">768</span>: &#123;  <span class="comment">//当屏幕宽度小于等于768</span></span></span><br><span class="line"><span class="javascript">            <span class="attr">slidesPerView</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">spaceBetween</span>: <span class="number">20</span>,</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="number">320</span>: &#123;  <span class="comment">//当屏幕宽度小于等于320</span></span></span><br><span class="line"><span class="javascript">            <span class="attr">slidesPerView</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">spaceBetween</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="autoHeight"><a href="#autoHeight" class="headerlink" title="autoHeight"></a>autoHeight</h1><p>自动高度。设置为 true 时，wrapper 和 container 会随着当前 slide 的高度而发生变化。</p>
<h2 id="autoHeight-信息"><a href="#autoHeight-信息" class="headerlink" title="autoHeight 信息"></a>autoHeight 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-5"><a href="#效果演示-5" class="headerlink" title="效果演示"></a>效果演示</h2><p>Slide 1</p>
<p>Slide 2</p>
<p>Slide 3</p>
<h2 id="使用方法示例-13"><a href="#使用方法示例-13" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> swiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">autoHeight</span>: <span class="literal">true</span>, <span class="comment">//高度随内容变化</span></span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="uniqueNavElements"><a href="#uniqueNavElements" class="headerlink" title="uniqueNavElements"></a>uniqueNavElements</h1><p>独立分页元素，当启用（默认）并且分页元素的传入值为字符串时，swiper 会优先查找子元素匹配这些元素。可应用于分页器，按钮和滚动条（pagination, prev/next buttons and scrollbar elements）。<br>当你的控制组件放在 container 外面的时候，需要用到。</p>
<h2 id="uniqueNavElements-信息"><a href="#uniqueNavElements-信息" class="headerlink" title="uniqueNavElements 信息"></a>uniqueNavElements 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>true</p>
</li>
<li><p>举例：</p>
<p>false</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-6"><a href="#效果演示-6" class="headerlink" title="效果演示"></a>效果演示</h2><p>默认为 true 时，仅本 swiper 的 container 内的分页器有效，设置为 false 后，container 以外的分页器也生效了。</p>
<p>slider1</p>
<p>slider2</p>
<p>slider3</p>
<h2 id="使用方法示例-14"><a href="#使用方法示例-14" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">pagination</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">el</span>: <span class="string">&#x27;.swiper-pagination&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">uniqueNavElements</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="nested"><a href="#nested" class="headerlink" title="nested"></a>nested</h1><p>用于嵌套相同方向的 swiper 时，当切换到子 swiper 时停止父 swiper 的切换。<br>请将子 swiper 的 nested 设置为 true。<br>由于需要在 slideChangeEnd 时判断作用块，因此快速滑动时这个选项无效。</p>
<h2 id="nested-信息"><a href="#nested-信息" class="headerlink" title="nested 信息"></a>nested 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-7"><a href="#效果演示-7" class="headerlink" title="效果演示"></a>效果演示</h2><p>同方向的 swiper 嵌套例子，不要连续快速切换。</p>
<p>slider1</p>
<p>2.1</p>
<p>2.2</p>
<p>2.3</p>
<p>slider3</p>
<h2 id="使用方法示例-15"><a href="#使用方法示例-15" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;#swiper-container1&#x27;</span>) <span class="comment">//父swiper</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper2 = <span class="keyword">new</span> Swiper(<span class="string">&#x27;#swiper-container2&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//子swiper</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">nested</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">resistanceRatio</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="runCallbacksOnInit"><a href="#runCallbacksOnInit" class="headerlink" title="runCallbacksOnInit"></a>runCallbacksOnInit</h1><p>如果你的初始化 slide 不是第一个(例 initialSlide:2)或者设置了 loop: true，那么初始化时会触发一次 [Transition/SlideChange] [Start/End] 回调函数。<br>如果不想触发，可将此参数设置为 false。</p>
<h2 id="runCallbacksOnInit-信息"><a href="#runCallbacksOnInit-信息" class="headerlink" title="runCallbacksOnInit 信息"></a>runCallbacksOnInit 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>true</p>
</li>
<li><p>举例：</p>
<p>false</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="效果演示-8"><a href="#效果演示-8" class="headerlink" title="效果演示"></a>效果演示</h2><p>loop 模式初始化时会触发一次 slideChange</p>
<p>slider3</p>
<p>slider1</p>
<p>slider2</p>
<p>slider3</p>
<p>slider1</p>
<h2 id="使用方法示例-16"><a href="#使用方法示例-16" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">loop</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">    <span class="comment">//or initialSlide: 2,</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">runCallbacksOnInit</span>: <span class="literal">true</span>, <span class="comment">//如果不想触发，将此设置为false</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">on</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">slideChangeTransitionStart</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">&#x27;触发了回调&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="init"><a href="#init" class="headerlink" title="init"></a>init</h1><p>当你创建一个 Swiper 实例时是否立即初始化。<br>如果禁止了，可以稍后使用**mySwiper.init()**来初始化。</p>
<h2 id="init-信息"><a href="#init-信息" class="headerlink" title="init 信息"></a>init 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>true</p>
</li>
<li><p>举例：</p>
<p>false</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-17"><a href="#使用方法示例-17" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">init</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript">  mySwiper.init() <span class="comment">//现在才初始化</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="preloadImages"><a href="#preloadImages" class="headerlink" title="preloadImages"></a>preloadImages</h1><p>默认为 true，Swiper 会强制加载所有图片后才初始化。</p>
<h2 id="preloadImages-信息"><a href="#preloadImages-信息" class="headerlink" title="preloadImages 信息"></a>preloadImages 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>true</p>
</li>
<li><p>举例：</p>
<p>false</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-18"><a href="#使用方法示例-18" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">preloadImages</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="updateOnImagesReady"><a href="#updateOnImagesReady" class="headerlink" title="updateOnImagesReady"></a>updateOnImagesReady</h1><p>当所有的内嵌图像（img 标签）加载完成后 Swiper 会重新初始化。使用此选项需要先开启 preloadImages: true</p>
<h2 id="updateOnImagesReady-信息"><a href="#updateOnImagesReady-信息" class="headerlink" title="updateOnImagesReady 信息"></a>updateOnImagesReady 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>true</p>
</li>
<li><p>举例：</p>
<p>false</p>
</li>
<li><p>启用版本：</p>
<p>4.0.0</p>
</li>
</ul>
<h2 id="使用方法示例-19"><a href="#使用方法示例-19" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">updateOnImagesReady</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="cssMode"><a href="#cssMode" class="headerlink" title="cssMode"></a>cssMode</h1><p>启用后，它将使用现代 CSS Scroll Snap API。<br>它不支持 Swiper 的很多功能，但可能会带来更好的性能。</p>
<h3 id="以下是不支持的功能列表："><a href="#以下是不支持的功能列表：" class="headerlink" title="以下是不支持的功能列表："></a>以下是不支持的功能列表：</h3><ul>
<li>所有切换效果 (Fade, Coverflow, Flip, Cube)</li>
<li>Zoom</li>
<li>虚拟 Slides</li>
<li>speed 属性</li>
<li>所有 transition start/end 相关的事件 (可使用 slideChange 代替)</li>
<li>slidesPerGroup 部分支持</li>
<li>centeredSlides</li>
<li>如果浏览器不支持 scrollTo.behavior =’smooth’，滑动和切换时将没有过渡效果</li>
<li>simulateTouch 无效，鼠标无法拖动</li>
<li>resistance</li>
<li>allowSlidePrev/Next</li>
<li>swipeHandler</li>
<li>freeMode 和所有相关属性无效</li>
</ul>
<h2 id="cssMode-信息"><a href="#cssMode-信息" class="headerlink" title="cssMode 信息"></a>cssMode 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>false</p>
</li>
<li><p>举例：</p>
<p>true</p>
</li>
<li><p>启用版本：</p>
<p>5.0.0</p>
</li>
</ul>
<h2 id="效果演示-9"><a href="#效果演示-9" class="headerlink" title="效果演示"></a>效果演示</h2><p>slider1</p>
<p>slider2</p>
<p>slider3</p>
<h2 id="使用方法示例-20"><a href="#使用方法示例-20" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">cssMode</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="updateOnWindowResize"><a href="#updateOnWindowResize" class="headerlink" title="updateOnWindowResize"></a>updateOnWindowResize</h1><p>默认当窗口(window) 尺寸发生变化时，比如屏幕旋转，Swiper 会更新和重新计算(<a href="https://www.swiper.com.cn/api/methods/257.html">update</a>和<a href="https://www.swiper.com.cn/api/parameters/289.html">breakpoints</a>等)。禁止可设为 false。<br>此参数不可通过 params 重写。</p>
<h2 id="updateOnWindowResize-信息"><a href="#updateOnWindowResize-信息" class="headerlink" title="updateOnWindowResize 信息"></a>updateOnWindowResize 信息</h2><ul>
<li><p>类型：</p>
<p>boolean</p>
</li>
<li><p>默认：</p>
<p>true</p>
</li>
<li><p>举例：</p>
<p>false</p>
</li>
<li><p>启用版本：</p>
<p>5.2.1</p>
</li>
</ul>
<h2 id="使用方法示例-21"><a href="#使用方法示例-21" class="headerlink" title="使用方法示例"></a>使用方法示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">updateOnWindowResize</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>swiper</category>
      </categories>
      <tags>
        <tag>swiper</tag>
      </tags>
  </entry>
  <entry>
    <title>ESlint使用简介</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/ESLint%20%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/</url>
    <content><![CDATA[<h1 id="ESLint-使用简介"><a href="#ESLint-使用简介" class="headerlink" title="ESLint 使用简介"></a>ESLint 使用简介</h1><h5 id="一、JSLint-JSHint-ESLint"><a href="#一、JSLint-JSHint-ESLint" class="headerlink" title="一、JSLint JSHint ESLint"></a>一、JSLint JSHint ESLint</h5><p>参考<br><a href="https://zhuanlan.zhihu.com/p/32297243">前端工具考 - ESLint 篇</a><br><a href="https://zhuanlan.zhihu.com/p/34656263">JS Linter 进化史</a></p>
<blockquote>
<p>C 语言诞生之初，程序员编写的代码风格各异，在移植时会出现一些因为不严谨的代码段导致无法被编译器执行的问题。于是在 1979 年，一款叫 lint[1] 的程序被开发出来，能够通过扫描源代码检测潜在的错误。此后 lint 的功能不断完善，类似的工具相继出现。不仅可以检测代码中的潜在 Bug，还能做一些类型检查。</p>
</blockquote>
<h6 id="1、JavaScript-为什么需要-lint"><a href="#1、JavaScript-为什么需要-lint" class="headerlink" title="1、JavaScript 为什么需要 lint"></a>1、JavaScript 为什么需要 lint</h6><p>起初 JavaScript 被开发出来的目的只是用在 Web 页面里实现一些简单的交互（例如表单提交）。随着互联网发展，网站需要展示的内容更加丰富，交互也变得复杂，前端项目也越来越庞大；2009 年，NodeJS 的诞生使得 JavaScript 可以跑在服务端，更是让其地位更加突出。在 2017 年 GitHub 开发语言排行榜中，JavaScript 毫无疑问排在第一位。[2]</p>
<p>再加上 JavaScript 本身设计上存在许多缺陷[3]，代码不严谨也可能就会触发神奇的错误。例如 == 和 === 的混用，可能会产生类型不一致引起的 Bug，经验不足的开发者很难察觉出异常。</p>
<p>2002 年，Douglas Crockford （译注:《JavaScript 语言精粹》的作者）开发了可能是第一款针对 JavaScript 的语法检测工具 —— JSLint[4]，并于 2010 年开源。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-57e6e752521ae444.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/387/format/webp" alt="img"></p>
<p>image.png</p>
<h6 id="2、JSLint-和-JSHint"><a href="#2、JSLint-和-JSHint" class="headerlink" title="2、JSLint 和 JSHint"></a>2、JSLint 和 JSHint</h6><p>JSLint 面市后，确实帮助许多 JavaScript 开发者节省了不少排查代码错误的时间。但是 JSLint 的问题也很明显——几乎不可配置，所有的代码风格和规则都是内置好的；再加上 Douglas Crockford 老爷子推崇道系「爱用不用」的优良传统，不会向开发者妥协开放配置或者修改他觉得是对的规则。于是 Anton Kovalyov 吐槽：「JSLint 是让你的代码风格更像 Douglas Crockford 的而已」[5]，并且在 2011 年 Fork 原项目开发了 JSHint。</p>
<p>JSHint 的特点就是可配置，同时文档也相对完善，而且对开发者友好。很快大家就从 JSLint 转向了 JSHint。</p>
<h6 id="3、ESLint-的诞生"><a href="#3、ESLint-的诞生" class="headerlink" title="3、ESLint 的诞生"></a>3、ESLint 的诞生</h6><p><img src="https://upload-images.jianshu.io/upload_images/2354823-ee5208b37e75b186.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/594/format/webp" alt="img"></p>
<p>image.png</p>
<p>起初几年，JSHint 一直是前端代码检测工具的首选，包括 Nicholas C. Zakas （《JavaScript 高级程序设计》作者）也是 JSHint 的用户。但在 2013 年，Zakas 大佬发现 JSHint 已经无法满足自己定制化规则的需求，而且和 Anton 讨论后达成共识这根本在不可能在 JSHint 上实现。同时 Zakas 还设想发明一个基于 AST 的 lint，可以动态执行额外的规则，同时可以很方便的扩展规则。[6]</p>
<p>2013 年的 6 月份，Zakas 发布了全新的 lint 工具——ESLint[7]。</p>
<p>几乎同一时间，另一款和 ESLint 实现机制类似的代码风格检测工具——JSCS[8]——也诞生了。</p>
<h6 id="4、可扩展性的胜利"><a href="#4、可扩展性的胜利" class="headerlink" title="4、可扩展性的胜利"></a>4、可扩展性的胜利</h6><p>ESLint 的出现并没有撼动 JSHint 的霸主地位。由于前者是利用 AST 处理规则，用 Esprima 解析代码，执行速度要比只需要一步搞定的 JSHint 慢很多；其次当时已经有许多编辑器对 JSHint 支持完善，生态足够强大。真正让 ESLint 逆袭的是 ECMAScript 6 的出现。</p>
<p>2015 年 6 月，ES2015 规范正式发布。但是发布后，市面上浏览器对最新标准的支持情况极其有限。如果想要提前体验最新标准的语法，就得靠 Babel 之类的工具将代码编译成 ES5 甚至更低的版本，同时一些实验性的特性也能靠 Babel 转换。这时 JSHint 就略尴尬，ES2015 变化很大，短期内无法完全支持。ESLint 可扩展的优势一下就体现出来了，不仅可以扩展规则，甚至连解析器也能替换。Babel 团队就为 ESLint 开发了 babel-eslint[9] 替换默认解析器，让 ESLint 率先支持 ES2015 语法。</p>
<p>也是在 2015 年，React 的应用越来越广泛，诞生不久的 JSX 也愈加流行。ESLint 本身也不支持 JSX 语法。还是因为可扩展性，eslint-plugin-react[10] 的出现让 ESLint 也能支持当时 React 特有的规则。</p>
<p>2016 年，JSCS 开发团队认为 ESLint 和 JSCS 实现原理太过相似，而且需要解决的问题也都一致，最终选择合并到 ESLint，并停止 JSCS 的维护。[11]</p>
<p>至此，ESLint 完美躺赢，替代 JSHint 成为前端主流工具。[12]</p>
<h5 id="二、ESLint-入门"><a href="#二、ESLint-入门" class="headerlink" title="二、ESLint 入门"></a>二、ESLint 入门</h5><p>参考<br><a href="https://morning.work/page/maintainable-nodejs/getting-started-with-eslint.html">利用 ESLint 检查代码质量</a><br><a href="https://cn.eslint.org/">ESLint 中文网</a> 1.安装<br><code>npm install -g eslint</code> 2.准备一个 js 文件来测试一下</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ret = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="built_in">arguments</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">arguments</span>[i]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j <span class="keyword">in</span> m) ret[j] = m[j]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(merge(&#123; <span class="attr">a</span>: <span class="number">123</span> &#125;, &#123; <span class="attr">b</span>: <span class="number">456</span> &#125;))</span><br></pre></td></tr></table></figure>

<p>3.执行<code>eslint merge.js</code><br>这时是没有输出结果的，原因是没有指定配置文件。现在添加一个.eslintrc.js，使用内置配置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>重新执行 eslint merge.js 可以看到输出了 2 个错误：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">/example/merge.js</span><br><span class="line">  <span class="number">10</span>:<span class="number">1</span>  error  Unexpected <span class="built_in">console</span> statement  no-<span class="built_in">console</span></span><br><span class="line">  <span class="number">10</span>:<span class="number">1</span>  error  <span class="string">&#x27;console&#x27;</span> is not defined      no-undef</span><br><span class="line"></span><br><span class="line">✖ <span class="number">2</span> problem (<span class="number">2</span> error, <span class="number">0</span> warnings)</span><br></pre></td></tr></table></figure>

<p>这两条提示信息还是足够我们搞清楚是怎么回事的：</p>
<ul>
<li>Unexpected console statement no-console - 不能使用 console</li>
<li>‘console’ is not defined no-undef - console 变量未定义，不能使用未定义的变量</li>
</ul>
<p>针对第 1 条提示，我们可以禁用 no-console 规则。将配置文件.eslintrc.js 改为这样：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>说明：配置规则写在 rules 对象里面，key 表示规则名称，value 表示规则的配置。每条规则有 3 个等级：off、warn 和 error。off 表示禁用这条规则，warn 表示仅给出警告，并不会导致检查不通过，而 error 则会导致检查不通过。可以参考<a href="https://cn.eslint.org/docs/rules/">规则说明文档</a></p>
<p>重新执行检查还是提示 no-undef：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">/example/merge.js</span><br><span class="line">  <span class="number">10</span><span class="symbol">:</span><span class="number">1</span>  error  <span class="string">&#x27;console&#x27;</span> is <span class="keyword">not</span> <span class="keyword">defined</span>  no-<span class="keyword">undef</span></span><br><span class="line"></span><br><span class="line">✖ <span class="number">1</span> problem (<span class="number">1</span> error, <span class="number">0</span> warnings)</span><br></pre></td></tr></table></figure>

<p>这是因为 JavaScript 有很多种运行环境，比如常见的有浏览器和 Node.js，另外还有很多软件系统使用 JavaScript 作为其脚本引擎，比如 PostgreSQL 就支持使用 JavaScript 来编写存储引擎，而这些运行环境可能并不存在 console 这个对象。另外在浏览器环境下会有 window 对象，而 Node.js 下没有；在 Node.js 下会有 process 对象，而浏览器环境下没有。</p>
<p>所以在配置文件中我们还需要指定程序的目标环境：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="keyword">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>再重新执行检查时，已经没有任何提示输出了，说明 merge.js 已经完全通过了检查。</p>
<p>4.使用共享的配置文件<br>上文我们以 eslint:recommended 为基础配置，然后在此之上修改 no-console 这条规则。而在大多数时候，我们可能会根据自己个人或团队的习惯，定制更多的规则，比如<strong>限定缩进是 2 个空格和使用单引号的字符串</strong>等。而如果每一个项目都要这样写到.eslintrc.js 文件上，管理起来会比较麻烦。</p>
<p>我们可以将定义好规则的.eslintrc.js 文件存储到一个公共的位置，比如 public-eslintrc.js：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="keyword">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;indent&#x27;</span>: [ <span class="string">&#x27;error&#x27;</span>, <span class="number">2</span> ],</span><br><span class="line">    <span class="string">&#x27;quotes&#x27;</span>: [ <span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;single&#x27;</span> ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>然后将原来的.eslintrc.js 文件改成这样：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;./public-eslintrc.js&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>为了验证这样的修改是否生效，将 merge.js 中的 var ret = {};这一行前面多加一个空格，再执行 ESLint 检查：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/example/merge.js</span><br><span class="line">  2:4  error  Expected indentation of 2 space characters but found 3  indent</span><br><span class="line"></span><br><span class="line">✖ 1 problem (1 error, 0 warnings)</span><br></pre></td></tr></table></figure>

<p>这时候提示的是缩进只能为 2 个空格，而文件的第 2 行却发现了 3 个空格，说明公共配置文件 public-eslintrc.js 已经生效了。</p>
<p>5.代码格式化<br>在<a href="https://cn.eslint.org/docs/rules/">规则说明文档</a>中有如下说明</p>
<blockquote>
<p>为了让你对规则有个更好的理解，ESLint 对其进行了分门别类。<br>所有的规则默认都是禁用的。在配置文件中，使用 “extends”: “eslint:recommended” 来启用推荐的规则，报告一些常见的问题，在下文中这些推荐的规则都带有一个对勾标记。<br>命令行的 –fix 选项用来自动修复规则所报告的问题（目前，大部分是对空白的修复），在下文中会有一个扳手的图标。</p>
</blockquote>
<p>使用上述配置，将 merge.js 中的 var ret = {};这一行前面多加一个空格。然后执行<code>eslint merge.js --fix</code>，可以发现 merge.js 文件被修改了，新添加的空格被去除了。我们可以利用这个特性来自动格式化项目代码，这样就可以保证代码书写风格的统一。</p>
<p>5.例外情况<br>尽管我们在编码时怀着<strong>严格遵守规则</strong>的美好愿景，而<strong>凡事总有例外</strong>。定立 ESLint 规则的初衷是为了避免自己犯错，但是我们也要避免不顾实际情况而将其搞得太过于形式化，本末倒置。</p>
<p>ESLint 提供了多种临时禁用规则的方式，比如我们可以通过一条<code>eslint-disable-next-line</code>备注来使得下一行可以跳过检查：</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// eslint-disable-next-line</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">456</span>;</span><br></pre></td></tr></table></figure>

<p>在上面的示例代码中，<code>var a = 123</code>不会受到检查，而<code>var b = 456</code>则右恢复检查，在上文我们使用的<code>eslint-config-lei</code>的配置规则下，由于不允许使用<code>var</code>声明变量，则<code>var b</code>这一行会报告一个<code>error</code>。</p>
<p>我们还可以通过成对的<code>eslint-enable</code>和<code>eslint-disable</code>备注来禁用对某一段代码的检查，但是稍不小心少写了一个<code>eslint-disable</code>就可能会导致后面所有文件的检查都被禁用，所以我并不推荐使用。</p>
<p>详细使用方法可以参考文档：<a href="http://cn.eslint.org/docs/user-guide/configuring#disabling-rules-with-inline-comments">Disabling Rules with Inline Comments - 使用行内注释禁用规则</a></p>
<p>6.总结<br>刚开始接触 ESLint 时觉得太难，是因为过太过于迷信权威。比如 Airbnb 公司的 JavaScript 风格，在 GitHub 上受到了很大的好评，其实我自己也非常认可这样的编码风格。但每个团队都会根据自己的的实际情况来定制不同的东西，我们并不能随便照搬过来。所以当使用 eslint-config-airbnb 这个配置进行 ESLint 检查时，满屏都是 error 和 warning，从而觉得这东西根本没啥卵用。</p>
<p>另外我也犯了「大忌」：直接使用 eslint-config-airbnb 这种某个公司高度定制化的配置，而不是 eslint:recommended 这样保守的。而且是直接用来检查整个项目好几十个 JS 文件，可想而知那是怎样的画面（本文最后版本的 merge.js 文件使用 airbnb 的配置，总共 12 行的代码就提示了 8 个问题：✖ 8 problems (7 errors, 1 warning)）。</p>
<p>本文的目的是让读者以一个比较低的姿态开始接触 ESLint，先学会简单地配置规则，如果要更深入地定制自己的规则，建议阅读<br><a href="https://cn.eslint.org/docs/rules/">规则说明文档</a><br><a href="https://zhuanlan.zhihu.com/p/25271435">ESLint 规则详解（一）</a><br><a href="https://zhuanlan.zhihu.com/p/26910986">ESLint 规则详解（二）</a></p>
<h5 id="三、其它问题"><a href="#三、其它问题" class="headerlink" title="三、其它问题"></a>三、其它问题</h5><p>1.eslint –init<br>在第二部分入门示例时，是手动创建的.eslintrc.js。其实也可以使用 eslint –init 来创建<br>可以选个模板，也可以自己回答问题</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">PS</span> <span class="type">E</span>:\eslint<span class="operator">&gt;</span> eslint <span class="operator">--</span><span class="keyword">init</span></span><br><span class="line"><span class="operator">?</span> <span class="type">How</span> would you like to configure <span class="type">ESLint</span>? <span class="type">Use</span> a popular style guide</span><br><span class="line"><span class="operator">?</span> <span class="type">Which</span> style guide <span class="keyword">do</span> you want to follow<span class="operator">?</span> (<span class="type">Use</span> arrow keys)</span><br><span class="line"><span class="operator">&gt;</span> <span class="type">Airbnb</span> (https:<span class="comment">//github.com/airbnb/javascript)</span></span><br><span class="line">  <span class="type">Standard</span> (https:<span class="comment">//github.com/standard/standard)</span></span><br><span class="line">  <span class="type">Google</span> (https:<span class="comment">//github.com/google/eslint-config-google)</span></span><br></pre></td></tr></table></figure>

<p>比如选 airbnb</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;airbnb&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>也可以自己回答问题来创建</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">&gt; eslint --init</span><br><span class="line"></span><br><span class="line">? How would you like to configure ESLint? Answer questions about your style</span><br><span class="line"><span class="comment">// 是否校验 Es6 语法</span></span><br><span class="line">? Are you using ECMAScript <span class="number">6</span> features? Yes</span><br><span class="line"><span class="comment">// 是否校验 Es6 模块语法</span></span><br><span class="line">? Are you using ES6 modules? Yes</span><br><span class="line"><span class="comment">// 代码运行环境，Browser 指浏览器</span></span><br><span class="line">? Where will your code run? Browser</span><br><span class="line"><span class="comment">// 是否校验 CommonJs 语法</span></span><br><span class="line">? Do you <span class="keyword">use</span> CommonJS? Yes</span><br><span class="line"><span class="comment">// 是否校验 JSX 语法</span></span><br><span class="line">? Do you <span class="keyword">use</span> JSX? Yes</span><br><span class="line"><span class="comment">// 是否校验 React 语法</span></span><br><span class="line">? Do you <span class="keyword">use</span> React? Yes</span><br><span class="line"><span class="comment">// 首行空白选择 Tab 键还是 Space</span></span><br><span class="line">? What style of indentation <span class="keyword">do</span> you <span class="keyword">use</span>? Tabs</span><br><span class="line"><span class="comment">// 字符串使用单引号 &#x27;string&#x27; 还是双引号 &quot;string&quot;</span></span><br><span class="line">? What quotes <span class="keyword">do</span> you <span class="keyword">use</span> <span class="keyword">for</span> strings? Double</span><br><span class="line"><span class="comment">// 操作系统</span></span><br><span class="line">? What line endings <span class="keyword">do</span> you <span class="keyword">use</span>? Windows</span><br><span class="line"><span class="comment">// 每行代码结尾是否校验加分号 ;</span></span><br><span class="line">? Do you require semicolons? Yes</span><br><span class="line"><span class="comment">// 以 .js 格式生成配置文件</span></span><br><span class="line">? What format <span class="keyword">do</span> you want your config file to be <span class="keyword">in</span>? JavaScript</span><br><span class="line"><span class="comment">// 因为要校验 Reac 语法，所以这里需要下载一个 React 语法规则的包</span></span><br><span class="line">Installing eslint-plugin-react@latest</span><br></pre></td></tr></table></figure>

<p>2.”extends”: “eslint:recommended”<br>值为 “eslint:recommended” 的 extends 属性启用一系列核心规则，这些规则是经过前人验证的最佳实践（所谓最佳实践，就是大家伙都觉得应该遵循的编码规范），想知道最佳实践具体有哪些编码规范，可以在 eslint 规则表 中查看被标记为 √ 的规则项。</p>
<p>如果觉得官方提供的默认规则不好用，可以自定义规则配置文件，然后发布成 Npm 包，eslint-config-airbnb 就是别人自定义的编码规范，使用 npm 安装后，在我们自己的 .eslintrc.js 中进行配置 “extends”: “airbnb”，eslint-config 这个前缀可以省略不写，这样我们就使用了 eslint-config-airbnb 中的规则，而不是官方的规则 “extends”: “eslint:recommended” 了。关于如何创建自定义规则配置并共享可以参考： 如何自定义规则配置</p>
<p><strong>关于 “airbnb” 编码规范说两句，在接触到大多数开源项目中，大多数的作者都会使用 “airbnb” 编码规范而不是 官方的”extends”: “eslint:recommended” 编码规范。如果我们觉得 eslint-config-airbnb 规则配置中个别规则并不符合当前项目的要求，可以直接在 .eslintrc.js 配置 rules 属性，优先级高于共享规则 airbnb。</strong></p>
<p>3.rules<br>ESLint 附带有大量的规则，修改规则应遵循如下要求：</p>
<ul>
<li>“off” 或 0 - 关闭规则</li>
<li>“warn” 或 1 - 开启规则，使用警告级别的错误：warn (不会导致程序退出)</li>
<li>“error” 或 2 - 开启规则，使用错误级别的错误：error (当被触发的时候，程序会退出)</li>
</ul>
<p>有的规则没有属性，只需控制是开启还是关闭，像这样：”eqeqeq”: “off”，有的规则有自己的属性，使用起来像这样：”quotes”: [“error”, “double”]</p>
<p>4.【文件配置】<br>ESLint 支持几种格式的配置文件</p>
<ul>
<li>JavaScript - 使用 .eslintrc.js 然后输出一个配置对象。</li>
<li>YAML - 使用 .eslintrc.yaml 或 .eslintrc.yml 去定义配置的结构。</li>
<li>JSON - 使用 .eslintrc.json 去定义配置的结构，ESLint 的 JSON 文件允许 JavaScript 风格的注释。</li>
<li>(弃用) - 使用 .eslintrc，可以使 JSON 也可以是 YAML。</li>
<li>package.json - 在 package.json 里创建一个 eslintConfig 属性，在那里定义配置。</li>
</ul>
<p>如果同一个目录下有多个配置文件，ESLint 只会使用一个。优先级顺序如下</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="selector-class">.eslintrc</span><span class="selector-class">.js</span></span><br><span class="line"><span class="number">2</span> <span class="selector-class">.eslintrc</span><span class="selector-class">.yaml</span></span><br><span class="line"><span class="number">3</span> <span class="selector-class">.eslintrc</span><span class="selector-class">.yml</span></span><br><span class="line"><span class="number">4</span> <span class="selector-class">.eslintrc</span><span class="selector-class">.json</span></span><br><span class="line"><span class="number">5</span> <span class="selector-class">.eslintrc</span></span><br><span class="line"><span class="number">6</span>  package<span class="selector-class">.json</span></span><br></pre></td></tr></table></figure>

<p>除了配置一个独立的 .eslintrc.* 文件，也可以直接在 package.json 文件里的 eslintConfig 字段指定配置，ESLint 将自动在要检测的文件目录里寻找它们，紧接着是父级目录，一直到文件系统的根目录</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;mypackage&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.0.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="四、gulp-eslint"><a href="#四、gulp-eslint" class="headerlink" title="四、gulp-eslint"></a>四、<a href="https://github.com/adametry/gulp-eslint">gulp-eslint</a></h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install gulp-eslint --save</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const eslint = require(&#x27;gulp-eslint&#x27;)</span><br><span class="line"></span><br><span class="line">task(&#x27;default&#x27;, () =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    src([&#x27;scripts/*.js&#x27;])</span><br><span class="line">      // eslint() attaches the lint output to the &quot;eslint&quot; property</span><br><span class="line">      // of the file object so it can be used by other modules.</span><br><span class="line">      .pipe(eslint())</span><br><span class="line">      // eslint.format() outputs the lint results to the console.</span><br><span class="line">      // Alternatively use eslint.formatEach() (see Docs).</span><br><span class="line">      .pipe(eslint.format())</span><br><span class="line">      // To have the process exit with an error code (1) on</span><br><span class="line">      // lint error, return the stream and pipe to failAfterError last.</span><br><span class="line">      .pipe(eslint.failAfterError())</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>比如，针对上面的例子，可以写一个 gulpfile.js</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>),</span><br><span class="line">  eslint = <span class="built_in">require</span>(<span class="string">&#x27;gulp-eslint&#x27;</span>)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;lint&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src([<span class="string">&#x27;merge.js&#x27;</span>]).pipe(eslint()).pipe(eslint.format())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;lint&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;suc&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行结果</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">PS E:\eslint&gt; gulp <span class="literal">default</span></span><br><span class="line">[<span class="meta">16:10:52</span>] Using gulpfile E:\eslint\gulpfile.js</span><br><span class="line">[<span class="meta">16:10:52</span>] Starting <span class="string">&#x27;lint&#x27;</span>...</span><br><span class="line">[<span class="meta">16:10:53</span>]</span><br><span class="line">E:\eslint\merge.js</span><br><span class="line">   <span class="number">4</span>:<span class="number">3</span>  error  Unexpected console statement  no-console</span><br><span class="line">  <span class="number">12</span>:<span class="number">1</span>  error  Unexpected console statement  no-console</span><br><span class="line"></span><br><span class="line">✖ <span class="number">2</span> problems (<span class="number">0</span> errors, <span class="number">2</span> warnings)</span><br><span class="line"></span><br><span class="line">[<span class="meta">16:10:53</span>] Finished <span class="string">&#x27;lint&#x27;</span> after <span class="number">495</span> ms</span><br><span class="line">[<span class="meta">16:10:53</span>] Starting <span class="string">&#x27;default&#x27;</span>...</span><br><span class="line">suc</span><br><span class="line">[<span class="meta">16:10:53</span>] Finished <span class="string">&#x27;default&#x27;</span> after</span><br></pre></td></tr></table></figure>

<p>这里明明报错了，还是执行到 console.log(“suc”)了。原来是 gulpfile.js 还要再加一行</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;lint&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src([<span class="string">&#x27;merge.js&#x27;</span>])</span><br><span class="line">    .pipe(eslint())</span><br><span class="line">    .pipe(eslint.format())</span><br><span class="line">    .pipe(eslint.failAfterError())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这下子就过不去了</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">✖ <span class="number">2</span> problems (<span class="number">2</span> errors, <span class="number">0</span> warnings)</span><br><span class="line"></span><br><span class="line">[<span class="meta">16:21:13</span>] <span class="string">&#x27;lint&#x27;</span> errored after <span class="number">503</span> ms</span><br><span class="line">[<span class="meta">16:21:13</span>] ESLintError <span class="keyword">in</span> plugin <span class="string">&quot;gulp-eslint&quot;</span></span><br><span class="line">Message:</span><br><span class="line">    Failed <span class="keyword">with</span> <span class="number">2</span> errors</span><br></pre></td></tr></table></figure>

<p>这里其实可以通过一个 bool 变量来控制：<code>.pipe(exit ? eslint.failAfterError() : eslint.result(function () &#123;&#125;));</code></p>
<h5 id="五、在-vscode-中使用-eslint"><a href="#五、在-vscode-中使用-eslint" class="headerlink" title="五、在 vscode 中使用 eslint"></a>五、在 vscode 中使用 eslint</h5><p>参考<a href="https://segmentfault.com/a/1190000009077086">使用 VSCode + ESLint 实践前端编码规范</a></p>
<p>1.首先，打开 VSCode 扩展面板并搜索 ESLint 扩展，然后点击安装</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-1ad62e9111828bcc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/362/format/webp" alt="img"></p>
<p>image.png</p>
<p>安装完成之后，点击重新加载，或者重启 vscode</p>
<p>2.依次点击 vscode 中的 文件 &gt; 首选项 &gt; 设置 打开 VSCode 配置文件</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-53217148ee8d2abd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/946/format/webp" alt="img"></p>
<p>image.png</p>
<p>可以看到已经启用 eslint 了</p>
<p>3.打开 merge.js 可以看到报错，和上面命令行中的相同：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-cf9a4ce4ac2becdf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/527/format/webp" alt="img"></p>
<p>image.png</p>
<p>4.注意，我们已经安装过全局的 eslint 并且生成 eslintrc.js 了。如果没有这些操作，也是不行的。</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-router</title>
    <url>/taiaiac.gitee.io/2020/12/30/vue/vue-router/</url>
    <content><![CDATA[<h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>要学习 vue-router 就要先知道这里的路由是什么？为什么我们不能像原来一样直接用<a></a>标签编写链接哪？vue-router 如何使用？常见路由操作有哪些？等等这些问题，就是本篇要探讨的主要问题。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3174701-0ea528f387ba9366.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/989/format/webp" alt="img"></p>
<h2 id="二、vue-router-是什么"><a href="#二、vue-router-是什么" class="headerlink" title="二、vue-router 是什么"></a>二、vue-router 是什么</h2><p>这里的路由并不是指我们平时所说的硬件路由器，<strong>这里的路由就是 SPA（单页应用）的路径管理器</strong>。再通俗的说，vue-router 就是 WebApp 的链接路径管理系统。<br>vue-router 是 Vue.js 官方的路由插件，它和 vue.js 是深度集成的，适合用于构建单页面应用。vue 的单页面应用是基于路由和组件的，路由用于设定访问路径，并将路径和组件映射起来。传统的页面应用，是用一些超链接来实现页面切换和跳转的。在 vue-router 单页面应用中，则是路径之间的切换，也就是组件的切换。<strong>路由模块的本质 就是建立起 url 和页面之间的映射关系</strong>。</p>
<p>至于我们为啥不能用 a 标签，这是因为用 Vue 做的都是单页应用（<strong>当你的项目准备打包时，运行<code>npm run build</code>时，就会生成 dist 文件夹，这里面只有静态资源和一个 indexer 页面</strong>），所以你写的<a></a>标签是不起作用的，你必须使用 vue-router 来进行管理。</p>
<h2 id="三、vue-router-实现原理"><a href="#三、vue-router-实现原理" class="headerlink" title="三、vue-router 实现原理"></a>三、vue-router 实现原理</h2><p>SPA(single page application):单一页面应用程序，只有一个完整的页面；它在加载页面时，不会加载整个页面，而是只更新某个指定的容器中内容。<strong>单页面应用(SPA)的核心之一是: 更新视图而不重新请求页面</strong>;vue-router 在实现单页面前端路由时，提供了两种方式：Hash 模式和 History 模式；根据 mode 参数来决定采用哪一种方式。</p>
<h3 id="1、Hash-模式："><a href="#1、Hash-模式：" class="headerlink" title="1、Hash 模式："></a>1、Hash 模式：</h3><p><strong>vue-router 默认 hash 模式 —— 使用 URL 的 hash 来模拟一个完整的 URL，于是当 URL 改变时，页面不会重新加载。</strong> hash（#）是 URL 的锚点，代表的是网页中的一个位置，单单改变#后的部分，浏览器只会滚动到相应位置，不会重新加载网页，也就是说<strong>hash 出现在 URL 中，但不会被包含在 http 请求中，对后端完全没有影响，因此改变 hash 不会重新加载页面</strong>；同时每一次改变#后的部分，都会在浏览器的访问历史中增加一个记录，使用”后退”按钮，就可以回到上一个位置；所以说<strong>Hash 模式通过锚点值的改变，根据不同的值，渲染指定 DOM 位置的不同数据。hash 模式的原理是 onhashchange 事件(监测 hash 值变化)，可以在 window 对象上监听这个事件</strong>。</p>
<h3 id="2、History-模式："><a href="#2、History-模式：" class="headerlink" title="2、History 模式："></a>2、History 模式：</h3><p>由于 hash 模式会在 url 中自带#，如果不想要很丑的 hash，我们可以用路由的 history 模式，只需要在配置路由规则时，加入”mode: ‘history’”,<strong>这种模式充分利用了 html5 history interface 中新增的 pushState() 和 replaceState() 方法。这两个方法应用于浏览器记录栈，在当前已有的 back、forward、go 基础之上，它们提供了对历史记录修改的功能。只是当它们执行修改时，虽然改变了当前的 URL ，但浏览器不会立即向后端发送请求</strong>。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js文件中</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  routes: [...]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>当你使用 history 模式时，URL 就像正常的 url，例如 <a href="https://links.jianshu.com/go?to=http://yoursite.com/user/id">http://yoursite.com/user/id</a>，比较好看！<br>不过这种模式要玩好，还需要后台配置支持。因为我们的应用是个单页客户端应用，如果后台没有正确的配置，当用户在浏览器直接访问 <a href="https://links.jianshu.com/go?to=http://oursite.com/user/id">http://oursite.com/user/id</a> 就会返回 404，这就不好看了。<br>所以呢，<strong>你要在服务端增加一个覆盖所有情况的候选资源：如果 URL 匹配不到任何静态资源，则应该返回同一个 index.html 页面，这个页面就是你 app 依赖的页面。</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> routes = [</span><br><span class="line"> &#123;path: <span class="string">&quot;/&quot;</span>, name: <span class="string">&quot;homeLink&quot;</span>, component:Home&#125;</span><br><span class="line"> &#123;path: <span class="string">&quot;/register&quot;</span>, name: <span class="string">&quot;registerLink&quot;</span>, component: Register&#125;,</span><br><span class="line"> &#123;path: <span class="string">&quot;/login&quot;</span>, name: <span class="string">&quot;loginLink&quot;</span>, component: Login&#125;,</span><br><span class="line"> &#123;path: <span class="string">&quot;*&quot;</span>, redirect: <span class="string">&quot;/&quot;</span>&#125;]</span><br></pre></td></tr></table></figure>

<p>此处就设置如果 URL 输入错误或者是 URL 匹配不到任何静态资源，就自动跳到到 Home 页面</p>
<h3 id="3、使用路由模块来实现页面跳转的方式"><a href="#3、使用路由模块来实现页面跳转的方式" class="headerlink" title="3、使用路由模块来实现页面跳转的方式"></a>3、使用路由模块来实现页面跳转的方式</h3><ul>
<li>方式 1：直接修改地址栏</li>
<li>方式 2：this.$router.push(‘路由地址’)</li>
<li>方式 3：<code>&lt;router-link to=&quot;路由地址&quot;&gt;&lt;/router-link&gt;</code></li>
</ul>
<h2 id="四、vue-router-使用方式"><a href="#四、vue-router-使用方式" class="headerlink" title="四、vue-router 使用方式"></a>四、vue-router 使用方式</h2><p>1:下载 <code>npm i vue-router -S</code><br>2:在 main.js 中引入 <code>import VueRouter from &#39;vue-router&#39;</code>;<br>3:安装插件<code>Vue.use(VueRouter)</code>;<br>4:创建路由对象并配置路由规则 <code>let router = new VueRouter(&#123;routes:[&#123;path:&#39;/home&#39;,component:Home&#125;]&#125;)</code>;<br>5:将其路由对象传递给 Vue 的实例，options 中加入 <code>router:router</code><br>6:在 app.vue 中留坑 <code>&lt;router-view&gt;&lt;/router-view&gt;</code></p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201029170802471.png" alt="image-20201029170802471"></p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201029170812839.png" alt="image-20201029170812839"></p>
<p>具体实现请看如下代码：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js文件中引入</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//主体</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./components/app.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;./components/home.vue&#x27;</span></span><br><span class="line"><span class="comment">//安装插件</span></span><br><span class="line">Vue.use(VueRouter) <span class="comment">//挂载属性</span></span><br><span class="line"><span class="comment">//创建路由对象并配置路由规则</span></span><br><span class="line"><span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">//一个个对象</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: Home &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//new Vue 启动</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="comment">//让vue知道我们的路由规则</span></span><br><span class="line">  <span class="attr">router</span>: router, <span class="comment">//可以简写router</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">c</span>) =&gt;</span> c(App),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>最后记得在在 app.vue 中“留坑”</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//app.vue中</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- 留坑，非常重要 --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="五、-vue-router-参数传递"><a href="#五、-vue-router-参数传递" class="headerlink" title="五、 vue-router 参数传递"></a>五、 vue-router 参数传递</h2><p>声明式的导航<code>&lt;router-link :to=&quot;...&quot;&gt;</code>和编程式的导航<code>router.push(...)</code>都可以传参，本文主要介绍前者的传参方法，同样的规则也适用于编程式的导航。</p>
<h3 id="1-用-name-传递参数"><a href="#1-用-name-传递参数" class="headerlink" title="1.用 name 传递参数"></a>1.用 name 传递参数</h3><p>在路由文件 src/router/index.js 里配置 name 属性</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">      component: Hello</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>模板里(src/App.vue)用<code>$route.name</code>来接收 比如：<code>&lt;p&gt;&#123;&#123; $route.name&#125;&#125;&lt;/p&gt;</code></p>
<h3 id="2-通过-lt-router-link-gt-标签中的-to-传参"><a href="#2-通过-lt-router-link-gt-标签中的-to-传参" class="headerlink" title="2 通过&lt;router-link&gt; 标签中的 to 传参"></a>2 通过<code>&lt;router-link&gt;</code> 标签中的 to 传参</h3><p>这种传参方法的基本语法：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">&lt;router-link <span class="symbol">:to=<span class="string">&quot;&#123;name:xxx,params:&#123;key:value&#125;&#125;&quot;</span>&gt;valueString&lt;/router-link&gt;</span></span><br></pre></td></tr></table></figure>

<p>比如先在 src/App.vue 文件中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;hi1&#x27;,params:&#123;username:&#x27;jspang&#x27;,id:&#x27;555&#x27;&#125;&#125;&quot;</span>&gt;</span>Hi页面1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后把 src/router/index.js 文件里给 hi1 配置的路由起个 name,就叫 hi1.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;path:<span class="string">&#x27;/hi1&#x27;</span>,name:<span class="string">&#x27;hi1&#x27;</span>,component:Hi1&#125;</span><br></pre></td></tr></table></figure>

<p>最后在模板里(src/components/Hi1.vue)用<code>$route.params.username</code>进行接收.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;&#123;<span class="variable">$route</span>.params.username&#125;&#125;-&#123;&#123;<span class="variable">$route</span>.params.id&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-利用-url-传递参数—-在配置文件里以冒号的形式设置参数。"><a href="#3-利用-url-传递参数—-在配置文件里以冒号的形式设置参数。" class="headerlink" title="3 利用 url 传递参数—-在配置文件里以冒号的形式设置参数。"></a>3 利用 url 传递参数—-在配置文件里以冒号的形式设置参数。</h3><p>我们在/src/router/index.js 文件里配置路由</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path:<span class="string">&#x27;/params/:newsId/:newsTitle&#x27;</span>,</span><br><span class="line">    component:Params</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们需要传递参数是新闻 ID（newsId）和新闻标题（newsTitle）.所以我们在路由配置文件里制定了这两个值。</p>
<p>在 src/components 目录下建立我们 params.vue 组件，也可以说是页面。我们在页面里输出了 url 传递的的新闻 ID 和新闻标题。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>新闻ID：&#123;&#123; $route.params.newsId&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>新闻标题：&#123;&#123; $route.params.newsTitle&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">&#x27;params&#x27;</span>,</span></span><br><span class="line"><span class="javascript">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">msg</span>: <span class="string">&#x27;params page&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 App.vue 文件里加入我们的<code>&lt;router-view&gt;</code>标签。这时候我们可以直接利用 url 传值了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;router-link to=&quot;/params/198/jspang website is very good&quot;&gt;params&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-使用-path-来匹配路由，然后通过-query-来传递参数"><a href="#4-使用-path-来匹配路由，然后通过-query-来传递参数" class="headerlink" title="4. 使用 path 来匹配路由，然后通过 query 来传递参数"></a>4. 使用 path 来匹配路由，然后通过 query 来传递参数</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name:&#x27;Query&#x27;,query: &#123; queryId:  status &#125;&#125;&quot;</span> &gt;</span></span><br><span class="line">     router-link跳转Query</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对应路由配置：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/query&#x27;</span>,</span><br><span class="line">  name: <span class="string">&#x27;Query&#x27;</span>,</span><br><span class="line">  component: Query</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>于是我们可以获取参数：</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.$route.query.queryId</span><br></pre></td></tr></table></figure>

<h2 id="六、vue-router-配置子路由-二级路由"><a href="#六、vue-router-配置子路由-二级路由" class="headerlink" title="六、vue-router 配置子路由(二级路由)"></a>六、vue-router 配置子路由(二级路由)</h2><p>实际生活中的应用界面，通常由多层嵌套的组件组合而成。同样地，URL 中各段动态路径也按某种结构对应嵌套的各层组件，例如：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3174701-efce15514ae3acdb?imageMogr2/auto-orient/strip%7CimageView2/2/w/619/format/webp" alt="img"></p>
<p>image</p>
<p>**如何实现下图效果(H1 页面和 H2 页面嵌套在主页中)**？</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3174701-1d309ac2e4ef990c?imageMogr2/auto-orient/strip%7CimageView2/2/w/621/format/webp" alt="img"></p>
<p>image</p>
<p>1.首先用<code>&lt;router-link&gt;</code>标签增加了两个新的导航链接</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;HelloWorld&#x27;&#125;&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;H1&#x27;&#125;&quot;</span>&gt;</span>H1页面<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;H2&#x27;&#125;&quot;</span>&gt;</span>H2页面<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.在 HelloWorld.vue 加入<code>&lt;router-view&gt;</code>标签，给子模板提供插入位置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.在 components 目录下新建两个组件模板 H1.vue 和 H2.vue<br>两者内容类似，以下是 H1.vue 页面内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">msg</span>: <span class="string">&#x27;I am H1 page,Welcome to H1&#x27;</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>修改 router/index.js 代码，子路由的写法是在原有的路由配置下加入 children 字段。</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"> routes: [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span><br><span class="line">    component: HelloWorld,</span><br><span class="line">    children: [&#123;path: <span class="string">&#x27;/h1&#x27;</span>, name: <span class="string">&#x27;H1&#x27;</span>, component: H1&#125;,<span class="comment">//子路由的&lt;router-view&gt;必须在HelloWorld.vue中出现</span></span><br><span class="line">      &#123;path: <span class="string">&#x27;/h2&#x27;</span>, name: <span class="string">&#x27;H2&#x27;</span>, component: H2&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="七、单页面多路由区域操作"><a href="#七、单页面多路由区域操作" class="headerlink" title="七、单页面多路由区域操作"></a>七、单页面多路由区域操作</h2><p>在一个页面里我们有两个以上<code>&lt;router-view&gt;</code>区域，我们通过配置路由的 js 文件，来操作这些区域的内容</p>
<p>1.App.vue 文件，在<code>&lt;router-view&gt;</code>下面新写了两行<code>&lt;router-view&gt;</code>标签,并加入了些 CSS 样式</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;HelloWorld&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>H1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;H1&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>H2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span> <span class="attr">style</span>=<span class="string">&quot;float:left;width:50%;background-color:#ccc;height:300px;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span> <span class="attr">style</span>=<span class="string">&quot;float:right;width:50%;background-color:yellowgreen;height:300px;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.需要在路由里配置这三个区域，配置主要是在 components 字段里进行</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span><br><span class="line">        components: &#123;default: HelloWorld,</span><br><span class="line">          left:H1,//显示H1组件内容<span class="string">&#x27;I am H1 page,Welcome to H1&#x27;</span></span><br><span class="line">          right:H2//显示H2组件内容<span class="string">&#x27;I am H2 page,Welcome to H2&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&#x27;/h1&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;H1&#x27;</span>,</span><br><span class="line">        components: &#123;default: HelloWorld,</span><br><span class="line">          left:H2,//显示H2组件内容</span><br><span class="line">          right:H1//显示H1组件内容</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>上边的代码我们编写了两个路径，一个是默认的‘/’，另一个是‘/Hi’.在两个路径下的 components 里面，我们对三个区域都定义了显示内容。最后页面展示如下图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3174701-f4f4f08651834c8e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>
<p>image</p>
<h2 id="八-route-和-router-的区别"><a href="#八-route-和-router-的区别" class="headerlink" title="八.$route 和 $router 的区别"></a>八.<code>$route</code> 和 <code>$router</code> 的区别</h2><p>我们先将这两者 console.log 打印出来：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3174701-cb30e26e1485c06a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/458/format/webp" alt="img"></p>
<p>image</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3174701-f88eea882545a2e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/722/format/webp" alt="img"></p>
<p>image</p>
<p><strong>$route 是“路由信息对象”，包括 path，params，hash，query，fullPath，matched，name 等路由信息参数。</strong></p>
<p><strong>① <code>$route.path</code></strong><br>字符串，对应当前路由的路径，总是解析为绝对路径，如 “/order”。</p>
<p><strong>② <code>$route.params</code></strong><br>一个 key/value 对象，包含了 动态片段 和 全匹配片段，<br>如果没有路由参数，就是一个空对象。</p>
<p><strong>③ <code>$route.query</code></strong><br>一个 key/value 对象，表示 URL 查询参数。<br>例如，对于路径 /foo?user=1，则有 $route.query.user 为 1，<br>如果没有查询参数，则是个空对象。</p>
<p><strong>④ <code>$route.hash</code></strong><br>当前路由的 hash 值 (不带 #) ，如果没有 hash 值，则为空字符串。</p>
<p><strong>⑤ <code>$route.fullPath</code></strong><br>完成解析后的 URL，包含查询参数和 hash 的完整路径。</p>
<p><strong>⑥ <code>$route.matched</code></strong><br>数组，包含当前匹配的路径中所包含的所有片段所对应的配置参数对象。</p>
<p><strong>⑦ <code>$route.name</code> 当前路径名字</strong></p>
<p><strong>$router 是“路由实例”对象，即使用 new VueRouter 创建的实例，包括了路由的跳转方法，钩子函数等。</strong></p>
<p><strong>$router 常见跳转方法:</strong></p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;button <span class="meta">@click</span>=<span class="string">&quot;goToMenu&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">success</span>&quot;&gt;<span class="title">Let</span>&#x27;<span class="title">s</span> <span class="title">order</span>！&lt;<span class="type">/button</span>&gt;</span></span><br><span class="line">.....</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default&#123;</span><br><span class="line">    methods:&#123;</span><br><span class="line">      goToMenu()&#123;</span><br><span class="line">        <span class="keyword">this</span>.$router.go(-<span class="number">1</span>)<span class="comment">//跳转到上一次浏览的页面</span></span><br><span class="line">        <span class="keyword">this</span>.$router.replace(<span class="string">&#x27;/menu&#x27;</span>)<span class="comment">//指定跳转的地址</span></span><br><span class="line">        <span class="keyword">this</span>.$router.replace(&#123;name:<span class="string">&#x27;menuLink&#x27;</span>&#125;)<span class="comment">//指定跳转路由的名字下</span></span><br><span class="line">        <span class="keyword">this</span>.$router.push(<span class="string">&#x27;/menu&#x27;</span>)<span class="comment">//通过push进行跳转</span></span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123;name:<span class="string">&#x27;menuLink&#x27;</span>&#125;)<span class="comment">//通过push进行跳转路由的名字下</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong><code>$router.push</code>和<code>$router.replace</code>的区别</strong>：</p>
<ul>
<li>使用 push 方法的跳转会向 history 栈添加一个新的记录，当我们点击浏览器的返回按钮时可以看到之前的页面。</li>
<li>使用 replace 方法不会向 history 添加新记录，而是替换掉当前的 history 记录，即当 replace 跳转到的网页后，‘后退’按钮不能查看之前的页面。</li>
</ul>
<h2 id="九、-如何设置-404-页面"><a href="#九、-如何设置-404-页面" class="headerlink" title="九、 如何设置 404 页面"></a>九、 如何设置 404 页面</h2><p>用户会经常输错页面，当用户输错页面时，我们希望给他一个友好的提示页面，这个页面就是我们常说的 404 页面。vue-router 也为我们提供了这样的机制。</p>
<ol>
<li>设置我们的路由配置文件（/src/router/index.js）</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   path:<span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">   component:Error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的 path:’*‘就是输入地址不匹配时，自动显示出 Error.vue 的文件内容</p>
<ol>
<li>在/src/components/文件夹下新建一个 Error.vue 的文件。简单输入一些有关错误页面的内容。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">msg</span>: <span class="string">&#x27;Error:404&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此时我们随意输入一个错误的地址时，便会自动跳转到 404 页面</p>
<h2 id="十、路由守卫"><a href="#十、路由守卫" class="headerlink" title="十、路由守卫"></a>十、路由守卫</h2><h3 id="1-导航守卫是什么"><a href="#1-导航守卫是什么" class="headerlink" title="1.导航守卫是什么"></a><strong>1.导航守卫是什么</strong></h3><p>官方这么说：</p>
<blockquote>
<p><em>正如其名，</em><code>*vue-router*</code><em>提供的导航守卫主要用来通过跳转或取消的方式守卫导航。</em></p>
</blockquote>
<p>好吧，看不懂，就好（当）好（废）理（话）解（吧）下。其实，导航守卫就是路由跳转过程中的一些钩子函数，再直白点路由跳转是一个大的过程，这个大的过程分为跳转前中后等等细小的过程，在每一个过程中都有一函数，这个函数能让你操作一些其他的事儿的时机，这就是导航守卫。</p>
<h3 id="2-导航守卫全解析"><a href="#2-导航守卫全解析" class="headerlink" title="2.导航守卫全解析"></a><strong>2.导航守卫全解析</strong></h3><p>先看一个钩子函数执行后输出的顺序截图吧，一般讲解都会在之后呈现，给大家换种思路（也就是先预习再学习最后复习）</p>
<p><img src="https://pic4.zhimg.com/80/v2-c3a67a5eb0b8da4936a6b57ef8c48783_720w.jpg" alt="img"></p>
<p>好吧不知道的估计看不懂吧！不过我希望你能看到一个点能多倒回来看看这个顺序，前方干货预警</p>
<hr>
<p><strong>导航守卫分为</strong>：全局的、单个路由独享的、组件内的三种。分别来看一下：</p>
<p>【全局的】：是指路由实例上直接操作的钩子函数，他的特点是所有路由配置的组件都会触发，直白点就是触发路由就会触发这些钩子函数，如下的写法。钩子函数按执行顺序包括 beforeEach、beforeResolve（2.5+）、afterEach 三个（以下的钩子函数都是按执行顺序讲解的）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>[beforeEach]：在路由跳转前触发，参数包括 to,from,next（参数会单独介绍）三个，这个钩子作用主要是用于登录验证，也就是路由还没跳转提前告知，以免跳转了再通知就为时已晚。</p>
<p>[beforeResolve]（2.5+）：这个钩子和 beforeEach 类似，也是路由跳转前触发，参数也是 to,from,next 三个，和 beforeEach 区别官方解释为：</p>
<blockquote>
<p>区别是在导航被确认之前，<strong>同时在所有组件内守卫和异步路由组件被解析之后</strong>，解析守卫就被调用。</p>
</blockquote>
<p>即在 beforeEach 和 组件内 beforeRouteEnter 之后，afterEach 之前调用。</p>
<p>[afterEach]：和 beforeEach 相反，他是在路由跳转完成后触发，参数包括 to,from 没有了 next（参数会单独介绍）,他发生在 beforeEach 和 beforeResolve 之后，beforeRouteEnter（组件内守卫，后讲）之前。</p>
<p>【路由独享的】是指在单个路由配置的时候也可以设置的钩子函数，其位置就是下面示例中的位置，也就是像 Foo 这样的组件都存在这样的钩子函数。目前他只有一个钩子函数 beforeEnter：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: Foo,</span><br><span class="line">      <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>[beforeEnter]：和 beforeEach 完全相同，如果都设置则在 beforeEach 之后紧随执行，参数 to、from、next</p>
<p>【组件内的】：是指在组件内执行的钩子函数，类似于组件内的生命周期，相当于为配置路由的组件添加的生命周期钩子函数。钩子函数按执行顺序包括 beforeRouteEnter、beforeRouteUpdate (2.2+)、beforeRouteLeave 三个，执行位置如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 在渲染该组件的对应路由被 confirm 前调用</span></span><br><span class="line">    <span class="comment">// 不！能！获取组件实例 `this`</span></span><br><span class="line">    <span class="comment">// 因为当守卫执行前，组件实例还没被创建</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span></span><br><span class="line">    <span class="comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 导航离开该组件的对应路由时调用</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>[beforeRouteEnter]：路由进入之前调用，参数包括 to，from，next。该钩子在全局守卫 beforeEach 和独享守卫 beforeEnter 之后，全局 beforeResolve 和全局 afterEach 之前调用，要注意的是该守卫内访问不到组件的实例，也就是 this 为 undefined，也就是他在 beforeCreate 生命周期前触发。在这个钩子函数中，可以通过传一个回调给 next 来访问组件实例。在导航被确认的时候执行回调，并且把组件实例作为回调方法的参数，可以在这个守卫中请求服务端获取数据，当成功获取并能进入路由时，调用 next 并在回调中通过 vm 访问组件实例进行赋值等操作，（next 中函数的调用在 mounted 之后：为了确保能对组件实例的完整访问）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="comment">// 这里还无法访问到组件实例，this === undefined</span></span><br><span class="line">  next( <span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 通过 `vm` 访问组件实例</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[beforeRouteUpdate] (v 2.2+)：在当前路由改变时，并且该组件被复用时调用，可以通过 this 访问实例。参数包括 to，from，next。可能有的同学会疑问，what is 路由改变 or what is 组件被复用？</p>
<ul>
<li>对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，组件实例会被复用，该守卫会被调用</li>
<li>当前路由 query 变更时，该守卫会被调用</li>
</ul>
<p>[beforeRouteLeave]：导航离开该组件的对应路由时调用，可以访问组件实例<code>this</code>，参数包括 to，from，next。</p>
<p>至此，所有钩子函数介绍完毕。</p>
<p>屡一下哈：</p>
<p><strong>全局路由钩子：beforeEach(to,from, next)、beforeResolve(to,from, next)、afterEach(to,from)；</strong></p>
<p><strong>独享路由钩子：beforeEnter(to,from, next)；</strong></p>
<p><strong>组件内路由钩子：beforeRouteEnter(to,from, next)、beforeRouteUpdate(to,from, next)、beforeRouteLeave(to,from, next)</strong></p>
<p>不知道你是否还记得 to、from、next 这三个参数</p>
<p>下面请重头把这几个钩子函数的参数看一遍，细心的同学可以看见在 afterEach 钩子中参数没有 next，为什么呢？</p>
<h3 id="3-导航守卫回调参数"><a href="#3-导航守卫回调参数" class="headerlink" title="3.导航守卫回调参数"></a><strong>3.导航守卫回调参数</strong></h3><p>to：目标路由对象；</p>
<p>from：即将要离开的路由对象；</p>
<p>next：他是最重要的一个参数，他相当于佛珠的线，把一个一个珠子逐个串起来。以下注意点务必牢记：</p>
<p>1.但凡涉及到有 next 参数的钩子，必须调用 next() 才能继续往下执行下一个钩子，否则路由跳转等会停止。</p>
<p>2.如果要中断当前的导航要调用 next(false)。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到<code>from</code>路由对应的地址。（主要用于登录验证不通过的处理）</p>
<p>3.当然 next 可以这样使用，next(‘/‘) 或者 next({ path: ‘/‘ }): 跳转到一个不同的地址。意思是当前的导航被中断，然后进行一个新的导航。可传递的参数与<a href="https://link.zhihu.com/?target=https://router.vuejs.org/zh/guide/essentials/navigation.html">router.push</a>中选项一致。</p>
<p>4.在 beforeRouteEnter 钩子中 next((vm)=&gt;{})内接收的回调函数参数为当前组件的实例 vm，这个回调函数在生命周期 mounted 之后调用，也就是，他是所有导航守卫和生命周期函数最后执行的那个钩子。</p>
<p>5.next(error): (v2.4.0+) 如果传入 <code>next</code> 的参数是一个 <code>Error</code> 实例，则导航会被终止且该错误会被传递给 <code>router.onError()</code> 注册过的回调。</p>
<h3 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a><strong>4.总结</strong></h3><p>好了，还记得那个截图吗，我们再看一遍</p>
<p><img src="https://pic2.zhimg.com/80/v2-8aa859dad60cd6b86f960070233771d5_720w.jpg" alt="img"></p>
<p>我们最后屡一下顺序：</p>
<p><strong>当点击切换路由时：beforeRouterLeave–&gt;beforeEach–&gt;beforeEnter–&gt;beforeRouteEnter–&gt;beforeResolve–&gt;afterEach–&gt;beforeCreate–&gt;created–&gt;beforeMount–&gt;mounted–&gt;beforeRouteEnter 的 next 的回调</strong></p>
<p><strong>当路由更新时：beforeRouteUpdate</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">记住参数或查询的改变并不会触发进入/离开的导航守卫。你可以通过观察 $route 对象来应对这些变化，或使用 beforeRouteUpdate 的组件内守卫。</span><br><span class="line"></span><br><span class="line">全局前置守卫</span><br><span class="line">你可以使用 router<span class="selector-class">.beforeEach</span> 注册一个全局前置守卫：</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router<span class="selector-class">.beforeEach</span>((<span class="selector-tag">to</span>, <span class="selector-tag">from</span>, next) =&gt; &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;)</span><br><span class="line">当一个导航触发时，全局前置守卫按照创建顺序调用。守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 等待中。</span><br><span class="line"></span><br><span class="line">每个守卫方法接收三个参数：</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">to</span>: Route: 即将要进入的目标 路由对象</span><br><span class="line"></span><br><span class="line">from: Route: 当前导航正要离开的路由</span><br><span class="line"></span><br><span class="line">next: Function: 一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。</span><br><span class="line"></span><br><span class="line"><span class="built_in">next</span>(): 进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。</span><br><span class="line"></span><br><span class="line"><span class="built_in">next</span>(false): 中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。</span><br><span class="line"></span><br><span class="line"><span class="built_in">next</span>(<span class="string">&#x27;/&#x27;</span>) 或者 <span class="built_in">next</span>(&#123; path: <span class="string">&#x27;/&#x27;</span> &#125;): 跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向 next 传递任意位置对象，且允许设置诸如 replace: true、name: <span class="string">&#x27;home&#x27;</span> 之类的选项以及任何用在 router-link 的 to prop 或 router.push 中的选项。</span><br><span class="line"></span><br><span class="line"><span class="built_in">next</span>(error): (<span class="number">2.4</span>.<span class="number">0</span>+) 如果传入 next 的参数是一个 Error 实例，则导航会被终止且该错误会被传递给 router.<span class="built_in">onError</span>() 注册过的回调。</span><br><span class="line"></span><br><span class="line">确保要调用 next 方法，否则钩子就不会被 resolved。</span><br><span class="line"></span><br><span class="line">#全局解析守卫</span><br><span class="line"><span class="number">2.5</span>.<span class="number">0</span> 新增</span><br><span class="line"></span><br><span class="line">在 <span class="number">2.5</span>.<span class="number">0</span>+ 你可以用 router.beforeResolve 注册一个全局守卫。这和 router.beforeEach 类似，区别是在导航被确认之前，同时在所有组件内守卫和异步路由组件被解析之后，解析守卫就被调用。</span><br><span class="line"></span><br><span class="line">#全局后置钩子</span><br><span class="line">你也可以注册全局后置钩子，然而和守卫不同的是，这些钩子不会接受 next 函数也不会改变导航本身：</span><br><span class="line"></span><br><span class="line">router.<span class="built_in">afterEach</span>((to, from) =&gt; &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;)</span><br><span class="line">#路由独享的守卫</span><br><span class="line">你可以在路由配置上直接定义 beforeEnter 守卫：</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/foo&#x27;</span>,</span><br><span class="line">      component: Foo,</span><br><span class="line">      beforeEnter: (to, from, next) =&gt; &#123;</span><br><span class="line">        // ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">这些守卫与全局前置守卫的方法参数是一样的。</span><br><span class="line"></span><br><span class="line">#组件内的守卫</span><br><span class="line">最后，你可以在路由组件内直接定义以下路由导航守卫：</span><br><span class="line"></span><br><span class="line">beforeRouteEnter</span><br><span class="line">beforeRouteUpdate (<span class="number">2.2</span> 新增)</span><br><span class="line">beforeRouteLeave</span><br><span class="line">const Foo = &#123;</span><br><span class="line">  template: `...`,</span><br><span class="line">  beforeRouteEnter (to, from, next) &#123;</span><br><span class="line">    // 在渲染该组件的对应路由被 confirm 前调用</span><br><span class="line">    // 不！能！获取组件实例 `this`</span><br><span class="line">    // 因为当守卫执行前，组件实例还没被创建</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (<span class="selector-tag">to</span>, <span class="selector-tag">from</span>, next) &#123;</span><br><span class="line">    // 在当前路由改变，但是该组件被复用时调用</span><br><span class="line">    // 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/<span class="number">1</span> 和 /foo/<span class="number">2</span> 之间跳转的时候，</span><br><span class="line">    // 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span><br><span class="line">    // 可以访问组件实例 `this`</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (<span class="selector-tag">to</span>, <span class="selector-tag">from</span>, next) &#123;</span><br><span class="line">    // 导航离开该组件的对应路由时调用</span><br><span class="line">    // 可以访问组件实例 `this`</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">beforeRouteEnter 守卫 不能 访问 this，因为守卫在导航确认前被调用,因此即将登场的新组件还没被创建。</span><br><span class="line"></span><br><span class="line">不过，你可以通过传一个回调给 next来访问组件实例。在导航被确认的时候执行回调，并且把组件实例作为回调方法的参数。</span><br><span class="line"></span><br><span class="line">beforeRouteEnter (<span class="selector-tag">to</span>, <span class="selector-tag">from</span>, next) &#123;</span><br><span class="line">  next(vm =&gt; &#123;</span><br><span class="line">    // 通过 `vm` 访问组件实例</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">注意 beforeRouteEnter 是支持给 next 传递回调的唯一守卫。对于 beforeRouteUpdate 和 beforeRouteLeave 来说，this 已经可用了，所以不支持传递回调，因为没有必要了。</span><br><span class="line"></span><br><span class="line">beforeRouteUpdate (<span class="selector-tag">to</span>, <span class="selector-tag">from</span>, next) &#123;</span><br><span class="line">  // just use `this`</span><br><span class="line">  this<span class="selector-class">.name</span> = <span class="selector-tag">to</span><span class="selector-class">.params</span><span class="selector-class">.name</span></span><br><span class="line">  next()</span><br><span class="line">&#125;</span><br><span class="line">这个离开守卫通常用来禁止用户在还未保存修改前突然离开。该导航可以通过 next(false) 来取消。</span><br><span class="line"></span><br><span class="line">beforeRouteLeave (<span class="selector-tag">to</span>, <span class="selector-tag">from</span>, next) &#123;</span><br><span class="line">  const answer = window<span class="selector-class">.confirm</span>(&#x27;Do you really want <span class="selector-tag">to</span> leave? you have unsaved changes!&#x27;)</span><br><span class="line">  if (answer) &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    next(false)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#完整的导航解析流程</span><br><span class="line">导航被触发。</span><br><span class="line">在失活的组件里调用离开守卫。</span><br><span class="line">调用全局的 beforeEach 守卫。</span><br><span class="line">在重用的组件里调用 beforeRouteUpdate 守卫 (<span class="number">2.2</span>+)。</span><br><span class="line">在路由配置里调用 beforeEnter。</span><br><span class="line">解析异步路由组件。</span><br><span class="line">在被激活的组件里调用 beforeRouteEnter。</span><br><span class="line">调用全局的 beforeResolve 守卫 (<span class="number">2.5</span>+)。</span><br><span class="line">导航被确认。</span><br><span class="line">调用全局的 afterEach 钩子。</span><br><span class="line">触发 DOM 更新。</span><br><span class="line">用创建好的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数。</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vuex简单使用整理</title>
    <url>/taiaiac.gitee.io/2021/01/29/vue/vuex%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E6%95%B4%E7%90%86/</url>
    <content><![CDATA[<h2 id="vuex是什么，如何使用？"><a href="#vuex是什么，如何使用？" class="headerlink" title="vuex是什么，如何使用？"></a>vuex是什么，如何使用？</h2><h3 id="官网："><a href="#官网：" class="headerlink" title="官网："></a>官网：</h3><p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。Vuex 也集成到 Vue 的官方调试工具 <a href="https://github.com/vuejs/vue-devtools">devtools extension (opens new window)</a>，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。</p>
<h3 id="1、存储状态"><a href="#1、存储状态" class="headerlink" title="1、存储状态"></a>1、存储状态</h3><p>状态自管理应用包含以下几个部分：</p>
<ul>
<li><strong>state</strong>，驱动应用的数据源；</li>
<li><strong>view</strong>，以声明方式将 <strong>state</strong> 映射到视图；</li>
<li><strong>actions</strong>，响应在 <strong>view</strong> 上的用户输入导致的状态变化。</li>
</ul>
<p>保存用户一些操作记录，如弹框点击不再显示。</p>
<ul>
<li><p>多个视图依赖于同一状态。</p>
</li>
<li><p>来自不同视图的行为需要变更同一状态。</p>
</li>
</ul>
<h3 id="2、注入"><a href="#2、注入" class="headerlink" title="2、注入"></a>2、注入</h3><p>为了在 Vue 组件中访问 <code>this.$store</code> property，你需要为 Vue 实例提供创建好的 store。Vuex 提供了一个从根组件向所有子组件，以 <code>store</code> 选项的方式“注入”该 store 的机制：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实例中</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">store</span>: store,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 项目中</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>全局注入后，每个实例都可以通过<code>this.$store</code>访问到store实例。</p>
<h3 id="3、挂载"><a href="#3、挂载" class="headerlink" title="3、挂载"></a>3、挂载</h3><p>中间件的挂载方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.use(Vuex)</span><br></pre></td></tr></table></figure>

<h3 id="4、使用"><a href="#4、使用" class="headerlink" title="4、使用"></a>4、使用</h3><ul>
<li><p>Vuex 的状态存储是响应式的。</p>
<ul>
<li>当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新。</li>
</ul>
</li>
<li><p>不能直接改变 store 中的状态。</p>
<ul>
<li>改变 store 中的状态的唯一途径就是显式地<strong>提交 (commit) mutation</strong>。</li>
<li>这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用</li>
</ul>
</li>
<li><p>通过提交 mutation 的方式，而非直接改变 <code>store.state</code>中的数据，是因为我们想要更明确地追踪到状态的变化。</p>
</li>
<li><p>异步actions</p>
</li>
</ul>
<h3 id="this-store对象"><a href="#this-store对象" class="headerlink" title="this.store对象"></a>this.store对象</h3><ul>
<li>state（取值和计算属性）</li>
<li>commit（调用同步方法，传值）<ul>
<li>第一个参数为同级下的state</li>
<li>第二个参数最好为对象</li>
<li>直接传一个对象参数</li>
</ul>
</li>
<li>dispatch（调用异步方法，传值）<ul>
<li>第一个参数相当于一个同级strore实例对象（不等于）</li>
<li>可以以对象形式</li>
<li>处理异步返回Promise对象</li>
</ul>
</li>
</ul>
<h3 id="vuex对象中的映射方法"><a href="#vuex对象中的映射方法" class="headerlink" title="vuex对象中的映射方法"></a>vuex对象中的映射方法</h3><ul>
<li>mapState（数据）</li>
<li>mapGetter（计算属性）</li>
<li>mapMutations（同步方法）</li>
<li>mapActions（异步方法）</li>
<li>使用方式<ul>
<li><strong>import { mapActions } from ‘vuex’</strong></li>
</ul>
</li>
</ul>
<h2 id="1、state"><a href="#1、state" class="headerlink" title="1、state"></a>1、state</h2><ul>
<li>Vuex 使用<strong>单一状态树</strong></li>
<li>唯一数据源</li>
<li>存储在 Vuex 中的数据和 Vue 实例中的 <code>data</code> 遵循相同的规则</li>
</ul>
<h3 id="在-Vue-组件中获得-Vuex-状态"><a href="#在-Vue-组件中获得-Vuex-状态" class="headerlink" title="在 Vue 组件中获得 Vuex 状态"></a>在 Vue 组件中获得 Vuex 状态</h3><ul>
<li>由于 Vuex 的状态存储是响应式的，从 store 实例中读取状态最简单的方法就是在<a href="https://cn.vuejs.org/guide/computed.html">计算属性 (opens new window)</a>中返回某个状态：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">   count () &#123;</span><br><span class="line">     <span class="keyword">return</span> store.state.count</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>每当 <code>store.state.count</code> 变化的时候, 都会重新求取计算属性，并且触发更新相关联的 DOM。</li>
</ul>
<h3 id="mapState-辅助函数"><a href="#mapState-辅助函数" class="headerlink" title="mapState 辅助函数"></a><code>mapState</code> 辅助函数</h3><p>当一个组件需要获取多个状态的时候，将这些状态都声明为计算属性会有些重复和冗余。为了解决这个问题，我们可以使用 <code>mapState</code> 辅助函数帮助我们生成计算属性，让你少按几次键：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在单独构建的版本中辅助函数为 Vuex.mapState</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">computed</span>: mapState(&#123;</span><br><span class="line">    <span class="comment">// 箭头函数可使代码更简练</span></span><br><span class="line">    <span class="attr">count</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传字符串参数 &#x27;count&#x27; 等同于 `state =&gt; state.count`</span></span><br><span class="line">    <span class="attr">countAlias</span>: <span class="string">&#x27;count&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为了能够使用 `this` 获取局部状态，必须使用常规函数</span></span><br><span class="line">    countPlusLocalState (state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + <span class="built_in">this</span>.localCount</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当映射的计算属性的名称与 state 的子节点名称相同时，我们也可以给 <code>mapState</code> 传一个字符串数组。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在单独构建的版本中辅助函数为 Vuex.mapState</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: mapState([</span><br><span class="line">  <span class="comment">// 映射 this.count 为 store.state.count</span></span><br><span class="line">  <span class="string">&#x27;count&#x27;</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h2 id="2、Getter"><a href="#2、Getter" class="headerlink" title="2、Getter"></a>2、Getter</h2><ul>
<li>可以认为是 store 的计算属性</li>
<li>getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。</li>
<li>Getter 接受 state 作为其第一个参数</li>
</ul>
<h3 id="通过属性访问"><a href="#通过属性访问" class="headerlink" title="通过属性访问"></a>通过属性访问</h3><p>Getter 会暴露为 <code>store.getters</code> 对象，你可以以属性的形式访问这些值：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.getters.doneTodos <span class="comment">// -&gt; [&#123; id: 1, text: &#x27;...&#x27;, done: true &#125;]</span></span><br></pre></td></tr></table></figure>

<p>Getter 也可以接受其他 getter 作为第二个参数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">doneTodosCount</span>: <span class="function">(<span class="params">state, getters</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getters.doneTodos.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">store.getters.doneTodosCount <span class="comment">// -&gt; 1</span></span><br></pre></td></tr></table></figure>

<p>我们可以很容易地在任何组件中使用它：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  doneTodosCount () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.$store.getters.doneTodosCount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，getter 在通过属性访问时是作为 Vue 的响应式系统的一部分缓存其中的。</p>
<h3 id="通过方法访问"><a href="#通过方法访问" class="headerlink" title="通过方法访问"></a>通过方法访问</h3><p>你也可以通过让 getter 返回一个函数，来实现给 getter 传参。在你对 store 里的数组进行查询时非常有用。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">getTodoById</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.todos.find(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id === id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">store.getters.getTodoById(<span class="number">2</span>) <span class="comment">// -&gt; &#123; id: 2, text: &#x27;...&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<p>注意，getter 在通过方法访问时，每次都会去进行调用，而不会缓存结果。</p>
<h3 id="mapGetters-辅助函数"><a href="#mapGetters-辅助函数" class="headerlink" title="mapGetters 辅助函数"></a><code>mapGetters</code> 辅助函数</h3><p><code>mapGetters</code> 辅助函数仅仅是将 store 中的 getter 映射到局部计算属性：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="comment">// 使用对象展开运算符将 getter 混入 computed 对象中</span></span><br><span class="line">    ...mapGetters([</span><br><span class="line">      <span class="string">&#x27;doneTodosCount&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;anotherGetter&#x27;</span>,</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你想将一个 getter 属性另取一个名字，使用对象形式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">...mapGetters(&#123;</span><br><span class="line">  <span class="comment">// 把 `this.doneCount` 映射为 `this.$store.getters.doneTodosCount`</span></span><br><span class="line">  <span class="attr">doneCount</span>: <span class="string">&#x27;doneTodosCount&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3、Mutations"><a href="#3、Mutations" class="headerlink" title="3、Mutations"></a>3、Mutations</h2><ul>
<li>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。</li>
<li>Vuex 中的 mutation 非常类似于事件</li>
<li>每个 mutation 都有一个字符串的 <strong>事件类型 (type)</strong> 和 一个 **回调函数 (handler)**。</li>
</ul>
<p>回调函数就是我们实际进行状态更改的地方，并且它会接受 <strong>state 作为第一个参数</strong>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>不能直接调用一个 mutation handler。这个选项更像是事件注册：“当触发一个类型为 <code>increment</code> 的 mutation 时，调用此函数。”要唤醒一个 mutation handler，</p>
<h3 id="需要以相应的-type-调用-store-commit-方法："><a href="#需要以相应的-type-调用-store-commit-方法：" class="headerlink" title="需要以相应的 type 调用 store.commit 方法："></a>需要以相应的 type 调用 <strong>store.commit</strong> 方法：</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="提交载荷（Payload）"><a href="#提交载荷（Payload）" class="headerlink" title="提交载荷（Payload）"></a>提交载荷（Payload）</h3><p>你可以向 <code>store.commit</code> 传入额外的参数，即 mutation 的 <strong>载荷（payload）</strong>：</p>
<ul>
<li>第一个参数为<code>state</code></li>
<li>第二个参数类型尽量为对象</li>
<li>提交 mutation 的另一种方式是直接使用包含 <code>type</code> 属性的对象：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.commit(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;increment&#x27;</span>,</span><br><span class="line">  <span class="attr">amount</span>: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>当使用对象风格的提交方式，整个对象都作为载荷传给 mutation 函数，因此 handler 保持不变：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  increment (state, payload) &#123;</span><br><span class="line">    state.count += payload.amount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mutation-需遵守-Vue-的响应规则"><a href="#Mutation-需遵守-Vue-的响应规则" class="headerlink" title="Mutation 需遵守 Vue 的响应规则"></a>Mutation 需遵守 Vue 的响应规则</h3><p>既然 Vuex 的 store 中的状态是响应式的，那么当我们变更状态时，监视状态的 Vue 组件也会自动更新。这也意味着 Vuex 中的 mutation 也需要与使用 Vue 一样遵守一些注意事项：</p>
<ol>
<li>最好提前在你的 store 中初始化好所有所需属性。</li>
<li>当需要在对象上添加新属性时，你应该</li>
</ol>
<ul>
<li><p>使用 <code>Vue.set(obj, &#39;newProp&#39;, 123)</code>, 或者</p>
</li>
<li><p>以新对象替换老对象。例如，利用<a href="https://github.com/tc39/proposal-object-rest-spread">对象展开运算符 (opens new window)</a>我们可以这样写：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">state.obj = &#123; ...state.obj, <span class="attr">newProp</span>: <span class="number">123</span> &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="使用常量替代-Mutation-事件类型"><a href="#使用常量替代-Mutation-事件类型" class="headerlink" title="使用常量替代 Mutation 事件类型"></a>使用常量替代 Mutation 事件类型</h3><p>使用常量替代 mutation 事件类型在各种 Flux 实现中是很常见的模式。这样可以使 linter 之类的工具发挥作用，同时把这些常量放在单独的文件中可以让你的代码合作者对整个 app 包含的 mutation 一目了然：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// mutation-types.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SOME_MUTATION = <span class="string">&#x27;SOME_MUTATION&#x27;</span></span><br><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; SOME_MUTATION &#125; <span class="keyword">from</span> <span class="string">&#x27;./mutation-types&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">// 我们可以使用 ES2015 风格的计算属性命名功能来使用一个常量作为函数名</span></span><br><span class="line">    [SOME_MUTATION] (state) &#123;</span><br><span class="line">      <span class="comment">// mutate state</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>用不用常量取决于你——在需要多人协作的大型项目中，这会很有帮助。但如果你不喜欢，你完全可以不这样做。</p>
<h3 id="Mutation-必须是同步函数"><a href="#Mutation-必须是同步函数" class="headerlink" title="Mutation 必须是同步函数"></a>Mutation 必须是同步函数</h3><p>一条重要的原则就是要记住 <strong>mutation 必须是同步函数</strong>。</p>
<h3 id="在组件中提交-Mutation"><a href="#在组件中提交-Mutation" class="headerlink" title="在组件中提交 Mutation"></a>在组件中提交 Mutation</h3><p>你可以在组件中使用 <code>this.$store.commit(&#39;xxx&#39;)</code> 提交 mutation，或者使用 <code>mapMutations</code> 辅助函数将组件中的 methods 映射为 <code>store.commit</code> 调用（需要在根节点注入 <code>store</code>）。</p>
<ul>
<li><strong>mapMutations([‘event’])</strong><ul>
<li>组件中调用<code>this.event()</code></li>
</ul>
</li>
<li><strong>mapMutations[{key:’event’}]</strong><ul>
<li>组件中调用<code>this.key()</code></li>
</ul>
</li>
<li>多个Mutations使用对象展开运算符<code>...</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    ...mapMutations([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// 将 `this.increment()` 映射为 `this.$store.commit(&#x27;increment&#x27;)`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapMutations` 也支持载荷：</span></span><br><span class="line">      <span class="string">&#x27;incrementBy&#x27;</span> <span class="comment">// 将 `this.incrementBy(amount)` 映射为 `this.$store.commit(&#x27;incrementBy&#x27;, amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      <span class="attr">add</span>: <span class="string">&#x27;increment&#x27;</span> <span class="comment">// 将 `this.add()` 映射为 `this.$store.commit(&#x27;increment&#x27;)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下一步：Action"><a href="#下一步：Action" class="headerlink" title="下一步：Action"></a>下一步：Action</h3><p>在 mutation 中混合异步调用会导致你的程序很难调试。例如，当你调用了两个包含异步回调的 mutation 来改变状态，你怎么知道什么时候回调和哪个先回调呢？这就是为什么我们要区分这两个概念。在 Vuex 中，<strong>mutation 都是同步事务</strong>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line"><span class="comment">// 任何由 &quot;increment&quot; 导致的状态变更都应该在此刻完成。</span></span><br></pre></td></tr></table></figure>

<h2 id="4、Actions"><a href="#4、Actions" class="headerlink" title="4、Actions"></a>4、Actions</h2><p>Action 类似于 mutation，不同在于：</p>
<ul>
<li>Action 提交的是 mutation，而不是直接变更状态。</li>
<li>Action 可以包含任意异步操作。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    increment (context) &#123;</span><br><span class="line">      context.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象</p>
<ul>
<li>第一个参数当作store实例使用</li>
<li><code>context.commit</code>调用mutation中的方法</li>
<li>或者通过 <code>context.state</code> 和 <code>context.getters</code> 来获取 state 和 getters。</li>
<li> context 对象不是 store 实例</li>
</ul>
<p>参数解构简化代码（特别是我们需要调用 <code>commit</code> 很多次的时候）：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  increment (&#123; commit &#125;) &#123;</span><br><span class="line">    commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="分发-Action"><a href="#分发-Action" class="headerlink" title="分发 Action"></a>分发 Action</h3><h4 id="Action-通过-store-dispatch-方法触发："><a href="#Action-通过-store-dispatch-方法触发：" class="headerlink" title="Action 通过 store.dispatch 方法触发："></a>Action 通过 <code>store.dispatch</code> 方法触发：</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.dispatch(<span class="string">&#x27;increment&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li> <strong>mutation 必须同步执行</strong></li>
<li><strong>Action 不受约束！可以在 action 内部执行异步操作</strong>：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  incrementAsync (&#123; commit &#125;) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="分发"><a href="#分发" class="headerlink" title="分发"></a>分发</h4><ul>
<li>载荷方式（第二个参数传值）</li>
<li>对象方式（对象传参）</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 以载荷形式分发</span></span><br><span class="line">store.dispatch(<span class="string">&#x27;incrementAsync&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">amount</span>: <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以对象形式分发</span></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;incrementAsync&#x27;</span>,</span><br><span class="line">  <span class="attr">amount</span>: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>来看一个更加实际的购物车示例，涉及到<strong>调用异步 API</strong> 和<strong>分发多重 mutation</strong>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  checkout (&#123; commit, state &#125;, products) &#123;</span><br><span class="line">    <span class="comment">// 把当前购物车的物品备份起来</span></span><br><span class="line">    <span class="keyword">const</span> savedCartItems = [...state.cart.added]</span><br><span class="line">    <span class="comment">// 发出结账请求，然后乐观地清空购物车</span></span><br><span class="line">    commit(types.CHECKOUT_REQUEST)</span><br><span class="line">    <span class="comment">// 购物 API 接受一个成功回调和一个失败回调</span></span><br><span class="line">    shop.buyProducts(</span><br><span class="line">      products,</span><br><span class="line">      <span class="comment">// 成功操作</span></span><br><span class="line">      <span class="function">() =&gt;</span> commit(types.CHECKOUT_SUCCESS),</span><br><span class="line">      <span class="comment">// 失败操作</span></span><br><span class="line">      <span class="function">() =&gt;</span> commit(types.CHECKOUT_FAILURE, savedCartItems)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意我们正在进行一系列的异步操作，并且通过提交 mutation 来记录 action 产生的副作用（即状态变更）。</p>
<h3 id="在组件中分发-Action"><a href="#在组件中分发-Action" class="headerlink" title="在组件中分发 Action"></a>在组件中分发 Action</h3><p>你在组件中使用 <code>this.$store.dispatch(&#39;xxx&#39;)</code> 分发 action，或者使用 <code>mapActions</code> 辅助函数将组件的 methods 映射为 <code>store.dispatch</code> 调用（需要先在根节点注入 <code>store</code>）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// 将 `this.increment()` 映射为 `this.$store.dispatch(&#x27;increment&#x27;)`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapActions` 也支持载荷：</span></span><br><span class="line">      <span class="string">&#x27;incrementBy&#x27;</span> <span class="comment">// 将 `this.incrementBy(amount)` 映射为 `this.$store.dispatch(&#x27;incrementBy&#x27;, amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      <span class="attr">add</span>: <span class="string">&#x27;increment&#x27;</span> <span class="comment">// 将 `this.add()` 映射为 `this.$store.dispatch(&#x27;increment&#x27;)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="组合-Action"><a href="#组合-Action" class="headerlink" title="组合 Action"></a>组合 Action</h3><p>Action 通常是异步的，那么如何知道 action 什么时候结束呢？更重要的是，我们如何才能组合多个 action，以处理更加复杂的异步流程？</p>
<p>首先，你需要明白 <code>store.dispatch</code> 可以处理被触发的 action 的处理函数返回的 Promise，并且 <code>store.dispatch</code> 仍旧返回 <strong>Promise</strong>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">&#x27;someMutation&#x27;</span>)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在你可以：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.dispatch(<span class="string">&#x27;actionA&#x27;</span>).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在另外一个 action 中也可以：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  actionB (&#123; dispatch, commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> dispatch(<span class="string">&#x27;actionA&#x27;</span>).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">&#x27;someOtherMutation&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，如果我们利用 <a href="https://tc39.github.io/ecmascript-asyncawait/">async / await (opens new window)</a>，我们可以如下组合 action：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 假设 getData() 和 getOtherData() 返回的是 Promise</span></span><br><span class="line"></span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="keyword">async</span> actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    commit(<span class="string">&#x27;gotData&#x27;</span>, <span class="keyword">await</span> getData())</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> actionB (&#123; dispatch, commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">await</span> dispatch(<span class="string">&#x27;actionA&#x27;</span>) <span class="comment">// 等待 actionA 完成</span></span><br><span class="line">    commit(<span class="string">&#x27;gotOtherData&#x27;</span>, <span class="keyword">await</span> getOtherData())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>一个 <code>store.dispatch</code> 在不同模块中可以触发多个 action 函数。在这种情况下，只有当所有触发函数完成后，返回的 Promise 才会执行。</p>
</blockquote>
<h2 id="5、modules"><a href="#5、modules" class="headerlink" title="5、modules"></a>5、modules</h2><p>每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块——从上至下进行同样方式的分割：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; ... &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; ... &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: moduleA,</span><br><span class="line">    <span class="attr">b</span>: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA 的状态</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB 的状态</span></span><br></pre></td></tr></table></figure>

<h3 id="模块的局部状态"><a href="#模块的局部状态" class="headerlink" title="模块的局部状态"></a>模块的局部状态</h3><p>对于模块内部的 mutation 和 getter，接收的第一个参数是<strong>模块的局部状态对象</strong>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      <span class="comment">// 这里的 `state` 对象是模块的局部状态</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    doubleCount (state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count * <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样，对于模块内部的 action，局部状态通过 <code>context.state</code> 暴露出来，根节点状态则为 <code>context.rootState</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    incrementIfOddOnRootSum (&#123; state, commit, rootState &#125;) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((state.count + rootState.count) % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于模块内部的 getter，根节点状态会作为第三个参数暴露出来：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    sumWithRootCount (state, getters, rootState) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + rootState.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><p>默认情况下，模块内部的 action、mutation 和 getter 是注册在<strong>全局命名空间</strong>的——这样使得多个模块能够对同一 mutation 或 action 作出响应。</p>
<p>如果希望你的模块具有更高的封装度和复用性，你可以通过添加 <code>namespaced: true</code> 的方式使其成为带命名空间的模块。当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名。例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">account</span>: &#123;</span><br><span class="line">      <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 模块内容（module assets）</span></span><br><span class="line">      <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; ... &#125;), <span class="comment">// 模块内的状态已经是嵌套的了，使用 `namespaced` 属性不会对其产生影响</span></span><br><span class="line">      <span class="attr">getters</span>: &#123;</span><br><span class="line">        isAdmin () &#123; ... &#125; <span class="comment">// -&gt; getters[&#x27;account/isAdmin&#x27;]</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">actions</span>: &#123;</span><br><span class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; dispatch(&#x27;account/login&#x27;)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">mutations</span>: &#123;</span><br><span class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; commit(&#x27;account/login&#x27;)</span></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 嵌套模块</span></span><br><span class="line">      <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="comment">// 继承父模块的命名空间</span></span><br><span class="line">        <span class="attr">myPage</span>: &#123;</span><br><span class="line">          <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; ... &#125;),</span><br><span class="line">          <span class="attr">getters</span>: &#123;</span><br><span class="line">            profile () &#123; ... &#125; <span class="comment">// -&gt; getters[&#x27;account/profile&#x27;]</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 进一步嵌套命名空间</span></span><br><span class="line">        <span class="attr">posts</span>: &#123;</span><br><span class="line">          <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; ... &#125;),</span><br><span class="line">          <span class="attr">getters</span>: &#123;</span><br><span class="line">            popular () &#123; ... &#125; <span class="comment">// -&gt; getters[&#x27;account/posts/popular&#x27;]</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>启用了命名空间的 getter 和 action 会收到局部化的 <code>getter</code>，<code>dispatch</code> 和 <code>commit</code>。换言之，你在使用模块内容（module assets）时不需要在同一模块内额外添加空间名前缀。更改 <code>namespaced</code> 属性后不需要修改模块内的代码。</p>
<blockquote>
<p>更多命名空间看官方文档。</p>
</blockquote>
]]></content>
      <categories>
        <category>vuex</category>
      </categories>
      <tags>
        <tag>vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>接口文档</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h1 id="小程序接口文档"><a href="#小程序接口文档" class="headerlink" title="小程序接口文档"></a>小程序接口文档</h1><h2 id="1-首页"><a href="#1-首页" class="headerlink" title="1.首页"></a>1.首页</h2><h3 id="1-1-轮播图"><a href="#1-1-轮播图" class="headerlink" title="1.1.轮播图"></a>1.1.轮播图</h3><ul>
<li><p>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/home/swiperdata">https://api-hmugo-web.itheima.net/api/public/v1/home/swiperdata</a></p>
</li>
<li><p>请求方法：GET</p>
</li>
<li><p>请求参数：无</p>
</li>
<li><p>响应参数</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>message</td>
<td>Array</td>
<td>响应的商品数组</td>
<td></td>
</tr>
<tr>
<td>meta</td>
<td>Object</td>
<td>响应数据的状态</td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>响应数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/banner1.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">            <span class="string">&quot;goods_id&quot;</span>: <span class="number">129</span>,</span><br><span class="line">            <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_detail/main?goods_id=129&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/banner2.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">            <span class="string">&quot;goods_id&quot;</span>: <span class="number">395</span>,</span><br><span class="line">            <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_detail/main?goods_id=395&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/banner3.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">            <span class="string">&quot;goods_id&quot;</span>: <span class="number">38</span>,</span><br><span class="line">            <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_detail/main?goods_id=38&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-2-导航"><a href="#1-2-导航" class="headerlink" title="1.2.导航"></a>1.2.导航</h3><ul>
<li><p>请求路径: <a href="https://api-hmugo-web.itheima.net/api/public/v1/home/catitems">https://api-hmugo-web.itheima.net/api/public/v1/home/catitems</a></p>
</li>
<li><p>请求方法：GET</p>
</li>
<li><p>请求参数：无</p>
</li>
<li><p>响应参数</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>String</td>
<td>标题名称</td>
<td></td>
</tr>
<tr>
<td>image_src</td>
<td>String</td>
<td>图片路径</td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>响应数据</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;分类&quot;</span>,</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/icon_index_nav_4@2x.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;switchTab&quot;</span>,</span><br><span class="line">            <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/category/index&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;秒杀拍&quot;</span>,</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/icon_index_nav_3@2x.png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;超市购&quot;</span>,</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/icon_index_nav_2@2x.png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;母婴品&quot;</span>,</span><br><span class="line">            <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/icon_index_nav_1@2x.png&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-3-楼层"><a href="#1-3-楼层" class="headerlink" title="1.3.楼层"></a>1.3.楼层</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/home/floordata">https://api-hmugo-web.itheima.net/api/public/v1/home/floordata</a></li>
<li>请求方法：GET</li>
<li>请求参数：无</li>
<li>响应参数：</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>floor_title</td>
<td>String</td>
<td>一级分类标题</td>
<td></td>
</tr>
<tr>
<td>product_list</td>
<td>Array</td>
<td>存放一级分类对象数组</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>分类对象名称</td>
<td></td>
</tr>
<tr>
<td>image_src</td>
<td>String</td>
<td>分类对象图片路径</td>
<td></td>
</tr>
<tr>
<td>image_width</td>
<td>String</td>
<td>分类图片宽度</td>
<td></td>
</tr>
<tr>
<td>open_type</td>
<td>String</td>
<td>打开方式</td>
<td></td>
</tr>
<tr>
<td>navigator_url</td>
<td>String</td>
<td>跳转链接</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;floor_title&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;时尚女装&quot;</span>,</span><br><span class="line">                <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor01_title.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;product_list&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;优质服饰&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor01_1@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;232&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=服饰&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;春季热门&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor01_2@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;233&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=热&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;爆款清仓&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor01_3@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;233&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=爆款&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;倒春寒&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor01_4@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;233&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=春季&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;怦然心动&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor01_5@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;233&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=心动&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;floor_title&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;户外活动&quot;</span>,</span><br><span class="line">                <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor02_title.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;product_list&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;勇往直前&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor02_1@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;232&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=户外&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;户外登山包&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor02_2@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;273&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=登山包&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;超强手套&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor02_3@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;193&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=手套&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;户外运动鞋&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor02_4@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;193&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=运动鞋&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;冲锋衣系列&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor02_5@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;273&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list/index?query=冲锋衣&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;floor_title&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;箱包配饰&quot;</span>,</span><br><span class="line">                <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor03_title.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;product_list&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;清新气质&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor03_1@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;232&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list?query=饰品&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;复古胸针&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor03_2@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;263&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list?query=胸针&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;韩版手链&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor03_3@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;203&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list?query=手链&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;水晶项链&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor03_4@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;193&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list?query=水晶项链&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;情侣表&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_src&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/pyg/pic_floor03_5@2x.png&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;image_width&quot;</span>: <span class="string">&quot;273&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;open_type&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;navigator_url&quot;</span>: <span class="string">&quot;/pages/goods_list?query=情侣表&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-分类"><a href="#2-分类" class="headerlink" title="2.分类"></a>2.分类</h2><h3 id="2-1-商品分类"><a href="#2-1-商品分类" class="headerlink" title="2.1.商品分类"></a>2.1.商品分类</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/categories">https://api-hmugo-web.itheima.net/api/public/v1/categories</a></li>
<li>请求方式：GET</li>
<li>请求参数：无</li>
<li>响应参数：</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>cat_id</td>
<td>Number</td>
<td>分类 id</td>
<td></td>
</tr>
<tr>
<td>cat_name</td>
<td>String</td>
<td>分类名称</td>
<td></td>
</tr>
<tr>
<td>children</td>
<td>Array</td>
<td>分类子节点</td>
<td></td>
</tr>
<tr>
<td>cat_icon</td>
<td>String</td>
<td>分类的图标地址</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;cat_id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;cat_name&quot;</span>: <span class="string">&quot;大家电&quot;</span>,</span><br><span class="line">      <span class="string">&quot;cat_pid&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;cat_level&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;cat_deleted&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;cat_icon&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;cat_id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="string">&quot;cat_name&quot;</span>: <span class="string">&quot;电视&quot;</span>,</span><br><span class="line">          <span class="string">&quot;cat_pid&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;cat_level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;cat_deleted&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">&quot;cat_icon&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">&quot;cat_id&quot;</span>: <span class="number">5</span>,</span><br><span class="line">              <span class="string">&quot;cat_name&quot;</span>: <span class="string">&quot;曲面电视&quot;</span>,</span><br><span class="line">              <span class="string">&quot;cat_pid&quot;</span>: <span class="number">3</span>,</span><br><span class="line">              <span class="string">&quot;cat_level&quot;</span>: <span class="number">2</span>,</span><br><span class="line">              <span class="string">&quot;cat_deleted&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="string">&quot;cat_icon&quot;</span>: <span class="string">&quot;https://api-hmugo-web.itheima.net/full/2fb113b32f7a2b161f5ee4096c319afedc3fd5a1.jpg&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-商品"><a href="#3-商品" class="headerlink" title="3.商品"></a>3.商品</h2><h3 id="3-1-商品列表搜索"><a href="#3-1-商品列表搜索" class="headerlink" title="3.1.商品列表搜索"></a>3.1.商品列表搜索</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/goods/search">https://api-hmugo-web.itheima.net/api/public/v1/goods/search</a></li>
<li>请求方式：GET</li>
<li>请求参数：</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必须</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>query</td>
<td>String</td>
<td>否</td>
<td>查询参数</td>
</tr>
<tr>
<td>cid</td>
<td>String</td>
<td>否</td>
<td>分类 id</td>
</tr>
<tr>
<td>pagenum</td>
<td>Number</td>
<td>否</td>
<td>页码</td>
</tr>
<tr>
<td>pagesize</td>
<td>Number</td>
<td>否</td>
<td>页面显示条数</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;message&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;total&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">&quot;pagenum&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;goods&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;goods_id&quot;</span>: <span class="number">57445</span>,</span><br><span class="line">                <span class="string">&quot;cat_id&quot;</span>: <span class="number">9</span>,</span><br><span class="line">                <span class="string">&quot;goods_name&quot;</span>: <span class="string">&quot;创维（Skyworth）65V9E 65英寸25核4K HDR高清智能电视&quot;</span>,</span><br><span class="line">                <span class="string">&quot;goods_price&quot;</span>: <span class="number">6499</span>,</span><br><span class="line">                <span class="string">&quot;goods_number&quot;</span>: <span class="number">100</span>,</span><br><span class="line">                <span class="string">&quot;goods_weight&quot;</span>: <span class="number">100</span>,</span><br><span class="line">                <span class="string">&quot;goods_big_logo&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;goods_small_logo&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;add_time&quot;</span>: <span class="number">1516663280</span>,</span><br><span class="line">                <span class="string">&quot;upd_time&quot;</span>: <span class="number">1516663280</span>,</span><br><span class="line">                <span class="string">&quot;hot_mumber&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">&quot;is_promote&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="string">&quot;cat_one_id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">&quot;cat_two_id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">                <span class="string">&quot;cat_three_id&quot;</span>: <span class="number">9</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//图片不存在使用此图：https://ww1.sinaimg.cn/large/007rAy9hgy1g24by9t530j30i20i2glm.jpg</span></span><br></pre></td></tr></table></figure>

<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>total</td>
<td>Number</td>
<td>总条数</td>
<td></td>
</tr>
<tr>
<td>pagenum</td>
<td>Number</td>
<td>当前页码</td>
<td></td>
</tr>
<tr>
<td>goods_id</td>
<td>Number</td>
<td>商品 ID</td>
<td></td>
</tr>
<tr>
<td>cat_id</td>
<td>Number</td>
<td>分类 ID</td>
<td></td>
</tr>
<tr>
<td>goods_name</td>
<td>String</td>
<td>商品名称</td>
<td></td>
</tr>
<tr>
<td>goods_price</td>
<td>Number</td>
<td>商品价格</td>
<td></td>
</tr>
<tr>
<td>goods_number</td>
<td>Number</td>
<td>商品数量</td>
<td></td>
</tr>
<tr>
<td>goods_weight</td>
<td>Number</td>
<td>商品重量</td>
<td></td>
</tr>
<tr>
<td>goods_big_logo</td>
<td>String</td>
<td>商品大图标</td>
<td></td>
</tr>
<tr>
<td>goods_small_logo</td>
<td>String</td>
<td>商品小图标</td>
<td></td>
</tr>
<tr>
<td>add_time</td>
<td>Number</td>
<td>商品添加时间</td>
<td>毫秒数</td>
</tr>
<tr>
<td>upd_time</td>
<td>Number</td>
<td>商品修改时间</td>
<td>毫秒数</td>
</tr>
<tr>
<td>hot_mumber</td>
<td>Number</td>
<td>热门商品数</td>
<td></td>
</tr>
<tr>
<td>cat_one_id</td>
<td>Number</td>
<td>商品所属一级分类 id</td>
<td></td>
</tr>
<tr>
<td>cat_two_id</td>
<td>Number</td>
<td>商品所属二级分类 id</td>
<td></td>
</tr>
<tr>
<td>cat_three_id</td>
<td>Number</td>
<td>商品所属三级分类 id</td>
<td></td>
</tr>
</tbody></table>
<h3 id="3-2-商品详情"><a href="#3-2-商品详情" class="headerlink" title="3.2.商品详情"></a>3.2.商品详情</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/goods/detail">https://api-hmugo-web.itheima.net/api/public/v1/goods/detail</a></li>
<li>请求方式：GET</li>
<li>请求参数：</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必须</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>goods_id</td>
<td>Number</td>
<td>是</td>
<td>商品 id</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;goods_id&quot;</span>: <span class="number">8888</span>,</span><br><span class="line">    <span class="attr">&quot;cat_id&quot;</span>: <span class="number">1085</span>,</span><br><span class="line">    <span class="attr">&quot;goods_name&quot;</span>: <span class="string">&quot;spike 经典武士大马士革直刀(微型) 户外野营直刀 收藏礼品刀 饰品刀具&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;goods_price&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;goods_number&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;goods_weight&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;goods_introduce&quot;</span>: <span class="string">&quot;富文本内容&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;goods_state&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;is_del&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;add_time&quot;</span>: <span class="number">1516361489</span>,</span><br><span class="line">    <span class="attr">&quot;upd_time&quot;</span>: <span class="number">1516361489</span>,</span><br><span class="line">    <span class="attr">&quot;delete_time&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;hot_mumber&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;is_promote&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;cat_one_id&quot;</span>: <span class="number">995</span>,</span><br><span class="line">    <span class="attr">&quot;cat_two_id&quot;</span>: <span class="number">1075</span>,</span><br><span class="line">    <span class="attr">&quot;cat_three_id&quot;</span>: <span class="number">1085</span>,</span><br><span class="line">    <span class="attr">&quot;goods_cat&quot;</span>: <span class="string">&quot;995,1075,1085&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;pics&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;pics_id&quot;</span>: <span class="number">38711</span>,</span><br><span class="line">        <span class="attr">&quot;goods_id&quot;</span>: <span class="number">8888</span>,</span><br><span class="line">        <span class="attr">&quot;pics_big&quot;</span>: <span class="string">&quot;http://image1.suning.cn/uimg/b2c/newcatentries/0070134290-000000000149003877_1_800x800.jpg&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pics_mid&quot;</span>: <span class="string">&quot;http://image1.suning.cn/uimg/b2c/newcatentries/0070134290-000000000149003877_1_400x400.jpg&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pics_sma&quot;</span>: <span class="string">&quot;http://image1.suning.cn/uimg/b2c/newcatentries/0070134290-000000000149003877_1_200x200.jpg&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pics_big_url&quot;</span>: <span class="string">&quot;http://image1.suning.cn/uimg/b2c/newcatentries/0070134290-000000000149003877_1_800x800.jpg&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pics_mid_url&quot;</span>: <span class="string">&quot;http://image1.suning.cn/uimg/b2c/newcatentries/0070134290-000000000149003877_1_400x400.jpg&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pics_sma_url&quot;</span>: <span class="string">&quot;http://image1.suning.cn/uimg/b2c/newcatentries/0070134290-000000000149003877_1_200x200.jpg&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;attrs&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;goods_id&quot;</span>: <span class="number">8888</span>,</span><br><span class="line">        <span class="attr">&quot;attr_id&quot;</span>: <span class="number">9210</span>,</span><br><span class="line">        <span class="attr">&quot;attr_value&quot;</span>: <span class="string">&quot;户外直刀&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;add_price&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">&quot;attr_name&quot;</span>: <span class="string">&quot;主体参数-类别&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;attr_sel&quot;</span>: <span class="string">&quot;only&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;attr_write&quot;</span>: <span class="string">&quot;manual&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;attr_vals&quot;</span>: <span class="string">&quot;放大镜&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>goods_id</td>
<td>Number</td>
<td>商品 id</td>
<td></td>
</tr>
<tr>
<td>cat_id</td>
<td>Number</td>
<td>商品分类 id</td>
<td></td>
</tr>
<tr>
<td>goods_name</td>
<td>String</td>
<td>商品名称</td>
<td></td>
</tr>
<tr>
<td>goods_price</td>
<td>Number</td>
<td>商品价格</td>
<td></td>
</tr>
<tr>
<td>goods_number</td>
<td>Number</td>
<td>商品数量</td>
<td></td>
</tr>
<tr>
<td>goods_weight</td>
<td>Number</td>
<td>商品重量</td>
<td></td>
</tr>
<tr>
<td>add_time</td>
<td>Number</td>
<td>商品添加时间</td>
<td>毫秒数</td>
</tr>
<tr>
<td>upd_time</td>
<td>Number</td>
<td>商品修改时间</td>
<td>毫秒数</td>
</tr>
<tr>
<td>hot_mumber</td>
<td>Number</td>
<td>热门商品数量</td>
<td></td>
</tr>
<tr>
<td>cat_one_id</td>
<td>Number</td>
<td>商品一级分类 id</td>
<td></td>
</tr>
<tr>
<td>cat_two_id</td>
<td>Number</td>
<td>商品二级分类 id</td>
<td></td>
</tr>
<tr>
<td>cat_three_id</td>
<td>Number</td>
<td>商品三级分类 id</td>
<td></td>
</tr>
<tr>
<td>goods_introduce</td>
<td>String</td>
<td>商品的介绍</td>
<td></td>
</tr>
<tr>
<td>pics</td>
<td>Array</td>
<td>商品的图片列表</td>
<td></td>
</tr>
<tr>
<td>attrs</td>
<td>Array</td>
<td>商品属性列表</td>
<td></td>
</tr>
</tbody></table>
<h3 id="3-3-商品搜索"><a href="#3-3-商品搜索" class="headerlink" title="3.3.商品搜索"></a>3.3.商品搜索</h3><ul>
<li><p>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/goods/qsearch">https://api-hmugo-web.itheima.net/api/public/v1/goods/qsearch</a></p>
</li>
<li><p>请求方式：GET</p>
</li>
<li><p>请求参数：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必须</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>query</td>
<td>String</td>
<td>是</td>
<td>商品查询参数</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;goods_id&quot;</span>: <span class="number">57444</span>,</span><br><span class="line">      <span class="attr">&quot;goods_name&quot;</span>: <span class="string">&quot;创维（Skyworth）42X6 42英寸10核智能酷开网络平板液晶电视（黑色）&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>goods_id</td>
<td>Number</td>
<td>商品编号</td>
<td></td>
</tr>
<tr>
<td>goods_name</td>
<td>String</td>
<td>商品名称</td>
<td></td>
</tr>
</tbody></table>
<h2 id="4-用户"><a href="#4-用户" class="headerlink" title="4.用户"></a>4.用户</h2><h3 id="4-1-获取用户-token"><a href="#4-1-获取用户-token" class="headerlink" title="4.1.获取用户 token"></a>4.1.获取用户 token</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/users/wxlogin">https://api-hmugo-web.itheima.net/api/public/v1/users/wxlogin</a></li>
<li>请求方式：POST</li>
<li>请求参数：(以下字段主要用作后台服务器生成用户 token 所有，无特殊用意)</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>必选</th>
<th>参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>encryptedData</td>
<td>是</td>
<td>string</td>
<td>执行小程序 获取用户信息后 得到</td>
</tr>
<tr>
<td>rawData</td>
<td>是</td>
<td>string</td>
<td>执行小程序 获取用户信息后 得到</td>
</tr>
<tr>
<td>iv</td>
<td>是</td>
<td>string</td>
<td>执行小程序 获取用户信息后 得到</td>
</tr>
<tr>
<td>signature</td>
<td>是</td>
<td>string</td>
<td>执行小程序 获取用户信息后 得到</td>
</tr>
<tr>
<td>code</td>
<td>是</td>
<td>string</td>
<td>执行小程序登录后获取</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;user_id&quot;</span>: <span class="number">23</span>,</span><br><span class="line">    <span class="attr">&quot;user_email_code&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;is_active&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;user_sex&quot;</span>: <span class="string">&quot;男&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user_qq&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user_tel&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user_xueli&quot;</span>: <span class="string">&quot;本科&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user_hobby&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user_introduce&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;create_time&quot;</span>: <span class="number">1562221487</span>,</span><br><span class="line">    <span class="attr">&quot;update_time&quot;</span>: <span class="number">1562221487</span>,</span><br><span class="line">    <span class="attr">&quot;token&quot;</span>: <span class="string">&quot;Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjIzLCJpYXQiOjE1NjQ3MzAwNzksImV4cCI6MTAwMTU2NDczMDA3OH0.YPt-XeLnjV-_1ITaXGY2FhxmCe4NvXuRnRB8OMCfnPo&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;登录成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">token</td>
<td align="left">String</td>
<td>用户的唯一凭据，后期用在其他接口的验证</td>
</tr>
</tbody></table>
<h2 id="5-支付"><a href="#5-支付" class="headerlink" title="5.支付"></a>5.支付</h2><h3 id="5-1-获取支付参数"><a href="#5-1-获取支付参数" class="headerlink" title="5.1.获取支付参数"></a>5.1.获取支付参数</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/my/orders/req_unifiedorder">https://api-hmugo-web.itheima.net/api/public/v1/my/orders/req_unifiedorder</a></li>
<li>请求方式：POST</li>
<li>请求头参数：</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>必选</th>
<th>参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>Authorization</td>
<td>是</td>
<td>String</td>
<td>用户登录成功获取的 token 值</td>
</tr>
</tbody></table>
<ul>
<li>请求体参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>必选</th>
<th>参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>order_number</td>
<td>是</td>
<td>String</td>
<td>订单编号</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;pay&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;timeStamp&quot;</span>: <span class="string">&quot;1564730510&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;nonceStr&quot;</span>: <span class="string">&quot;SReWbt3nEmpJo3tr&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;package&quot;</span>: <span class="string">&quot;prepay_id=wx02152148991420a3b39a90811023326800&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;signType&quot;</span>: <span class="string">&quot;MD5&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;paySign&quot;</span>: <span class="string">&quot;3A6943C3B865FA2B2C825CDCB33C5304&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;order_number&quot;</span>: <span class="string">&quot;HMDD20190802000000000422&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;预付订单生成成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pay</td>
<td align="left">Object</td>
<td>该对象内的参数，为调用微信支付所必须</td>
</tr>
</tbody></table>
<h2 id="6-订单"><a href="#6-订单" class="headerlink" title="6.订单"></a>6.订单</h2><h3 id="6-1-创建订单"><a href="#6-1-创建订单" class="headerlink" title="6.1.创建订单"></a>6.1.创建订单</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/my/orders/create">https://api-hmugo-web.itheima.net/api/public/v1/my/orders/create</a></li>
<li>请求方式：POST</li>
<li>请求头参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>必选</th>
<th>参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>Authorization</td>
<td>是</td>
<td>String</td>
<td>用户登录成功获取的 token 值</td>
</tr>
</tbody></table>
<ul>
<li>请求体参数</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">必选</th>
<th align="left">参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">order_price</td>
<td align="left">是</td>
<td align="left">string</td>
<td>订单总价格</td>
</tr>
<tr>
<td align="left">consignee_addr</td>
<td align="left">是</td>
<td align="left">string</td>
<td>收货地址</td>
</tr>
<tr>
<td align="left">goods</td>
<td align="left">是</td>
<td align="left">Array</td>
<td>订单数组</td>
</tr>
</tbody></table>
<ul>
<li><strong>goods 字段说明</strong></li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>必选</th>
<th>参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>goods_id</td>
<td>是</td>
<td>number</td>
<td>商品 id</td>
</tr>
<tr>
<td>goods_number</td>
<td>是</td>
<td>number</td>
<td>购买的数量</td>
</tr>
<tr>
<td>goods_price</td>
<td>是</td>
<td>number</td>
<td>单价</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;error_code&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;uid&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;12154545&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;吴系挂&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;groupid&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;reg_time&quot;</span>: <span class="string">&quot;1436864169&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;last_login_time&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>order_id</td>
<td>string</td>
<td>订单唯一 ID</td>
</tr>
<tr>
<td>user_id</td>
<td>string</td>
<td>用户 ID</td>
</tr>
<tr>
<td>order_number</td>
<td>string</td>
<td>订单编号</td>
</tr>
<tr>
<td>order_price</td>
<td>number</td>
<td>订单价格</td>
</tr>
<tr>
<td>order_pay</td>
<td>number</td>
<td>订单支付方式</td>
</tr>
<tr>
<td>consignee_addr</td>
<td>string</td>
<td>订单地址</td>
</tr>
<tr>
<td>pay_status</td>
<td>number</td>
<td>订单支付状态</td>
</tr>
</tbody></table>
<h3 id="6-2-查看订单支付状态"><a href="#6-2-查看订单支付状态" class="headerlink" title="6.2.查看订单支付状态"></a>6.2.查看订单支付状态</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/my/orders/chkOrder">https://api-hmugo-web.itheima.net/api/public/v1/my/orders/chkOrder</a></li>
<li>请求方式：POST</li>
<li>请求头参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必选</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Authorization</td>
<td>是</td>
<td>string</td>
<td>用户登录成功获取的 token 值</td>
</tr>
</tbody></table>
<ul>
<li>请求体参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必选</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>order_number</td>
<td>是</td>
<td>string</td>
<td>订单编号</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;支付成功&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;验证成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-历史订单查询"><a href="#6-3-历史订单查询" class="headerlink" title="6.3.历史订单查询"></a>6.3.历史订单查询</h3><ul>
<li>请求路径：<a href="https://api-hmugo-web.itheima.net/api/public/v1/my/orders/all">https://api-hmugo-web.itheima.net/api/public/v1/my/orders/all</a></li>
<li>请求方式：GET</li>
<li>请求头参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必选</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Authorization</td>
<td>是</td>
<td>string</td>
<td>用户登录成功获取的 token 值</td>
</tr>
</tbody></table>
<ul>
<li>请求体参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必选</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>是</td>
<td>number</td>
<td>1:全部订单 2:待付款 3:待发货</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;count&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;orders&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;order_id&quot;</span>: <span class="number">428</span>,</span><br><span class="line">        <span class="attr">&quot;user_id&quot;</span>: <span class="number">23</span>,</span><br><span class="line">        <span class="attr">&quot;order_number&quot;</span>: <span class="string">&quot;HMDD20190802000000000428&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;order_price&quot;</span>: <span class="number">13999</span>,</span><br><span class="line">        <span class="attr">&quot;order_pay&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_send&quot;</span>: <span class="string">&quot;否&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;trade_no&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;order_fapiao_title&quot;</span>: <span class="string">&quot;个人&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;order_fapiao_company&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;order_fapiao_content&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;consignee_addr&quot;</span>: <span class="string">&quot;广东省广州市海珠区新港中路397号&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pay_status&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;create_time&quot;</span>: <span class="number">1564731518</span>,</span><br><span class="line">        <span class="attr">&quot;update_time&quot;</span>: <span class="number">1564731518</span>,</span><br><span class="line">        <span class="attr">&quot;order_detail&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;goods&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="number">717</span>,</span><br><span class="line">            <span class="attr">&quot;order_id&quot;</span>: <span class="number">428</span>,</span><br><span class="line">            <span class="attr">&quot;goods_id&quot;</span>: <span class="number">43986</span>,</span><br><span class="line">            <span class="attr">&quot;goods_price&quot;</span>: <span class="number">13999</span>,</span><br><span class="line">            <span class="attr">&quot;goods_number&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;goods_total_price&quot;</span>: <span class="number">13999</span>,</span><br><span class="line">            <span class="attr">&quot;goods_name&quot;</span>: <span class="string">&quot;海信(Hisense)LED55MU9600X3DUC 55英寸 4K超高清量子点电视 ULED画质 VIDAA系统&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;goods_small_logo&quot;</span>: <span class="string">&quot;http://image5.suning.cn/uimg/b2c/newcatentries/0000000000-000000000160455569_1_400x400.jpg&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;total_count&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;total_price&quot;</span>: <span class="number">13999</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;获取订单列表成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>Nodejs实用笔记</title>
    <url>/taiaiac.gitee.io/2021/01/11/Node.js/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="1-Node-介绍"><a href="#1-Node-介绍" class="headerlink" title="1.Node 介绍"></a>1.Node 介绍</h1><h2 id="1-1-为什么要学习-Node-js"><a href="#1-1-为什么要学习-Node-js" class="headerlink" title="1.1.为什么要学习 Node.js"></a>1.1.为什么要学习 Node.js</h2><p>企业需求</p>
<ul>
<li>具有服务端开发经验更改</li>
<li>front-end</li>
<li>back-end</li>
<li>全栈开发工程师</li>
<li>基本的网站开发能力<ul>
<li>服务端</li>
<li>前端</li>
<li>运维部署</li>
</ul>
</li>
<li>多人社区</li>
</ul>
<h2 id="1-2-Node-js-是什么"><a href="#1-2-Node-js-是什么" class="headerlink" title="1.2.Node.js 是什么"></a>1.2.Node.js 是什么</h2><ul>
<li>Node.js 是 JavaScript 运行时</li>
<li>通俗易懂的讲，Node.js 是 JavaScript 的运行平台</li>
<li>Node.js 既不是语言，也不是框架，它是一个平台</li>
<li>浏览器中的 JavaScript<ul>
<li>EcmaScript<ul>
<li>基本语法</li>
<li>if</li>
<li>var</li>
<li>function</li>
<li>Object</li>
<li>Array</li>
</ul>
</li>
<li>Bom</li>
<li>Dom</li>
</ul>
</li>
<li>Node.js 中的 JavaScript<ul>
<li>没有 Bom，Dom</li>
<li>EcmaScript</li>
<li>在 Node 中这个 JavaScript 执行环境为 JavaScript 提供了一些服务器级别的 API<ul>
<li>例如文件的读写</li>
<li>网络服务的构建</li>
<li>网络通信</li>
<li>http 服务器</li>
</ul>
</li>
</ul>
</li>
<li>构建与 Chrome 的 V8 引擎之上<ul>
<li>代码只是具有特定格式的字符串</li>
<li>引擎可以认识它，帮你解析和执行</li>
<li>Google Chrome 的 V8 引擎是目前公认的解析执行 JavaScript 代码最快的</li>
<li>Node.js 的作者把 Google Chrome 中的 V8 引擎移植出来，开发了一个独立的 JavaScript 运行时环境</li>
</ul>
</li>
<li>Node.js uses an envent-driven,non-blocking I/O mode that makes it lightweight and efficent.<ul>
<li>envent-driven 事件驱动</li>
<li>non-blocking I/O mode 非阻塞 I/O 模型（异步）</li>
<li>ightweight and efficent. 轻量和高效</li>
</ul>
</li>
<li>Node.js package ecosystem,npm,is the larget scosystem of open sourcr libraries in the world<ul>
<li>npm 是世界上最大的开源生态系统</li>
<li>绝大多数 JavaScript 相关的包都存放在 npm 上，这样做的目的是为了让开发人员更方便的去下载使用</li>
<li>npm install jquery</li>
</ul>
</li>
</ul>
<h2 id="1-3-Node-能做什么"><a href="#1-3-Node-能做什么" class="headerlink" title="1.3.Node 能做什么"></a>1.3.Node 能做什么</h2><ul>
<li>web 服务器后台</li>
<li>命令行工具<ul>
<li>npm(node)</li>
<li>git(c 语言)</li>
<li>hexo（node）</li>
<li>…</li>
</ul>
</li>
<li>对于前端工程师来讲，接触最多的是它的命令行工具<ul>
<li>自己写的很少，主要是用别人第三方的</li>
<li>webpack</li>
<li>gulp</li>
<li>npm</li>
</ul>
</li>
</ul>
<h1 id="2-起步"><a href="#2-起步" class="headerlink" title="2.起步"></a>2.起步</h1><h2 id="2-1-安装-Node-环境"><a href="#2-1-安装-Node-环境" class="headerlink" title="2.1.安装 Node 环境"></a>2.1.安装 Node 环境</h2><ul>
<li>查看 Node 环境的版本号</li>
<li>下载：<a href="https://nodejs.org/en/">https://nodejs.org/en/</a></li>
<li>安装：<ul>
<li>傻瓜式安装，一路<code>next</code></li>
<li>安装过再次安装会升级</li>
</ul>
</li>
<li>确认 Node 环境是否安装成功<ul>
<li>查看 node 的版本号：<code>node --version</code></li>
<li>或者<code>node -v</code></li>
</ul>
</li>
<li>配置环境变量</li>
</ul>
<h2 id="2-2-解析执行-Javascript"><a href="#2-2-解析执行-Javascript" class="headerlink" title="2.2.解析执行 Javascript"></a>2.2.解析执行 Javascript</h2><ol>
<li>创建编写 JavaScript 脚本文件</li>
<li>打开终端，定位脚本文件的所属目录</li>
<li>输入<code>node 文件名</code>执行对应的文件</li>
</ol>
<p>注意：文件名不要用<code>node.js</code>来命名，也就是说除了<code>node</code>这个名字随便起，最好不要使用中文。</p>
<h2 id="2-3-文件的读写"><a href="#2-3-文件的读写" class="headerlink" title="2.3.文件的读写"></a>2.3.文件的读写</h2><p>文件读取:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//浏览器中的JavaScript是没有文件操作能力的</span></span><br><span class="line"><span class="comment">//但是Node中的JavaScript具有文件操作能力</span></span><br><span class="line"><span class="comment">//fs是file-system的简写，就是文件系统的意思</span></span><br><span class="line"><span class="comment">//在Node中如果想要进行文件的操作就必须引用fs这个核心模块</span></span><br><span class="line"><span class="comment">//在fs这个核心模块中，就提供了人所有文件操作相关的API</span></span><br><span class="line"><span class="comment">//例如 fs.readFile就是用来读取文件的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  1.使用fs核心模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.读取文件</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件读取失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>文件写入：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  1.使用fs核心模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.将数据写入文件</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="string">&#x27;我是文件写入的信息&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件写入失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="2-4-http"><a href="#2-4-http" class="headerlink" title="2.4.http"></a>2.4.http</h2><p>服务器：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.加载http核心模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.使用http.createServer()创建一个web服务器</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.服务器要做的事儿</span></span><br><span class="line"><span class="comment">// 提供服务：对数据服务</span></span><br><span class="line"><span class="comment">// 发请求</span></span><br><span class="line"><span class="comment">//	接收请求</span></span><br><span class="line"><span class="comment">//	处理请求</span></span><br><span class="line"><span class="comment">//	反馈（发送响应）</span></span><br><span class="line"><span class="comment">//	当客户端请求过来，就会自动触发服务器的request请求事件，然后执行第二个参数：回调处理函数</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;收到客户的请求了&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.绑定端口号，启动服务</span></span><br><span class="line">server.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="3-Node-中的模块系统"><a href="#3-Node-中的模块系统" class="headerlink" title="3.Node 中的模块系统"></a>3.Node 中的模块系统</h1><p>使用 Node 编写应用程序主要就是在使用：</p>
<ul>
<li>EcmaScript 语言<ul>
<li>没有 Bom 和 Dom</li>
</ul>
</li>
<li>核心模块<ul>
<li>文件操作的 fs</li>
<li>http 服务操作的 http</li>
<li>url 路径操作模块</li>
<li>path 路径处理模块</li>
<li>os 操作系统信息</li>
</ul>
</li>
<li>第三方模块<ul>
<li>art-template</li>
<li>必须通过 npm 来下载才可以使用</li>
</ul>
</li>
<li>自己写的模块<ul>
<li>自己创建的文件</li>
</ul>
</li>
</ul>
<h2 id="3-1-什么是模块化"><a href="#3-1-什么是模块化" class="headerlink" title="3.1.什么是模块化"></a>3.1.什么是模块化</h2><ul>
<li>文件作用域(模块是独立的，在不同的文件使用必须要重新引用)【在 node 中没有全局作用域，它是文件模块作用域】</li>
<li>通信规则<ul>
<li>加载 require</li>
<li>导出 exports</li>
</ul>
</li>
</ul>
<h2 id="3-2-CommomJS-模块规范"><a href="#3-2-CommomJS-模块规范" class="headerlink" title="3.2.CommomJS 模块规范"></a>3.2.CommomJS 模块规范</h2><p>在 Node 中的 JavaScript 还有一个重要的概念，模块系统。</p>
<ul>
<li><p>模块作用域</p>
</li>
<li><p>使用 require 方法来加载模块</p>
</li>
<li><p>使用 exports 接口对象来导出模板中的成员</p>
<h3 id="加载require"><a href="#加载require" class="headerlink" title="加载require"></a>加载<code>require</code></h3><p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> 自定义变量名 = <span class="built_in">require</span>(<span class="string">&#x27;模块&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>作用：</p>
<ul>
<li>执行被加载模块中的代码</li>
<li>得到被加载模块中的<code>exports</code>导出接口对象</li>
</ul>
<h3 id="导出exports"><a href="#导出exports" class="headerlink" title="导出exports"></a>导出<code>exports</code></h3><ul>
<li><p>Node 中是模块作用域，默认文件中所有的成员只在当前模块有效</p>
</li>
<li><p>对于希望可以被其他模块访问到的成员，我们需要把这些公开的成员都挂载到<code>exports</code>接口对象中就可以了</p>
<p>导出多个成员（必须在对象中）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.a = <span class="number">123</span></span><br><span class="line"><span class="built_in">exports</span>.b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;bbb&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exports</span>.c = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exports</span>.d = <span class="string">&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure>

<p>导出单个成员（拿到的就是函数，字符串）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure>

<p>以下情况会覆盖：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment">//后者会覆盖前者</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以通过以下方法来导出多个成员：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    foo = <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">add</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x+y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="3-3-模块原理"><a href="#3-3-模块原理" class="headerlink" title="3.3.模块原理"></a>3.3.模块原理</h2><p>exports 和<code>module.exports</code>的一个引用：</p>
<p>module.exports 是 require 后 return module.exports 里的内容</p>
<p>module.exports 始终指向文件导出内存</p>
<p>给 exports 赋值会断开和 module.exports 之间的引用<br>同理，给 module.exports 重新赋值也会断开</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">exports</span> === <span class="built_in">module</span>.exports);	<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="built_in">module</span>.exports.foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line">当给<span class="built_in">exports</span>重新赋值后，<span class="built_in">exports</span>！= <span class="built_in">module</span>.exports.</span><br><span class="line">最终<span class="keyword">return</span>的是<span class="built_in">module</span>.exports,无论<span class="built_in">exports</span>中的成员是什么都没用。</span><br><span class="line">真正去使用的时候：</span><br><span class="line">导出多个成员：<span class="built_in">exports</span>.xxx = xxx</span><br><span class="line">导出多个成员也可以：<span class="built_in">module</span>.exports = &#123;&#125;</span><br><span class="line">导出单个成员：<span class="built_in">module</span>.exports = xxx</span><br></pre></td></tr></table></figure>

<h2 id="3-4-总结"><a href="#3-4-总结" class="headerlink" title="3.4.总结"></a>3.4.总结</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用服务</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 引用模板</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建服务</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="comment">// 公共路径</span></span><br><span class="line"><span class="keyword">var</span> wwwDir = <span class="string">&#x27;D:/app/www&#x27;</span>;</span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = req.url;</span><br><span class="line">    <span class="comment">// 读取文件</span></span><br><span class="line">    fs.readFile(<span class="string">&#x27;./template-apche.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.end(<span class="string">&#x27;404 Not Found&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        fs.readdir(wwwDir, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.end(<span class="string">&#x27;Can not find www Dir.&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 使用模板引擎解析替换data中的模板字符串</span></span><br><span class="line">            <span class="comment">// 去xmpTempleteList.html中编写模板语法</span></span><br><span class="line">            <span class="keyword">var</span> htmlStr = template.render(data.toString(), &#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;D:/app/www/ 的索引&#x27;</span>,</span><br><span class="line">                <span class="attr">files</span>:files</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// 发送响应数据</span></span><br><span class="line">            res.end(htmlStr);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running....&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="number">1.</span>jQuery中的each 和 原生JavaScript方法forEach的区别：</span><br><span class="line">	提供源头：</span><br><span class="line">    	原生js是es5提供的（不兼容IE8）,</span><br><span class="line">        jQuery的each是jQuery第三方库提供的（如果要使用需要用<span class="number">2</span>以下的版本也就是<span class="number">1.</span>版本）,它的each方法主要用来遍历jQuery实例对象（伪数组）,同时也可以做低版本forEach的替代品,jQuery的实例对象不能使用forEach方法，如果想要使用必须转为数组（[].slice.call(jQuery实例对象)）才能使用</span><br><span class="line"><span class="number">2.</span>模块中导出多个成员和导出单个成员</span><br><span class="line"><span class="number">3.301</span>和<span class="number">302</span>的区别：</span><br><span class="line">	<span class="number">301</span>永久重定向,浏览器会记住</span><br><span class="line">    <span class="number">302</span>临时重定向</span><br><span class="line"><span class="number">4.</span><span class="built_in">exports</span>和<span class="built_in">module</span>.exports的区别:</span><br><span class="line">	每个模块中都有一个<span class="built_in">module</span>对象</span><br><span class="line">    <span class="built_in">module</span>对象中有一个<span class="built_in">exports</span>对象</span><br><span class="line">    我们可以把需要导出的成员都挂载到<span class="built_in">module</span>.exports接口对象中</span><br><span class="line">	也就是<span class="string">`module.exports.xxx = xxx`</span>的方式</span><br><span class="line">    但是每次写太多了就很麻烦，所以Node为了简化代码，就在每一个模块中都提供了一个成员叫<span class="string">`exports`</span></span><br><span class="line">    <span class="string">`exports === module.exports`</span>结果为<span class="literal">true</span>,所以完全可以<span class="string">`exports.xxx = xxx`</span></span><br><span class="line">    当一个模块需要导出单个成员的时候必须使用<span class="string">`module.exports = xxx`</span>的方式，=,使用<span class="string">`exports = xxx`</span>不管用,因为每个模块最终<span class="keyword">return</span>的是<span class="built_in">module</span>.exports,而<span class="built_in">exports</span>只是<span class="built_in">module</span>.exports的一个引用,所以<span class="string">`exports`</span>即使重新赋值,也不会影响<span class="string">`module.exports`</span>。</span><br><span class="line">    有一种赋值方式比较特殊：<span class="string">`exports = module.exports`</span>这个用来新建立引用关系的。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="4-require-的加载规则"><a href="#4-require-的加载规则" class="headerlink" title="4.require 的加载规则"></a>4.require 的加载规则</h1><ul>
<li>核心模块<ul>
<li>模块名</li>
</ul>
</li>
<li>第三方模块<ul>
<li>模块名</li>
</ul>
</li>
<li>用户自己写的<ul>
<li>路径</li>
</ul>
</li>
</ul>
<h2 id="4-1-require-的加载规则"><a href="#4-1-require-的加载规则" class="headerlink" title="4.1.require 的加载规则"></a>4.1.require 的加载规则</h2><ul>
<li><p>优先从缓存加载</p>
</li>
<li><p>判断模块标识符</p>
<ul>
<li><p>核心模块</p>
</li>
<li><p>自己写的模块（路径形式的模块）</p>
</li>
<li><p>第三方模块（node_modules）</p>
<ul>
<li><p>第三方模块的标识就是第三方模块的名称（不可能有第三方模块和核心模块的名字一致）</p>
</li>
<li><p>npm</p>
<ul>
<li>开发人员可以把写好的框架库发布到 npm 上</li>
<li>使用者通过 npm 命令来下载</li>
</ul>
</li>
<li><p>使用方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 名称 = <span class="built_in">require</span>(<span class="string">&#x27;npm install【下载包】 的包名&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>node_modules/express/package.json main</li>
<li>如果 package.json 或者 main 不成立，则查找被选择项：index.js</li>
<li>如果以上条件都不满足，则继续进入上一级目录中的 node_modules 按照上面的规则依次查找，直到当前文件所属此盘根目录都找不到最后报错</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果非路径形式的标识</span></span><br><span class="line"><span class="comment">// 路径形式的标识：</span></span><br><span class="line"><span class="comment">// ./  当前目录 不可省略</span></span><br><span class="line"><span class="comment">// ../  上一级目录  不可省略</span></span><br><span class="line"><span class="comment">//  /xxx也就是D:/xxx</span></span><br><span class="line"><span class="comment">// 带有绝对路径几乎不用（D:/a/foo.js）</span></span><br><span class="line"><span class="comment">// 首位表示的是当前文件模块所属磁盘根目录</span></span><br><span class="line"><span class="comment">// require(&#x27;./a&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 核心模块</span></span><br><span class="line"><span class="comment">// 核心模块本质也是文件，核心模块文件已经被编译到了二进制文件中了，我们只需要按照名字来加载就可以了</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三方模块</span></span><br><span class="line"><span class="comment">// 凡是第三方模块都必须通过npm下载（npm i node_modules），使用的时候就可以通过require(&#x27;包名&#x27;)来加载才可以使用</span></span><br><span class="line"><span class="comment">// 第三方包的名字不可能和核心模块的名字是一样的</span></span><br><span class="line"><span class="comment">// 既不是核心模块，也不是路径形式的模块</span></span><br><span class="line"><span class="comment">//      先找到当前文所述目录的node_modules</span></span><br><span class="line"><span class="comment">//      然后找node_modules/art-template目录</span></span><br><span class="line"><span class="comment">//      node_modules/art-template/package.json</span></span><br><span class="line"><span class="comment">//      node_modules/art-template/package.json中的main属性</span></span><br><span class="line"><span class="comment">//      main属性记录了art-template的入口模块</span></span><br><span class="line"><span class="comment">//      然后加载使用这个第三方包</span></span><br><span class="line"><span class="comment">//      实际上最终加载的还是文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//      如果package.json不存在或者mian指定的入口模块不存在</span></span><br><span class="line"><span class="comment">//      则node会自动找该目录下的index.js</span></span><br><span class="line"><span class="comment">//      也就是说index.js是一个备选项，如果main没有指定，则加载index.js文件</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 如果条件都不满足则会进入上一级目录进行查找</span></span><br><span class="line"><span class="comment">// 注意：一个项目只有一个node_modules，放在项目根目录中，子目录可以直接调用根目录的文件</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="4-2-模块标识中的-和文件操作路径中的"><a href="#4-2-模块标识中的-和文件操作路径中的" class="headerlink" title="4.2.模块标识中的 / 和文件操作路径中的 /"></a>4.2.模块标识中的 <code>/</code> 和文件操作路径中的 <code>/</code></h2><p>文件操作路径：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 咱们所使用的所有文件操作的API都是异步的</span></span><br><span class="line"><span class="comment">// 就像ajax请求一样</span></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="comment">// 文件操作中 ./ 相当于当前模块所处磁盘根目录</span></span><br><span class="line"><span class="comment">// ./index.txt    相对于当前目录</span></span><br><span class="line"><span class="comment">// /index.txt    相对于当前目录</span></span><br><span class="line"><span class="comment">// /index.txt   绝对路径,当前文件模块所处根目录</span></span><br><span class="line"><span class="comment">// d:express/index.txt   绝对路径</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./index.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>模块操作路径：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在模块加载中，相对路径中的./不能省略</span></span><br><span class="line"><span class="comment">// 这里省略了.也是磁盘根目录</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./index&#x27;</span>)(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="5-npm"><a href="#5-npm" class="headerlink" title="5.npm"></a>5.npm</h1><ul>
<li>node package manage(node 包管理器)</li>
<li>通过 npm 命令安装 jQuery 包（npm install –save jquery），在安装时加上–save 会主动生成说明书文件信息（将安装文件的信息添加到 package.json 里面）</li>
</ul>
<h2 id="5-1-npm-网站"><a href="#5-1-npm-网站" class="headerlink" title="5.1.npm 网站"></a>5.1.npm 网站</h2><blockquote>
<p> npmjs.com 网站 是用来搜索 npm 包的</p>
</blockquote>
<h2 id="5-2-npm-命令行工具"><a href="#5-2-npm-命令行工具" class="headerlink" title="5.2.npm 命令行工具"></a>5.2.npm 命令行工具</h2><p>npm 是一个命令行工具，只要安装了 node 就已经安装了 npm。</p>
<p>npm 也有版本概念，可以通过<code>npm --version</code>来查看 npm 的版本</p>
<p>升级 npm(自己升级自己)：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install --global npm</span><br></pre></td></tr></table></figure>

<h2 id="5-3-常用命令"><a href="#5-3-常用命令" class="headerlink" title="5.3.常用命令"></a>5.3.常用命令</h2><ul>
<li>npm init(生成 package.json 说明书文件)<ul>
<li>npm init -y(可以跳过向导，快速生成)</li>
</ul>
</li>
<li>npm install<ul>
<li>一次性把 dependencies 选项中的依赖项全部安装</li>
<li>简写（npm i）</li>
</ul>
</li>
<li>npm install 包名<ul>
<li>只下载</li>
<li>简写（npm i 包名）</li>
</ul>
</li>
<li>npm install –save 包名<ul>
<li>下载并且保存依赖项（package.json 文件中的 dependencies 选项）</li>
<li>简写（npm i 包名）</li>
</ul>
</li>
<li>npm uninstall 包名<ul>
<li>只删除，如果有依赖项会依然保存</li>
<li>简写（npm un 包名）</li>
</ul>
</li>
<li>npm uninstall –save 包名<ul>
<li>删除的同时也会把依赖信息全部删除</li>
<li>简写（npm un 包名）</li>
</ul>
</li>
<li>npm help<ul>
<li>查看使用帮助</li>
</ul>
</li>
<li>npm 命令 –help<ul>
<li>查看具体命令的使用帮助（npm uninstall –help）</li>
</ul>
</li>
</ul>
<h2 id="5-4-解决-npm-被墙的问题"><a href="#5-4-解决-npm-被墙的问题" class="headerlink" title="5.4.解决 npm 被墙的问题"></a>5.4.解决 npm 被墙的问题</h2><p>npm 存储包文件的服务器在国外，有时候会被墙，速度很慢，所以需要解决这个问题。</p>
<blockquote>
<p><a href="https://developer.aliyun.com/mirror/NPM?from=tnpm%E6%B7%98%E5%AE%9D%E7%9A%84%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E6%8A%8Anpm%E5%9C%A8%E5%9B%BD%E5%86%85%E5%81%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E9%95%9C%E5%83%8F%EF%BC%88%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%87%E4%BB%BD%EF%BC%89%E3%80%82">https://developer.aliyun.com/mirror/NPM?from=tnpm淘宝的开发团队把npm在国内做了一个镜像（也就是一个备份）。</a></p>
</blockquote>
<p>安装淘宝的 cnpm：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https:<span class="comment">//registry.npm.taobao.org;</span></span><br><span class="line">#在任意目录执行都可以</span><br><span class="line">#--<span class="built_in">global</span>表示安装到全局，而非当前目录</span><br><span class="line">#--<span class="built_in">global</span>不能省略，否则不管用</span><br><span class="line">npm install --<span class="built_in">global</span> cnpm</span><br></pre></td></tr></table></figure>

<p>安装包的时候把以前的<code>npm</code>替换成<code>cnpm</code>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#走国外的npm服务器下载jQuery包，速度比较慢</span><br><span class="line">npm install jQuery;</span><br><span class="line"></span><br><span class="line">#使用cnpm就会通过淘宝的服务器来下载jQuery</span><br><span class="line">cnpm install jQuery;</span><br></pre></td></tr></table></figure>

<p>如果不想安装<code>cnpm</code>又想使用淘宝的服务器来下载：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install jquery --registry=https://npm.taobao.org;</span><br></pre></td></tr></table></figure>

<p>但是每次手动加参数就很麻烦，所以我们可以把这个选项加入到配置文件中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm config set registry https:<span class="comment">//npm.taobao.org;</span></span><br><span class="line"></span><br><span class="line">#查看npm配置信息</span><br><span class="line">npm config list;</span><br></pre></td></tr></table></figure>

<p>只要经过上面的配置命令，则以后所有的<code>npm install</code>都会通过淘宝的服务器来下载</p>
<h1 id="6-package-json"><a href="#6-package-json" class="headerlink" title="6.package.json"></a>6.package.json</h1><p>每一个项目都要有一个<code>package.json</code>文件（包描述文件，就像产品的说明书一样）</p>
<p>这个文件可以通过<code>npm init</code>自动初始化出来</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">D:\code\node中的模块系统&gt;npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See <span class="string">`npm help json`</span> <span class="keyword">for</span> definitive documentation on these fields</span><br><span class="line">and exactly what they <span class="keyword">do</span>.</span><br><span class="line"></span><br><span class="line">Use <span class="string">`npm install &lt;pkg&gt;`</span> afterwards to install a package and</span><br><span class="line">save it <span class="keyword">as</span> a dependency <span class="keyword">in</span> the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">package name: (node中的模块系统)</span><br><span class="line">Sorry, name can only contain URL-friendly characters.</span><br><span class="line">package name: (node中的模块系统) cls</span><br><span class="line"><span class="attr">version</span>: (<span class="number">1.0</span><span class="number">.0</span>)</span><br><span class="line"><span class="attr">description</span>: 这是一个测试项目</span><br><span class="line">entry point: (main.js)</span><br><span class="line">test command:</span><br><span class="line">git repository:</span><br><span class="line">keywords:</span><br><span class="line">author: xiaochen</span><br><span class="line"><span class="attr">license</span>: (ISC)</span><br><span class="line">About to write to D:\code\node中的模块系统\package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;cls&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;这是一个测试项目&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;xiaochen&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is <span class="built_in">this</span> OK? (yes) yes</span><br></pre></td></tr></table></figure>

<p>对于目前来讲，最有用的是<code>dependencies</code>选项，可以用来帮助我们保存第三方包的依赖信息。</p>
<p>如果<code>node_modules</code>删除了也不用担心，只需要在控制面板中<code>npm install</code>就会自动把<code>package.json</code>中的<code>dependencies</code>中所有的依赖项全部都下载回来。</p>
<ul>
<li>建议每个项目的根目录下都有一个<code>package.json</code>文件</li>
<li>建议执行<code>npm install 包名</code>的时候都加上<code>--save</code>选项，目的是用来保存依赖信息</li>
</ul>
<h2 id="6-1-package-json-和-package-lock-json"><a href="#6-1-package-json-和-package-lock-json" class="headerlink" title="6.1.package.json 和 package.lock.json"></a>6.1.package.json 和 package.lock.json</h2><p>npm 5 以前是不会有<code>package-lock.json</code>这个文件</p>
<p>npm5 以后才加入这个文件</p>
<p>当你安装包的时候，npm 都会生成或者更新<code>package-lock.json</code>这个文件</p>
<ul>
<li><p>npm5 以后的版本安装都不要加<code>--save</code>参数，它会自动保存依赖信息</p>
</li>
<li><p>当你安装包的时候，会自动创建或者更新<code>package-lock.json</code>文件</p>
</li>
<li><pre><code class="css">package-lock.json
里面会保存具体的包的版本号
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">这个文件会包含`node_modules`中所有包的信息（版本，下载地址。。。）</span><br><span class="line"></span><br><span class="line">- 这样的话重新`npm install`的时候速度就可以提升</span><br><span class="line"></span><br><span class="line">- 从文件来看，有一个`lock`称之为锁</span><br><span class="line"></span><br><span class="line">  - 这个`lock`使用来锁版本的</span><br><span class="line">  - 如果项目依赖了`1.1.1`版本</span><br><span class="line">  - 如果你重新 install 其实会下载最新版本，而不是`1.1.1`</span><br><span class="line"></span><br><span class="line">- `package-lock.json`的另外一个作用就是锁定版本号，防止自动升级</span><br><span class="line"></span><br><span class="line">## 6.2.path路径操作模块</span><br><span class="line"></span><br><span class="line">&gt; 参考文档：https://nodejs.org/docs/latest-v13.x/api/path.html</span><br><span class="line"></span><br><span class="line">- path.basename：获取路径的文件名，默认包含扩展名</span><br><span class="line">- path.dirname：获取路径中的目录部分</span><br><span class="line">- path.extname：获取一个路径中的扩展名部分</span><br><span class="line">- path.parse：把路径转换为对象</span><br><span class="line">  - root：根路径</span><br><span class="line">  - dir：目录</span><br><span class="line">  - base：包含后缀名的文件名</span><br><span class="line">  - ext：后缀名</span><br><span class="line">  - name：不包含后缀名的文件名</span><br><span class="line">- path.join：拼接路径</span><br><span class="line">- path.isAbsolute：判断一个路径是否为绝对路径</span><br><span class="line"></span><br><span class="line"># 7.Node 中的其他成员（dirname，filename）</span><br><span class="line"></span><br><span class="line">在每个模块中，除了`require`,`exports`等模块相关的 API 之外，还有两个特殊的成员：</span><br><span class="line"></span><br><span class="line">- `__dirname`，是一个成员，可以用来**动态**获取当前文件模块所属目录的绝对路径</span><br><span class="line">- `__filename`，可以用来**动态**获取当前文件的绝对路径（包含文件名）</span><br><span class="line">- `__dirname`和`filename`是不受执行 node 命令所属路径影响的</span><br><span class="line"></span><br><span class="line">在文件操作中，使用相对路径是不可靠的，因为 node 中文件操作的路径被设计为相对于执行 node 命令所处的路径。</span><br><span class="line"></span><br><span class="line">所以为了解决这个问题，只需要把相对路径变为绝对路径（绝对路径不受任何影响）就可以了。</span><br><span class="line"></span><br><span class="line">就可以使用`__dirname`或者`__filename`来帮助我们解决这个问题</span><br><span class="line"></span><br><span class="line">在拼接路径的过程中，为了避免手动拼接带来的一些低级错误，推荐使用`path.join()`来辅助拼接</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">var fs = require(&#x27;fs&#x27;)</span><br><span class="line">var path = require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">// console.log(__dirname + &#x27;a.txt&#x27;);</span><br><span class="line">// path.join方法会将文件操作中的相对路径都统一的转为动态的绝对路径</span><br><span class="line">fs.readFile(path.join(__dirname + &#x27;/a.txt&#x27;), &#x27;utf8&#x27;, function (err, data) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    throw err</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<blockquote>
<p>补充：模块中的路径标识和这里的路径没关系，不受影响（就是相对于文件模块）</p>
</blockquote>
<blockquote>
<p><strong>注意：</strong></p>
<p><strong>模块中的路径标识和文件操作中的相对路径标识不一致</strong></p>
<p><strong>模块中的路径标识就是相对于当前文件模块，不受 node 命令所处路径影响</strong></p>
</blockquote>
<h1 id="8-Express（快速的）"><a href="#8-Express（快速的）" class="headerlink" title="8.Express（快速的）"></a>8.Express（快速的）</h1><p>作者：Tj</p>
<p>原生的 http 在某些方面表现不足以应对我们的开发需求，所以就需要使用框架来加快我们的开发效率，框架的目的就是提高效率，让我们的代码高度统一。</p>
<p>在 node 中有很多 web 开发框架。主要学习 express</p>
<ul>
<li><p><code>http://expressjs.com/</code>,其中主要封装的是 http。</p>
</li>
<li><pre><code class="js">// 1 安装
// 2 引包
var express = require(&#39;express&#39;)
// 3 创建服务器应用程序
//      也就是原来的http.createServer();
var app = express()

// 公开指定目录
// 只要通过这样做了，就可以通过/public/xx的方式来访问public目录中的所有资源
// 在Express中开放资源就是一个API的事
app.use(&#39;/public/&#39;, express.static(&#39;/public/&#39;))

//模板引擎在Express中开放模板也是一个API的事

// 当服务器收到get请求 / 的时候，执行回调处理函数
app.get(&#39;/&#39;, function (req, res) &#123;
  res.send(&#39;hello express&#39;)
&#125;)

// 相当于server.listen
app.listen(3000, function () &#123;
  console.log(&#39;app is runing at port 3000&#39;)
&#125;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 8.1.起步</span><br><span class="line"></span><br><span class="line">#### 安装</span><br><span class="line"></span><br><span class="line">```css</span><br><span class="line">cnpm install express</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h4 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 创建app</span></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">//  2.</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1</span></span><br><span class="line">  <span class="comment">// res.write(&#x27;Hello&#x27;);</span></span><br><span class="line">  <span class="comment">// res.write(&#x27;World&#x27;);</span></span><br><span class="line">  <span class="comment">// res.end()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2</span></span><br><span class="line">  <span class="comment">// res.end(&#x27;hello world&#x27;);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3</span></span><br><span class="line">  res.send(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;express app is runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="基本路由"><a href="#基本路由" class="headerlink" title="基本路由"></a>基本路由</h4><p>路由：</p>
<ul>
<li>请求方法</li>
<li>请求路径</li>
<li>请求处理函数</li>
</ul>
<p>get:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//当你以get方法请求/的时候，执行对应的处理函数</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//当你以post方法请求/的时候，执行对应的处理函数</span></span><br><span class="line">app.post(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Express-静态服务-API"><a href="#Express-静态服务-API" class="headerlink" title="Express 静态服务 API"></a>Express 静态服务 API</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.use不仅仅是用来处理静态资源的，还可以做很多工作(body-parser的配置)</span></span><br><span class="line">app.use(express.static(<span class="string">&#x27;public&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">&#x27;files&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/stataic&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>))</span><br><span class="line"><span class="comment">// 引入express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建app</span></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开放静态资源</span></span><br><span class="line"><span class="comment">// 1.当以/public/开头的时候，去./public/目录中找对应资源</span></span><br><span class="line"><span class="comment">// 访问：http://127.0.0.1:3000/public/login.html</span></span><br><span class="line">app.use(<span class="string">&#x27;/public/&#x27;</span>, express.static(<span class="string">&#x27;./public/&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.当省略第一个参数的时候，只可以通过省略/public的方式来访问</span></span><br><span class="line"><span class="comment">// 访问：http://127.0.0.1:3000/login.html</span></span><br><span class="line"><span class="comment">// app.use(express.static(&#x27;./public/&#x27;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.访问：http://127.0.0.1:3000/a/login.html</span></span><br><span class="line"><span class="comment">// a相当于public的别名</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/a/&#x27;,express.static(&#x27;./public/&#x27;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.end(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;express app is runing...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="在-Express-中配置使用-art-templete-模板引擎"><a href="#在-Express-中配置使用-art-templete-模板引擎" class="headerlink" title="在 Express 中配置使用 art-templete 模板引擎"></a>在 Express 中配置使用 <code>art-templete</code> 模板引擎</h4><ul>
<li><p><a href="https://aui.github.io/art-template/">art-template 官方文档</a></p>
</li>
<li><p>在 node 中，有很多第三方模板引擎都可以使用，不是只有</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">art-template</span><br></pre></td></tr></table></figure>

<ul>
<li>还有 ejs，jade（pug），handlebars，nunjucks</li>
</ul>
</li>
</ul>
<p>安装：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install --save art-template</span><br><span class="line">npm install --save express-art-template</span><br><span class="line"></span><br><span class="line"><span class="comment">//两个一起安装</span></span><br><span class="line">npm i --save art-template express-art-template</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 配置使用 art-template 模板引擎</span></span><br><span class="line"><span class="comment">// 第一个参数，表示，当渲染以 .art 结尾的文件的时候，使用 art-template 模板引擎</span></span><br><span class="line"><span class="comment">// express-art-template 是专门用来在 Express 中把 art-template 整合到 Express 中</span></span><br><span class="line"><span class="comment">// 虽然外面这里不需要记载 art-template 但是也必须安装</span></span><br><span class="line"><span class="comment">// 原因就在于 express-art-template 依js赖了 art-template</span></span><br><span class="line"></span><br><span class="line">app.engine(<span class="string">&#x27;html&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;express-art-template&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Express 为 Response 相应对象提供了一个方法：render</span></span><br><span class="line"><span class="comment">// render 方法默认是不可以使用，但是如果配置了模板引擎就可以使用了</span></span><br><span class="line"><span class="comment">// res.render(&#x27;html模板名&#x27;, &#123;模板数据&#125;)</span></span><br><span class="line"><span class="comment">// 第一个参数不能写路径，默认会去项目中的 views 目录查找该模板文件</span></span><br><span class="line"><span class="comment">// 也就是说 Express 有一个约定：开发人员把所有的视图文件都放到 views 目录中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想要修改默认的 views 目录，则可以</span></span><br><span class="line"><span class="comment">// app.set(&#x27;views&#x27;, render函数的默认路径)</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// express默认会去views目录找index.html</span></span><br><span class="line">  res.render(<span class="string">&#x27;index.html&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;hello world&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>如果希望修改默认的<code>views</code>视图渲染存储目录，可以：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数views千万不要写错</span></span><br><span class="line">app.set(<span class="string">&#x27;views&#x27;</span>, 目录路径)</span><br></pre></td></tr></table></figure>

<h3 id="8-2-在-Express-中获取表单请求数据"><a href="#8-2-在-Express-中获取表单请求数据" class="headerlink" title="8.2.在 Express 中获取表单请求数据"></a>8.2.在 Express 中获取表单请求数据</h3><h5 id="获取-get-请求数据："><a href="#获取-get-请求数据：" class="headerlink" title="获取 get 请求数据："></a>获取 get 请求数据：</h5><p>Express 内置了一个 api，可以直接通过<code>req.query</code>来获取数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过requery方法获取用户输入的数据</span></span><br><span class="line"><span class="comment">// req.query只能拿到get请求的数据</span></span><br><span class="line"><span class="keyword">var</span> comment = req.query</span><br></pre></td></tr></table></figure>

<h5 id="获取-post-请求数据："><a href="#获取-post-请求数据：" class="headerlink" title="获取 post 请求数据："></a>获取 post 请求数据：</h5><p>在 Express 中没有内置获取表单 post 请求体的 api，这里我们需要使用一个第三方包<code>body-parser</code>来获取数据。</p>
<p>安装：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save body-parser;</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<p>// 配置解析表单 POST 请求体插件（注意：一定要在 app.use(router) 之前 ）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 引包</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置body-parser</span></span><br><span class="line"><span class="comment">// 只要加入这个配置，则在req请求对象上会多出来一个属性：body</span></span><br><span class="line"><span class="comment">// 也就是说可以直接通过req.body来获取表单post请求数据</span></span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br><span class="line">  res.write(<span class="string">&#x27;you posted:\n&#x27;</span>)</span><br><span class="line">  <span class="comment">// 可以通过req.body来获取表单请求数据</span></span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="8-3-在-Express-中配置使用-express-session-插件操作"><a href="#8-3-在-Express-中配置使用-express-session-插件操作" class="headerlink" title="8.3.在 Express 中配置使用 express-session 插件操作"></a>8.3.在 Express 中配置使用 <code>express-session</code> 插件操作</h2><blockquote>
<p>参考文档：<a href="https://github.com/expressjs/session">https://github.com/expressjs/session</a></p>
</blockquote>
<p>安装：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install express-session</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//该插件会为req请求对象添加一个成员:req.session默认是一个对象</span></span><br><span class="line"><span class="comment">//这是最简单的配置方式</span></span><br><span class="line"><span class="comment">//Session是基于Cookie实现的</span></span><br><span class="line">app.use(</span><br><span class="line">  session(&#123;</span><br><span class="line">    <span class="comment">//配置加密字符串，他会在原有的基础上和字符串拼接起来去加密</span></span><br><span class="line">    <span class="comment">//目的是为了增加安全性，防止客户端恶意伪造</span></span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;keyboard cat&#x27;</span>,</span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">true</span>, <span class="comment">//无论是否适用Session，都默认直接分配一把钥匙</span></span><br><span class="line">    <span class="attr">cookie</span>: &#123; <span class="attr">secure</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读</span></span><br><span class="line"><span class="comment">//添加Session数据</span></span><br><span class="line"><span class="comment">//session就是一个对象</span></span><br><span class="line">req.session.foo = <span class="string">&#x27;bar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//写</span></span><br><span class="line"><span class="comment">//获取session数据</span></span><br><span class="line">req.session.foo</span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line">req.session.foo = <span class="literal">null</span></span><br><span class="line"><span class="keyword">delete</span> req.session.foo</span><br></pre></td></tr></table></figure>

<p>提示：</p>
<p>默认 Session 数据时内存储数据，服务器一旦重启，真正的生产环境会把 Session 进行持久化存储。</p>
<h2 id="8-4-利用-Express-实现-ADUS-项目"><a href="#8-4-利用-Express-实现-ADUS-项目" class="headerlink" title="8.4.利用 Express 实现 ADUS 项目"></a>8.4.利用 Express 实现 ADUS 项目</h2><h3 id="模块化思想"><a href="#模块化思想" class="headerlink" title="模块化思想"></a>模块化思想</h3><p>模块如何划分:</p>
<ul>
<li>模块职责要单一</li>
</ul>
<p>javascript 模块化：</p>
<ul>
<li>Node 中的 CommonJS</li>
<li>浏览器中的：<ul>
<li>AMD require.js</li>
<li>CMD sea.js</li>
</ul>
</li>
<li>es6 中增加了官方支持</li>
</ul>
<h3 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h3><ul>
<li>初始化</li>
<li>安装依赖</li>
<li>模板处理</li>
</ul>
<h3 id="路由设计"><a href="#路由设计" class="headerlink" title="路由设计"></a>路由设计</h3><table>
<thead>
<tr>
<th>请求方法</th>
<th>请求路径</th>
<th>get 参数</th>
<th>post 参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>/students</td>
<td></td>
<td></td>
<td>渲染首页</td>
</tr>
<tr>
<td>GET</td>
<td>/students/new</td>
<td></td>
<td></td>
<td>渲染添加学生页面</td>
</tr>
<tr>
<td>POST</td>
<td>/students/new</td>
<td></td>
<td>name,age,gender,hobbies</td>
<td>处理添加学生请求</td>
</tr>
<tr>
<td>GET</td>
<td>/students/edit</td>
<td>id</td>
<td></td>
<td>渲染编辑页面</td>
</tr>
<tr>
<td>POST</td>
<td>/students/edit</td>
<td></td>
<td>id,name,age,gender,hobbies</td>
<td>处理编辑请求</td>
</tr>
<tr>
<td>GET</td>
<td>/students/delete</td>
<td>id</td>
<td></td>
<td>处理删除请求</td>
</tr>
</tbody></table>
<h3 id="提取路由模块"><a href="#提取路由模块" class="headerlink" title="提取路由模块"></a>提取路由模块</h3><p>router.js:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * router.js路由模块</span></span><br><span class="line"><span class="comment"> * 职责：</span></span><br><span class="line"><span class="comment"> *      处理路由</span></span><br><span class="line"><span class="comment"> *      根据不同的请求方法+请求路径设置具体的请求函数</span></span><br><span class="line"><span class="comment"> * 模块职责要单一，我们划分模块的目的就是增强代码的可维护性，提升开发效率</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Express专门提供了一种更好的方式</span></span><br><span class="line"><span class="comment">// 专门用来提供路由的</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 1 创建一个路由容器</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router()</span><br><span class="line"><span class="comment">// 2 把路由都挂载到路由容器中</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// res.send(&#x27;hello world&#x27;);</span></span><br><span class="line">  <span class="comment">// readFile的第二个参数是可选的，传入utf8就是告诉他把读取到的文件直接按照utf8编码，直接转成我们认识的字符</span></span><br><span class="line">  <span class="comment">// 除了这样来转换，也可以通过data.toString（）来转换</span></span><br><span class="line">  fs.readFile(<span class="string">&#x27;./db.json&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">&#x27;Server error.&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 读取到的文件数据是string类型的数据</span></span><br><span class="line">    <span class="comment">// console.log(data);</span></span><br><span class="line">    <span class="comment">// 从文件中读取到的数据一定是字符串，所以一定要手动转换成对象</span></span><br><span class="line">    <span class="keyword">var</span> students = <span class="built_in">JSON</span>.parse(data).students</span><br><span class="line">    res.render(<span class="string">&#x27;index.html&#x27;</span>, &#123;</span><br><span class="line">      <span class="comment">// 读取文件数据</span></span><br><span class="line">      <span class="attr">students</span>: students,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/new&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">&#x27;new.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/edit&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/students/edit&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/students/delete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 把router导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = router</span><br></pre></td></tr></table></figure>

<p>app.js:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">&#x27;./router&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// router(app);</span></span><br><span class="line"><span class="comment">// 把路由容器挂载到app服务中</span></span><br><span class="line"><span class="comment">// 挂载路由</span></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure>



<h3 id="模糊匹配路径"><a href="#模糊匹配路径" class="headerlink" title="模糊匹配路径"></a>模糊匹配路径</h3><p>用途：聚合请求</p>
<ul>
<li>冒号后可以自定义参数</li>
<li>匹配冒号前的路径</li>
<li>通过req.params.参数 获得</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /advert/one/:advertId 是一个模糊匹配路径</span></span><br><span class="line"><span class="comment">// 可以匹配 /advert/one/* 的路径形式</span></span><br><span class="line"><span class="comment">// 例如：/advert/one/1 /advert/one/2 /advert/one/a /advert/one/abc 等路径</span></span><br><span class="line"><span class="comment">// 但是 /advert/one 或者 /advert/one/a/b 是不行的</span></span><br><span class="line"><span class="comment">// 至于 advertId 是自己起的一个名字，可以在处理函数中通过 req.params 来进行获取</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/advert/one/:advertId&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.params.advertId)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="设计操作数据的-API-文件模块"><a href="#设计操作数据的-API-文件模块" class="headerlink" title="设计操作数据的 API 文件模块"></a>设计操作数据的 API 文件模块</h3><p>es6 中的 find 和 findIndex：</p>
<p>find 接受一个方法作为参数，方法内部返回一个条件</p>
<p>find 会便利所有的元素，执行你给定的带有条件返回值的函数</p>
<p>符合该条件的元素会作为 find 方法的返回值</p>
<p>如果遍历结束还没有符合该条件的元素，则返回 undefined</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * student.js</span></span><br><span class="line"><span class="comment"> * 数据操作文件模块</span></span><br><span class="line"><span class="comment"> * 职责：操作文件中的数据，只处理数据，不关心业务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取所有学生列表</span></span><br><span class="line"><span class="comment"> * return []</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.find = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取添加保存学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.save = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.delete = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ul>
<li><p>处理模板</p>
</li>
<li><p>配置静态开放资源</p>
</li>
<li><p>配置模板引擎</p>
</li>
<li><p>简单的路由，/studens 渲染静态页出来</p>
</li>
<li><p>路由设计</p>
</li>
<li><p>提取路由模块</p>
</li>
<li><p>由于接下来的一系列业务操作都需要处理文件数据，所以我们需要封装 Student.js’</p>
</li>
<li><p>先写好 student.js 文件结构</p>
<ul>
<li>查询所有学生列别哦的 API</li>
<li>findById</li>
<li>save</li>
<li>updateById</li>
<li>deleteById</li>
</ul>
</li>
<li><p>实现具体功能</p>
<ul>
<li>通过路由收到请求</li>
<li>接受请求中的参数（get，post）<ul>
<li>req.query</li>
<li>req.body</li>
</ul>
</li>
<li>调用数据操作 API 处理数据</li>
<li>根据操作结果给客户端发送请求</li>
</ul>
</li>
<li><p>业务功能顺序</p>
<ul>
<li>列表</li>
<li>添加</li>
<li>编辑</li>
<li>删除</li>
</ul>
</li>
<li><p>find 方法</p>
</li>
<li><pre><code class="js">// EcmaScript 6 中的一个数组方法：find
// 需要接收一个函数作为参数
// 当某个遍历项符合 item.id === student.id 条件的时候，find 会终止遍历，同时返回遍历项
let stu = students.find((item) =&gt; &#123;
  return item.id === student.id
&#125;)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- findIndex 方法</span><br><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  // findIndex 方法专门用来根据条件查找元素的下标</span><br><span class="line">  let deleteId = students.findIndex((item) =&gt; &#123;</span><br><span class="line">    return item.id === parseInt(id)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

### 子模板和模板的继承（模板引擎高级语法）【include，extend，block】
</code></pre>
</li>
</ul>
<p>注意:</p>
<p>模板页：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">	&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">	&lt;title&gt;模板页&lt;/title&gt;</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;/node_modules/bootstrap/dist/css/bootstrap.css&quot;/&gt;</span><br><span class="line">	&#123;&#123; block &#x27;head&#x27; &#125;&#125;&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;!-- 通过include导入公共部分 --&gt;</span><br><span class="line">	&#123;&#123;include &#x27;./header.html&#x27;&#125;&#125;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 留一个位置 让别的内容去填充 --&gt;</span><br><span class="line">	&#123;&#123; block  &#x27;content&#x27; &#125;&#125;</span><br><span class="line">		&lt;h1&gt;默认内容&lt;/h1&gt;</span><br><span class="line">	&#123;&#123; /block &#125;&#125;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 通过include导入公共部分 --&gt;</span><br><span class="line">	&#123;&#123;include &#x27;./footer.html&#x27;&#125;&#125;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 公共样式 --&gt;</span><br><span class="line">	&lt;script src=&quot;/node_modules/jquery/dist/jquery.js&quot; &gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;/node_modules/bootstrap/dist/js/bootstrap.js&quot; &gt;&lt;/script&gt;</span><br><span class="line">	&#123;&#123; block &#x27;script&#x27; &#125;&#125;&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>模板的继承：</p>
<p> header 页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>公共的头部<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> footer 页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>公共的底部<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>模板页的使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 继承(extend:延伸，扩展)模板也layout.html --&gt;</span><br><span class="line">&lt;!-- 把layout.html页面的内容都拿进来作为index.html页面的内容 --&gt;</span><br><span class="line">&#123;&#123;extend <span class="string">&#x27;./layout.html&#x27;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 向模板页面填充新的数据 --&gt;</span><br><span class="line">&lt;!-- 填充后就会替换掉layout页面content中的数据 --&gt;</span><br><span class="line">&lt;!-- style样式方面的内容 --&gt;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;head&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">		body&#123;</span><br><span class="line">			background-color: skyblue;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;content&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;div id=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">		<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Index页面的内容<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br><span class="line">&lt;!-- js部分的内容 --&gt;</span><br><span class="line">&#123;&#123; block <span class="string">&#x27;script&#x27;</span> &#125;&#125;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&#123;&#123; /block &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>最终的显示效果：</p>
<h1 id="9-异步编程"><a href="#9-异步编程" class="headerlink" title="9.异步编程"></a>9.异步编程</h1><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201224134656280.png" alt="image"></p>
<p>JavaScript 编程的一大特色，就是异步编程</p>
<p>异步函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span></span><br><span class="line">readFile</span><br><span class="line">wirteFile</span><br><span class="line">readdir</span><br><span class="line">ajax</span><br><span class="line"><span class="comment">// 往往异步 API 都伴随有一个回调函数</span></span><br><span class="line"><span class="keyword">var</span> ret = fn()</span><br><span class="line">$.get(<span class="string">&#x27;dsadas&#x27;</span>, fucntion () &#123;&#125;)</span><br><span class="line"><span class="keyword">var</span> ret = $.get()</span><br></pre></td></tr></table></figure>

<h2 id="9-1-回调函数"><a href="#9-1-回调函数" class="headerlink" title="9.1.回调函数"></a>9.1.回调函数</h2><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201224135623580.png" alt=" "></p>
<p>不成立的情况下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">var</span> ret = x + y <span class="comment">//这一步会执行不到</span></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">  <span class="comment">//到这里执行就结束了，不会i等到前面的定时器，所以直接返回了默认值 undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment">// 结果是 1 3 undefined 4</span></span><br></pre></td></tr></table></figure>

<p>使用回调函数解决：</p>
<p>回调函数：通过一个函数，获取函数内部的操作。（根据输入得到输出结果）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ret</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// callback就是回调函数</span></span><br><span class="line">  <span class="comment">// var x = 10;</span></span><br><span class="line">  <span class="comment">// var y = 20;</span></span><br><span class="line">  <span class="comment">// var callback = function(ret)&#123;console.log(ret);&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ret = x + y</span><br><span class="line">    callback(ret)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">10</span>, <span class="number">20</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ret</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ret)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201222191541919.png" alt="image-"></p>
<p>注意：</p>
<p> 凡是需要得到一个函数内部异步操作的结果（setTimeout,readFile,writeFile,ajax,readdir）</p>
<p> 这种情况必须通过 回调函数 (异步 API 都会伴随着一个回调函数)</p>
<p>ajax:</p>
<p>基于原生 XMLHttpRequest 封装 get 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// 当请求加载成功要调用指定的函数</span></span><br><span class="line">oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(oReq.responseText)</span><br><span class="line">&#125;</span><br><span class="line">oReq.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;请求路径&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">oReq.send()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">  <span class="comment">// 当请求加载成功要调用指定的函数</span></span><br><span class="line">  oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//console.log(oReq.responseText);</span></span><br><span class="line">    callback(oReq.responseText)</span><br><span class="line">  &#125;</span><br><span class="line">  oReq.open(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>)</span><br><span class="line">  oReq.send()</span><br><span class="line">&#125;</span><br><span class="line">get(<span class="string">&#x27;data.json&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="9-2-Promise"><a href="#9-2-Promise" class="headerlink" title="9.2.Promise"></a>9.2.Promise</h2><p>只要出现异步回调，就可以使用.then（）的方式处理</p>
<p>callback hell（回调地狱）:</p>
<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223160628461.png" alt=" "></p>
<p>文件的读取无法判断执行顺序（文件的执行顺序是依据文件的大小来决定的）(异步 api 无法保证文件的执行顺序)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">    <span class="comment">// 2 抛出异常</span></span><br><span class="line">    <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">    <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/b.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">    <span class="comment">// 2 抛出异常</span></span><br><span class="line">    <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">    <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过回调嵌套的方式来保证顺序：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">    <span class="comment">// 2 抛出异常</span></span><br><span class="line">    <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">    <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/b.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">      <span class="comment">// 2 抛出异常</span></span><br><span class="line">      <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">      <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">      <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    fs.readFile(<span class="string">&#x27;./data/a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 1 读取失败直接打印输出读取失败</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取失败&#x27;</span>)</span><br><span class="line">        <span class="comment">// 2 抛出异常</span></span><br><span class="line">        <span class="comment">// 		阻止程序的执行</span></span><br><span class="line">        <span class="comment">// 		把错误信息打印到控制台</span></span><br><span class="line">        <span class="keyword">throw</span> err</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>为了解决以上编码方式带来的问题（回调地狱嵌套），所以在 EcmaScript6 新增了一个 API:<code>Promise</code>。</p>
<ul>
<li>Promise：承诺，保证，期约</li>
<li>Promise 本身不是异步的，但往往都是内部封装一个异步任务</li>
<li><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223165614747.png" alt="image-"></li>
</ul>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在EcmaScript 6中新增了一个API Promise</span></span><br><span class="line"><span class="comment">// Promise 是一个构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// 1 创建Promise容器		resolve:解决   reject：失败</span></span><br><span class="line"><span class="comment">// Promise 容器一旦创建就开始执行里面的代码</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./a.text&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// 失败了，promise中的异步任务失败了</span></span><br><span class="line">      <span class="comment">// console.log(err);</span></span><br><span class="line">      <span class="comment">// 把容器的Pending状态变为rejected</span></span><br><span class="line">      <span class="comment">// 调用reject就相当于调用了then方的第二个参数函数</span></span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 	console.log(data);</span></span><br><span class="line">      <span class="comment">//	Promise中的异步任务成功了</span></span><br><span class="line">      <span class="comment">// 把容器的Pending状态变为resolve</span></span><br><span class="line">      <span class="comment">// 也就是说这里调用的 resolve 方法实际上就是 then 方法传递的那个function</span></span><br><span class="line">      resolve(<span class="number">1234</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当p1成功了，然后就（then）做指定的操作</span></span><br><span class="line"><span class="comment">// then方法接收的function就是容器中的resolve函数</span></span><br><span class="line">p1.then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败了&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223165905008.png" alt="image-"></p>
<p>链式循环：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/b.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;./data/c.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="comment">// 当 p1 读取成功的时候</span></span><br><span class="line">    <span class="comment">// 当前函数中 return 的结果就可以在后面的 then 中 function 接收到</span></span><br><span class="line">    <span class="comment">// 当你 return 123 后面就接收到 123</span></span><br><span class="line">    <span class="comment">//      return &#x27;hello&#x27; 后面就接收到 &#x27;hello&#x27;</span></span><br><span class="line">    <span class="comment">//      没有 return 后面收到的就是 undefined</span></span><br><span class="line">    <span class="comment">// 上面那些 return 的数据没什么卵用</span></span><br><span class="line">    <span class="comment">// 真正有用的是：我们可以 return 一个 Promise 对象</span></span><br><span class="line">    <span class="comment">// 当 return 一个 Promise 对象的时候，后续的 then 中的 方法的第一个参数会作为 p2 的 resolve</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">return</span> p2</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败了&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> p3</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201223170433735.png" alt="image-"></p>
<p>Promise 和 callback 回调函数解决异步问题</p>
<p>封装 Promise 的<code>readFile</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pReadFile</span>(<span class="params">filePath</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(filePath, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pReadFile(<span class="string">&#x27;./a.txt&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> pReadFile(<span class="string">&#x27;./b.txt&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> pReadFile(<span class="string">&#x27;./a.txt&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>mongoose 所有的 API 都支持 Promise：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询所有</span></span><br><span class="line">User.find().then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注册：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 用户注册</span></span><br><span class="line"><span class="comment">// 1. 判断用户是否存在</span></span><br><span class="line"><span class="comment">//    如果已存在，结束注册</span></span><br><span class="line"><span class="comment">//    如果不存在，注册（保存一条用户信息）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// callback回调函数式</span></span><br><span class="line">User.findOne(&#123;<span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(user)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;用户已存在&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> User(&#123;</span><br><span class="line">             <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">             <span class="attr">password</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">             <span class="attr">email</span>:<span class="string">&#x27;fffff&#x27;</span></span><br><span class="line">        &#125;).save(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;注册成功&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise.then()方法处理</span></span><br><span class="line">User.findOne(&#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&#x27;admin&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(user)&#123;</span><br><span class="line">            <span class="comment">// 用户已经存在不能注册</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;用户已存在&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 用户不存在可以注册</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> User(&#123;</span><br><span class="line">                <span class="attr">username</span>:<span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">                <span class="attr">password</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">                <span class="attr">email</span>:<span class="string">&#x27;fffff&#x27;</span></span><br><span class="line">            &#125;).save();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="title">funciton</span>(<span class="params">ret</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;注册成功&#x27;</span>);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="9-3-Genertator-生成器函数"><a href="#9-3-Genertator-生成器函数" class="headerlink" title="9.3.Genertator 生成器函数"></a>9.3.Genertator 生成器函数</h2><h3 id="async-函数"><a href="#async-函数" class="headerlink" title="async 函数"></a>async 函数</h3><p><img src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/Nodejs%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/image-20201224140023310.png" alt="image-"></p>
<ul>
<li><p>ES7 提供了<code>async</code>函数，使得异步操作变得更加方便。<code>async</code>函数是什么？一句话，<code>async</code>函数就是 Generator 函数的语法糖。</p>
</li>
<li><p><code>async</code>表示函数里有异步操作，<code>await</code>表示紧跟在后面的表达式需要等待结果。</p>
</li>
<li><p>返回值是 Promise。</p>
<ul>
<li><code>async</code>函数的返回值是 Promise 对象，你可以用<code>then</code>方法指定下一步的操作。</li>
</ul>
</li>
<li><p>进一步说，<code>async</code>函数完全可以看作多个异步操作，包装成的一个 Promise 对象，而<code>await</code>命令就是内部<code>then</code>命令的语法糖。</p>
</li>
</ul>
<h1 id="10-其他"><a href="#10-其他" class="headerlink" title="10.其他"></a>10.其他</h1><h2 id="10-1-修改完代码自动重启"><a href="#10-1-修改完代码自动重启" class="headerlink" title="10.1.修改完代码自动重启"></a>10.1.修改完代码自动重启</h2><p>我们在这里可以使用一个第三方命名行工具：<code>nodemon</code>来帮助我们解决频繁修改代码重启服务器的问题。</p>
<p><code>nodemon</code>是一个基于 Node.js 开发的一个第三方命令行工具，我们使用的时候需要独立安装：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#在任意目录执行该命令都可以</span><br><span class="line">#也就是说，所有需要 --<span class="built_in">global</span>安装的包都可以在任意目录执行</span><br><span class="line">npm install --<span class="built_in">global</span> nodemon</span><br><span class="line">npm install -g nodemon</span><br><span class="line"></span><br><span class="line">#如果安装不成功的话，可以使用cnpm安装</span><br><span class="line">cnpm install -g nodemon</span><br></pre></td></tr></table></figure>

<p>安装完毕之后使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node app.js</span><br><span class="line"></span><br><span class="line">#使用nodemon</span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure>

<p>只要是通过<code>nodemon</code>启动的服务，则他会监视你的文件变化，当文件发生变化的时候，会自动帮你重启服务器。</p>
<h2 id="10-2-封装异步-API"><a href="#10-2-封装异步-API" class="headerlink" title="10.2.封装异步 API"></a>10.2.封装异步 API</h2><p>回调函数：获取异步操作的结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// var callback = funtion(data)&#123; console.log(data); &#125;</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    callback(data)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果需要获取一个函数中异步操作的结果，则必须通过回调函数的方式来获取</span></span><br><span class="line">fn(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="10-3-数组的遍历方法，都是对函数作为一种参数"><a href="#10-3-数组的遍历方法，都是对函数作为一种参数" class="headerlink" title="10.3.数组的遍历方法，都是对函数作为一种参数"></a>10.3.数组的遍历方法，都是对函数作为一种参数</h2><h2 id="10-4-EcmaScript-6"><a href="#10-4-EcmaScript-6" class="headerlink" title="10.4.EcmaScript 6"></a>10.4.EcmaScript 6</h2><blockquote>
<p>参考文档：<a href="https://es6.ruanyifeng.com/">https://es6.ruanyifeng.com/</a></p>
</blockquote>
<h1 id="11-Express-中间件"><a href="#11-Express-中间件" class="headerlink" title="11.Express 中间件"></a>11.Express 中间件</h1><h2 id="11-1-中间件的概念"><a href="#11-1-中间件的概念" class="headerlink" title="11.1.中间件的概念"></a>11.1.中间件的概念</h2><blockquote>
<p>参考文档：<a href="http://expressjs.com/en/guide/using-middleware.html">http://expressjs.com/en/guide/using-middleware.html</a></p>
</blockquote>
<p>中间件：把很复杂的事情分割成单个，然后依次有条理的执行。就是一个中间处理环节，有输入，有输出。</p>
<p>说的通俗易懂点儿，中间件就是一个（从请求到响应调用的方法）方法。</p>
<p>把数据从请求到响应分步骤来处理，每一个步骤都是一个中间处理环节。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cookie = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/cookie&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> query = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/query&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> postBody = <span class="built_in">require</span>(<span class="string">&#x27;./expressPtoject/post-body&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 解析请求地址中的get参数</span></span><br><span class="line">	<span class="comment">// var obj = url.parse(req.url,true);</span></span><br><span class="line">	<span class="comment">// req.query = obj.query;</span></span><br><span class="line">	query(req,res);	<span class="comment">//中间件</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 解析请求地址中的post参数</span></span><br><span class="line">	req.body = &#123;</span><br><span class="line">		<span class="attr">foo</span>:<span class="string">&#x27;bar&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(req.url === <span class="string">&#x27;xxx&#x27;</span>)&#123;</span><br><span class="line">	<span class="comment">// 处理请求</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;3000 runing...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>同一个请求对象所经过的中间件都是同一个请求对象和响应对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"><span class="comment">// 中间件：处理请求的，本质就是个函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 Express 中，对中间件有几种分类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当请求进来，会从第一个中间件开始进行匹配</span></span><br><span class="line"><span class="comment">//    如果匹配，则进来</span></span><br><span class="line"><span class="comment">//       如果请求进入中间件之后，没有调用 next 则代码会停在当前中间件</span></span><br><span class="line"><span class="comment">//       如果调用了 next 则继续向后找到第一个匹配的中间件</span></span><br><span class="line"><span class="comment">//    如果不匹配，则继续判断匹配下一个中间件</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 不关心请求路径和请求方法的中间件</span></span><br><span class="line"><span class="comment">// 也就是说任何请求都会进入这个中间件</span></span><br><span class="line"><span class="comment">// 中间件本身是一个方法，该方法接收三个参数：</span></span><br><span class="line"><span class="comment">//    Request 请求对象</span></span><br><span class="line"><span class="comment">//    Response 响应对象</span></span><br><span class="line"><span class="comment">//    next     下一个中间件</span></span><br><span class="line"><span class="comment">// 当一个请求进入一个中间件之后，如果不调用 next 则会停留在当前中间件</span></span><br><span class="line"><span class="comment">// 所以 next 是一个方法，用来调用下一个中间件的</span></span><br><span class="line"><span class="comment">// 调用 next 方法也是要匹配的（不是调用紧挨着的那个）</span></span><br><span class="line">app.get(<span class="string">&#x27;/abc&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 同一个请求的req和res是一样的，</span></span><br><span class="line">  <span class="comment">// 可以前面存储下面调用</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/abc&#x27;</span>)</span><br><span class="line">  <span class="comment">// req.foo = &#x27;bar&#x27;;</span></span><br><span class="line">  req.body = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">&#x27;/abc&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log(req.foo);</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.body)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/abc&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;app is running at port 3000.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="11-2-中间件的分类："><a href="#11-2-中间件的分类：" class="headerlink" title="11.2.中间件的分类："></a>11.2.中间件的分类：</h2><h3 id="应用程序级别的中间件"><a href="#应用程序级别的中间件" class="headerlink" title="应用程序级别的中间件"></a>应用程序级别的中间件</h3><p>万能匹配（不关心任何请求路径和请求方法的中间件）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Time&#x27;</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>关心请求路径和请求方法的中间件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Time&#x27;</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="路由级别的中间件严格匹配请求路径和请求方法的中间件"><a href="#路由级别的中间件严格匹配请求路径和请求方法的中间件" class="headerlink" title="路由级别的中间件严格匹配请求路径和请求方法的中间件"></a>路由级别的中间件严格匹配请求路径和请求方法的中间件</h3><p>get:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;get&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>post：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.post(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;post&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>put:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.put(<span class="string">&#x27;/user&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;put&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>delete:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.delete(<span class="string">&#x27;/delete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;delete&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中间件：处理请求，本质就是个函数</span></span><br><span class="line"><span class="comment">// 在express中，对中间件有几种分类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 不关心任何请求路径和请求方法的中间件</span></span><br><span class="line"><span class="comment">// 也就是说任何请求都会进入这个中间件</span></span><br><span class="line"><span class="comment">// 中间件本身是一个方法，该方法接收三个参数</span></span><br><span class="line"><span class="comment">// Request 请求对象</span></span><br><span class="line"><span class="comment">// Response 响应对象</span></span><br><span class="line"><span class="comment">// next 下一个中间件</span></span><br><span class="line"><span class="comment">// // 全局匹配中间件</span></span><br><span class="line"><span class="comment">// app.use(function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;1&#x27;);</span></span><br><span class="line"><span class="comment">// 	// 当一个请求进入中间件后</span></span><br><span class="line"><span class="comment">// 	// 如果需要请求另外一个方法则需要使用next（）方法</span></span><br><span class="line"><span class="comment">// 	next();</span></span><br><span class="line"><span class="comment">// 	// next是一个方法，用来调用下一个中间件</span></span><br><span class="line"><span class="comment">//  // 注意：next（）方法调用下一个方法的时候，也会匹配（不是调用紧挨着的哪一个）</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// app.use(function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(&#x27;2&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// // 2 关心请求路径的中间件</span></span><br><span class="line"><span class="comment">// // 以/xxx开头的中间件</span></span><br><span class="line"><span class="comment">// app.use(&#x27;/a&#x27;,function(req, res, next) &#123;</span></span><br><span class="line"><span class="comment">// 	console.log(req.url);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3 严格匹配请求方法和请求路径的中间件</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.post(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;/a&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;app is running at port 3000.&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="11-3-错误处理中间件"><a href="#11-3-错误处理中间件" class="headerlink" title="11.3.错误处理中间件"></a>11.3.错误处理中间件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">err, req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.error(err, stack)</span><br><span class="line">  res.status(<span class="number">500</span>).send(<span class="string">&#x27;Something broke&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>配置使用 404 中间件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 要写在最底部，最后匹配</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">&#x27;404.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>配置全局错误处理中间件:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/a&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">	fs.readFile(<span class="string">&#x27;.a/bc&#x27;</span>, <span class="function"><span class="title">funtion</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (err) &#123;</span><br><span class="line">        	<span class="comment">// 当调用next()传参后，则直接进入到全局错误处理中间件方法中</span></span><br><span class="line">        	<span class="comment">// 当发生全局错误的时候，我们可以调用next传递错误对象</span></span><br><span class="line">        	<span class="comment">// 然后被全局错误处理中间件匹配到并进行处理</span></span><br><span class="line">        	<span class="comment">// 带有参数的next函数会直接跳过去找到四个参数的中间件</span></span><br><span class="line">			next(err);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//全局错误处理中间件</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err,req,res,next</span>)</span>&#123;</span><br><span class="line">    res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">        <span class="attr">err_code</span>:<span class="number">500</span>,</span><br><span class="line">        <span class="attr">message</span>:err.message</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="11-4-解析处理表单-POST-请求体中间件"><a href="#11-4-解析处理表单-POST-请求体中间件" class="headerlink" title="11.4.解析处理表单 POST 请求体中间件"></a>11.4.解析处理表单 POST 请求体中间件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 由于表单 POST 请求可能会携带大量的数据，所以在进行请求提价的时候会分为多次提交</span></span><br><span class="line">  <span class="comment">// 具体分为多少次进行提交不一定，取决于数据量的大小</span></span><br><span class="line">  <span class="comment">// 在 Node 中，对于处理这种不确定的数据，使用事件的形式处理</span></span><br><span class="line">  <span class="comment">// 这里可以通过监听 req 对象的 data 事件，然后通过对应的回调处理函数中的参数 chunk 拿到每一次接收到的数据</span></span><br><span class="line">  <span class="comment">//        data 事件触发多少次，不一定</span></span><br><span class="line">  <span class="comment">// 当数据接收完毕之后，会自动触发 req 对象的 end 事件，然后就可以在 end 事件中使用接收到的表单 POST 请求体</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="params">chunk</span> =&gt;</span> &#123;</span><br><span class="line">    data += chunk</span><br><span class="line">  &#125;)</span><br><span class="line">  req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 手动给 req 对象挂载一个 body 属性，值就是当前表单 POST 请求体对象</span></span><br><span class="line">    <span class="comment">// 在后续的处理中间件中，就可以直接使用 req.body 了</span></span><br><span class="line">    <span class="comment">// 因为在同一个请求中，流通的都是同一个 req 和 res 对象</span></span><br><span class="line">    req.body = queryString.parse(data)</span><br><span class="line">    next()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载路由容器（路由容器中组织了网站功能处理路由中间件）</span></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure>


<h2 id="11-5-内置中间件"><a href="#11-5-内置中间件" class="headerlink" title="11.5.内置中间件"></a>11.5.内置中间件</h2><ul>
<li>express.static(提供静态文件)<ul>
<li><a href="http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express">http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express</a></li>
</ul>
</li>
</ul>
<h2 id="11-6-第三方中间件"><a href="#11-6-第三方中间件" class="headerlink" title="11.6.第三方中间件"></a>11.6.第三方中间件</h2><blockquote>
<p>参考文档：<a href="http://expressjs.com/en/resources/middleware.html">http://expressjs.com/en/resources/middleware.html</a></p>
</blockquote>
<ul>
<li>body-parser</li>
<li>compression</li>
<li>cookie-parser</li>
<li>mogran</li>
<li>response-time</li>
<li>server-static</li>
<li>session</li>
</ul>
<h1 id="12-MongoDB"><a href="#12-MongoDB" class="headerlink" title="12.MongoDB"></a>12.MongoDB</h1><h2 id="12-1-关系型和非关系型数据库"><a href="#12-1-关系型和非关系型数据库" class="headerlink" title="12.1.关系型和非关系型数据库"></a>12.1.关系型和非关系型数据库</h2><h3 id="关系型数据库（表就是关系，或者说表与表之间存在关系）"><a href="#关系型数据库（表就是关系，或者说表与表之间存在关系）" class="headerlink" title="关系型数据库（表就是关系，或者说表与表之间存在关系）"></a>关系型数据库（表就是关系，或者说表与表之间存在关系）</h3><ul>
<li>所有的关系型数据库都需要通过<code>sql</code>语言来操作</li>
<li>所有的关系型数据库在操作之前都需要设计表结构</li>
<li>而且数据表还支持约束<ul>
<li>唯一的</li>
<li>主键</li>
<li>默认值</li>
<li>非空</li>
</ul>
</li>
</ul>
<h3 id="非关系型数据库"><a href="#非关系型数据库" class="headerlink" title="非关系型数据库"></a>非关系型数据库</h3><ul>
<li>非关系型数据库非常的灵活</li>
<li>有的关系型数据库就是 key-value 对</li>
<li>但 MongDB 是长得最像关系型数据库的非关系型数据库<ul>
<li>数据库 -》 数据库</li>
<li>数据表 -》 集合（数组）</li>
<li>表记录 -》文档对象</li>
</ul>
</li>
<li>一个数据库中可以有多个数据库</li>
<li>一个数据库中可以有多个集合（数组）</li>
<li>一个集合中可以有多个文档（表记录）</li>
<li>文档解构很灵活，没有任何限制</li>
<li>mongoDB 非常灵活，不需要像 MySQL 一样先创建数据库、表、设计表结构<ul>
<li>当你需要插入数据的时候，只需要指定往那个数据库的哪个集合操作就可以了</li>
<li>一切都有 MongoDB 来帮你自动完成建库建表。。</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    qq:&#123;</span><br><span class="line">       user:[</span><br><span class="line">           &#123;&#125;,&#123;&#125;,&#123;&#125;...</span><br><span class="line">       ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>也就是说你可以任意的往里面存数据，没有结构性这么一说</li>
</ul>
<h3 id="存储结构"><a href="#存储结构" class="headerlink" title="存储结构"></a>存储结构</h3><ul>
<li>一个计算机上可以有一个数据库服务实例</li>
<li>一个数据服务实例上可以有多个数据库</li>
<li>一个数据库中可以有多个集合<ul>
<li>集合根据数据的业务类型划分</li>
<li>例如用户数据、商品信息数据、广告信息数据。。。</li>
<li>对数据进行分门别类的存储</li>
<li>集合在 MongoDB 中就类似于数组</li>
</ul>
</li>
<li>一个集合中可以有多个文档<ul>
<li>文档在 MongoDB 中就是一个 类似于 JSON 的数据对象</li>
<li>文档对象是动态的，可以随意的生成</li>
<li>为了便于管理，最好一个集合中存储的数据一定要保持文档结构的统一（数据完整性）</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  collection1: [</span><br><span class="line">    &#123; a: &#123; age: <span class="number">18</span>, name: &#x27;&#x27;, lsit: [], is: <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">    &#123; 文档2 &#125;,</span><br><span class="line">    &#123; 文档3 &#125;</span><br><span class="line">  ],</span><br><span class="line">  collection2: [],</span><br><span class="line">  collection3: [],</span><br><span class="line">  collection4: [],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-2-安装"><a href="#12-2-安装" class="headerlink" title="12.2.安装"></a>12.2.安装</h2><ul>
<li><p>下载</p>
<ul>
<li>下载地址：<a href="https://www.mongodb.com/download-center/community">https://www.mongodb.com/download-center/community</a></li>
</ul>
</li>
<li><p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i mongoose</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置环境变量</p>
</li>
<li><p>最后输入<code>mongod --version</code>测试是否安装成功</p>
</li>
</ul>
<h2 id="12-3-启动和关闭数据库"><a href="#12-3-启动和关闭数据库" class="headerlink" title="12.3.启动和关闭数据库"></a>12.3.启动和关闭数据库</h2><p>启动：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mongodb 默认使用执行mongod 命令所处盼复根目录下的/data/db作为自己的数据存储目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 所以在第一次执行该命令之前先自己手动新建一个 /data/db</span></span><br><span class="line">mongod</span><br></pre></td></tr></table></figure>

<p>如果想要修改默认的数据存储目录，可以：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongod --dbpath = 数据存储目录路径</span><br></pre></td></tr></table></figure>

<p>停止：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在开启服务的控制台，直接Ctrl+C;</span><br><span class="line">或者直接关闭开启服务的控制台。</span><br></pre></td></tr></table></figure>

<h2 id="12-4-连接数据库"><a href="#12-4-连接数据库" class="headerlink" title="12.4.连接数据库"></a>12.4.连接数据库</h2><p>连接：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 该命令默认连接本机的 MongoDB 服务</span></span><br><span class="line">mongo</span><br></pre></td></tr></table></figure>

<p>退出：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在连接状态输入 <span class="built_in">exit</span> 退出连接</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<h2 id="12-5-基本命令"><a href="#12-5-基本命令" class="headerlink" title="12.5.基本命令"></a>12.5.基本命令</h2><ul>
<li><p><code>show dbs</code></p>
<ul>
<li>查看数据库列表(数据库中的所有数据库)</li>
</ul>
</li>
<li><p><code>db</code></p>
<ul>
<li>查看当前连接的数据库</li>
</ul>
</li>
<li><p><code>use 数据库名称</code></p>
<ul>
<li>切换到指定的数据库，（如果没有会新建）</li>
</ul>
</li>
<li><p>插入数据</p>
</li>
<li><p><code>show collections</code></p>
<ul>
<li>查看当前目录下的所有数据表</li>
</ul>
</li>
<li><p><code>db.表名.find()</code></p>
<ul>
<li>查看表中的详细信息</li>
</ul>
</li>
</ul>
<h2 id="12-6-在-Node-中如何操作-MongoDB-数据库"><a href="#12-6-在-Node-中如何操作-MongoDB-数据库" class="headerlink" title="12.6.在 Node 中如何操作 MongoDB 数据库"></a>12.6.在 Node 中如何操作 MongoDB 数据库</h2><h3 id="使用官方的MongoDB-包来操作"><a href="#使用官方的MongoDB-包来操作" class="headerlink" title="使用官方的MongoDB 包来操作"></a>使用官方的<code>MongoDB</code> 包来操作</h3><blockquote>
<p> <a href="http://mongodb.github.io/node-mongodb-native/">http://mongodb.github.io/node-mongodb-native/</a></p>
</blockquote>
<h3 id="使用第三方包-mongoose-来操作-MongoDB-数据库"><a href="#使用第三方包-mongoose-来操作-MongoDB-数据库" class="headerlink" title="使用第三方包 mongoose 来操作 MongoDB 数据库"></a>使用第三方包 <code>mongoose</code> 来操作 MongoDB 数据库</h3><p>第三方包：<code>mongoose</code>基于 MongoDB 官方的<code>mongodb</code>包再一次做了封装，名字叫<code>mongoose</code>，是 WordPress 项目团队开发的。</p>
<blockquote>
<p> <a href="https://mongoosejs.com/">https://mongoosejs.com/</a></p>
</blockquote>
<h2 id="12-7-学习指南（步骤）"><a href="#12-7-学习指南（步骤）" class="headerlink" title="12.7.学习指南（步骤）"></a>12.7.学习指南（步骤）</h2><blockquote>
<p>官方学习文档：<a href="https://mongoosejs.com/docs/index.html">https://mongoosejs.com/docs/index.html</a></p>
</blockquote>
<h3 id="设计-Scheme-发布-Model-（创建表）"><a href="#设计-Scheme-发布-Model-（创建表）" class="headerlink" title="设计 Scheme 发布 Model （创建表）"></a>设计 Scheme 发布 Model （创建表）</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.引包</span></span><br><span class="line"><span class="comment">// 注意：按照后才能require使用</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拿到schema图表</span></span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.连接数据库</span></span><br><span class="line"><span class="comment">// 指定连接数据库后不需要存在，当你插入第一条数据库后会自动创建数据库</span></span><br><span class="line">mongoose.connect(<span class="string">&#x27;mongodb://localhost/test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.设计集合结构（表结构）</span></span><br><span class="line"><span class="comment">// 用户表</span></span><br><span class="line"><span class="keyword">var</span> userSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  <span class="attr">username</span>: &#123;</span><br><span class="line">    <span class="comment">//姓名</span></span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">true</span>, <span class="comment">//添加约束，保证数据的完整性，让数据按规矩统一</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">password</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">email</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.将文档结构发布为模型</span></span><br><span class="line"><span class="comment">// mongoose.model方法就是用来将一个架构发布为 model</span></span><br><span class="line"><span class="comment">// 		第一个参数：传入一个大写名词单数字符串用来表示你的数据库的名称</span></span><br><span class="line"><span class="comment">// 					mongoose 会自动将大写名词的字符串生成 小写复数 的集合名称</span></span><br><span class="line"><span class="comment">// 					例如 这里会变成users集合名称</span></span><br><span class="line"><span class="comment">// 		第二个参数：架构</span></span><br><span class="line"><span class="comment">// 	返回值：模型构造函数</span></span><br><span class="line"><span class="keyword">var</span> User = mongoose.model(<span class="string">&#x27;User&#x27;</span>, userSchema)</span><br></pre></td></tr></table></figure>

<h3 id="添加（增）"><a href="#添加（增）" class="headerlink" title="添加（增）"></a>添加（增）</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 5.通过模型构造函数对User中的数据进行操作</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> User(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">  <span class="attr">email</span>: <span class="string">&#x27;xiaochen@qq.com&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">user.save(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;保存失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;保存成功&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="删除（删）"><a href="#删除（删）" class="headerlink" title="删除（删）"></a>删除（删）</h3><p>根据条件删除所有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">User.remove(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;删除失败&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>根据条件删除一个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Model.findOneAndRemove(conditions,[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>根据 id 删除一个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User.findByIdAndRemove(id,[options],[callback]);</span><br></pre></td></tr></table></figure>

<h3 id="更新（改）"><a href="#更新（改）" class="headerlink" title="更新（改）"></a>更新（改）</h3><p>更新所有：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User.remove(conditions,doc,[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>根据指定条件更新一个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User.FindOneAndUpdate([conditions],[update],[options],[callback]);</span><br></pre></td></tr></table></figure>

<p>根据 id 更新一个：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 更新	根据id来修改表数据</span></span><br><span class="line">User.findByIdAndUpdate(</span><br><span class="line">  <span class="string">&#x27;5e6c5264fada77438c45dfcd&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;junjun&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;更新失败&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;更新成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="查询（查）"><a href="#查询（查）" class="headerlink" title="查询（查）"></a>查询（查）</h3><p>查询所有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询所有</span></span><br><span class="line">User.find(<span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;查询失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>条件查询所有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据条件查询</span></span><br><span class="line">User.find(&#123; <span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;查询失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>条件查询单个：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 按照条件查询单个，查询出来的数据是一个对象（&#123;&#125;）</span></span><br><span class="line"><span class="comment">// 没有条件查询使用findOne方法，查询的是表中的第一条数据</span></span><br><span class="line">User.findOne(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;xiaoxiao&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err, ret</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;查询失败&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h1 id="13-MySQL"><a href="#13-MySQL" class="headerlink" title="13.MySQL"></a>13.MySQL</h1><blockquote>
<p>文档：<a href="https://www.npmjs.com/package/mysql">https://www.npmjs.com/package/mysql</a></p>
</blockquote>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save  mysql</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入mysql包</span></span><br><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>, <span class="comment">//本机</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;me&#x27;</span>, <span class="comment">//账号root</span></span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;secret&#x27;</span>, <span class="comment">//密码12345</span></span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;my_db&#x27;</span>, <span class="comment">//数据库名</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接数据库	（打开冰箱门）</span></span><br><span class="line">connection.connect()</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行数据操作	（把大象放到冰箱）</span></span><br><span class="line">connection.query(<span class="string">&#x27;SELECT * FROM `users` &#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error <span class="comment">//抛出异常阻止代码往下执行</span></span><br><span class="line">  <span class="comment">// 没有异常打印输出结果</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;The solution is: &#x27;</span>, results)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭连接	（关闭冰箱门）</span></span><br><span class="line">connection.end()</span><br></pre></td></tr></table></figure>

<h1 id="14-项目案例"><a href="#14-项目案例" class="headerlink" title="14.项目案例"></a>14.项目案例</h1><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">app.js	项目的入口文件</span><br><span class="line">controllers</span><br><span class="line">models	存储使用mongoose设计的数据模型</span><br><span class="line">node_modules	第三方包</span><br><span class="line">package.json	包描述文件</span><br><span class="line">package-lock.json	第三方包版本锁定文件（npm5之后才有）</span><br><span class="line">public	公共静态资源</span><br><span class="line">routes</span><br><span class="line">views	存储视图目录</span><br></pre></td></tr></table></figure>

<h2 id="模板页"><a href="#模板页" class="headerlink" title="模板页"></a>模板页</h2><ul>
<li>子模板</li>
<li>模板继承</li>
</ul>
<h2 id="路由设计-1"><a href="#路由设计-1" class="headerlink" title="路由设计"></a>路由设计</h2><table>
<thead>
<tr>
<th>路由</th>
<th>方法</th>
<th>get 参数</th>
<th>post 参数</th>
<th>是否需要登录</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>/</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>渲染首页</td>
</tr>
<tr>
<td>/register(登录)</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>渲染注册页面</td>
</tr>
<tr>
<td>/register</td>
<td>post</td>
<td></td>
<td>email,nickname,password</td>
<td></td>
<td>处理注册请求</td>
</tr>
<tr>
<td>/login</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>渲染登陆界面</td>
</tr>
<tr>
<td>/login</td>
<td>post</td>
<td></td>
<td>email,password</td>
<td></td>
<td>处理登录请求</td>
</tr>
<tr>
<td>/loginout</td>
<td>get</td>
<td></td>
<td></td>
<td></td>
<td>处理退出请求</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="模型设计"><a href="#模型设计" class="headerlink" title="模型设计"></a>模型设计</h2><h2 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h2><h2 id="步骤-1"><a href="#步骤-1" class="headerlink" title="步骤"></a>步骤</h2><ul>
<li>创建目录结构</li>
<li>整合静态也-模板页<ul>
<li>include</li>
<li>block</li>
<li>extend</li>
</ul>
</li>
<li>设计用户登陆，退出，注册的路由</li>
<li>用户注册<ul>
<li>先处理客户端页面的内容（表单控件的 name，收集表单数据，发起请求）</li>
<li>服务端<ul>
<li>获取从客户端收到的数据</li>
<li>操作数据库<ul>
<li>如果有错，发送 500 告诉客户端服务器错了‘</li>
<li>其他的根据业务发送不同的响应数据</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>登录</li>
<li>退出</li>
</ul>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>NodeJS学习</title>
    <url>/taiaiac.gitee.io/2020/12/30/Node.js/nodeJS%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="Node-js-安装配置"><a href="#Node-js-安装配置" class="headerlink" title="Node.js 安装配置"></a>Node.js 安装配置</h1><p>本文将向大家介绍在 Windows 和 Linux 上安装 Node.js 的方法。</p>
<p>本安装教程以 Node.js v12.15.0 LTS(长期支持版本)版本为例。</p>
<p>Node.js 安装包及源码下载地址为：<a href="https://nodejs.org/en/download/">点击这里</a>。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Node.js 安装包及源码下载"></p>
<p>根据不同平台系统选择你需要的 Node.js 安装包。</p>
<p>Node.js 历史版本下载地址：<a href="https://nodejs.org/dist/">点击这里</a></p>
<blockquote>
<p>注意：Linux 上安装 Node.js 需要安装 Python 2.6 或 2.7 ，不建议安装 Python 3.0 以上版本。</p>
</blockquote>
<h2 id="Windows-上安装-Node-js"><a href="#Windows-上安装-Node-js" class="headerlink" title="Windows 上安装 Node.js"></a>Windows 上安装 Node.js</h2><p>你可以采用以下两种方式来安装。</p>
<h3 id="1、Windows-安装包-msi"><a href="#1、Windows-安装包-msi" class="headerlink" title="1、Windows 安装包(.msi)"></a>1、Windows 安装包(.msi)</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Windows 安装包(.msi)"></p>
<p>本文实例以 v0.10.26 版本为例，其他版本类似， 安装步骤：</p>
<p>步骤 1 : 双击下载后的安装包 <strong>v0.10.26</strong>，如下所示：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="双击下载后的安装包"></p>
<p>步骤 2 : 点击以上的Run(运行)，将出现如下界面：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="点击以上的Run(运行)"></p>
<p>步骤 3 : 勾选接受协议选项，点击 next（下一步） 按钮 :</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="勾选接受协议选项，点击 next（下一步）"><br>步骤 4 : Node.js默认安装目录为 “C:\Program Files\nodejs\” , 你可以修改目录，并点击 next（下一步）：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt=" Node.js默认安装目录">步骤 5 : 点击树形图标来选择你需要的安装模式 , 然后点击下一步 next（下一步）<br><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="点击树形图标来选择你需要的安装模式"></p>
<p>步骤 6 :点击 Install（安装） 开始安装Node.js。你也可以点击 Back（返回）来修改先前的配置。 然后并点击 next（下一步）：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="点击 Install（安装） 开始安装Node.js"></p>
<p>安装过程：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="安装过程："></p>
<p>点击 Finish（完成）按钮退出安装向导。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="点击 Finish（完成）按钮退出安装向导。"></p>
<p>检测PATH环境变量是否配置了Node.js，点击开始=》运行=》输入”cmd” =&gt; 输入命令”path”，输出如下结果：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">PATH=C:\oraclexe\app\oracle\product\<span class="number">10.2</span><span class="number">.0</span>\server\bin;C:\Windows\system32;</span><br><span class="line">C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1<span class="number">.0</span>\;</span><br><span class="line">c:\python32\python;C:\MinGW\bin;C:\Program Files\GTK2-Runtime\lib;</span><br><span class="line">C:\Program Files\MySQL\MySQL Server <span class="number">5.5</span>\bin;C:\Program Files\nodejs\;</span><br><span class="line">C:\Users\rg\AppData\Roaming\npm</span><br></pre></td></tr></table></figure>

<p>我们可以看到环境变量中已经包含了C:\Program Files\nodejs\</p>
<p>检查Node.js版本</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="检查Node.js版本"></p>
<h3 id="2、Windows-二进制文件-exe-安装"><a href="#2、Windows-二进制文件-exe-安装" class="headerlink" title="2、Windows 二进制文件 (.exe)安装"></a>2、Windows 二进制文件 (.exe)安装</h3><p>32 位安装包下载地址 : <a href="http://nodejs.org/dist/v0.10.26/node.exe">nodejs/dist/v0.10.26/node.exe</a></p>
<p>64 位安装包下载地址 : <a href="http://nodejs.org/dist/v0.10.26/x64/node.exe">nodejs/dist/v0.10.26/x64/node.exe</a></p>
<p><strong>安装步骤</strong></p>
<p>步骤 1 : 双击下载的安装包 Node.exe ，将出现如下界面 :</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="双击下载的安装包 Node.exe"></p>
<p>点击 Run（运行）按钮将出现命令行窗口：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="点击 Run（运行）按钮将出现命令行窗口："></p>
<h3 id="版本测试"><a href="#版本测试" class="headerlink" title="版本测试"></a>版本测试</h3><p>进入 node.exe 所在的目录，如下所示：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="进入 node.exe 所在的目录"></p>
<p>如果你获得以上输出结果，说明你已经成功安装了Node.js。</p>
<h2 id="Linux-上安装-Node-js"><a href="#Linux-上安装-Node-js" class="headerlink" title="Linux 上安装 Node.js"></a>Linux 上安装 Node.js</h2><h3 id="直接使用已编译好的包"><a href="#直接使用已编译好的包" class="headerlink" title="直接使用已编译好的包"></a>直接使用已编译好的包</h3><p>Node 官网已经把 linux 下载版本更改为已编译好的版本了，我们可以直接下载解压后使用：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"># wget https://nodejs.org/dist/v10.<span class="number">9.0</span>/node-v10.<span class="number">9.0</span>-linux-x64.tar.xz    // 下载</span><br><span class="line"># tar xf  node-v10.<span class="number">9.0</span>-linux-x64.tar.xz       // 解压</span><br><span class="line"># cd node-v10.<span class="number">9.0</span>-linux-x64/                  // 进入解压目录</span><br><span class="line"># ./bin/node -v                               // 执行node命令 查看版本</span><br><span class="line">v10.<span class="number">9.0</span></span><br></pre></td></tr></table></figure>

<p>解压文件的 bin 目录底下包含了 node、npm 等命令，我们可以使用 ln 命令来设置软连接：、</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">ln -s /usr/software/nodejs/bin/npm   /usr/local/bin/ </span><br><span class="line">ln -s /usr/software/nodejs/bin/node   /usr/local/bin/</span><br></pre></td></tr></table></figure>

<h3 id="Ubuntu-源码安装-Node-js"><a href="#Ubuntu-源码安装-Node-js" class="headerlink" title="Ubuntu 源码安装 Node.js"></a>Ubuntu 源码安装 Node.js</h3><p>以下部分我们将介绍在 Ubuntu Linux 下使用源码安装 Node.js 。 其他的 Linux 系统，如 Centos 等类似如下安装步骤。</p>
<p>在 Github 上获取 Node.js 源码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">sudo git clone https://github.com/nodejs/node.git</span><br><span class="line">Cloning into <span class="string">&#x27;node&#x27;</span>...</span><br></pre></td></tr></table></figure>

<p>修改目录权限：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">sudo chmod -R <span class="number">755</span> node</span><br></pre></td></tr></table></figure>

<p>使用 <strong>./configure</strong> 创建编译文件，并按照：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cd node</span><br><span class="line">sudo ./configure</span><br><span class="line">sudo make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>查看 node 版本：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node --version</span><br><span class="line">v0.<span class="number">10.25</span></span><br></pre></td></tr></table></figure>

<h3 id="Ubuntu-apt-get命令安装"><a href="#Ubuntu-apt-get命令安装" class="headerlink" title="Ubuntu apt-get命令安装"></a>Ubuntu apt-get命令安装</h3><p>命令格式如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nodejs</span><br><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure>

<h3 id="CentOS-下源码安装-Node-js"><a href="#CentOS-下源码安装-Node-js" class="headerlink" title="CentOS 下源码安装 Node.js"></a>CentOS 下源码安装 Node.js</h3><p>1、下载源码，你需要在<a href="https://nodejs.org/en/download/">node官网</a>下载最新的Nodejs版本，本文以v0.10.24为例:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cd /usr/local/<span class="attribute">src</span>/</span><br><span class="line">wget http://nodejs.org/dist/v0.<span class="number">10.24</span>/node-v0.<span class="number">10.24</span>.tar.gz</span><br></pre></td></tr></table></figure>

<p>2、解压源码</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">tar zxvf node-v0.<span class="number">10.24</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure>

<p>3、 编译安装</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cd node-v0.<span class="number">10.24</span></span><br><span class="line">./configure --prefix=/usr/local/node/<span class="number">0.10</span>.<span class="number">24</span></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>4、 配置NODE_HOME，进入profile编辑环境变量</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>

<p>设置 nodejs 环境变量，在 <code>export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL</code> 一行的上面添加如下内容:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#set</span> for nodejs</span><br><span class="line">export NODE_HOME=/usr/local/node/<span class="number">0.10</span>.<span class="number">24</span></span><br><span class="line">export PATH=$NODE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>

<p><code>:wq</code>保存并退出，编译<code>/etc/profile</code> 使配置生效</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<p>验证是否安装配置成功</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure>

<p>输出 v0.10.24 表示配置成功</p>
<p>npm模块安装路径</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">/usr/local/node/<span class="number">0.10</span>.<span class="number">24</span>/lib/node_modules/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：Nodejs 官网提供了编译好的 Linux 二进制包，你也可以下载下来直接应用。</p>
</blockquote>
<h2 id="Mac-OS-上安装"><a href="#Mac-OS-上安装" class="headerlink" title="Mac OS 上安装"></a>Mac OS 上安装</h2><p>你可以通过以下两种方式在 Mac OS 上来安装 node：</p>
<ul>
<li><p>1、在<a href="https://nodejs.org/en/download/">官方下载网站</a>下载 pkg 安装包，直接点击安装即可。</p>
</li>
<li><p>2、使用</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">brew</span><br></pre></td></tr></table></figure>

<p>命令来安装</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="Node-js-创建第一个应用"><a href="#Node-js-创建第一个应用" class="headerlink" title="Node.js 创建第一个应用"></a>Node.js 创建第一个应用</h1><p>使用 Node.js 时，我们不仅仅 在实现一个应用，同时还实现了整个 HTTP 服务器。事实上，我们的 Web 应用以及对应的 Web 服务器基本上是一样的。</p>
<p>在我们创建 Node.js 第一个 “Hello, World!” 应用前，让我们先了解下 Node.js 应用是由哪几部分组成的：</p>
<ol>
<li><strong>引入 required 模块：</strong>我们可以使用 <strong>require</strong> 指令来载入 Node.js 模块。</li>
<li><strong>创建服务器：</strong>服务器可以监听客户端的请求，类似于 Apache 、Nginx 等 HTTP 服务器。</li>
<li><strong>接收请求与响应请求</strong> 服务器很容易创建，客户端可以使用浏览器或终端发送 HTTP 请求，服务器接收请求后返回响应数据。</li>
</ol>
<h2 id="创建-Node-js-应用"><a href="#创建-Node-js-应用" class="headerlink" title="创建 Node.js 应用"></a>创建 Node.js 应用</h2><h3 id="步骤一、引入-required-模块"><a href="#步骤一、引入-required-模块" class="headerlink" title="步骤一、引入 required 模块"></a>步骤一、引入 required 模块</h3><p>我们使用 <strong>require</strong> 指令来载入 <code>http</code> 模块，并将实例化的 <code>HTTP</code> 赋值给变量 <code>http</code>，实例如下:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">const http = require(&quot;http&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="步骤二、创建服务器"><a href="#步骤二、创建服务器" class="headerlink" title="步骤二、创建服务器"></a>步骤二、创建服务器</h3><p>接下来我们使用 <code>http.createServer()</code> 方法创建服务器，并使用 <code>listen</code> 方法绑定 8888 端口。 函数通过 <code>request</code>, <code>response</code> 参数来接收和响应数据。</p>
<p>实例如下，在你项目的根目录下创建一个叫 server.js 的文件，并写入以下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送 HTTP 头部 </span></span><br><span class="line">    <span class="comment">// HTTP 状态值: 200 : OK</span></span><br><span class="line">    <span class="comment">// 内容类型: text/plain</span></span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送响应数据 &quot;Hello World&quot;</span></span><br><span class="line">    response.end(<span class="string">&#x27;Hello World\n&#x27;</span>);</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 终端打印如下信息</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Server running at http://127.0.0.1:8888/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码我们完成了一个可以工作的 HTTP 服务器。</p>
<p>使用 <strong>node</strong> 命令执行以上的代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node server.js</span><br><span class="line">Server running at http:<span class="comment">//127.0.0.1:8888/</span></span><br></pre></td></tr></table></figure>

<p>接下来，打开浏览器访问 <a href="http://127.0.0.1:8888/%EF%BC%8C%E4%BD%A0%E4%BC%9A%E7%9C%8B%E5%88%B0%E4%B8%80%E4%B8%AA%E5%86%99%E7%9D%80">http://127.0.0.1:8888/，你会看到一个写着</a> “Hello World”的网页。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="可以工作的 HTTP 服务器"></p>
<p><strong>分析Node.js 的 HTTP 服务器：</strong></p>
<ul>
<li>第一行请求（<code>require）Node.js</code> 自带的 <code>http</code> 模块，并且把它赋值给 <code>http</code> 变量。</li>
<li>接下来我们调用 <code>http</code> 模块提供的函数： <code>createServer</code> 。这个函数会返回 一个对象，这个对象有一个叫做 <code>listen</code> 的方法，这个方法有一个数值参数， 指定这个 <code>HTTP</code> 服务器监听的端口号。</li>
</ul>
<h1 id="Node-js-NPM的使用介绍"><a href="#Node-js-NPM的使用介绍" class="headerlink" title="Node.js NPM的使用介绍"></a>Node.js NPM的使用介绍</h1><p>NPM是随同NodeJS一起安装的包管理工具，能解决NodeJS代码部署上的很多问题，常见的使用场景有以下几种：</p>
<ul>
<li>允许用户从NPM服务器下载别人编写的第三方包到本地使用。</li>
<li>允许用户从NPM服务器下载并安装别人编写的命令行程序到本地使用。</li>
<li>允许用户将自己编写的包或命令行程序上传到NPM服务器供别人使用。</li>
</ul>
<p>由于新版的nodejs已经集成了npm，所以之前npm也一并安装好了。同样可以通过输入 <strong>“npm -v”</strong> 来测试是否成功安装。命令如下，出现版本提示表示安装成功:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node -v</span><br><span class="line">v12.<span class="number">14.0</span></span><br></pre></td></tr></table></figure>

<p>如果你安装的是旧版本的 npm，可以很容易得通过 npm 命令来升级，命令如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">sudo npm install npm -g</span><br><span class="line">/usr/local/bin/npm -&gt; /usr/local/lib/node_modules/npm/bin/npm-cli<span class="selector-class">.js</span></span><br><span class="line">npm<span class="keyword">@2</span>.14.2 /usr/local/lib/node_modules/npm</span><br></pre></td></tr></table></figure>

<p>如果是 Window 系统使用以下命令即可：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install npm -g</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用淘宝镜像的命令：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="使用-npm-命令安装模块"><a href="#使用-npm-命令安装模块" class="headerlink" title="使用 npm 命令安装模块"></a>使用 npm 命令安装模块</h2><p>npm 安装 Node.js 模块语法格式如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install &lt;Module Name&gt;</span><br></pre></td></tr></table></figure>

<p>以下实例，我们使用 <code>npm</code> 命令安装常用的 Node.js web框架模块 <strong>express</strong>:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install express</span><br></pre></td></tr></table></figure>

<p>安装好之后，<code>express</code> 包就放在了工程目录下的 <code>node_modules</code> 目录中，因此在代码中只需要通过 <code>require(&#39;express&#39;)</code> 的方式就好，无需指定第三方包路径。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="全局安装与本地安装"><a href="#全局安装与本地安装" class="headerlink" title="全局安装与本地安装"></a>全局安装与本地安装</h2><p>npm 的包安装分为本地安装（local）、全局安装（global）两种，从敲的命令行来看，差别只是有没有-g而已，比如</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install express          # 本地安装</span><br><span class="line">npm install express -g       # 全局安装</span><br></pre></td></tr></table></figure>

<p>如果出现以下错误：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm err! Error: connect ECONNREFUSED <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8087</span></span><br></pre></td></tr></table></figure>

<p>解决办法为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm config set proxy null</span><br></pre></td></tr></table></figure>

<h3 id="本地安装"><a href="#本地安装" class="headerlink" title="本地安装"></a>本地安装</h3><ul>
<li>\1. 将安装包放在 <code>./node_modules</code> 下（运行 <code>npm</code> 命令时所在的目录），如果没有 <code>node_modules</code> 目录，会在当前执行 <code>npm</code> 命令的目录下生成 <code>node_modules</code> 目录。</li>
<li>\2. 可以通过 <code>require()</code> 来引入本地安装的包。</li>
</ul>
<h3 id="全局安装"><a href="#全局安装" class="headerlink" title="全局安装"></a>全局安装</h3><ul>
<li>\1. 将安装包放在 <code>/usr/local</code> 下或者你 <code>node</code> 的安装目录。</li>
<li>\2. 可以直接在命令行里使用。</li>
</ul>
<p>如果你希望具备两者功能，则需要在两个地方安装它或使用 <strong>npm link</strong>。</p>
<p>接下来我们使用全局方式安装 <code>express</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install express -g</span><br><span class="line">+ express<span class="keyword">@4</span>.17.1</span><br><span class="line">added <span class="number">50</span> packages from <span class="number">37</span> contributors in <span class="number">9.624s</span></span><br></pre></td></tr></table></figure>

<h3 id="查看安装信息"><a href="#查看安装信息" class="headerlink" title="查看安装信息"></a>查看安装信息</h3><p>你可以使用以下命令来查看所有全局安装的模块：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm list -g</span><br><span class="line"></span><br><span class="line">+-- cnpm<span class="keyword">@6</span>.1.1</span><br><span class="line">| +-- auto-correct@<span class="number">1.0</span>.<span class="number">0</span></span><br><span class="line">| +-- bagpipe@<span class="number">0.3</span>.<span class="number">5</span></span><br><span class="line">| +-- colors@<span class="number">1.4</span>.<span class="number">0</span></span><br><span class="line">| +-- commander@<span class="number">2.10</span>.<span class="number">0</span></span><br><span class="line">| | `-- graceful-readlink@<span class="number">1.0</span>.<span class="number">1</span></span><br><span class="line">| +-- cross-spawn@<span class="number">0.2</span>.<span class="number">9</span></span><br><span class="line">| | `-- lru-cache@<span class="number">2.7</span>.<span class="number">3</span></span><br><span class="line">| +-- debug@<span class="number">2.6</span>.<span class="number">9</span></span><br><span class="line">| | `-- ms@<span class="number">2.0</span>.<span class="number">0</span></span><br><span class="line">| +-- giturl@<span class="number">1.0</span>.<span class="number">1</span></span><br><span class="line">| +-- ini@<span class="number">1.3</span>.<span class="number">5</span></span><br><span class="line">| +-- npm@<span class="number">6.13</span>.<span class="number">7</span></span><br><span class="line">| | +-- abbrev@<span class="number">1.1</span>.<span class="number">1</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>如果要查看某个模块的版本号，可以使用命令如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm list grunt</span><br><span class="line"></span><br><span class="line">projectName<span class="keyword">@projectVersion</span> /path/to/project/folder</span><br><span class="line">└── grunt@<span class="number">0.4</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="使用-package-json"><a href="#使用-package-json" class="headerlink" title="使用 package.json"></a>使用 package.json</h2><p>package.json 位于模块的目录下，用于定义包的属性。接下来让我们来看下 <code>express</code> 包的 <code>package.json</code> 文件，位于 <code>node_modules/express/package.json</code> 内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;_from&quot;</span>: <span class="string">&quot;express@^4.17.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_id&quot;</span>: <span class="string">&quot;express@4.17.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_inBundle&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;_integrity&quot;</span>: <span class="string">&quot;sha512-mHJ9O79RqluphRrcw2X/GTh3k9tVv8YcoyY4Kkh4WDMUYKRZUq0h1o0w2rrrxBqM7VoeUVqgb27xlEMXTnYt4g==&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_location&quot;</span>: <span class="string">&quot;/express&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_phantomChildren&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;_requested&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;range&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;registry&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;raw&quot;</span>: <span class="string">&quot;express@^4.17.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;express&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;escapedName&quot;</span>: <span class="string">&quot;express&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;rawSpec&quot;</span>: <span class="string">&quot;^4.17.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;saveSpec&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;fetchSpec&quot;</span>: <span class="string">&quot;^4.17.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;_requiredBy&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;/webpack-dev-server&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;_resolved&quot;</span>: <span class="string">&quot;https://registry.npmjs.org/express/-/express-4.17.1.tgz&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_shasum&quot;</span>: <span class="string">&quot;4491fc38605cf51f8629d39c2b5d026f98a4c134&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_spec&quot;</span>: <span class="string">&quot;express@^4.17.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;_where&quot;</span>: <span class="string">&quot;D:\\myProject\\ReduxDemo\\demo01\\node_modules\\webpack-dev-server&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;TJ Holowaychuk&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;tj@vision-media.ca&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;bugs&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://github.com/expressjs/express/issues&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;bundleDependencies&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;contributors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Aaron Heckmann&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;aaron.heckmann+github@gmail.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Ciaran Jessup&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;ciaranj@gmail.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Douglas Christopher Wilson&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;doug@somethingdoug.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Guillermo Rauch&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;rauchg@gmail.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Jonathan Ong&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;me@jongleberry.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Roman Shtylman&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;shtylman+expressjs@gmail.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Young Jae Sim&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;hanul@hanul.me&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;accepts&quot;</span>: <span class="string">&quot;~1.3.7&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;array-flatten&quot;</span>: <span class="string">&quot;1.1.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body-parser&quot;</span>: <span class="string">&quot;1.19.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;content-disposition&quot;</span>: <span class="string">&quot;0.5.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;content-type&quot;</span>: <span class="string">&quot;~1.0.4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cookie&quot;</span>: <span class="string">&quot;0.4.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cookie-signature&quot;</span>: <span class="string">&quot;1.0.6&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;debug&quot;</span>: <span class="string">&quot;2.6.9&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;depd&quot;</span>: <span class="string">&quot;~1.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;encodeurl&quot;</span>: <span class="string">&quot;~1.0.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;escape-html&quot;</span>: <span class="string">&quot;~1.0.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;etag&quot;</span>: <span class="string">&quot;~1.8.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;finalhandler&quot;</span>: <span class="string">&quot;~1.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;fresh&quot;</span>: <span class="string">&quot;0.5.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;merge-descriptors&quot;</span>: <span class="string">&quot;1.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;methods&quot;</span>: <span class="string">&quot;~1.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;on-finished&quot;</span>: <span class="string">&quot;~2.3.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;parseurl&quot;</span>: <span class="string">&quot;~1.3.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;path-to-regexp&quot;</span>: <span class="string">&quot;0.1.7&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;proxy-addr&quot;</span>: <span class="string">&quot;~2.0.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qs&quot;</span>: <span class="string">&quot;6.7.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;range-parser&quot;</span>: <span class="string">&quot;~1.2.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;safe-buffer&quot;</span>: <span class="string">&quot;5.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;send&quot;</span>: <span class="string">&quot;0.17.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;serve-static&quot;</span>: <span class="string">&quot;1.14.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;setprototypeof&quot;</span>: <span class="string">&quot;1.1.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;statuses&quot;</span>: <span class="string">&quot;~1.5.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;type-is&quot;</span>: <span class="string">&quot;~1.6.18&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;utils-merge&quot;</span>: <span class="string">&quot;1.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;vary&quot;</span>: <span class="string">&quot;~1.1.2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;deprecated&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Fast, unopinionated, minimalist web framework&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;after&quot;</span>: <span class="string">&quot;0.8.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;connect-redis&quot;</span>: <span class="string">&quot;3.4.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cookie-parser&quot;</span>: <span class="string">&quot;~1.4.4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cookie-session&quot;</span>: <span class="string">&quot;1.3.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;ejs&quot;</span>: <span class="string">&quot;2.6.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;eslint&quot;</span>: <span class="string">&quot;2.13.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;express-session&quot;</span>: <span class="string">&quot;1.16.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hbs&quot;</span>: <span class="string">&quot;4.0.4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;istanbul&quot;</span>: <span class="string">&quot;0.4.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;marked&quot;</span>: <span class="string">&quot;0.6.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;method-override&quot;</span>: <span class="string">&quot;3.0.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;mocha&quot;</span>: <span class="string">&quot;5.2.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;morgan&quot;</span>: <span class="string">&quot;1.9.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;multiparty&quot;</span>: <span class="string">&quot;4.2.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;pbkdf2-password&quot;</span>: <span class="string">&quot;1.2.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;should&quot;</span>: <span class="string">&quot;13.2.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;supertest&quot;</span>: <span class="string">&quot;3.3.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;vhost&quot;</span>: <span class="string">&quot;~3.0.2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;engines&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;node&quot;</span>: <span class="string">&quot;&gt;= 0.10.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;files&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;LICENSE&quot;</span>,</span><br><span class="line">    <span class="string">&quot;History.md&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Readme.md&quot;</span>,</span><br><span class="line">    <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;lib/&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;homepage&quot;</span>: <span class="string">&quot;http://expressjs.com/&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;express&quot;</span>,</span><br><span class="line">    <span class="string">&quot;framework&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sinatra&quot;</span>,</span><br><span class="line">    <span class="string">&quot;web&quot;</span>,</span><br><span class="line">    <span class="string">&quot;rest&quot;</span>,</span><br><span class="line">    <span class="string">&quot;restful&quot;</span>,</span><br><span class="line">    <span class="string">&quot;router&quot;</span>,</span><br><span class="line">    <span class="string">&quot;app&quot;</span>,</span><br><span class="line">    <span class="string">&quot;api&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;express&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;repository&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;git&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;git+https://github.com/expressjs/express.git&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;lint&quot;</span>: <span class="string">&quot;eslint .&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;mocha --require test/support/env --reporter spec --bail --check-leaks test/ test/acceptance/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test-ci&quot;</span>: <span class="string">&quot;istanbul cover node_modules/mocha/bin/_mocha --report lcovonly -- --require test/support/env --reporter spec --check-leaks test/ test/acceptance/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test-cov&quot;</span>: <span class="string">&quot;istanbul cover node_modules/mocha/bin/_mocha -- --require test/support/env --reporter dot --check-leaks test/ test/acceptance/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test-tap&quot;</span>: <span class="string">&quot;mocha --require test/support/env --reporter tap --check-leaks test/ test/acceptance/&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;4.17.1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Package-json-属性说明"><a href="#Package-json-属性说明" class="headerlink" title="Package.json 属性说明"></a>Package.json 属性说明</h3><ul>
<li><strong>name</strong> – 包名。</li>
<li><strong>version</strong> – 包的版本号。</li>
<li><strong>description</strong> – 包的描述。</li>
<li><strong>homepage</strong> – 包的官网 url 。</li>
<li><strong>author</strong> – 包的作者姓名。</li>
<li><strong>contributors</strong> – 包的其他贡献者姓名。</li>
<li><strong>dependencies</strong> – 依赖包列表。如果依赖包没有安装，<code>npm</code> 会自动将依赖包安装在 <code>node_module</code> 目录下。</li>
<li><strong>repository</strong> – 包代码存放的地方的类型，可以是 <code>git</code> 或 <code>svn</code>，<code>git</code> 可在 <code>Github</code> 上。</li>
<li><strong>main</strong> – main 字段指定了程序的主入口文件，<code>require(&#39;moduleName&#39;)</code> 就会加载这个文件。这个字段的默认值是模块根目录下面的 index.js。</li>
<li><strong>keywords</strong> – 关键字</li>
</ul>
<h2 id="卸载模块"><a href="#卸载模块" class="headerlink" title="卸载模块"></a>卸载模块</h2><p>我们可以使用以下命令来卸载 Node.js 模块。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm uninstall express</span><br></pre></td></tr></table></figure>

<p>卸载后，你可以到 <code>/node_modules/</code> 目录下查看包是否还存在，或者使用以下命令查看：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm ls</span><br></pre></td></tr></table></figure>

<h2 id="更新模块"><a href="#更新模块" class="headerlink" title="更新模块"></a>更新模块</h2><p>我们可以使用以下命令更新模块：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm update express</span><br></pre></td></tr></table></figure>

<h2 id="搜索模块"><a href="#搜索模块" class="headerlink" title="搜索模块"></a>搜索模块</h2><p>使用以下来搜索模块：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm search express</span><br></pre></td></tr></table></figure>

<h2 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h2><p>创建模块，package.json 文件是必不可少的。我们可以使用 NPM 生成 package.json 文件，生成的文件包含了基本的结果。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See `npm help json` for definitive documentation on these fields</span><br><span class="line">and exactly what they do.</span><br><span class="line"></span><br><span class="line">Use `npm install  --save` afterwards to install a package and</span><br><span class="line">save it as a dependency in the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">name: (node_modules) mybj                   # 模块名</span><br><span class="line">version: (<span class="number">1.0</span><span class="number">.0</span>) </span><br><span class="line">description: Node.js 测试模块(www.mybj123.com)  # 描述</span><br><span class="line">entry point: (index.js) </span><br><span class="line">test command: make test</span><br><span class="line">git repository: https:<span class="comment">//github.com/mybj/mybj.git  # Github 地址</span></span><br><span class="line">keywords: </span><br><span class="line">author: </span><br><span class="line">license: (ISC) </span><br><span class="line">About to write to ……/node_modules/package.json:      # 生成地址</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;mybj&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Node.js 测试模块(www.mybj123.com)&quot;</span>,</span><br><span class="line">  ……</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is this ok? (yes) yes</span><br></pre></td></tr></table></figure>

<p>以上的信息，你需要根据你自己的情况输入。在最后输入 “yes” 后会生成 package.json 文件。</p>
<p>接下来我们可以使用以下命令在 npm 资源库中注册用户（使用邮箱注册）：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm adduser</span><br><span class="line">Username: mybj</span><br><span class="line">Password:</span><br><span class="line">Email: (this IS public) mybj@gmail.com</span><br></pre></td></tr></table></figure>

<p>接下来我们就用以下命令来发布模块：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>如果你以上的步骤都操作正确，你就可以跟其他模块一样使用 npm 来安装。</p>
<h2 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h2><p>使用NPM下载和发布代码时都会接触到版本号。NPM使用语义版本号来管理代码，这里简单介绍一下。</p>
<p>语义版本号分为X.Y.Z三位，分别代表主版本号、次版本号和补丁版本号。当代码变更时，版本号按以下原则更新。</p>
<ul>
<li>如果只是修复bug，需要更新Z位。</li>
<li>如果是新增了功能，但是向下兼容，需要更新Y位。</li>
<li>如果有大变动，向下不兼容，需要更新X位。</li>
</ul>
<p>版本号有了这个保证后，在申明第三方包依赖时，除了可依赖于一个固定版本号外，还可依赖于某个范围的版本号。例如”argv”: “0.0.x”表示依赖于0.0.x系列的最新版argv。</p>
<h2 id="NPM-常用命令"><a href="#NPM-常用命令" class="headerlink" title="NPM 常用命令"></a>NPM 常用命令</h2><p>除了本章介绍的部分外，NPM还提供了很多功能，package.json里也有很多其它有用的字段。</p>
<p>除了可以在<a href="https://npmjs.org/doc/">npmjs.org/doc/</a>查看官方文档外，这里再介绍一些NPM常用命令。</p>
<p>NPM提供了很多命令，例如install和publish，使用npm help可查看所有命令。</p>
<ul>
<li>NPM提供了很多命令，例如<code>install</code>和<code>publish</code>，使用<code>npm help</code>可查看所有命令。</li>
<li>使用<code>npm help &lt;command&gt;</code>可查看某条命令的详细帮助，例如<code>npm help install</code>。</li>
<li>在<code>package.json</code>所在目录下使用<code>npm install . -g</code>可先在本地安装当前命令行程序，可用于发布前的本地测试。</li>
<li>使用<code>npm update &lt;package&gt;</code>可以把当前目录下<code>node_modules</code>子目录里边的对应模块更新至最新版本。</li>
<li>使用<code>npm update &lt;package&gt; -g</code>可以把全局安装的对应命令行程序更新至最新版。</li>
<li>使用<code>npm cache clear</code>可以清空NPM本地缓存，用于对付使用相同版本号发布新版本代码的人。</li>
<li>使用<code>npm unpublish &lt;package&gt;@&lt;version&gt;</code>可以撤销发布自己发布过的某个版本代码。</li>
</ul>
<h2 id="使用淘宝-NPM-镜像"><a href="#使用淘宝-NPM-镜像" class="headerlink" title="使用淘宝 NPM 镜像"></a>使用淘宝 NPM 镜像</h2><p>大家都知道国内直接使用 npm 的官方镜像是非常慢的，这里推荐使用淘宝 NPM 镜像。</p>
<p>淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。</p>
<p>你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>这样就可以使用 cnpm 命令来安装模块了：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cnpm install <span class="selector-attr">[name]</span></span><br></pre></td></tr></table></figure>

<h1 id="Node-js-REPL交互式解释器"><a href="#Node-js-REPL交互式解释器" class="headerlink" title="Node.js REPL交互式解释器"></a>Node.js REPL交互式解释器</h1><p>Node.js REPL(Read Eval Print Loop:交互式解释器) 表示一个电脑的环境，类似 Window 系统的终端或 Unix/Linux shell，我们可以在终端中输入命令，并接收系统的响应。</p>
<p>Node 自带了交互式解释器，可以执行以下任务：</p>
<ul>
<li><strong>读取</strong> – 读取用户输入，解析输入的 Javascript 数据结构并存储在内存中。</li>
<li><strong>执行</strong> – 执行输入的数据结构</li>
<li><strong>打印</strong> – 输出结果</li>
<li><strong>循环</strong> – 循环操作以上步骤直到用户两次按下 <strong>ctrl-c</strong> 按钮退出。</li>
</ul>
<p>Node 的交互式解释器可以很好的调试 Javascript 代码。</p>
<p>开始学习 REPL</p>
<p>我们可以输入<code>node</code>命令来启动 Node 的终端：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="输入node命令来启动 Node 的终端"></p>
<p>这时我们就可以在 &gt; 后输入简单的表达式，并按下回车键来计算结果。</p>
<h3 id="简单的表达式运算"><a href="#简单的表达式运算" class="headerlink" title="简单的表达式运算"></a>简单的表达式运算</h3><p>接下来让我们在 Node.js REPL 的命令行窗口中执行简单的数学运算：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node</span><br><span class="line">&gt; <span class="number">1</span> +<span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">&gt; <span class="number">5</span> / <span class="number">2</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line">&gt; <span class="number">3</span> * <span class="number">6</span></span><br><span class="line"><span class="number">18</span></span><br><span class="line">&gt; <span class="number">4</span> - <span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt; <span class="number">1</span> + ( <span class="number">2</span> * <span class="number">3</span> ) - <span class="number">4</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h3 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h3><p>你可以将数据存储在变量中，并在你需要的时候使用它。</p>
<p>变量声明需要使用 <strong>var</strong> 关键字，如果没有使用 <code>var</code> 关键字变量会直接打印出来。</p>
<p>使用 <strong>var</strong> 关键字的变量可以使用 <code>console.log()</code> 来输出变量。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node</span><br><span class="line">&gt; x = <span class="number">10</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">&gt; <span class="selector-tag">var</span> y = <span class="number">10</span></span><br><span class="line">undefined</span><br><span class="line">&gt; x + y</span><br><span class="line"><span class="number">20</span></span><br><span class="line">&gt; console<span class="selector-class">.log</span>(&quot;Hello World&quot;)</span><br><span class="line">Hello World</span><br><span class="line">undefined</span><br><span class="line">&gt; console<span class="selector-class">.log</span>(&quot;www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span>&quot;)</span><br><span class="line">www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br><span class="line">undefined</span><br></pre></td></tr></table></figure>

<h3 id="多行表达式"><a href="#多行表达式" class="headerlink" title="多行表达式"></a>多行表达式</h3><p>Node REPL 支持输入多行表达式，这就有点类似 JavaScript。接下来让我们来执行一个 do…while 循环：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node</span><br><span class="line">&gt; <span class="selector-tag">var</span> x = <span class="number">0</span></span><br><span class="line">undefined</span><br><span class="line">&gt; do &#123;</span><br><span class="line">... x++;</span><br><span class="line">... console<span class="selector-class">.log</span>(&quot;x: <span class="string">&quot; + x);</span></span><br><span class="line"><span class="string">... &#125; while ( x &lt; 5 ); x: 1 x: 2 x: 3 x: 4 x: 5 undefined &gt;</span></span><br></pre></td></tr></table></figure>

<p><code>...</code> 三个点的符号是系统自动生成的，你回车换行后即可。Node 会自动检测是否为连续的表达式。</p>
<h3 id="下划线-变量"><a href="#下划线-变量" class="headerlink" title="下划线(_)变量"></a>下划线(_)变量</h3><p>你可以使用下划线( _ )获取上一个表达式的运算结果：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node</span><br><span class="line">&gt; <span class="selector-tag">var</span> x = <span class="number">10</span></span><br><span class="line">undefined</span><br><span class="line">&gt; <span class="selector-tag">var</span> y = <span class="number">20</span></span><br><span class="line">undefined</span><br><span class="line">&gt; x + y</span><br><span class="line"><span class="number">30</span></span><br><span class="line">&gt; <span class="selector-tag">var</span> sum = _</span><br><span class="line">undefined</span><br><span class="line">&gt; console<span class="selector-class">.log</span>(sum)</span><br><span class="line"><span class="number">30</span></span><br><span class="line">undefined</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h2 id="REPL-命令"><a href="#REPL-命令" class="headerlink" title="REPL 命令"></a>REPL 命令</h2><ul>
<li><strong>ctrl + c</strong> – 退出当前终端。</li>
<li><strong>ctrl + c 按下两次</strong> – 退出 Node REPL。</li>
<li><strong>ctrl + d</strong> – 退出 Node REPL.</li>
<li><strong>向上/向下 键</strong> – 查看输入的历史命令</li>
<li><strong>tab 键</strong> – 列出当前命令</li>
<li><strong>.help</strong> – 列出使用命令</li>
<li><strong>.break</strong> – 退出多行表达式</li>
<li><strong>.clear</strong> – 退出多行表达式</li>
<li><strong>.save *filename*</strong> – 保存当前的 Node REPL 会话到指定文件</li>
<li><strong>.load *filename*</strong> – 载入当前 Node REPL 会话的文件内容。</li>
</ul>
<h2 id="停止-REPL"><a href="#停止-REPL" class="headerlink" title="停止 REPL"></a>停止 REPL</h2><p>前面我们已经提到按下两次 <strong>ctrl + c</strong> 键就能退出 REPL:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node</span><br><span class="line">Welcome <span class="selector-tag">to</span> Node<span class="selector-class">.js</span> v12.<span class="number">14.0</span>.</span><br><span class="line">Type &quot;<span class="selector-class">.help</span>&quot; for more information.</span><br><span class="line">&gt;</span><br><span class="line">(<span class="selector-tag">To</span> exit, press ^C again or ^D or type <span class="selector-class">.exit</span>)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-回调函数"><a href="#Node-js-回调函数" class="headerlink" title="Node.js 回调函数"></a>Node.js 回调函数</h1><p>Node.js 异步编程的直接体现就是回调。</p>
<p>异步编程依托于回调来实现，但不能说使用了回调后程序就异步化了。</p>
<p>回调函数在完成任务后就会被调用，Node 使用了大量的回调函数，Node 所有 API 都支持回调函数。</p>
<p>例如，我们可以一边读取文件，一边执行其他命令，在文件读取完成后，我们将文件内容作为回调函数的参数返回。这样在执行代码时就没有阻塞或等待文件 I/O 操作。这就大大提高了 Node.js 的性能，可以处理大量的并发请求。</p>
<p>回调函数一般作为函数的最后一个参数出现：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span>(<span class="params">name, age, callback</span>) </span>&#123; &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span>(<span class="params">value, callback1, callback2</span>) </span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="阻塞代码实例"><a href="#阻塞代码实例" class="headerlink" title="阻塞代码实例"></a>阻塞代码实例</h2><p>创建一个文件 input.txt ，内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<p>创建 main.js 文件, 代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(data.toString());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行结束!&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span></span><br><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br><span class="line">程序执行结束!</span><br></pre></td></tr></table></figure>

<h2 id="非阻塞代码实例"><a href="#非阻塞代码实例" class="headerlink" title="非阻塞代码实例"></a>非阻塞代码实例</h2><p>创建一个文件 input.txt ，内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.comcss</span></span><br></pre></td></tr></table></figure>

<p>创建 main.js 文件, 代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;input.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行结束!&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span></span><br><span class="line">程序执行结束!</span><br><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<p>以上两个实例我们了解了阻塞与非阻塞调用的不同。第一个实例在文件读取完后才执行程序。 第二个实例我们不需要等待文件读取完，这样就可以在读取文件时同时执行接下来的代码，大大提高了程序的性能。</p>
<p>因此，阻塞是按顺序执行的，而非阻塞是不需要按顺序的，所以如果需要处理回调函数的参数，我们就需要写在回调函数内。</p>
<h1 id="Node-js-事件循环机制"><a href="#Node-js-事件循环机制" class="headerlink" title="Node.js 事件循环机制"></a>Node.js 事件循环机制</h1><p>Node.js 是单进程单线程应用程序，但是因为 V8 引擎提供的异步执行回调接口，通过这些接口可以处理大量的并发，所以性能非常高。</p>
<p>Node.js 几乎每一个 API 都是支持回调函数的。</p>
<p>Node.js 基本上所有的事件机制都是用设计模式中观察者模式实现。</p>
<p>Node.js 单线程类似进入一个<code>while(true)</code>的事件循环，直到没有事件观察者退出，每个异步事件都生成一个事件观察者，如果有事件发生就调用该回调函数.</p>
<h2 id="事件驱动程序"><a href="#事件驱动程序" class="headerlink" title="事件驱动程序"></a>事件驱动程序</h2><p>Node.js 使用事件驱动模型，当<code>web server</code>接收到请求，就把它关闭然后进行处理，然后去服务下一个web请求。</p>
<p>当这个请求完成，它被放回处理队列，当到达队列开头，这个结果被返回给用户。</p>
<p>这个模型非常高效可扩展性非常强，因为 <code>webserver</code> 一直接受请求而不等待任何读写操作。（这也称之为非阻塞式IO或者事件驱动IO）</p>
<p>在事件驱动模型中，会生成一个主循环来监听事件，当检测到事件时触发回调函数。</p>
<p>整个事件驱动的流程就是这么实现的，非常简洁。有点类似于观察者模式，事件相当于一个主题(Subject)，而所有注册到这个事件上的处理函数相当于观察者(Observer)。</p>
<p>Node.js 有多个内置的事件，我们可以通过引入 events 模块，并通过实例化 EventEmitter 类来绑定和监听事件，如下实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入 events 模块</span></span><br><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建 eventEmitter 对象</span></span><br><span class="line"><span class="keyword">const</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br></pre></td></tr></table></figure>

<p>以下程序绑定事件处理程序：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绑定事件及事件的处理程序</span></span><br><span class="line">eventEmitter.on(<span class="string">&#x27;eventName&#x27;</span>, eventHandler);</span><br></pre></td></tr></table></figure>

<p>我们可以通过程序触发事件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 触发事件</span></span><br><span class="line">eventEmitter.emit(<span class="string">&#x27;eventName&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>创建 main.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入 events 模块</span></span><br><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建 eventEmitter 对象</span></span><br><span class="line"><span class="keyword">const</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建事件处理程序</span></span><br><span class="line"><span class="keyword">const</span> connectHandler = <span class="function"><span class="keyword">function</span> <span class="title">connected</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;连接成功。&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">   <span class="comment">// 触发 data_received 事件 </span></span><br><span class="line">   eventEmitter.emit(<span class="string">&#x27;data_received&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 绑定 connection 事件处理程序</span></span><br><span class="line">eventEmitter.on(<span class="string">&#x27;connection&#x27;</span>, connectHandler);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用匿名函数绑定 data_received 事件</span></span><br><span class="line">eventEmitter.on(<span class="string">&#x27;data_received&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;数据接收成功。&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 触发 connection 事件 </span></span><br><span class="line">eventEmitter.emit(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕。&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>接下来让我们执行以上代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span></span><br><span class="line">连接成功。</span><br><span class="line">数据接收成功。</span><br><span class="line">程序执行完毕。</span><br></pre></td></tr></table></figure>

<h2 id="Node-应用程序是如何工作的？"><a href="#Node-应用程序是如何工作的？" class="headerlink" title="Node 应用程序是如何工作的？"></a>Node 应用程序是如何工作的？</h2><p>在 Node 应用程序中，执行异步操作的函数将回调函数作为最后一个参数， 回调函数接收错误对象作为第一个参数。</p>
<p>接下来让我们来重新看下前面的实例，创建一个 input.txt ,文件内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<p>创建 main.js 文件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;input.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err.stack);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上程序中 <code>fs.readFile()</code> 是异步函数用于读取文件。 如果在读取文件过程中发生错误，错误 <code>err</code> 对象就会输出错误信息。</p>
<p>如果没发生错误，<code>readFile</code> 跳过 <code>err</code> 对象的输出，文件内容就通过回调函数输出。</p>
<p>执行以上代码，执行结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">程序执行完毕</span><br><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<p>接下来我们删除 input.txt 文件，执行结果如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">程序执行完毕\</span><br><span class="line">Error: ENOENT: no such file or directory, open <span class="string">&#x27;D:\myProject\testComet\input.txt&#x27;</span></span><br></pre></td></tr></table></figure>

<p>因为文件 input.txt 不存在，所以输出了错误信息。</p>
<h1 id="Node-js-EventEmitter类"><a href="#Node-js-EventEmitter类" class="headerlink" title="Node.js EventEmitter类"></a>Node.js EventEmitter类</h1><p>Node.js 所有的异步 I/O 操作在完成时都会发送一个事件到事件队列。</p>
<p>Node.js 里面的许多对象都会分发事件：一个 <code>net.Server</code> 对象会在每次有新连接时触发一个事件， 一个 <code>fs.readStream</code> 对象会在文件被打开的时候触发一个事件。 所有这些产生事件的对象都是 <code>events.EventEmitter</code> 的实例。</p>
<h2 id="EventEmitter-类"><a href="#EventEmitter-类" class="headerlink" title="EventEmitter 类"></a>EventEmitter 类</h2><p><code>events</code> 模块只提供了一个对象： <code>events.EventEmitter</code>。<code>EventEmitter</code> 的核心就是事件触发与事件监听器功能的封装。</p>
<p>你可以通过<code>require(&quot;events&quot;);</code>来访问该模块。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入 events 模块</span></span><br><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建 eventEmitter 对象</span></span><br><span class="line"><span class="keyword">const</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br></pre></td></tr></table></figure>

<p>EventEmitter 对象如果在实例化时发生错误，会触发 error 事件。当添加新的监听器时，newListener 事件会触发，当监听器被移除时，<code>removeListener</code> 事件被触发。</p>
<p>下面我们用一个简单的例子说明 <code>EventEmitter</code> 的用法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//event.js 文件</span></span><br><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>).EventEmitter; </span><br><span class="line"><span class="keyword">const</span> event = <span class="keyword">new</span> EventEmitter(); </span><br><span class="line">event.on(<span class="string">&#x27;some_event&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;some_event 事件触发&#x27;</span>); </span><br><span class="line">&#125;); </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    event.emit(<span class="string">&#x27;some_event&#x27;</span>); </span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<p>运行这段代码，1 秒后控制台输出了 <strong>‘some_event 事件触发’</strong>。其原理是 <code>event</code> 对象注册了事件 <code>some_event</code> 的一个监听器，然后我们通过 <code>setTimeout</code> 在 1000 毫秒以后向 <code>event</code> 对象发送事件 <code>some_event</code>，此时会调用<code>some_event</code> 的监听器。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node event<span class="selector-class">.js</span> </span><br><span class="line">some_event 事件触发</span><br></pre></td></tr></table></figure>

<p>EventEmitter 的每个事件由一个事件名和若干个参数组成，事件名是一个字符串，通常表达一定的语义。对于每个事件，EventEmitter 支持 若干个事件监听器。</p>
<p>当事件触发时，注册到这个事件的事件监听器被依次调用，事件参数作为回调函数参数传递。</p>
<p>让我们以下面的例子解释这个过程：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//event.js 文件</span></span><br><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>); </span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> events.EventEmitter(); </span><br><span class="line">emitter.on(<span class="string">&#x27;someEvent&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">arg1, arg2</span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;listener1&#x27;</span>, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.on(<span class="string">&#x27;someEvent&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">arg1, arg2</span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;listener2&#x27;</span>, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.emit(<span class="string">&#x27;someEvent&#x27;</span>, <span class="string">&#x27;arg1 参数&#x27;</span>, <span class="string">&#x27;arg2 参数&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>执行以上代码，运行的结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node event<span class="selector-class">.js</span> </span><br><span class="line">listener1 arg1 参数 arg2 参数</span><br><span class="line">listener2 arg1 参数 arg2 参数</span><br></pre></td></tr></table></figure>

<p>以上例子中，<code>emitter</code> 为事件 <code>someEvent</code> 注册了两个事件监听器，然后触发了 <code>someEvent</code> 事件。</p>
<p>运行结果中可以看到两个事件监听器回调函数被先后调用。 这就是EventEmitter最简单的用法。</p>
<p>EventEmitter 提供了多个属性，如 <strong>on</strong> 和 <strong>emit</strong>。<strong>on</strong> 函数用于绑定事件函数，<strong>emit</strong> 属性用于触发一个事件。接下来我们来具体看下 EventEmitter 的属性介绍。</p>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>addListener(event, listener)</strong> 为指定事件添加一个监听器到监听器数组的尾部。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>on(event, listener)</strong> 为指定事件注册一个监听器，接受一个字符串 event 和一个回调函数。<code>server.on(&#39;connection&#39;, function (stream) &#123;  console.log(&#39;someone connected!&#39;); &#125;);</code></td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>once(event, listener)</strong> 为指定事件注册一个单次监听器，即 监听器最多只会触发一次，触发后立刻解除该监听器。<code>server.once(&#39;connection&#39;, function (stream) &#123;  console.log(&#39;Ah, we have our first user!&#39;); &#125;);</code></td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>removeListener(event, listener)</strong> 移除指定事件的某个监听器，监听器必须是该事件已经注册过的监听器。它接受两个参数，第一个是事件名称，第二个是回调函数名称。<code>const callback = function(stream) &#123;  console.log(&#39;someone connected!&#39;); &#125;; server.on(&#39;connection&#39;, callback); // ... server.removeListener(&#39;connection&#39;, callback);</code></td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>removeAllListeners([event])</strong> 移除所有事件的所有监听器， 如果指定事件，则移除指定事件的所有监听器。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>setMaxListeners(n)</strong> 默认情况下， EventEmitters 如果你添加的监听器超过 10 个就会输出警告信息。 setMaxListeners 函数用于提高监听器的默认限制的数量。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>listeners(event)</strong> 返回指定事件的监听器数组。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>emit(event, [arg1], [arg2], […])</strong> 按监听器的顺序执行执行每个监听器，如果事件有注册监听返回 true，否则返回 false。</td>
</tr>
</tbody></table>
<h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>listenerCount(emitter, event)</strong> 返回指定事件的监听器数量。</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">events.EventEmitter.listenerCount(emitter, eventName) //已废弃，不推荐</span><br><span class="line">events.emitter.listenerCount(eventName) //推荐</span><br></pre></td></tr></table></figure>

<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">事件 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>newListener**</strong>event** – 字符串，事件名称<strong>listener</strong> – 处理事件函数该事件在添加新监听器时被触发。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>removeListener**</strong>event** – 字符串，事件名称<strong>listener</strong> – 处理事件函数从指定监听器数组中删除一个监听器。需要注意的是，此操作将会改变处于被删监听器之后的那些监听器的索引。</td>
</tr>
</tbody></table>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><p>以下实例通过 connection（连接）事件演示了 EventEmitter 类的应用。</p>
<p>创建 main.js 文件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听器 #1</span></span><br><span class="line"><span class="keyword">const</span> listener1 = <span class="function"><span class="keyword">function</span> <span class="title">listener1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;监听器 listener1 执行。&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听器 #2</span></span><br><span class="line"><span class="keyword">const</span> listener2 = <span class="function"><span class="keyword">function</span> <span class="title">listener2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;监听器 listener2 执行。&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定 connection 事件，处理函数为 listener1 </span></span><br><span class="line">eventEmitter.addListener(<span class="string">&#x27;connection&#x27;</span>, listener1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定 connection 事件，处理函数为 listener2</span></span><br><span class="line">eventEmitter.on(<span class="string">&#x27;connection&#x27;</span>, listener2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> eventListeners = eventEmitter.listenerCount(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(eventListeners + <span class="string">&quot; 个监听器监听连接事件。&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理 connection 事件 </span></span><br><span class="line">eventEmitter.emit(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除监绑定的 listener1 函数</span></span><br><span class="line">eventEmitter.removeListener(<span class="string">&#x27;connection&#x27;</span>, listener1);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;listener1 不再受监听。&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发连接事件</span></span><br><span class="line">eventEmitter.emit(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line">eventListeners = eventEmitter.listenerCount(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(eventListeners + <span class="string">&quot; 个监听器监听连接事件。&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕。&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码，执行结果如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span></span><br><span class="line"><span class="number">2</span> 个监听器监听连接事件。</span><br><span class="line">监听器 listener1 执行。</span><br><span class="line">监听器 listener2 执行。</span><br><span class="line">listener1 不再受监听。</span><br><span class="line">监听器 listener2 执行。</span><br><span class="line"><span class="number">1</span> 个监听器监听连接事件。</span><br><span class="line">程序执行完毕。</span><br></pre></td></tr></table></figure>

<h2 id="error-事件"><a href="#error-事件" class="headerlink" title="error 事件"></a>error 事件</h2><p>EventEmitter 定义了一个特殊的事件 <code>error</code>，它包含了错误的语义，我们在遇到 异常的时候通常会触发 error 事件。</p>
<p>当 <code>error</code> 被触发时，EventEmitter 规定如果没有响 应的监听器，Node.js 会把它当作异常，退出程序并输出错误信息。</p>
<p>我们一般要为会触发 error 事件的对象设置监听器，避免遇到错误后整个程序崩溃。例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>); </span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> events.EventEmitter(); </span><br><span class="line">emitter.emit(<span class="string">&#x27;error&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>运行时会显示以下错误：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">events<span class="selector-class">.js</span>:<span class="number">201</span></span><br><span class="line">    throw err; // Unhandled &#x27;error&#x27; event</span><br><span class="line">    ^</span><br><span class="line"></span><br><span class="line">Error <span class="selector-attr">[ERR_UNHANDLED_ERROR]</span>: Unhandled error. (undefined)</span><br><span class="line">[<span class="number">90</span>m    at EventEmitter.emit (events.js:<span class="number">199</span>:<span class="number">17</span>)[<span class="number">39</span>m</span><br><span class="line">    at Object. (D:\myProject\testComet\main.js:<span class="number">3</span>:<span class="number">9</span>)</span><br><span class="line">[<span class="number">90</span>m    at Module._compile (internal/modules/cjs/loader.js:<span class="number">959</span>:<span class="number">30</span>)[<span class="number">39</span>m</span><br><span class="line">[<span class="number">90</span>m    at Object.Module._extensions..js (internal/modules/cjs/loader.js:<span class="number">995</span>:<span class="number">10</span>)[<span class="number">39</span>m</span><br><span class="line">[<span class="number">90</span>m    at Module.load (internal/modules/cjs/loader.js:<span class="number">815</span>:<span class="number">32</span>)[<span class="number">39</span>m</span><br><span class="line">[<span class="number">90</span>m    at Function.Module._load (internal/modules/cjs/loader.js:<span class="number">727</span>:<span class="number">14</span>)[<span class="number">39</span>m</span><br><span class="line">[<span class="number">90</span>m    at Function.Module.runMain (internal/modules/cjs/loader.js:<span class="number">1047</span>:<span class="number">10</span>)[<span class="number">39</span>m</span><br><span class="line">[<span class="number">90</span>m    at internal/main/run_main_module.js:<span class="number">17</span>:<span class="number">11</span>[<span class="number">39</span>m &#123;</span><br><span class="line">  code: [<span class="number">32</span>m<span class="string">&#x27;ERR_UNHANDLED_ERROR&#x27;</span>[<span class="number">39</span>m,</span><br><span class="line">  context: [<span class="number">90</span>mundefined[<span class="number">39</span>m</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="继承-EventEmitter"><a href="#继承-EventEmitter" class="headerlink" title="继承 EventEmitter"></a>继承 EventEmitter</h2><p>大多数时候我们不会直接使用 EventEmitter，而是在对象中继承它。包括 fs、net、 http 在内的，只要是支持事件响应的核心模块都是 EventEmitter 的子类。</p>
<p>为什么要这样做呢？原因有两点：</p>
<p>首先，具有某个实体功能的对象实现事件符合语义， 事件的监听和发生应该是一个对象的方法。</p>
<p>其次 JavaScript 的对象机制是基于原型的，支持 部分多重继承，继承 EventEmitter 不会打乱对象原有的继承关系。</p>
<h1 id="Node-js-Buffer-缓冲区"><a href="#Node-js-Buffer-缓冲区" class="headerlink" title="Node.js Buffer(缓冲区)"></a>Node.js Buffer(缓冲区)</h1><p>JavaScript 语言自身只有字符串数据类型，没有二进制数据类型。</p>
<p>但在处理像TCP流或文件流时，必须使用到二进制数据。因此在 Node.js中，定义了一个 Buffer 类，该类用来创建一个专门存放二进制数据的缓存区。</p>
<p>在 Node.js 中，Buffer 类是随 Node 内核一起发布的核心库。Buffer 库为 Node.js 带来了一种存储原始数据的方法，可以让 Node.js 处理二进制数据，每当需要在 Node.js 中处理I/O操作中移动的数据时，就有可能使用 Buffer 库。原始数据存储在 Buffer 类的实例中。一个 Buffer 类似于一个整数数组，但它对应于 V8 堆内存之外的一块原始内存。</p>
<blockquote>
<p>v6.0之前创建Buffer对象直接使用<code>new Buffer()</code>构造函数来创建对象实例，但是Buffer对内存的权限操作相比很大，可以直接捕获一些敏感信息，所以在v6.0以后，官方文档里面建议使用 <code>Buffer.from()</code> 接口去创建Buffer对象。</p>
</blockquote>
<h2 id="Buffer-与字符编码"><a href="#Buffer-与字符编码" class="headerlink" title="Buffer 与字符编码"></a>Buffer 与字符编码</h2><p>Buffer 实例一般用于表示编码字符的序列，比如 UTF-8 、 UCS2 、 Base64 、或十六进制编码的数据。 通过使用显式的字符编码，就可以在 Buffer 实例与普通的 JavaScript 字符串之间进行相互转换。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = Buffer.from(<span class="string">&#x27;mybj&#x27;</span>, <span class="string">&#x27;ascii&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出 6d79626a</span></span><br><span class="line"><span class="built_in">console</span>.log(buf.toString(<span class="string">&#x27;hex&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出 bXliag==</span></span><br><span class="line"><span class="built_in">console</span>.log(buf.toString(<span class="string">&#x27;base64&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p><strong>Node.js 目前支持的字符编码包括：</strong></p>
<ul>
<li><strong>ascii</strong> – 仅支持 7 位 ASCII 数据。如果设置去掉高位的话，这种编码是非常快的。</li>
<li><strong>utf8</strong> – 多字节编码的 Unicode 字符。许多网页和其他文档格式都使用 UTF-8 。</li>
<li><strong>utf16le</strong> – 2 或 4 个字节，小字节序编码的 Unicode 字符。支持代理对（U+10000 至 U+10FFFF）。</li>
<li><strong>ucs2</strong> – <strong>utf16le</strong> 的别名。</li>
<li><strong>base64</strong> – Base64 编码。</li>
<li><strong>latin1</strong> – 一种把 <strong>Buffer</strong> 编码成一字节编码的字符串的方式。</li>
<li><strong>binary</strong> – <strong>latin1</strong> 的别名。</li>
<li><strong>hex</strong> – 将每个字节编码为两个十六进制字符。</li>
</ul>
<h2 id="创建-Buffer-类"><a href="#创建-Buffer-类" class="headerlink" title="创建 Buffer 类"></a>创建 Buffer 类</h2><p>Buffer 提供了以下 API 来创建 Buffer 类：</p>
<ul>
<li><strong>Buffer.alloc(size[, fill[, encoding]])：</strong> 返回一个指定大小的 Buffer 实例，如果没有设置 fill，则默认填满 0</li>
<li><strong>Buffer.allocUnsafe(size)：</strong> 返回一个指定大小的 Buffer 实例，但是它不会被初始化，所以它可能包含敏感的数据</li>
<li><strong>Buffer.allocUnsafeSlow(size)</strong></li>
<li><strong>Buffer.from(array)：</strong> 返回一个被 array 的值初始化的新的 Buffer 实例（传入的 array 的元素只能是数字，不然就会自动被 0 覆盖）</li>
<li><strong>Buffer.from(arrayBuffer[, byteOffset[, length]])：</strong> 返回一个新建的与给定的 ArrayBuffer 共享同一内存的 Buffer。</li>
<li><strong>Buffer.from(buffer)：</strong> 复制传入的 Buffer 实例的数据，并返回一个新的 Buffer 实例</li>
<li><strong>Buffer.from(string[, encoding])：</strong> 返回一个被 string 的值初始化的新的 Buffer 实例</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建一个长度为 10、且用 0 填充的 Buffer。</span></span><br><span class="line"><span class="keyword">const</span> buf1 = Buffer.alloc(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个长度为 10、且用 0x1 填充的 Buffer。 </span></span><br><span class="line"><span class="keyword">const</span> buf2 = Buffer.alloc(<span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个长度为 10、且未初始化的 Buffer。</span></span><br><span class="line"><span class="comment">// 这个方法比调用 Buffer.alloc() 更快，</span></span><br><span class="line"><span class="comment">// 但返回的 Buffer 实例可能包含旧数据，</span></span><br><span class="line"><span class="comment">// 因此需要使用 fill() 或 write() 重写。</span></span><br><span class="line"><span class="keyword">const</span> buf3 = Buffer.allocUnsafe(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个包含 [0x1, 0x2, 0x3] 的 Buffer。</span></span><br><span class="line"><span class="keyword">const</span> buf4 = Buffer.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个包含 UTF-8 字节 [0x74, 0xc3, 0xa9, 0x73, 0x74] 的 Buffer。</span></span><br><span class="line"><span class="keyword">const</span> buf5 = Buffer.from(<span class="string">&#x27;tést&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个包含 Latin-1 字节 [0x74, 0xe9, 0x73, 0x74] 的 Buffer。</span></span><br><span class="line"><span class="keyword">const</span> buf6 = Buffer.from(<span class="string">&#x27;tést&#x27;</span>, <span class="string">&#x27;latin1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="写入缓冲区"><a href="#写入缓冲区" class="headerlink" title="写入缓冲区"></a>写入缓冲区</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>写入 Node 缓冲区的语法如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">buf.write(string[, offset[, length]][, encoding])</span><br></pre></td></tr></table></figure>

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>参数描述如下：</p>
<ul>
<li><strong>string</strong> – 写入缓冲区的字符串。</li>
<li><strong>offset</strong> – 缓冲区开始写入的索引值，默认为 0 。</li>
<li><strong>length</strong> – 写入的字节数，默认为 buffer.length</li>
<li><strong>encoding</strong> – 使用的编码。默认为 ‘utf8’ 。</li>
</ul>
<p>根据 encoding 的字符编码写入 string 到 buf 中的 offset 位置。 length 参数是写入的字节数。 如果 buf 没有足够的空间保存整个字符串，则只会写入 string 的一部分。 只部分解码的字符不会被写入。</p>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>返回实际写入的大小。如果 buffer 空间不足， 则只会写入部分字符串。</p>
<h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">buf = Buffer.alloc(<span class="number">256</span>);</span><br><span class="line">len = buf.write(<span class="string">&quot;www.mybj123.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;写入字节数 : &quot;</span>+  len);</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span></span><br><span class="line">写入字节数 : <span class="number">15</span></span><br></pre></td></tr></table></figure>

<h2 id="从缓冲区读取数据"><a href="#从缓冲区读取数据" class="headerlink" title="从缓冲区读取数据"></a>从缓冲区读取数据</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>读取 Node 缓冲区数据的语法如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buf<span class="selector-class">.toString</span>(<span class="selector-attr">[encoding[, start[, end]</span>]])</span><br></pre></td></tr></table></figure>

<h3 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h3><p>参数描述如下：</p>
<ul>
<li><strong>encoding</strong> – 使用的编码。默认为 ‘utf8’ 。</li>
<li><strong>start</strong> – 指定开始读取的索引位置，默认为 0。</li>
<li><strong>end</strong> – 结束位置，默认为缓冲区的末尾。</li>
</ul>
<h3 id="返回值-1"><a href="#返回值-1" class="headerlink" title="返回值"></a>返回值</h3><p>解码缓冲区数据并使用指定的编码返回字符串。</p>
<h3 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">buf = Buffer.alloc(<span class="number">26</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="number">26</span> ; i++) &#123;</span><br><span class="line">  buf[i] = i + <span class="number">97</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="string">&#x27;ascii&#x27;</span>));       <span class="comment">// 输出: abcdefghijklmnopqrstuvwxyz</span></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="string">&#x27;ascii&#x27;</span>,<span class="number">0</span>,<span class="number">5</span>));   <span class="comment">//使用 &#x27;ascii&#x27; 编码, 并输出: abcde</span></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="string">&#x27;utf8&#x27;</span>,<span class="number">0</span>,<span class="number">5</span>));    <span class="comment">// 使用 &#x27;utf8&#x27; 编码, 并输出: abcde</span></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="literal">undefined</span>,<span class="number">0</span>,<span class="number">5</span>)); <span class="comment">// 使用默认的 &#x27;utf8&#x27; 编码, 并输出: abcde</span></span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span></span><br><span class="line">abcdefghijklmnopqrstuvwxyz</span><br><span class="line">abcde</span><br><span class="line">abcde</span><br><span class="line">abcde</span><br></pre></td></tr></table></figure>

<h2 id="将-Buffer-转换为-JSON-对象"><a href="#将-Buffer-转换为-JSON-对象" class="headerlink" title="将 Buffer 转换为 JSON 对象"></a>将 Buffer 转换为 JSON 对象</h2><h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><p>将 Node Buffer 转换为 JSON 对象的函数语法格式如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buf<span class="selector-class">.toJSON</span>()</span><br></pre></td></tr></table></figure>

<p>当字符串化一个 Buffer 实例时，<code>JSON.stringify()</code> 会隐式地调用该 <code>toJSON()</code>。</p>
<h3 id="返回值-2"><a href="#返回值-2" class="headerlink" title="返回值"></a>返回值</h3><p>返回 JSON 对象。</p>
<h3 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = Buffer.from([<span class="number">0x1</span>, <span class="number">0x2</span>, <span class="number">0x3</span>, <span class="number">0x4</span>, <span class="number">0x5</span>]);</span><br><span class="line"><span class="keyword">const</span> json = <span class="built_in">JSON</span>.stringify(buf);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出: &#123;&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3,4,5]&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(json);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = <span class="built_in">JSON</span>.parse(json, <span class="function">(<span class="params">key, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &amp;&amp; value.type === <span class="string">&#x27;Buffer&#x27;</span> ?</span><br><span class="line">    Buffer.from(value.data) :</span><br><span class="line">    value;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出: </span></span><br><span class="line"><span class="built_in">console</span>.log(copy);</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;type&quot;</span>:<span class="string">&quot;Buffer&quot;</span>,<span class="string">&quot;data&quot;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]&#125;</span><br><span class="line">&lt;Buffer <span class="number">01</span> <span class="number">02</span> <span class="number">03</span> <span class="number">04</span> <span class="number">05</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="缓冲区合并"><a href="#缓冲区合并" class="headerlink" title="缓冲区合并"></a>缓冲区合并</h2><h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><p>Node 缓冲区合并的语法如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">Buffer<span class="selector-class">.concat</span>(list<span class="selector-attr">[, totalLength]</span>)</span><br></pre></td></tr></table></figure>

<h3 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h3><p>参数描述如下：</p>
<ul>
<li><strong>list</strong> – 用于合并的 Buffer 对象数组列表。</li>
<li><strong>totalLength</strong> – 指定合并后Buffer对象的总长度。</li>
</ul>
<h3 id="返回值-3"><a href="#返回值-3" class="headerlink" title="返回值"></a>返回值</h3><p>返回一个多个成员合并的新 Buffer 对象。</p>
<h3 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buffer1 = Buffer.from((<span class="string">&#x27;码云笔记&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> buffer2 = Buffer.from((<span class="string">&#x27;www.mybj123.com&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> buffer3 = Buffer.concat([buffer1,buffer2]);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;buffer3 内容: &quot;</span> + buffer3.toString());</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buffer3 内容: 码云笔记www.mybj123.com</span><br></pre></td></tr></table></figure>

<h2 id="缓冲区比较"><a href="#缓冲区比较" class="headerlink" title="缓冲区比较"></a>缓冲区比较</h2><h3 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h3><p>Node Buffer 比较的函数语法如下所示, 该方法在 Node.js v0.12.2 版本引入：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buf<span class="selector-class">.compare</span>(otherBuffer);</span><br></pre></td></tr></table></figure>

<h3 id="参数-3"><a href="#参数-3" class="headerlink" title="参数"></a>参数</h3><p>参数描述如下：</p>
<ul>
<li><strong>otherBuffer</strong> – 与 <strong>buf</strong> 对象比较的另外一个 Buffer 对象。</li>
</ul>
<h3 id="返回值-4"><a href="#返回值-4" class="headerlink" title="返回值"></a>返回值</h3><p>返回一个数字，表示 <strong>buf</strong> 在 <strong>otherBuffer</strong> 之前，之后或相同。</p>
<h3 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buffer1 = Buffer.from(<span class="string">&#x27;ABC&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> buffer2 = Buffer.from(<span class="string">&#x27;ABCD&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> result = buffer1.compare(buffer2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(buffer1 + <span class="string">&quot; 在 &quot;</span> + buffer2 + <span class="string">&quot;之前&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(result == <span class="number">0</span>)&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(buffer1 + <span class="string">&quot; 与 &quot;</span> + buffer2 + <span class="string">&quot;相同&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(buffer1 + <span class="string">&quot; 在 &quot;</span> + buffer2 + <span class="string">&quot;之后&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">ABC在ABCD之前</span><br></pre></td></tr></table></figure>

<h2 id="拷贝缓冲区"><a href="#拷贝缓冲区" class="headerlink" title="拷贝缓冲区"></a>拷贝缓冲区</h2><h3 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h3><p>Node 缓冲区拷贝语法如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buf<span class="selector-class">.copy</span>(targetBuffer<span class="selector-attr">[, targetStart[, sourceStart[, sourceEnd]</span>]])</span><br></pre></td></tr></table></figure>

<h3 id="参数-4"><a href="#参数-4" class="headerlink" title="参数"></a>参数</h3><p>参数描述如下：</p>
<ul>
<li><strong>targetBuffer</strong> – 要拷贝的 Buffer 对象。</li>
<li><strong>targetStart</strong> – 数字, 可选, 默认: 0</li>
<li><strong>sourceStart</strong> – 数字, 可选, 默认: 0</li>
<li><strong>sourceEnd</strong> – 数字, 可选, 默认: buffer.length</li>
</ul>
<h3 id="返回值-5"><a href="#返回值-5" class="headerlink" title="返回值"></a>返回值</h3><p>没有返回值。</p>
<h3 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buf1 = Buffer.from(<span class="string">&#x27;abcdefghijkl&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> buf2 = Buffer.from(<span class="string">&#x27;RMYBJ123&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将 buf2 插入到 buf1 指定位置上</span></span><br><span class="line">buf2.copy(buf1, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(buf1.toString());</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">abMYBJ123jkl</span><br></pre></td></tr></table></figure>

<h2 id="缓冲区裁剪"><a href="#缓冲区裁剪" class="headerlink" title="缓冲区裁剪"></a>缓冲区裁剪</h2><p>Node 缓冲区裁剪语法如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buf<span class="selector-class">.slice</span>(<span class="selector-attr">[start[, end]</span>])</span><br></pre></td></tr></table></figure>

<h3 id="参数-5"><a href="#参数-5" class="headerlink" title="参数"></a>参数</h3><p>参数描述如下：</p>
<ul>
<li><strong>start</strong> – 数字, 可选, 默认: 0</li>
<li><strong>end</strong> – 数字, 可选, 默认: buffer.length</li>
</ul>
<h3 id="返回值-6"><a href="#返回值-6" class="headerlink" title="返回值"></a>返回值</h3><p>返回一个新的缓冲区，它和旧缓冲区指向同一块内存，但是从索引 start 到 end 的位置剪切。</p>
<h3 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buffer1 = Buffer.from(<span class="string">&#x27;mybj123&#x27;</span>);</span><br><span class="line"><span class="comment">// 剪切缓冲区</span></span><br><span class="line"><span class="keyword">const</span> buffer2 = buffer1.slice(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;buffer2 content: &quot;</span> + buffer2.toString());</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buffer2 <span class="attribute">content</span>: my</span><br></pre></td></tr></table></figure>

<h2 id="缓冲区长度"><a href="#缓冲区长度" class="headerlink" title="缓冲区长度"></a>缓冲区长度</h2><h3 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h3><p>Node 缓冲区长度计算语法如下所示：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buf<span class="selector-class">.length</span>;</span><br></pre></td></tr></table></figure>

<h3 id="返回值-7"><a href="#返回值-7" class="headerlink" title="返回值"></a>返回值</h3><p>返回 Buffer 对象所占据的内存长度。</p>
<h3 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buffer = Buffer.from(<span class="string">&#x27;www.mybj123.com&#x27;</span>);</span><br><span class="line"><span class="comment">//  缓冲区长度</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;buffer length: &quot;</span> + buffer.length);</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">buffer length: <span class="number">15</span></span><br></pre></td></tr></table></figure>

<h2 id="方法参考手册"><a href="#方法参考手册" class="headerlink" title="方法参考手册"></a>方法参考手册</h2><p>以下列出了 Node.js Buffer 模块常用的方法（注意有些方法在旧版本是没有的）：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>new Buffer(size)</strong> 分配一个新的 size 大小单位为8位字节的 buffer。 注意, size 必须小于 kMaxLength，否则，将会抛出异常 RangeError。废弃的: 使用 Buffer.alloc() 代替（或 Buffer.allocUnsafe()）。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>new Buffer(buffer)</strong> 拷贝参数 buffer 的数据到 Buffer 实例。废弃的: 使用 Buffer.from(buffer) 代替。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>new Buffer(str[, encoding])</strong> 分配一个新的 buffer ，其中包含着传入的 str 字符串。 encoding 编码方式默认为 ‘utf8’。 废弃的: 使用 Buffer.from(string[, encoding]) 代替。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>buf.length</strong> 返回这个 buffer 的 bytes 数。注意这未必是 buffer 里面内容的大小。length 是 buffer 对象所分配的内存数，它不会随着这个 buffer 对象内容的改变而改变。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>buf.write(string[, offset[, length]][, encoding])</strong> 根据参数 offset 偏移量和指定的 encoding 编码方式，将参数 string 数据写入buffer。 offset 偏移量默认值是 0, encoding 编码方式默认是 utf8。 length 长度是将要写入的字符串的 bytes 大小。 返回 number 类型，表示写入了多少 8 位字节流。如果 buffer 没有足够的空间来放整个 string，它将只会只写入部分字符串。 length 默认是 buffer.length – offset。 这个方法不会出现写入部分字符。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>buf.writeUIntLE(value, offset, byteLength[, noAssert])</strong> 将 value 写入到 buffer 里， 它由 offset 和 byteLength 决定，最高支持 48 位无符号整数，小端对齐，例如：<code>const buf = Buffer.allocUnsafe(6); buf.writeUIntLE(0x1234567890ab, 0, 6); // 输出:  console.log(buf);</code>noAssert 值为 true 时，不再验证 value 和 offset 的有效性。 默认是 false。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>buf.writeUIntBE(value, offset, byteLength[, noAssert])</strong> 将 value 写入到 buffer 里， 它由 offset 和 byteLength 决定，最高支持 48 位无符号整数，大端对齐。noAssert 值为 true 时，不再验证 value 和 offset 的有效性。 默认是 false。<code>const buf = Buffer.allocUnsafe(6); buf.writeUIntBE(0x1234567890ab, 0, 6); // 输出:  console.log(buf);</code></td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>buf.writeIntLE(value, offset, byteLength[, noAssert])</strong> 将value 写入到 buffer 里， 它由offset 和 byteLength 决定，最高支持48位有符号整数，小端对齐。noAssert 值为 true 时，不再验证 value 和 offset 的有效性。 默认是 false。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>buf.writeIntBE(value, offset, byteLength[, noAssert])</strong> 将value 写入到 buffer 里， 它由offset 和 byteLength 决定，最高支持48位有符号整数，大端对齐。noAssert 值为 true 时，不再验证 value 和 offset 的有效性。 默认是 false。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>buf.readUIntLE(offset, byteLength[, noAssert])</strong> 支持读取 48 位以下的无符号数字，小端对齐。noAssert 值为 true 时， offset 不再验证是否超过 buffer 的长度，默认为 false。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>buf.readUIntBE(offset, byteLength[, noAssert])</strong> 支持读取 48 位以下的无符号数字，大端对齐。noAssert 值为 true 时， offset 不再验证是否超过 buffer 的长度，默认为 false。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>buf.readIntLE(offset, byteLength[, noAssert])</strong> 支持读取 48 位以下的有符号数字，小端对齐。noAssert 值为 true 时， offset 不再验证是否超过 buffer 的长度，默认为 false。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>buf.readIntBE(offset, byteLength[, noAssert])</strong> 支持读取 48 位以下的有符号数字，大端对齐。noAssert 值为 true 时， offset 不再验证是否超过 buffer 的长度，默认为 false。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>buf.toString([encoding[, start[, end]]])</strong> 根据 encoding 参数（默认是 ‘utf8’）返回一个解码过的 string 类型。还会根据传入的参数 start (默认是 0) 和 end (默认是 buffer.length)作为取值范围。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>buf.toJSON()</strong> 将 Buffer 实例转换为 JSON 对象。</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>buf[index]</strong> 获取或设置指定的字节。返回值代表一个字节，所以返回值的合法范围是十六进制0x00到0xFF 或者十进制0至 255。</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>buf.equals(otherBuffer)</strong> 比较两个缓冲区是否相等，如果是返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left"><strong>buf.compare(otherBuffer)</strong> 比较两个 Buffer 对象，返回一个数字，表示 buf 在 otherBuffer 之前，之后或相同。</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left"><strong>buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])</strong> buffer 拷贝，源和目标可以相同。 targetStart 目标开始偏移和 sourceStart 源开始偏移默认都是 0。 sourceEnd 源结束位置偏移默认是源的长度 buffer.length 。</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left"><strong>buf.slice([start[, end]])</strong> 剪切 Buffer 对象，根据 start(默认是 0 ) 和 end (默认是 buffer.length ) 偏移和裁剪了索引。 负的索引是从 buffer 尾部开始计算的。</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left"><strong>buf.readUInt8(offset[, noAssert])</strong> 根据指定的偏移量，读取一个无符号 8 位整数。若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 如果这样 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left"><strong>buf.readUInt16LE(offset[, noAssert])</strong> 根据指定的偏移量，使用特殊的 endian 字节序格式读取一个无符号 16 位整数。若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出 buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left"><strong>buf.readUInt16BE(offset[, noAssert])</strong> 根据指定的偏移量，使用特殊的 endian 字节序格式读取一个无符号 16 位整数，大端对齐。若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出 buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left"><strong>buf.readUInt32LE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian 字节序格式读取一个无符号 32 位整数，小端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">25</td>
<td align="left"><strong>buf.readUInt32BE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian 字节序格式读取一个无符号 32 位整数，大端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">26</td>
<td align="left"><strong>buf.readInt8(offset[, noAssert])</strong> 根据指定的偏移量，读取一个有符号 8 位整数。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出 buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">27</td>
<td align="left"><strong>buf.readInt16LE(offset[, noAssert])</strong> 根据指定的偏移量，使用特殊的 endian 格式读取一个 有符号 16 位整数，小端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出 buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">28</td>
<td align="left"><strong>buf.readInt16BE(offset[, noAssert])</strong> 根据指定的偏移量，使用特殊的 endian 格式读取一个 有符号 16 位整数，大端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出 buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">29</td>
<td align="left"><strong>buf.readInt32LE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian 字节序格式读取一个有符号 32 位整数，小端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">30</td>
<td align="left"><strong>buf.readInt32BE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian 字节序格式读取一个有符号 32 位整数，大端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">31</td>
<td align="left"><strong>buf.readFloatLE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian 字节序格式读取一个 32 位双浮点数，小端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">32</td>
<td align="left"><strong>buf.readFloatBE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian 字节序格式读取一个 32 位双浮点数，大端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">33</td>
<td align="left"><strong>buf.readDoubleLE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian字节序格式读取一个 64 位双精度数，小端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">34</td>
<td align="left"><strong>buf.readDoubleBE(offset[, noAssert])</strong> 根据指定的偏移量，使用指定的 endian字节序格式读取一个 64 位双精度数，大端对齐。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 offset 可能会超出buffer 的末尾。默认是 false。</td>
</tr>
<tr>
<td align="left">35</td>
<td align="left"><strong>buf.writeUInt8(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量将 value 写入 buffer。注意：value 必须是一个合法的无符号 8 位整数。 若参数 noAssert 为 true 将不会验证 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">36</td>
<td align="left"><strong>buf.writeUInt16LE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个合法的无符号 16 位整数，小端对齐。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出buffer的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">37</td>
<td align="left"><strong>buf.writeUInt16BE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个合法的无符号 16 位整数，大端对齐。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出buffer的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">38</td>
<td align="left"><strong>buf.writeUInt32LE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式(LITTLE-ENDIAN:小字节序)将 value 写入buffer。注意：value 必须是一个合法的无符号 32 位整数，小端对齐。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着value 可能过大，或者offset可能会超出buffer的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">39</td>
<td align="left"><strong>buf.writeUInt32BE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式(Big-Endian:大字节序)将 value 写入buffer。注意：value 必须是一个合法的有符号 32 位整数。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者offset可能会超出buffer的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">40</td>
<td align="left"><strong>buf.writeInt8(value, offset[, noAssert])</strong>&lt;br根据传入的 offset=”” 偏移量将=”” value=”” 写入=”” buffer=”” 。注意：value=”” 必须是一个合法的=”” signed=”” 8=”” 位整数。=”” 若参数=”” noassert=”” 为=”” true=”” 将不会验证=”” 和=”” 偏移量参数。=”” 这意味着=”” 可能过大，或者=”” 可能会超出=”” 的末尾从而造成=”” 被丢弃。=”” 除非你对这个参数非常有把握，否则尽量不要使用。默认是=”” false。&lt;=”” td=””&gt;&lt;/br根据传入的&gt;</td>
</tr>
<tr>
<td align="left">41</td>
<td align="left"><strong>buf.writeInt16LE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个合法的 signed 16 位整数。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false 。</td>
</tr>
<tr>
<td align="left">42</td>
<td align="left"><strong>buf.writeInt16BE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个合法的 signed 16 位整数。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false 。</td>
</tr>
<tr>
<td align="left">43</td>
<td align="left"><strong>buf.writeInt32LE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个合法的 signed 32 位整数。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">44</td>
<td align="left"><strong>buf.writeInt32BE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个合法的 signed 32 位整数。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">45</td>
<td align="left"><strong>buf.writeFloatLE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer 。注意：当 value 不是一个 32 位浮点数类型的值时，结果将是不确定的。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">46</td>
<td align="left"><strong>buf.writeFloatBE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer 。注意：当 value 不是一个 32 位浮点数类型的值时，结果将是不确定的。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value可能过大，或者 offset 可能会超出 buffer 的末尾从而造成 value 被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">47</td>
<td align="left"><strong>buf.writeDoubleLE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个有效的 64 位double 类型的值。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成value被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">48</td>
<td align="left"><strong>buf.writeDoubleBE(value, offset[, noAssert])</strong> 根据传入的 offset 偏移量和指定的 endian 格式将 value 写入 buffer。注意：value 必须是一个有效的 64 位double 类型的值。 若参数 noAssert 为 true 将不会验证 value 和 offset 偏移量参数。 这意味着 value 可能过大，或者 offset 可能会超出 buffer 的末尾从而造成value被丢弃。 除非你对这个参数非常有把握，否则尽量不要使用。默认是 false。</td>
</tr>
<tr>
<td align="left">49</td>
<td align="left"><strong>buf.fill(value[, offset][, end])</strong> 使用指定的 value 来填充这个 buffer。如果没有指定 offset (默认是 0) 并且 end (默认是 buffer.length) ，将会填充整个buffer。</td>
</tr>
</tbody></table>
<h1 id="Node-js-Stream-流"><a href="#Node-js-Stream-流" class="headerlink" title="Node.js Stream(流)"></a>Node.js Stream(流)</h1><p>Stream 是一个抽象接口，Node 中有很多对象实现了这个接口。例如，对http 服务器发起请求的request 对象就是一个 Stream，还有stdout（标准输出）。</p>
<p>Node.js，Stream 有四种流类型：</p>
<ul>
<li><strong>Readable</strong> – 可读操作。</li>
<li><strong>Writable</strong> – 可写操作。</li>
<li><strong>Duplex</strong> – 可读可写操作.</li>
<li><strong>Transform</strong> – 操作被写入数据，然后读出结果。</li>
</ul>
<p>所有的 Stream 对象都是 EventEmitter 的实例。常用的事件有：</p>
<ul>
<li><strong>data</strong> – 当有数据可读时触发。</li>
<li><strong>end</strong> – 没有更多的数据可读时触发。</li>
<li><strong>error</strong> – 在接收和写入过程中发生错误时触发。</li>
<li><strong>finish</strong> – 所有数据已被写入到底层系统时触发。</li>
</ul>
<p>本教程会为大家介绍常用的流操作。</p>
<h2 id="从流中读取数据"><a href="#从流中读取数据" class="headerlink" title="从流中读取数据"></a>从流中读取数据</h2><p>创建 input.txt 文件，内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<p>创建 main.js 文件, 代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建可读流</span></span><br><span class="line"><span class="keyword">const</span> readerStream = fs.createReadStream(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置编码为 utf8。</span></span><br><span class="line">readerStream.setEncoding(<span class="string">&#x27;UTF8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理流事件 --&gt; data, end, and error</span></span><br><span class="line">readerStream.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">   data += chunk;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readerStream.on(<span class="string">&#x27;end&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readerStream.on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(err.stack);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">程序执行完毕</span><br><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<h2 id="写入流"><a href="#写入流" class="headerlink" title="写入流"></a>写入流</h2><p>创建 main.js 文件, 代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&#x27;码云笔记官网地址：www.mybj123.com&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个可以写入的流，写入到文件 output.txt 中</span></span><br><span class="line"><span class="keyword">const</span> writerStream = fs.createWriteStream(<span class="string">&#x27;output.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 utf8 编码写入数据</span></span><br><span class="line">writerStream.write(data,<span class="string">&#x27;UTF8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标记文件末尾</span></span><br><span class="line">writerStream.end();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理流事件 --&gt; finish、error</span></span><br><span class="line">writerStream.on(<span class="string">&#x27;finish&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;写入完成。&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">writerStream.on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(err.stack);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上程序会将 data 变量的数据写入到 output.txt 文件中。代码执行结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span> </span><br><span class="line">程序执行完毕</span><br><span class="line">写入完成。</span><br></pre></td></tr></table></figure>

<p>查看 output.txt 文件的内容：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cat output<span class="selector-class">.txt</span> </span><br><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>

<h2 id="管道流"><a href="#管道流" class="headerlink" title="管道流"></a>管道流</h2><p>管道提供了一个输出流到输入流的机制。通常我们用于从一个流中获取数据并将数据传递到另外一个流中。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="管道流"></p>
<p>如上面的图片所示，我们把文件比作装水的桶，而水就是文件里的内容，我们用一根管子(pipe)连接两个桶使得水从一个桶流入另一个桶，这样就慢慢的实现了大文件的复制过程。</p>
<p>以下实例我们通过读取一个文件内容并将内容写入到另外一个文件中。</p>
<p>设置 input.txt 文件内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br><span class="line">管道流操作实例</span><br></pre></td></tr></table></figure>

<p>创建 main.js 文件, 代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个可读流</span></span><br><span class="line"><span class="keyword">const</span> readerStream = fs.createReadStream(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个可写流</span></span><br><span class="line"><span class="keyword">const</span> writerStream = fs.createWriteStream(<span class="string">&#x27;output.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管道读写操作</span></span><br><span class="line"><span class="comment">// 读取 input.txt 文件内容，并将内容写入到 output.txt 文件中</span></span><br><span class="line">readerStream.pipe(writerStream);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>代码执行结果如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node <span class="selector-tag">main</span><span class="selector-class">.js</span> </span><br><span class="line">程序执行完毕</span><br></pre></td></tr></table></figure>

<p>查看 output.txt 文件的内容：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cat output<span class="selector-class">.txt</span> </span><br><span class="line">码云笔记官网地址：www<span class="selector-class">.mybj123</span><span class="selector-class">.com</span></span><br><span class="line">管道流操作实例</span><br></pre></td></tr></table></figure>

<h2 id="链式流"><a href="#链式流" class="headerlink" title="链式流"></a>链式流</h2><p>链式是通过连接输出流到另外一个流并创建多个流操作链的机制。链式流一般用于管道操作。</p>
<p>接下来我们就是用管道和链式来压缩和解压文件。</p>
<p>创建 compress.js 文件, 代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> zlib = <span class="built_in">require</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩 input.txt 文件为 input.txt.gz</span></span><br><span class="line">fs.createReadStream(<span class="string">&#x27;input.txt&#x27;</span>)</span><br><span class="line">  .pipe(zlib.createGzip())</span><br><span class="line">  .pipe(fs.createWriteStream(<span class="string">&#x27;input.txt.gz&#x27;</span>));</span><br><span class="line">  </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;文件压缩完成。&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node compress.js </span><br><span class="line">文件压缩完成。</span><br></pre></td></tr></table></figure>

<p>执行完以上操作后，我们可以看到当前目录下生成了 input.txt 的压缩文件 input.txt.gz。</p>
<p>接下来，让我们来解压该文件，创建 decompress.js 文件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> zlib = <span class="built_in">require</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解压 input.txt.gz 文件为 input.txt</span></span><br><span class="line">fs.createReadStream(<span class="string">&#x27;input.txt.gz&#x27;</span>)</span><br><span class="line">  .pipe(zlib.createGunzip())</span><br><span class="line">  .pipe(fs.createWriteStream(<span class="string">&#x27;input.txt&#x27;</span>));</span><br><span class="line">  </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;文件解压完成。&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node decompress.js </span><br><span class="line">文件解压完成。</span><br></pre></td></tr></table></figure>

<h1 id="Node-js的模块系统"><a href="#Node-js的模块系统" class="headerlink" title="Node.js的模块系统"></a>Node.js的模块系统</h1><p>为了让Node.js的文件可以相互调用，Node.js提供了一个简单的模块系统。</p>
<p>模块是Node.js 应用程序的基本组成部分，文件和模块是一一对应的。换言之，一个 Node.js 文件就是一个模块，这个文件可能是JavaScript 代码、JSON 或者编译过的C/C++ 扩展。</p>
<h2 id="创建模块-1"><a href="#创建模块-1" class="headerlink" title="创建模块"></a>创建模块</h2><p>在 Node.js 中，创建一个模块非常简单，如下我们创建一个 main.js 文件，代码如下:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hello = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>);</span><br><span class="line">hello.world();</span><br></pre></td></tr></table></figure>

<p>以上实例中，代码 <code>require(&#39;./hello&#39;)</code> 引入了当前目录下的 <code>hello.js</code> 文件（<code>./</code> 为当前目录，node.js 默认后缀为 js）。</p>
<p>Node.js 提供了 <code>exports</code> 和 <code>require</code> 两个对象，其中 <code>exports</code> 是模块公开的接口，<code>require</code> 用于从外部获取一个模块的接口，即所获取模块的 <code>exports</code> 对象。</p>
<p>接下来我们就来创建 hello.js 文件，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.world = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在以上示例中，hello.js 通过 <code>exports</code> 对象把 <code>world</code> 作为模块的访问接口，在 main.js 中通过 <code>require(&#39;./hello&#39;)</code> 加载这个模块，然后就可以直接访 问 hello.js 中 <code>exports</code> 对象的成员函数了。</p>
<p>有时候我们只是想把一个对象封装到模块中，格式如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例如:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//hello.js </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">var</span> name; </span><br><span class="line">    <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span>(<span class="params">thyName</span>) </span>&#123; </span><br><span class="line">        name = thyName; </span><br><span class="line">    &#125;; </span><br><span class="line">    <span class="built_in">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Hello &#x27;</span> + name); </span><br><span class="line">    &#125;; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="built_in">module</span>.exports = Hello;</span><br></pre></td></tr></table></figure>

<p>这样就可以直接获得这个对象了：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js </span></span><br><span class="line"><span class="keyword">var</span> Hello = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>); </span><br><span class="line">hello = <span class="keyword">new</span> Hello(); </span><br><span class="line">hello.setName(<span class="string">&#x27;BYMybj&#x27;</span>); </span><br><span class="line">hello.sayHello();</span><br></pre></td></tr></table></figure>

<p>模块接口的唯一变化是使用 <code>module.exports = Hello</code> 代替了<code>exports.world = function()&#123;&#125;</code>。 在外部引用该模块时，其接口对象就是要输出的 <code>Hello</code> 对象本身，而不是原先的 <code>exports</code>。</p>
<h2 id="服务端的模块放在哪里"><a href="#服务端的模块放在哪里" class="headerlink" title="服务端的模块放在哪里"></a>服务端的模块放在哪里</h2><p>也许你已经注意到，我们已经在代码中使用了模块了。像这样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">http.createServer(...);</span><br></pre></td></tr></table></figure>

<p>Node.js 中自带了一个叫做 <strong>http</strong> 的模块，我们在我们的代码中请求它并把返回值赋给一个本地变量。</p>
<p>这把我们的本地变量变成了一个拥有所有 http 模块所提供的公共方法的对象。</p>
<p>Node.js 的 require 方法中的文件查找策略如下：</p>
<p>由于 Node.js 中存在 4 类模块（原生模块和3种文件模块），尽管 require 方法极其简单，但是内部的加载却是十分复杂的，其加载优先级也各自不同。如下图所示：</p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201215172247049.png" alt="image-20201215172247049"></p>
<h3 id="从文件模块缓存中加载"><a href="#从文件模块缓存中加载" class="headerlink" title="从文件模块缓存中加载"></a>从文件模块缓存中加载</h3><p>尽管原生模块与文件模块的优先级不同，但是都会优先从文件模块的缓存中加载已经存在的模块。</p>
<h3 id="从原生模块加载"><a href="#从原生模块加载" class="headerlink" title="从原生模块加载"></a>从原生模块加载</h3><p>原生模块的优先级仅次于文件模块缓存的优先级。require 方法在解析文件名之后，优先检查模块是否在原生模块列表中。以http模块为例，尽管在目录下存在一个 <code>http/http.js/http.node/http.json</code> 文件，<code>require(&quot;http&quot;)</code> 都不会从这些文件中加载，而是从原生模块中加载。</p>
<p>原生模块也有一个缓存区，同样也是优先从缓存区加载。如果缓存区没有被加载过，则调用原生模块的加载方式进行加载和执行。</p>
<h3 id="从文件加载"><a href="#从文件加载" class="headerlink" title="从文件加载"></a>从文件加载</h3><p>当文件模块缓存中不存在，而且不是原生模块的时候，Node.js 会解析 <code>require</code> 方法传入的参数，并从文件系统中加载实际的文件，加载过程中的包装和编译细节在前一节中已经介绍过，这里我们将详细描述查找文件模块的过程，其中，也有一些细节值得知晓。</p>
<p>require方法接受以下几种参数的传递：</p>
<ul>
<li><code>http</code>、<code>fs</code>、<code>path</code>等，原生模块。</li>
<li><code>./mod</code> 或 <code>../mod</code>，相对路径的文件模块。</li>
<li><code>/pathtomodule/mod</code>，绝对路径的文件模块。</li>
<li><code>mod</code>，非原生模块的文件模块。</li>
</ul>
<p>在路径 <code>Y</code> 下执行 <code>require(X)</code> 语句执行顺序：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>. 如果 X 是内置模块</span><br><span class="line">   <span class="selector-tag">a</span>. 返回内置模块</span><br><span class="line">   <span class="selector-tag">b</span>. 停止执行</span><br><span class="line"><span class="number">2</span>. 如果 X 以 &#x27;/&#x27; 开头</span><br><span class="line">   <span class="selector-tag">a</span>. 设置 Y 为文件根路径</span><br><span class="line"><span class="number">3</span>. 如果 X 以 &#x27;./&#x27; 或 &#x27;/&#x27; or &#x27;../&#x27; 开头</span><br><span class="line">   <span class="selector-tag">a</span>. LOAD_AS_FILE(Y + X)</span><br><span class="line">   <span class="selector-tag">b</span>. LOAD_AS_DIRECTORY(Y + X)</span><br><span class="line"><span class="number">4</span>. LOAD_NODE_MODULES(X, dirname(Y))</span><br><span class="line"><span class="number">5</span>. 抛出异常 &quot;not found&quot;</span><br><span class="line"></span><br><span class="line">LOAD_AS_FILE(X)</span><br><span class="line"><span class="number">1</span>. 如果 X 是一个文件, 将 X 作为 JavaScript 文本载入并停止执行。</span><br><span class="line"><span class="number">2</span>. 如果 X<span class="selector-class">.js</span> 是一个文件, 将 X<span class="selector-class">.js</span> 作为 JavaScript 文本载入并停止执行。</span><br><span class="line"><span class="number">3</span>. 如果 X<span class="selector-class">.json</span> 是一个文件, 解析 X<span class="selector-class">.json</span> 为 JavaScript 对象并停止执行。</span><br><span class="line"><span class="number">4</span>. 如果 X<span class="selector-class">.node</span> 是一个文件, 将 X<span class="selector-class">.node</span> 作为二进制插件载入并停止执行。</span><br><span class="line"></span><br><span class="line">LOAD_INDEX(X)</span><br><span class="line"><span class="number">1</span>. 如果 X/index<span class="selector-class">.js</span> 是一个文件,  将 X/index<span class="selector-class">.js</span> 作为 JavaScript 文本载入并停止执行。</span><br><span class="line"><span class="number">2</span>. 如果 X/index<span class="selector-class">.json</span> 是一个文件, 解析 X/index<span class="selector-class">.json</span> 为 JavaScript 对象并停止执行。</span><br><span class="line"><span class="number">3</span>. 如果 X/index<span class="selector-class">.node</span> 是一个文件,  将 X/index<span class="selector-class">.node</span> 作为二进制插件载入并停止执行。</span><br><span class="line"></span><br><span class="line">LOAD_AS_DIRECTORY(X)</span><br><span class="line"><span class="number">1</span>. 如果 X/package<span class="selector-class">.json</span> 是一个文件,</span><br><span class="line">   <span class="selector-tag">a</span>. 解析 X/package<span class="selector-class">.json</span>, 并查找 &quot;<span class="selector-tag">main</span>&quot; 字段。</span><br><span class="line">   <span class="selector-tag">b</span>. let M = X + (json <span class="selector-tag">main</span> 字段)</span><br><span class="line">   c. LOAD_AS_FILE(M)</span><br><span class="line">   d. LOAD_INDEX(M)</span><br><span class="line"><span class="number">2</span>. LOAD_INDEX(X)</span><br><span class="line"></span><br><span class="line">LOAD_NODE_MODULES(X, START)</span><br><span class="line"><span class="number">1</span>. let DIRS=NODE_MODULES_PATHS(START)</span><br><span class="line"><span class="number">2</span>. for each DIR in DIRS:</span><br><span class="line">   a. <span class="built_in">LOAD_AS_FILE</span>(DIR/X)</span><br><span class="line">   b. <span class="built_in">LOAD_AS_DIRECTORY</span>(DIR/X)</span><br><span class="line"></span><br><span class="line"><span class="built_in">NODE_MODULES_PATHS</span>(START)</span><br><span class="line"><span class="number">1</span>. let PARTS = path <span class="built_in">split</span>(START)</span><br><span class="line"><span class="number">2</span>. let I = count of PARTS - <span class="number">1</span></span><br><span class="line"><span class="number">3</span>. let DIRS = []</span><br><span class="line"><span class="number">4</span>. while I &gt;= <span class="number">0</span>,</span><br><span class="line">   a. if PARTS[I] = <span class="string">&quot;node_modules&quot;</span> CONTINUE</span><br><span class="line">   b. DIR = path <span class="built_in">join</span>(PARTS[<span class="number">0</span> .. I] + <span class="string">&quot;node_modules&quot;</span>)</span><br><span class="line">   c. DIRS = DIRS + DIR</span><br><span class="line">   d. let I = I - <span class="number">1</span></span><br><span class="line"><span class="number">5</span>. return DIRS</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关于exports 和 module.exports 的使用</p>
<p>如果要对外暴露属性或方法，就用 exports 就行，要暴露对象(类似class，包含了很多属性和方法)，就用 module.exports。</p>
</blockquote>
<h1 id="Node-js-函数的使用"><a href="#Node-js-函数的使用" class="headerlink" title="Node.js 函数的使用"></a>Node.js 函数的使用</h1><p>在 JavaScript中，一个函数可以作为另一个函数的参数。我们可以先定义一个函数，然后传递，也可以在传递参数的地方直接定义函数。</p>
<p>Node.js 中函数的使用与 JavaScript 类似，举例来说，你可以这样做：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params">word</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(word);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params">someFunction, value</span>) </span>&#123;</span><br><span class="line">  someFunction(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">execute(say, <span class="string">&quot;Hello&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码中，我们把 <code>say</code> 函数作为 <code>execute</code> 函数的第一个变量进行了传递。这里传递的不是 <code>say</code> 的返回值，而是 <code>say</code> 本身！</p>
<p>这样一来， <code>say</code> 就变成了<code>execute</code> 中的本地变量 <code>someFunction</code> ，<code>execute</code> 可以通过调用 <code>someFunction()</code> （带括号的形式）来使用 <code>say</code> 函数。</p>
<p>当然，因为 <code>say</code> 有一个变量， <code>execute</code> 在调用 <code>someFunction</code> 时可以传递这样一个变量。</p>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>我们可以把一个函数作为变量传递。但是我们不一定要绕这个”<strong>先定义，再传递</strong>“的圈子，我们可以直接在另一个函数的括号中定义和传递这个函数：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function execute(someFunction, value) &#123;</span><br><span class="line">  someFunction(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">execute(function(word)&#123; console.log(word) &#125;, &quot;Hello&quot;);</span><br></pre></td></tr></table></figure>

<p>我们在 <code>execute</code> 接受第一个参数的地方直接定义了我们准备传递给 <code>execute</code> 的函数。</p>
<p>用这种方式，我们甚至不用给这个函数起名字，这也是为什么它被叫做匿名函数 。</p>
<h2 id="函数传递是如何让HTTP服务器工作的"><a href="#函数传递是如何让HTTP服务器工作的" class="headerlink" title="函数传递是如何让HTTP服务器工作的"></a>函数传递是如何让HTTP服务器工作的</h2><p>带着这些知识，我们再来看看我们简约而不简单的HTTP服务器：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">  response.writeHead(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">  response.write(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  response.end();</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br></pre></td></tr></table></figure>

<p>现在它看上去应该清晰了很多：我们向 createServer 函数传递了一个匿名函数。</p>
<p>用这样的代码也可以达到同样的目的：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onRequest</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">  response.writeHead(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">  response.write(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  response.end();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.createServer(onRequest).listen(<span class="number">8888</span>);</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-路由"><a href="#Node-js-路由" class="headerlink" title="Node.js 路由"></a>Node.js 路由</h1><p>我们要为路由提供请求的 <code>URL</code> 和其他需要的 <code>GET</code> 及 <code>POST</code> 参数，随后路由需要根据这些数据来执行相应的代码。</p>
<p>因此，我们需要查看 <code>HTTP</code> 请求，从中提取出请求的 <code>URL</code> 以及 <code>GET/POST</code> 参数。这一功能应当属于路由还是服务器（甚至作为一个模块自身的功能）确实值得探讨，但这里暂定其为我们的HTTP服务器的功能。</p>
<p>我们需要的所有数据都会包含在 <code>request</code> 对象中，该对象作为 <code>onRequest()</code> 回调函数的第一个参数传递。但是为了解析这些数据，我们需要额外的 Node.JS 模块，它们分别是 <code>url</code> 和 <code>querystring</code> 模块。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">                   url.parse(string).query</span><br><span class="line">                                           |</span><br><span class="line">           url.parse(string).pathname      |</span><br><span class="line">                       |                   |</span><br><span class="line">                       |                   |</span><br><span class="line">                     ------ -------------------</span><br><span class="line">http://localhost:8888/start?foo=bar&amp;hello=world</span><br><span class="line">                                ---       -----</span><br><span class="line">                                 |          |</span><br><span class="line">                                 |          |</span><br><span class="line">              querystring.parse(queryString)[&quot;foo&quot;]    |</span><br><span class="line">                                            |</span><br><span class="line">                         querystring.parse(queryString)[&quot;hello&quot;]</span><br></pre></td></tr></table></figure>

<p>当然我们也可以用 <code>querystring</code> 模块来解析 <code>POST</code> 请求体中的参数，稍后会有演示。</p>
<p>现在我们来给 <code>onRequest()</code> 函数加上一些逻辑，用来找出浏览器请求的 <code>URL</code> 路径：</p>
<p>server.js文件代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onRequest</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pathname = url.parse(request.url).pathname;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Request for &quot;</span> + pathname + <span class="string">&quot; received.&quot;</span>);</span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">    response.write(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    response.end();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  http.createServer(onRequest).listen(<span class="number">8888</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Server has started.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">exports</span>.start = start;</span><br></pre></td></tr></table></figure>

<p>好了，我们的应用现在可以通过请求的 URL 路径来区别不同请求了–这使我们得以使用路由（还未完成）来将请求以 URL 路径为基准映射到处理程序上。</p>
<p>在我们所要构建的应用中，这意味着来自 /start 和 /upload 的请求可以使用不同的代码来处理。稍后我们将看到这些内容是如何整合到一起的。</p>
<p>现在我们可以来编写路由了，建立一个名为 <strong>router.js</strong> 的文件，添加以下内容：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">route</span>(<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;About to route a request for &quot;</span> + pathname);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">exports</span>.route = route;</span><br></pre></td></tr></table></figure>

<p>如你所见，这段代码什么也没干，不过对于现在来说这是应该的。在添加更多的逻辑以前，我们先来看看如何把路由和服务器整合起来。</p>
<p>我们的服务器应当知道路由的存在并加以有效利用。我们当然可以通过硬编码的方式将这一依赖项绑定到服务器上，但是其它语言的编程经验告诉我们这会是一件非常痛苦的事，因此我们将使用依赖注入的方式较松散地添加路由模块。</p>
<p>首先，我们来扩展一下服务器的 <code>start()</code> 函数，以便将路由函数作为参数传递过去，<strong>server.js</strong> 文件代码如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params">route</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onRequest</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pathname = url.parse(request.url).pathname;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Request for &quot;</span> + pathname + <span class="string">&quot; received.&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    route(pathname);</span><br><span class="line"> </span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">    response.write(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    response.end();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  http.createServer(onRequest).listen(<span class="number">8888</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Server has started.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">exports</span>.start = start;</span><br></pre></td></tr></table></figure>

<p>同时，我们会相应扩展 index.js，使得路由函数可以被注入到服务器中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> server = <span class="built_in">require</span>(<span class="string">&quot;./server&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">&quot;./router&quot;</span>);</span><br><span class="line"> </span><br><span class="line">server.start(router.route);</span><br></pre></td></tr></table></figure>

<p>在这里，我们传递的函数依旧什么也没做。</p>
<p>如果现在启动应用（node index.js，始终记得这个命令行），随后请求一个URL，你将会看到应用输出相应的信息，这表明我们的HTTP服务器已经在使用路由模块了，并会将请求的路径传递给路由：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node index.js</span><br><span class="line">Server has started.</span><br></pre></td></tr></table></figure>

<p>以上输出已经去掉了比较烦人的 /favicon.ico 请求相关的部分。</p>
<p>浏览器访问 **<a href="http://127.0.0.1:8888/**%EF%BC%8C%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%EF%BC%9A">http://127.0.0.1:8888/**，输出结果如下：</a></p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201214180215351.png" alt="image-20201214180215351"></p>
<h1 id="Node-js-全局对象"><a href="#Node-js-全局对象" class="headerlink" title="Node.js 全局对象"></a>Node.js 全局对象</h1><p>JavaScript 中有一个特殊的对象，称为全局对象（Global Object），它及其所有属性都可以在程序的任何地方访问，即全局变量。</p>
<p>在浏览器 JavaScript 中，通常 window 是全局对象， 而 Node.js 中的全局对象是 global，所有全局变量（除了 global 本身以外）都是 global 对象的属性。</p>
<p>在 Node.js 我们可以直接访问到 global 的属性，而不需要在应用中包含它。</p>
<h2 id="全局对象与全局变量"><a href="#全局对象与全局变量" class="headerlink" title="全局对象与全局变量"></a>全局对象与全局变量</h2><p>global 最根本的作用是作为全局变量的宿主。按照 ECMAScript 的定义，满足以下条 件的变量是全局变量：</p>
<ul>
<li>在最外层定义的变量；</li>
<li>全局对象的属性；</li>
<li>隐式定义的变量（未定义直接赋值的变量）。</li>
</ul>
<p>当你定义一个全局变量时，这个变量同时也会成为全局对象的属性，反之亦然。需要注 意的是，在 Node.js 中你不可能在最外层定义变量，因为所有用户代码都是属于当前模块的， 而模块本身不是最外层上下文。</p>
<blockquote>
<p><strong>注意：</strong> 最好不要使用 var 定义变量以避免引入全局变量，因为全局变量会污染命名空间，提高代码的耦合风险。</p>
</blockquote>
<h2 id="filename"><a href="#filename" class="headerlink" title="__filename"></a>__filename</h2><p><strong>__filename</strong> 表示当前正在执行的脚本的文件名。它将输出文件所在位置的绝对路径，且和命令行参数所指定的文件名不一定相同。 如果在模块中，返回的值是模块文件的路径。</p>
<h3 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出全局变量 __filename 的值</span></span><br><span class="line"><span class="built_in">console</span>.log( __filename );</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">/web/com/runoob/nodejs/main.js</span><br></pre></td></tr></table></figure>

<h2 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h2><p><strong>__dirname</strong> 表示当前执行脚本所在的目录。</p>
<h3 id="实例-11"><a href="#实例-11" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出全局变量 __dirname 的值</span></span><br><span class="line"><span class="built_in">console</span>.log( __dirname );</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">/web/com/runoob/nodejs</span><br></pre></td></tr></table></figure>

<h2 id="setTimeout-cb-ms"><a href="#setTimeout-cb-ms" class="headerlink" title="setTimeout(cb, ms)"></a>setTimeout(cb, ms)</h2><p><strong>setTimeout(cb, ms)</strong> 全局函数在指定的毫秒(ms)数后执行指定函数(cb)。：setTimeout() 只执行一次指定函数。</p>
<p>返回一个代表定时器的句柄值。</p>
<h3 id="实例-12"><a href="#实例-12" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 两秒后执行以上函数</span></span><br><span class="line"><span class="built_in">setTimeout</span>(printHello, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure>

<h2 id="clearTimeout-t"><a href="#clearTimeout-t" class="headerlink" title="clearTimeout(t)"></a>clearTimeout(t)</h2><p><strong>clearTimeout( t )</strong> 全局函数用于停止一个之前通过 setTimeout() 创建的定时器。 参数 <strong>t</strong> 是通过 setTimeout() 函数创建的定时器。</p>
<h3 id="实例-13"><a href="#实例-13" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 两秒后执行以上函数</span></span><br><span class="line"><span class="keyword">const</span> t = <span class="built_in">setTimeout</span>(printHello, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除定时器</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(t);</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br></pre></td></tr></table></figure>

<h2 id="setInterval-cb-ms"><a href="#setInterval-cb-ms" class="headerlink" title="setInterval(cb, ms)"></a>setInterval(cb, ms)</h2><p><strong>setInterval(cb, ms)</strong> 全局函数在指定的毫秒(ms)数后执行指定函数(cb)。</p>
<p>返回一个代表定时器的句柄值。可以使用 <strong>clearInterval(t)</strong> 函数来清除定时器。</p>
<p>setInterval() 方法会不停地调用函数，直到 clearInterval() 被调用或窗口被关闭。</p>
<h3 id="实例-14"><a href="#实例-14" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printHello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 两秒后执行以上函数</span></span><br><span class="line"><span class="built_in">setInterval</span>(printHello, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">Hello, World!</span><br><span class="line">Hello, World!</span><br><span class="line">Hello, World!</span><br><span class="line">Hello, World!</span><br><span class="line">Hello, World!</span><br><span class="line">……</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="setInterval(cb, ms)"></p>
<p>以上程序每隔两秒就会输出一次”Hello, World!”，且会永久执行下去，直到你按下 <strong>ctrl + c</strong> 按钮。</p>
<h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><p>console 用于提供控制台标准输出，它是由 Internet Explorer 的 JScript 引擎提供的调试工具，后来逐渐成为浏览器的实施标准。</p>
<p>Node.js 沿用了这个标准，提供与习惯行为一致的 console 对象，用于向标准输出流（stdout）或标准错误流（stderr）输出字符。</p>
<h3 id="console-方法"><a href="#console-方法" class="headerlink" title="console 方法"></a>console 方法</h3><p>以下为 console 对象的方法:</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>console.log([data][, …])</strong> 向标准输出流打印字符并以换行符结束。该方法接收若干 个参数，如果只有一个参数，则输出这个参数的字符串形式。如果有多个参数，则 以类似于C 语言 printf() 命令的格式输出。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>console.info([data][, …])</strong> 该命令的作用是返回信息性消息，这个命令与console.log差别并不大，除了在chrome中只会输出文字外，其余的会显示一个蓝色的惊叹号。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>console.error([data][, …])</strong> 输出错误消息的。控制台在出现错误时会显示是红色的叉子。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>console.warn([data][, …])</strong> 输出警告消息。控制台出现有黄色的惊叹号。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>console.dir(obj[, options])</strong> 用来对一个对象进行检查（inspect），并以易于阅读和打印的格式显示。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>console.time(label)</strong> 输出时间，表示计时开始。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>console.timeEnd(label)</strong> 结束时间，表示计时结束。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>console.trace(message[, …])</strong> 当前执行的代码在堆栈中的调用路径，这个测试函数运行很有帮助，只要给想测试的函数里面加入 console.trace 就行了。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>console.assert(value[, message][, …])</strong> 用于判断某个表达式或变量是否为真，接收两个参数，第一个参数是表达式，第二个参数是字符串。只有当第一个参数为false，才会输出第二个参数，否则不会有任何结果。</td>
</tr>
</tbody></table>
<p>console.log()：向标准输出流打印字符并以换行符结束。</p>
<p>console.log 接收若干 个参数，如果只有一个参数，则输出这个参数的字符串形式。如果有多个参数，则 以类似于C 语言 printf() 命令的格式输出。</p>
<p>第一个参数是一个字符串，如果没有 参数，只打印一个换行。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Hello world&#x27;</span>); </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;bymybj%jbymyb&#x27;</span>); </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;bymybj%jbymyb&#x27;</span>, <span class="number">1991</span>);</span><br></pre></td></tr></table></figure>

<p>运行结果为：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Hello world </span><br><span class="line">bymybj%jbymyb </span><br><span class="line">bymybj1991bymyb</span><br></pre></td></tr></table></figure>

<ul>
<li>console.error()：与console.log() 用法相同，只是向标准错误流输出。</li>
<li>console.trace()：向标准错误流输出当前的调用栈。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.trace();</span><br></pre></td></tr></table></figure>

<p>运行结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Trace: </span><br><span class="line">at Object. (/home/bymybj/consoletrace.js:1:71) </span><br><span class="line">at Module._compile (module.js:441:26) </span><br><span class="line">at Object..js (module.js:459:10) </span><br><span class="line">at Module.load (module.js:348:31) </span><br><span class="line">at Function._load (module.js:308:12) </span><br><span class="line">at Array.0 (module.js:479:10) </span><br><span class="line">at EventEmitter._tickCallback (node.js:192:40)</span><br></pre></td></tr></table></figure>

<h3 id="实例-15"><a href="#实例-15" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.info(<span class="string">&quot;程序开始执行：&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;计数: %d&quot;</span>, counter);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&quot;获取数据&quot;</span>);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 执行一些代码</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;获取数据&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">&quot;程序执行完毕。&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">程序开始执行：</span><br><span class="line">计数: 10</span><br><span class="line">获取数据: 0ms</span><br><span class="line">程序执行完毕</span><br></pre></td></tr></table></figure>

<h2 id="process"><a href="#process" class="headerlink" title="process"></a>process</h2><p>process 是一个全局变量，即 global 对象的属性。</p>
<p>它用于描述当前Node.js 进程状态的对象，提供了一个与操作系统的简单接口。通常在你写本地命令行程序的时候，少不了要 和它打交道。下面将会介绍 process 对象的一些最常用的成员方法。</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">事件 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>exit</strong> 当进程准备退出时触发。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>beforeExit</strong> 当 node 清空事件循环，并且没有其他安排时触发这个事件。通常来说，当没有进程安排时 node 退出，但是 ‘beforeExit’ 的监听器可以异步调用，这样 node 就会继续执行。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>uncaughtException</strong> 当一个异常冒泡回到事件循环，触发这个事件。如果给异常添加了监视器，默认的操作（打印堆栈跟踪信息并退出）就不会发生。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>Signal 事件</strong> 当进程接收到信号时就触发。信号列表详见标准的 POSIX 信号名，如 SIGINT、SIGUSR1 等。</td>
</tr>
</tbody></table>
<h3 id="实例-16"><a href="#实例-16" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">process.on(<span class="string">&#x27;exit&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 以下代码永远不会执行</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;该代码不会执行&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;退出码为:&#x27;</span>, code);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行结束&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">程序执行结束</span><br><span class="line">退出码为: 0</span><br></pre></td></tr></table></figure>

<h3 id="退出状态码"><a href="#退出状态码" class="headerlink" title="退出状态码"></a>退出状态码</h3><p>退出状态码如下所示：</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">名称 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>Uncaught Fatal Exception</strong> 有未捕获异常，并且没有被域或 uncaughtException 处理函数处理。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>Unused</strong> 保留</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>Internal JavaScript Parse Error</strong> JavaScript的源码启动 Node 进程时引起解析错误。非常罕见，仅会在开发 Node 时才会有。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>Internal JavaScript Evaluation Failure</strong> JavaScript 的源码启动 Node 进程，评估时返回函数失败。非常罕见，仅会在开发 Node 时才会有。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>Fatal Error</strong> V8 里致命的不可恢复的错误。通常会打印到 stderr ，内容为： FATAL ERROR</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>Non-function Internal Exception Handler</strong> 未捕获异常，内部异常处理函数不知为何设置为on-function，并且不能被调用。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>Internal Exception Handler Run-Time Failure</strong> 未捕获的异常， 并且异常处理函数处理时自己抛出了异常。例如，如果 process.on(‘uncaughtException’) 或 domain.on(‘error’) 抛出了异常。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>Unused</strong> 保留</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>Invalid Argument</strong> 可能是给了未知的参数，或者给的参数没有值。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>Internal JavaScript Run-Time Failure</strong> JavaScript的源码启动 Node 进程时抛出错误，非常罕见，仅会在开发 Node 时才会有。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>Invalid Debug Argument</strong> 设置了参数–debug 和/或 –debug-brk，但是选择了错误端口。</td>
</tr>
<tr>
<td align="left">128</td>
<td align="left"><strong>Signal Exits</strong> 如果 Node 接收到致命信号，比如SIGKILL 或 SIGHUP，那么退出代码就是128 加信号代码。这是标准的 Unix 做法，退出信号代码放在高位。</td>
</tr>
</tbody></table>
<h3 id="Process-属性"><a href="#Process-属性" class="headerlink" title="Process 属性"></a>Process 属性</h3><p>Process 提供了很多有用的属性，便于我们更好的控制系统的交互：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">属性 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>stdout</strong> 标准输出流。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>stderr</strong> 标准错误流。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>stdin</strong> 标准输入流。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>argv</strong> argv 属性返回一个数组，由命令行执行脚本时的各个参数组成。它的第一个成员总是node，第二个成员是脚本文件名，其余成员是脚本文件的参数。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>execPath</strong> 返回执行当前脚本的 Node 二进制文件的绝对路径。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>execArgv</strong> 返回一个数组，成员是命令行下执行脚本时，在Node可执行文件与脚本文件之间的命令行参数。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>env</strong> 返回一个对象，成员为当前 shell 的环境变量</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>exitCode</strong> 进程退出时的代码，如果进程优通过 process.exit() 退出，不需要指定退出码。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>version</strong> Node 的版本，比如v0.10.18。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>versions</strong> 一个属性，包含了 node 的版本和依赖.</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>config</strong> 一个包含用来编译当前 node 执行文件的 javascript 配置选项的对象。它与运行 ./configure 脚本生成的 “config.gypi” 文件相同。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>pid</strong> 当前进程的进程号。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>title</strong> 进程名，默认值为”node”，可以自定义该值。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>arch</strong> 当前 CPU 的架构：’arm’、’ia32′ 或者 ‘x64’。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>platform</strong> 运行程序所在的平台系统 ‘darwin’, ‘freebsd’, ‘linux’, ‘sunos’ 或 ‘win32’</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>mainModule</strong> require.main 的备选方法。不同点，如果主模块在运行时改变，require.main可能会继续返回老的模块。可以认为，这两者引用了同一个模块。</td>
</tr>
</tbody></table>
<h3 id="实例-17"><a href="#实例-17" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出到终端</span></span><br><span class="line">process.stdout.write(<span class="string">&quot;Hello World!&quot;</span> + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过参数读取</span></span><br><span class="line">process.argv.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">val, index, array</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index + <span class="string">&#x27;: &#x27;</span> + val);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取执行路径</span></span><br><span class="line"><span class="built_in">console</span>.log(process.execPath);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 平台信息</span></span><br><span class="line"><span class="built_in">console</span>.log(process.platform);</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">Hello World!</span><br><span class="line">0: node</span><br><span class="line">1: /web/www/node/main.js</span><br><span class="line">/usr/local/node/0.10.36/bin/node</span><br><span class="line">darwin</span><br></pre></td></tr></table></figure>

<h3 id="方法参考手册-1"><a href="#方法参考手册-1" class="headerlink" title="方法参考手册"></a>方法参考手册</h3><p>Process 提供了很多有用的方法，便于我们更好的控制系统的交互：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>abort()</strong> 这将导致 node 触发 abort 事件。会让 node 退出并生成一个核心文件。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>chdir(directory)</strong> 改变当前工作进程的目录，如果操作失败抛出异常。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>cwd()</strong> 返回当前进程的工作目录</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>exit([code])</strong> 使用指定的 code 结束进程。如果忽略，将会使用 code 0。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>getgid()</strong> 获取进程的群组标识（参见 getgid(2)）。获取到得时群组的数字 id，而不是名字。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>setgid(id)</strong> 设置进程的群组标识（参见 setgid(2)）。可以接收数字 ID 或者群组名。如果指定了群组名，会阻塞等待解析为数字 ID 。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>getuid()</strong> 获取进程的用户标识(参见 getuid(2))。这是数字的用户 id，不是用户名。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>setuid(id)</strong> 设置进程的用户标识（参见setuid(2)）。接收数字 ID或字符串名字。果指定了群组名，会阻塞等待解析为数字 ID 。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>getgroups()</strong> 返回进程的群组 iD 数组。POSIX 系统没有保证一定有，但是 node.js 保证有。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>setgroups(groups)</strong> 设置进程的群组 ID。这是授权操作，所以你需要有 root 权限，或者有 CAP_SETGID 能力。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>initgroups(user, extra_group)</strong> 读取 /etc/group ，并初始化群组访问列表，使用成员所在的所有群组。这是授权操作，所以你需要有 root 权限，或者有 CAP_SETGID 能力。 注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>kill(pid[, signal])</strong> 发送信号给进程. pid 是进程id，并且 signal 是发送的信号的字符串描述。信号名是字符串，比如 ‘SIGINT’ 或 ‘SIGHUP’。如果忽略，信号会是 ‘SIGTERM’。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>memoryUsage()</strong> 返回一个对象，描述了 Node 进程所用的内存状况，单位为字节。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>nextTick(callback)</strong> 一旦当前事件循环结束，调用回调函数。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>umask([mask])</strong> 设置或读取进程文件的掩码。子进程从父进程继承掩码。如果mask 参数有效，返回旧的掩码。否则，返回当前掩码。</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>uptime()</strong> 返回 Node 已经运行的秒数。</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>hrtime()</strong> 返回当前进程的高分辨时间，形式为 [seconds, nanoseconds]数组。它是相对于过去的任意事件。该值与日期无关，因此不受时钟漂移的影响。主要用途是可以通过精确的时间间隔，来衡量程序的性能。 你可以将之前的结果传递给当前的 process.hrtime() ，会返回两者间的时间差，用来基准和测量时间间隔。</td>
</tr>
</tbody></table>
<h3 id="实例-18"><a href="#实例-18" class="headerlink" title="实例"></a>实例</h3><p>创建文件 main.js ，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出当前目录</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;当前目录: &#x27;</span> + process.cwd());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出当前版本</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;当前版本: &#x27;</span> + process.version);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出内存使用情况</span></span><br><span class="line"><span class="built_in">console</span>.log(process.memoryUsage());</span><br></pre></td></tr></table></figure>

<p>执行 main.js 文件，代码如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br><span class="line">当前目录: /web/com/mybj/nodejs</span><br><span class="line">当前版本: v0.10.36</span><br><span class="line">&#123; rss: 12541952, heapTotal: 4083456, heapUsed: 2157056 &#125;</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-常用工具"><a href="#Node-js-常用工具" class="headerlink" title="Node.js 常用工具"></a>Node.js 常用工具</h1><p><strong>util</strong> 是一个Node.js 核心模块，提供常用函数的集合，用于弥补核心 JavaScript 的功能 过于精简的不足。</p>
<p>使用方法如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="util-callbackify"><a href="#util-callbackify" class="headerlink" title="util.callbackify"></a>util.callbackify</h2><p><code>util.callbackify(original)</code> 将 <code>async</code> 异步函数（或者一个返回值为 <code>Promise</code> 的函数）转换成遵循异常优先的回调风格的函数，例如将 <code>(err, value) =&gt; ...</code> 回调作为最后一个参数。 在回调函数中，第一个参数为拒绝的原因（如果 <code>Promise</code> 解决，则为 <code>null</code>），第二个参数则是解决的值。</p>
<h3 id="实例-19"><a href="#实例-19" class="headerlink" title="实例"></a>实例</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> callbackFunction = util.callbackify(fn);</span><br><span class="line"></span><br><span class="line">callbackFunction(<span class="function">(<span class="params">err, ret</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(ret);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hello world</span><br></pre></td></tr></table></figure>

<p>回调函数是异步执行的，并且有异常堆栈错误追踪。 如果回调函数抛出一个异常，进程会触发一个 ‘<code>uncaughtException</code>‘ 异常，如果没有被捕获，进程将会退出。</p>
<p><code>null</code> 在回调函数中作为一个参数有其特殊的意义，如果回调函数的首个参数为 <code>Promise</code> 拒绝的原因且带有返回值，且值可以转换成布尔值 <code>false</code>，这个值会被封装在 <code>Error</code> 对象里，可以通过属性 <code>reason</code> 获取。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> callbackFunction = util.callbackify(fn);</span><br><span class="line"></span><br><span class="line">callbackFunction(<span class="function">(<span class="params">err, ret</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 当 Promise 被以 `null` 拒绝时，它被包装为 Error 并且原始值存储在 `reason` 中。</span></span><br><span class="line">  err &amp;&amp; err.hasOwnProperty(<span class="string">&#x27;reason&#x27;</span>) &amp;&amp; err.reason === <span class="literal">null</span>;  <span class="comment">// true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>original</code> 为 <code>async</code> 异步函数。该函数返回传统回调函数。</p>
<h2 id="util-inherits"><a href="#util-inherits" class="headerlink" title="util.inherits"></a>util.inherits</h2><p><code>util.inherits(constructor, superConstructor)</code> 是一个实现对象间原型继承的函数。</p>
<p>JavaScript 的面向对象特性是基于原型的，与常见的基于类的不同。JavaScript 没有提供对象继承的语言级别特性，而是通过原型复制来实现的。</p>
<p>在这里我们只介绍 <code>util.inherits</code> 的用法，示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Base</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;base&#x27;</span>; </span><br><span class="line">    <span class="built_in">this</span>.base = <span class="number">1991</span>; </span><br><span class="line">    <span class="built_in">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Hello &#x27;</span> + <span class="built_in">this</span>.name); </span><br><span class="line">    &#125;; </span><br><span class="line">&#125; </span><br><span class="line">Base.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sub</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;sub&#x27;</span>; </span><br><span class="line">&#125; </span><br><span class="line">util.inherits(Sub, Base); </span><br><span class="line"><span class="keyword">var</span> objBase = <span class="keyword">new</span> Base(); </span><br><span class="line">objBase.showName(); </span><br><span class="line">objBase.sayHello(); </span><br><span class="line"><span class="built_in">console</span>.log(objBase); </span><br><span class="line"><span class="keyword">var</span> objSub = <span class="keyword">new</span> Sub(); </span><br><span class="line">objSub.showName(); </span><br><span class="line"><span class="comment">//objSub.sayHello(); </span></span><br><span class="line"><span class="built_in">console</span>.log(objSub);</span><br></pre></td></tr></table></figure>

<p>我们定义了一个基础对象 Base 和一个继承自 Base 的 Sub，Base 有三个在构造函数内定义的属性和一个原型中定义的函数，通过<code>util.inherits</code> 实现继承。运行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">base </span><br><span class="line">Hello base </span><br><span class="line">&#123; name: &#x27;base&#x27;, base: 1991, sayHello: [Function] &#125; </span><br><span class="line">sub </span><br><span class="line">&#123; name: &#x27;sub&#x27; &#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>Sub 仅仅继承了Base 在原型中定义的函数，而构造函数内部创造的 base 属 性和 sayHello 函数都没有被 Sub 继承。</p>
<p>同时，在原型中定义的属性不会被 console.log 作 为对象的属性输出。如果我们去掉 <code>objSub.sayHello();</code> 这行的注释，将会看到：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node.js:201 </span><br><span class="line">throw e; // process.nextTick error, or &#x27;error&#x27; event on first tick </span><br><span class="line">^ </span><br><span class="line">TypeError: Object #&lt;Sub&gt; has no method &#x27;sayHello&#x27; </span><br><span class="line">at Object.&lt;anonymous&gt; (/home/byvoid/utilinherits.js:29:8) </span><br><span class="line">at Module._compile (module.js:441:26) </span><br><span class="line">at Object..js (module.js:459:10) </span><br><span class="line">at Module.load (module.js:348:31) </span><br><span class="line">at Function._load (module.js:308:12) </span><br><span class="line">at Array.0 (module.js:479:10) </span><br><span class="line">at EventEmitter._tickCallback (node.js:192:40)</span><br></pre></td></tr></table></figure>

<h2 id="util-inspect"><a href="#util-inspect" class="headerlink" title="util.inspect"></a>util.inspect</h2><p><code>util.inspect(object,[showHidden],[depth],[colors])</code> 是一个将任意对象转换 为字符串的方法，通常用于调试和错误输出。它至少接受一个参数 <code>object</code>，即要转换的对象。</p>
<p><code>showHidden</code> 是一个可选参数，如果值为 <code>true</code>，将会输出更多隐藏信息。</p>
<p><code>depth</code> 表示最大递归的层数，如果对象很复杂，你可以指定层数以控制输出信息的多 少。如果不指定<code>depth</code>，默认会递归 2 层，指定为 null 表示将不限递归层数完整遍历对象。 </p>
<p>如果 <code>colors</code> 值为 <code>true</code>，输出格式将会以 <code>ANSI</code> 颜色编码，通常用于在终端显示更漂亮 的效果。</p>
<p>特别要指出的是，<code>util.inspect</code> 并不会简单地直接把对象转换为字符串，即使该对 象定义了 <code>toString</code> 方法也不会调用。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;bymybj&#x27;</span>; </span><br><span class="line">    <span class="built_in">this</span>.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name; </span><br><span class="line">    &#125;; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> Person(); </span><br><span class="line"><span class="built_in">console</span>.log(util.inspect(obj)); </span><br><span class="line"><span class="built_in">console</span>.log(util.inspect(obj, <span class="literal">true</span>));</span><br></pre></td></tr></table></figure>

<p>运行结果是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Person &#123; name: &#x27;bymybj&#x27;, toString: [Function] &#125;</span><br><span class="line">Person &#123;</span><br><span class="line">  name: &#x27;bymybj&#x27;,</span><br><span class="line">  toString: </span><br><span class="line">   &#123; [Function]</span><br><span class="line">     [length]: 0,</span><br><span class="line">     [name]: &#x27;&#x27;,</span><br><span class="line">     [arguments]: null,</span><br><span class="line">     [caller]: null,</span><br><span class="line">     [prototype]: &#123; [constructor]: [Circular] &#125; &#125; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="util-isArray-object"><a href="#util-isArray-object" class="headerlink" title="util.isArray(object)"></a>util.isArray(object)</h2><p>如果给定的参数 “object” 是一个数组返回 true，否则返回 false。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">util.isArray([])</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">util.isArray(<span class="keyword">new</span> <span class="built_in">Array</span>)</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">util.isArray(&#123;&#125;)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h2 id="util-isRegExp-object"><a href="#util-isRegExp-object" class="headerlink" title="util.isRegExp(object)"></a>util.isRegExp(object)</h2><p>如果给定的参数 “object” 是一个正则表达式返回true，否则返回false。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">util.isRegExp(<span class="regexp">/some regexp/</span>)</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">util.isRegExp(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;another regexp&#x27;</span>))</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">util.isRegExp(&#123;&#125;)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h2 id="util-isDate-object"><a href="#util-isDate-object" class="headerlink" title="util.isDate(object)"></a>util.isDate(object)</h2><p>如果给定的参数 “object” 是一个日期返回true，否则返回false。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">util.isDate(<span class="keyword">new</span> <span class="built_in">Date</span>())</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">util.isDate(<span class="built_in">Date</span>())</span><br><span class="line"><span class="comment">// false (without &#x27;new&#x27; returns a String)</span></span><br><span class="line">util.isDate(&#123;&#125;)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h1 id="Node-js-文件系统"><a href="#Node-js-文件系统" class="headerlink" title="Node.js 文件系统"></a>Node.js 文件系统</h1><p>Node.js 提供一组类似 UNIX（POSIX）标准的文件操作API。 Node 导入文件系统模块(fs)语法如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="异步和同步"><a href="#异步和同步" class="headerlink" title="异步和同步"></a>异步和同步</h2><p>Node.js 文件系统（fs 模块）模块中的方法均有异步和同步版本，例如读取文件内容的函数有异步的 fs.readFile() 和同步的 fs.readFileSync()。</p>
<p>异步的方法函数最后一个参数为回调函数，回调函数的第一个参数包含了错误信息(error)。</p>
<p>建议大家使用异步方法，比起同步，异步方法性能更高，速度更快，而且没有阻塞。</p>
<h3 id="实例-20"><a href="#实例-20" class="headerlink" title="实例"></a>实例</h3><p>创建 input.txt 文件，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www.mybj123.com</span><br><span class="line">文件读取实例</span><br></pre></td></tr></table></figure>

<p>创建 file.js 文件, 代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步读取</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;input.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;异步读取: &quot;</span> + data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步读取</span></span><br><span class="line"><span class="keyword">const</span> data = fs.readFileSync(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;同步读取: &quot;</span> + data.toString());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;程序执行完毕。&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">同步读取: 码云笔记官网地址：www.mybj123.com</span><br><span class="line">文件读取实例</span><br><span class="line"></span><br><span class="line">程序执行完毕。</span><br><span class="line">异步读取: 码云笔记官网地址：www.mybj123.com</span><br><span class="line">文件读取实例</span><br></pre></td></tr></table></figure>

<p>接下来，让我们来具体了解下 Node.js 文件系统的方法。</p>
<h2 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h2><h3 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h3><p>以下为在异步模式下打开文件的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fs.open(path, flags[, mode], callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-6"><a href="#参数-6" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>path</strong> – 文件的路径。</li>
<li><strong>flags</strong> – 文件打开的行为。具体值详见下文。</li>
<li><strong>mode</strong> – 设置文件模式(权限)，文件创建默认权限为 0666(可读，可写)。</li>
<li><strong>callback</strong> – 回调函数，带有两个参数如：callback(err, fd)。</li>
</ul>
<p>flags 参数可以是以下值：</p>
<table>
<thead>
<tr>
<th align="left">Flag</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">r</td>
<td align="left">以读取模式打开文件。如果文件不存在抛出异常。</td>
</tr>
<tr>
<td align="left">r+</td>
<td align="left">以读写模式打开文件。如果文件不存在抛出异常。</td>
</tr>
<tr>
<td align="left">rs</td>
<td align="left">以同步的方式读取文件。</td>
</tr>
<tr>
<td align="left">rs+</td>
<td align="left">以同步的方式读取和写入文件。</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">以写入模式打开文件，如果文件不存在则创建。</td>
</tr>
<tr>
<td align="left">wx</td>
<td align="left">类似 ‘w’，但是如果文件路径存在，则文件写入失败。</td>
</tr>
<tr>
<td align="left">w+</td>
<td align="left">以读写模式打开文件，如果文件不存在则创建。</td>
</tr>
<tr>
<td align="left">wx+</td>
<td align="left">类似 ‘w+’， 但是如果文件路径存在，则文件读写失败。</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">以追加模式打开文件，如果文件不存在则创建。</td>
</tr>
<tr>
<td align="left">ax</td>
<td align="left">类似 ‘a’， 但是如果文件路径存在，则文件追加失败。</td>
</tr>
<tr>
<td align="left">a+</td>
<td align="left">以读取追加模式打开文件，如果文件不存在则创建。</td>
</tr>
<tr>
<td align="left">ax+</td>
<td align="left">类似 ‘a+’， 但是如果文件路径存在，则文件读取追加失败。</td>
</tr>
</tbody></table>
<h3 id="实例-21"><a href="#实例-21" class="headerlink" title="实例"></a>实例</h3><p>接下来我们创建 file.js 文件，并打开 input.txt 文件进行读写，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步打开文件</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备打开文件！&quot;</span>);</span><br><span class="line">fs.open(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;r+&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;文件打开成功！&quot;</span>);     </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备打开文件！</span><br><span class="line">文件打开成功！</span><br></pre></td></tr></table></figure>

<h2 id="获取文件信息"><a href="#获取文件信息" class="headerlink" title="获取文件信息"></a>获取文件信息</h2><h3 id="语法-8"><a href="#语法-8" class="headerlink" title="语法"></a>语法</h3><p>以下为通过异步模式获取文件信息的语法格式：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.stat(path, callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-7"><a href="#参数-7" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>path</strong> – 文件路径。</li>
<li><strong>callback</strong> – 回调函数，带有两个参数如：(err, stats), <strong>stats</strong> 是 <code>fs.Stats</code> 对象。</li>
</ul>
<p><code>fs.stat(path)</code>执行后，会将<code>stats</code>类的实例返回给其回调函数。可以通过<code>stats</code>类中的提供方法判断文件的相关属性。例如判断是否为文件：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.stat(<span class="string">&#x27;/Users/liuht/code/itbilu/demo/fs.js&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, stats</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(stats.isFile());         <span class="comment">//true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>stats类中的方法有：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">stats.isFile()</td>
<td align="left">如果是文件返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">stats.isDirectory()</td>
<td align="left">如果是目录返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">stats.isBlockDevice()</td>
<td align="left">如果是块设备返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">stats.isCharacterDevice()</td>
<td align="left">如果是字符设备返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">stats.isSymbolicLink()</td>
<td align="left">如果是软链接返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">stats.isFIFO()</td>
<td align="left">如果是FIFO，返回true，否则返回 false。FIFO是UNIX中的一种特殊类型的命令管道。</td>
</tr>
<tr>
<td align="left">stats.isSocket()</td>
<td align="left">如果是 Socket 返回 true，否则返回 false。</td>
</tr>
</tbody></table>
<h3 id="实例-22"><a href="#实例-22" class="headerlink" title="实例"></a>实例</h3><p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备打开文件！&quot;</span>);</span><br><span class="line">fs.stat(<span class="string">&#x27;input.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, stats</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(stats);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;读取文件信息成功！&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 检测文件类型</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;是否为文件(isFile) ? &quot;</span> + stats.isFile());</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;是否为目录(isDirectory) ? &quot;</span> + stats.isDirectory());    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备打开文件！</span><br><span class="line">&#123; dev: 16777220,</span><br><span class="line">  mode: 33188,</span><br><span class="line">  nlink: 1,</span><br><span class="line">  uid: 501,</span><br><span class="line">  gid: 20,</span><br><span class="line">  rdev: 0,</span><br><span class="line">  blksize: 4096,</span><br><span class="line">  ino: 40333161,</span><br><span class="line">  size: 61,</span><br><span class="line">  blocks: 8,</span><br><span class="line">  atime: Mon Sep 07 2015 17:43:55 GMT+0800 (CST),</span><br><span class="line">  mtime: Mon Sep 07 2015 17:22:35 GMT+0800 (CST),</span><br><span class="line">  ctime: Mon Sep 07 2015 17:22:35 GMT+0800 (CST) &#125;</span><br><span class="line">读取文件信息成功！</span><br><span class="line">是否为文件(isFile) ? true</span><br><span class="line">是否为目录(isDirectory) ? false</span><br></pre></td></tr></table></figure>

<h2 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h2><h3 id="语法-9"><a href="#语法-9" class="headerlink" title="语法"></a>语法</h3><p>以下为异步模式下写入文件的语法格式：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.writeFile(file, data[, options], callback)</span><br></pre></td></tr></table></figure>

<p>writeFile 直接打开文件默认是 <code>w</code> 模式，所以如果文件存在，该方法写入的内容会覆盖旧的文件内容。</p>
<h3 id="参数-8"><a href="#参数-8" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>file</strong> – 文件名或文件描述符。</li>
<li><strong>data</strong> – 要写入文件的数据，可以是 String(字符串) 或 Buffer(缓冲) 对象。</li>
<li><strong>options</strong> – 该参数是一个对象，包含 {encoding, mode, flag}。默认编码为 utf8, 模式为 0666 ， flag 为 ‘w’</li>
<li><strong>callback</strong> – 回调函数，回调函数只包含错误信息参数(err)，在写入失败时返回。</li>
</ul>
<h3 id="实例-23"><a href="#实例-23" class="headerlink" title="实例"></a>实例</h3><p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备写入文件&quot;</span>);</span><br><span class="line">fs.writeFile(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;我是通 过fs.writeFile 写入文件的内容&#x27;</span>,  <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;数据写入成功！&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;--------我是分割线-------------&quot;</span>)</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;读取写入的数据！&quot;</span>);</span><br><span class="line">   fs.readFile(<span class="string">&#x27;input.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;异步读取文件数据: &quot;</span> + data.toString());</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备写入文件</span><br><span class="line">数据写入成功！</span><br><span class="line">--------我是分割线-------------</span><br><span class="line">读取写入的数据！</span><br><span class="line">异步读取文件数据: 我是通 过fs.writeFile 写入文件的内容</span><br></pre></td></tr></table></figure>

<h2 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h2><h3 id="语法-10"><a href="#语法-10" class="headerlink" title="语法"></a>语法</h3><p>以下为异步模式下读取文件的语法格式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">fs<span class="selector-class">.read</span>(fd, buffer, offset, length, <span class="attribute">position</span>, callback)</span><br></pre></td></tr></table></figure>

<p>该方法使用了文件描述符来读取文件。</p>
<h3 id="参数-9"><a href="#参数-9" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>fd</strong> – 通过 fs.open() 方法返回的文件描述符。</li>
<li><strong>buffer</strong> – 数据写入的缓冲区。</li>
<li><strong>offset</strong> – 缓冲区写入的写入偏移量。</li>
<li><strong>length</strong> – 要从文件中读取的字节数。</li>
<li><strong>position</strong> – 文件读取的起始位置，如果 position 的值为 null，则会从当前文件指针的位置读取。</li>
<li><strong>callback</strong> – 回调函数，有三个参数err, bytesRead, buffer，err 为错误信息， bytesRead 表示读取的字节数，buffer 为缓冲区对象。</li>
</ul>
<h3 id="实例-24"><a href="#实例-24" class="headerlink" title="实例"></a>实例</h3><p>input.txt 文件内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www.mybj123.com</span><br></pre></td></tr></table></figure>

<p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> Buffer.alloc(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备打开已存在的文件！&quot;</span>);</span><br><span class="line">fs.open(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;r+&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;文件打开成功！&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;准备读取文件：&quot;</span>);</span><br><span class="line">   fs.read(fd, buf, <span class="number">0</span>, buf.length, <span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, bytes</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(bytes + <span class="string">&quot;  字节被读取&quot;</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 仅输出读取的字节</span></span><br><span class="line">      <span class="keyword">if</span>(bytes &gt; <span class="number">0</span>)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(buf.slice(<span class="number">0</span>, bytes).toString());</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备打开已存在的文件！</span><br><span class="line">文件打开成功！</span><br><span class="line">准备读取文件：</span><br><span class="line">42  字节被读取</span><br><span class="line">码云笔记官网地址：www.mybj123.com</span><br></pre></td></tr></table></figure>

<h2 id="关闭文件"><a href="#关闭文件" class="headerlink" title="关闭文件"></a>关闭文件</h2><h3 id="语法-11"><a href="#语法-11" class="headerlink" title="语法"></a>语法</h3><p>以下为异步模式下关闭文件的语法格式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">fs<span class="selector-class">.close</span>(fd, callback)</span><br></pre></td></tr></table></figure>

<p>该方法使用了文件描述符来读取文件。</p>
<h3 id="参数-10"><a href="#参数-10" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>fd</strong> – 通过 fs.open() 方法返回的文件描述符。</li>
<li><strong>callback</strong> – 回调函数，没有参数。</li>
</ul>
<h3 id="实例-25"><a href="#实例-25" class="headerlink" title="实例"></a>实例</h3><p>input.txt 文件内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">码云笔记官网地址：www.mybj123.com</span><br></pre></td></tr></table></figure>

<p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> Buffer.alloc(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备打开文件！&quot;</span>);</span><br><span class="line">fs.open(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;r+&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;文件打开成功！&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;准备读取文件！&quot;</span>);</span><br><span class="line">   fs.read(fd, buf, <span class="number">0</span>, buf.length, <span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, bytes</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 仅输出读取的字节</span></span><br><span class="line">      <span class="keyword">if</span>(bytes &gt; <span class="number">0</span>)&#123;</span><br><span class="line">          <span class="comment">//截取转换为字符串输出，一个中文等于三个字节</span></span><br><span class="line">         <span class="built_in">console</span>.log(buf.slice(<span class="number">0</span>, bytes).toString());</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 关闭文件</span></span><br><span class="line">      fs.close(fd, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">         &#125; </span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&quot;文件关闭成功&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备打开文件！</span><br><span class="line">文件打开成功！</span><br><span class="line">准备读取文件！</span><br><span class="line">菜鸟教程官网地址：www.runoob.com</span><br><span class="line">文件关闭成功</span><br></pre></td></tr></table></figure>

<h2 id="截取文件"><a href="#截取文件" class="headerlink" title="截取文件"></a>截取文件</h2><h3 id="语法-12"><a href="#语法-12" class="headerlink" title="语法"></a>语法</h3><p>以下为异步模式下截取文件的语法格式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">fs<span class="selector-class">.ftruncate</span>(fd, len, callback)</span><br></pre></td></tr></table></figure>

<p>该方法使用了文件描述符来读取文件。</p>
<h3 id="参数-11"><a href="#参数-11" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>fd</strong> – 通过 fs.open() 方法返回的文件描述符。</li>
<li><strong>len</strong> – 文件内容截取的长度。</li>
<li><strong>callback</strong> – 回调函数，没有参数。</li>
</ul>
<h3 id="实例-26"><a href="#实例-26" class="headerlink" title="实例"></a>实例</h3><p>input.txt 文件内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">site:www.mybj123.com</span><br></pre></td></tr></table></figure>

<p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> Buffer.alloc(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备打开文件！&quot;</span>);</span><br><span class="line">fs.open(<span class="string">&#x27;input.txt&#x27;</span>, <span class="string">&#x27;r+&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;文件打开成功！&quot;</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;截取10字节内的文件内容，超出部分将被去除。&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 截取文件</span></span><br><span class="line">   fs.ftruncate(fd, <span class="number">10</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125; </span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;文件截取成功。&quot;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;读取相同的文件&quot;</span>); </span><br><span class="line">      fs.read(fd, buf, <span class="number">0</span>, buf.length, <span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, bytes</span>)</span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">// 仅输出读取的字节</span></span><br><span class="line">         <span class="keyword">if</span>(bytes &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(buf.slice(<span class="number">0</span>, bytes).toString());</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">// 关闭文件</span></span><br><span class="line">         fs.close(fd, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err)&#123;</span><br><span class="line">               <span class="built_in">console</span>.log(err);</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;文件关闭成功！&quot;</span>);</span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备打开文件！</span><br><span class="line">文件打开成功！</span><br><span class="line">截取10字节内的文件内容，超出部分将被去除。</span><br><span class="line">文件截取成功。</span><br><span class="line">读取相同的文件</span><br><span class="line">site:www.m</span><br><span class="line">文件关闭成功</span><br></pre></td></tr></table></figure>

<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><h3 id="语法-13"><a href="#语法-13" class="headerlink" title="语法"></a>语法</h3><p>以下为删除文件的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fs.unlink(path, callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-12"><a href="#参数-12" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>path</strong> – 文件路径。</li>
<li><strong>callback</strong> – 回调函数，没有参数。</li>
</ul>
<h3 id="实例-27"><a href="#实例-27" class="headerlink" title="实例"></a>实例</h3><p>input.txt 文件内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">site:www.mybj123.com</span><br></pre></td></tr></table></figure>

<p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备删除文件！&quot;</span>);</span><br><span class="line">fs.unlink(<span class="string">&#x27;input.txt&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;文件删除成功！&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备删除文件！</span><br><span class="line">文件删除成功！</span><br></pre></td></tr></table></figure>

<p>再去查看 input.txt 文件，发现已经不存在了。</p>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><h3 id="语法-14"><a href="#语法-14" class="headerlink" title="语法"></a>语法</h3><p>以下为创建目录的语法格式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">fs<span class="selector-class">.mkdir</span>(path<span class="selector-attr">[, options]</span>, callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-13"><a href="#参数-13" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>path</strong> – 文件路径。</li>
<li>options 参数可以是：<ul>
<li><strong>recursive</strong> – 是否以递归的方式创建目录，默认为 false。</li>
<li><strong>mode</strong> – 设置目录权限，默认为 0777。</li>
</ul>
</li>
<li><strong>callback</strong> – 回调函数，没有参数。</li>
</ul>
<h3 id="实例-28"><a href="#实例-28" class="headerlink" title="实例"></a>实例</h3><p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">// tmp 目录必须存在</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;创建目录 /tmp/test/&quot;</span>);</span><br><span class="line">fs.mkdir(<span class="string">&quot;/tmp/test/&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;目录创建成功。&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">创建目录 /tmp/test/</span><br><span class="line">目录创建成功。</span><br></pre></td></tr></table></figure>

<p>可以添加 recursive: true 参数，不管创建的目录 /tmp 和 /tmp/a 是否存在：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.mkdir(<span class="string">&#x27;/tmp/a/apple&#x27;</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="读取目录"><a href="#读取目录" class="headerlink" title="读取目录"></a>读取目录</h2><h3 id="语法-15"><a href="#语法-15" class="headerlink" title="语法"></a>语法</h3><p>以下为读取目录的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fs.readdir(path, callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-14"><a href="#参数-14" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>path</strong> – 文件路径。</li>
<li><strong>callback</strong> – 回调函数，回调函数带有两个参数err, files，err 为错误信息，files 为 目录下的文件数组列表。</li>
</ul>
<h3 id="实例-29"><a href="#实例-29" class="headerlink" title="实例"></a>实例</h3><p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;查看 /tmp 目录&quot;</span>);</span><br><span class="line">fs.readdir(<span class="string">&quot;/tmp/&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err, files</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   files.forEach( <span class="function"><span class="keyword">function</span> (<span class="params">file</span>)</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log( file );</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">查看 /tmp 目录</span><br><span class="line">input.out</span><br><span class="line">output.out</span><br><span class="line">test</span><br><span class="line">test.txt</span><br></pre></td></tr></table></figure>

<h2 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h2><h3 id="语法-16"><a href="#语法-16" class="headerlink" title="语法"></a>语法</h3><p>以下为删除目录的语法格式：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.rmdir(path, callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-15"><a href="#参数-15" class="headerlink" title="参数"></a>参数</h3><p>参数使用说明如下：</p>
<ul>
<li><strong>path</strong> – 文件路径。</li>
<li><strong>callback</strong> – 回调函数，没有参数。</li>
</ul>
<h3 id="实例-30"><a href="#实例-30" class="headerlink" title="实例"></a>实例</h3><p>接下来我们创建 file.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">// 执行前创建一个空的 /tmp/test 目录</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;准备删除目录 /tmp/test&quot;</span>);</span><br><span class="line">fs.rmdir(<span class="string">&quot;/tmp/test&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;读取 /tmp 目录&quot;</span>);</span><br><span class="line">   fs.readdir(<span class="string">&quot;/tmp/&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err, files</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">      &#125;</span><br><span class="line">      files.forEach( <span class="function"><span class="keyword">function</span> (<span class="params">file</span>)</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log( file );</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node file.js </span><br><span class="line">准备删除目录 /tmp/test</span><br><span class="line">读取 /tmp 目录</span><br><span class="line">……</span><br></pre></td></tr></table></figure>

<h2 id="文件模块方法参考手册"><a href="#文件模块方法参考手册" class="headerlink" title="文件模块方法参考手册"></a>文件模块方法参考手册</h2><p>以下为 Node.js 文件模块相同的方法列表：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>fs.rename(oldPath, newPath, callback)</strong> 异步 rename().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>fs.ftruncate(fd, len, callback)</strong> 异步 ftruncate().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>fs.ftruncateSync(fd, len)</strong> 同步 ftruncate()</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>fs.truncate(path, len, callback)</strong> 异步 truncate().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>fs.truncateSync(path, len)</strong> 同步 truncate()</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>fs.chown(path, uid, gid, callback)</strong> 异步 chown().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>fs.chownSync(path, uid, gid)</strong> 同步 chown()</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>fs.fchown(fd, uid, gid, callback)</strong> 异步 fchown().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>fs.fchownSync(fd, uid, gid)</strong> 同步 fchown()</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>fs.lchown(path, uid, gid, callback)</strong> 异步 lchown().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>fs.lchownSync(path, uid, gid)</strong> 同步 lchown()</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>fs.chmod(path, mode, callback)</strong> 异步 chmod().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>fs.chmodSync(path, mode)</strong> 同步 chmod().</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>fs.fchmod(fd, mode, callback)</strong> 异步 fchmod().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>fs.fchmodSync(fd, mode)</strong> 同步 fchmod().</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>fs.lchmod(path, mode, callback)</strong> 异步 lchmod().回调函数没有参数，但可能抛出异常。Only available on Mac OS X.</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>fs.lchmodSync(path, mode)</strong> 同步 lchmod().</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left"><strong>fs.stat(path, callback)</strong> 异步 stat(). 回调函数有两个参数 err, stats，stats 是 fs.Stats 对象。</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left"><strong>fs.lstat(path, callback)</strong> 异步 lstat(). 回调函数有两个参数 err, stats，stats 是 fs.Stats 对象。</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left"><strong>fs.fstat(fd, callback)</strong> 异步 fstat(). 回调函数有两个参数 err, stats，stats 是 fs.Stats 对象。</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left"><strong>fs.statSync(path)</strong> 同步 stat(). 返回 fs.Stats 的实例。</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left"><strong>fs.lstatSync(path)</strong> 同步 lstat(). 返回 fs.Stats 的实例。</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left"><strong>fs.fstatSync(fd)</strong> 同步 fstat(). 返回 fs.Stats 的实例。</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left"><strong>fs.link(srcpath, dstpath, callback)</strong> 异步 link().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">25</td>
<td align="left"><strong>fs.linkSync(srcpath, dstpath)</strong> 同步 link().</td>
</tr>
<tr>
<td align="left">26</td>
<td align="left"><strong>fs.symlink(srcpath, dstpath[, type], callback)</strong> 异步 symlink().回调函数没有参数，但可能抛出异常。 type 参数可以设置为 ‘dir’, ‘file’, 或 ‘junction’ (默认为 ‘file’) 。</td>
</tr>
<tr>
<td align="left">27</td>
<td align="left"><strong>fs.symlinkSync(srcpath, dstpath[, type])</strong> 同步 symlink().</td>
</tr>
<tr>
<td align="left">28</td>
<td align="left"><strong>fs.readlink(path, callback)</strong> 异步 readlink(). 回调函数有两个参数 err, linkString。</td>
</tr>
<tr>
<td align="left">29</td>
<td align="left"><strong>fs.realpath(path[, cache], callback)</strong> 异步 realpath(). 回调函数有两个参数 err, resolvedPath。</td>
</tr>
<tr>
<td align="left">30</td>
<td align="left"><strong>fs.realpathSync(path[, cache])</strong> 同步 realpath()。返回绝对路径。</td>
</tr>
<tr>
<td align="left">31</td>
<td align="left"><strong>fs.unlink(path, callback)</strong> 异步 unlink().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">32</td>
<td align="left"><strong>fs.unlinkSync(path)</strong> 同步 unlink().</td>
</tr>
<tr>
<td align="left">33</td>
<td align="left"><strong>fs.rmdir(path, callback)</strong> 异步 rmdir().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">34</td>
<td align="left"><strong>fs.rmdirSync(path)</strong> 同步 rmdir().</td>
</tr>
<tr>
<td align="left">35</td>
<td align="left"><strong>fs.mkdir(path[, mode], callback)</strong> S异步 mkdir(2).回调函数没有参数，但可能抛出异常。 访问权限默认为 0777。</td>
</tr>
<tr>
<td align="left">36</td>
<td align="left"><strong>fs.mkdirSync(path[, mode])</strong> 同步 mkdir().</td>
</tr>
<tr>
<td align="left">37</td>
<td align="left"><strong>fs.readdir(path, callback)</strong> 异步 readdir(3). 读取目录的内容。</td>
</tr>
<tr>
<td align="left">38</td>
<td align="left"><strong>fs.readdirSync(path)</strong> 同步 readdir().返回文件数组列表。</td>
</tr>
<tr>
<td align="left">39</td>
<td align="left"><strong>fs.close(fd, callback)</strong> 异步 close().回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">40</td>
<td align="left"><strong>fs.closeSync(fd)</strong> 同步 close().</td>
</tr>
<tr>
<td align="left">41</td>
<td align="left"><strong>fs.open(path, flags[, mode], callback)</strong> 异步打开文件。</td>
</tr>
<tr>
<td align="left">42</td>
<td align="left"><strong>fs.openSync(path, flags[, mode])</strong> 同步 version of fs.open().</td>
</tr>
<tr>
<td align="left">43</td>
<td align="left"><strong>fs.utimes(path, atime, mtime, callback)</strong></td>
</tr>
<tr>
<td align="left">44</td>
<td align="left"><strong>fs.utimesSync(path, atime, mtime)</strong> 修改文件时间戳，文件通过指定的文件路径。</td>
</tr>
<tr>
<td align="left">45</td>
<td align="left"><strong>fs.futimes(fd, atime, mtime, callback)</strong></td>
</tr>
<tr>
<td align="left">46</td>
<td align="left"><strong>fs.futimesSync(fd, atime, mtime)</strong> 修改文件时间戳，通过文件描述符指定。</td>
</tr>
<tr>
<td align="left">47</td>
<td align="left"><strong>fs.fsync(fd, callback)</strong> 异步 fsync.回调函数没有参数，但可能抛出异常。</td>
</tr>
<tr>
<td align="left">48</td>
<td align="left"><strong>fs.fsyncSync(fd)</strong> 同步 fsync.</td>
</tr>
<tr>
<td align="left">49</td>
<td align="left"><strong>fs.write(fd, buffer, offset, length[, position], callback)</strong> 将缓冲区内容写入到通过文件描述符指定的文件。</td>
</tr>
<tr>
<td align="left">50</td>
<td align="left"><strong>fs.write(fd, data[, position[, encoding]], callback)</strong> 通过文件描述符 fd 写入文件内容。</td>
</tr>
<tr>
<td align="left">51</td>
<td align="left"><strong>fs.writeSync(fd, buffer, offset, length[, position])</strong> 同步版的 fs.write()。</td>
</tr>
<tr>
<td align="left">52</td>
<td align="left"><strong>fs.writeSync(fd, data[, position[, encoding]])</strong> 同步版的 fs.write().</td>
</tr>
<tr>
<td align="left">53</td>
<td align="left"><strong>fs.read(fd, buffer, offset, length, position, callback)</strong> 通过文件描述符 fd 读取文件内容。</td>
</tr>
<tr>
<td align="left">54</td>
<td align="left"><strong>fs.readSync(fd, buffer, offset, length, position)</strong> 同步版的 fs.read.</td>
</tr>
<tr>
<td align="left">55</td>
<td align="left"><strong>fs.readFile(filename[, options], callback)</strong> 异步读取文件内容。</td>
</tr>
<tr>
<td align="left">56</td>
<td align="left"><strong>fs.readFileSync(filename[, options])</strong>&lt;br同步版的 fs.readfile.&lt;=”” td=””&gt;&lt;/br同步版的&gt;</td>
</tr>
<tr>
<td align="left">57</td>
<td align="left"><strong>fs.writeFile(filename, data[, options], callback)</strong> 异步写入文件内容。</td>
</tr>
<tr>
<td align="left">58</td>
<td align="left"><strong>fs.writeFileSync(filename, data[, options])</strong> 同步版的 fs.writeFile。</td>
</tr>
<tr>
<td align="left">59</td>
<td align="left"><strong>fs.appendFile(filename, data[, options], callback)</strong> 异步追加文件内容。</td>
</tr>
<tr>
<td align="left">60</td>
<td align="left"><strong>fs.appendFileSync(filename, data[, options])</strong> The 同步 version of fs.appendFile.</td>
</tr>
<tr>
<td align="left">61</td>
<td align="left"><strong>fs.watchFile(filename[, options], listener)</strong> 查看文件的修改。</td>
</tr>
<tr>
<td align="left">62</td>
<td align="left"><strong>fs.unwatchFile(filename[, listener])</strong> 停止查看 filename 的修改。</td>
</tr>
<tr>
<td align="left">63</td>
<td align="left"><strong>fs.watch(filename[, options][, listener])</strong> 查看 filename 的修改，filename 可以是文件或目录。返回 fs.FSWatcher 对象。</td>
</tr>
<tr>
<td align="left">64</td>
<td align="left"><strong>fs.exists(path, callback)</strong> 检测给定的路径是否存在。</td>
</tr>
<tr>
<td align="left">65</td>
<td align="left"><strong>fs.existsSync(path)</strong> 同步版的 fs.exists.</td>
</tr>
<tr>
<td align="left">66</td>
<td align="left"><strong>fs.access(path[, mode], callback)</strong> 测试指定路径用户权限。</td>
</tr>
<tr>
<td align="left">67</td>
<td align="left"><strong>fs.accessSync(path[, mode])</strong> 同步版的 fs.access。</td>
</tr>
<tr>
<td align="left">68</td>
<td align="left"><strong>fs.createReadStream(path[, options])</strong> 返回ReadStream 对象。</td>
</tr>
<tr>
<td align="left">69</td>
<td align="left"><strong>fs.createWriteStream(path[, options])</strong> 返回 WriteStream 对象。</td>
</tr>
<tr>
<td align="left">70</td>
<td align="left"><strong>fs.symlink(srcpath, dstpath[, type], callback)</strong> 异步 symlink().回调函数没有参数，但可能抛出异常。</td>
</tr>
</tbody></table>
<p>更多内容，请查看官网文件模块描述：<a href="https://nodejs.org/api/fs.html#fs_fs_rename_oldpath_newpath_callback">File System</a>。</p>
<h1 id="Node-js-GET-POST请求"><a href="#Node-js-GET-POST请求" class="headerlink" title="Node.js GET/POST请求"></a>Node.js GET/POST请求</h1><p>在很多场景中，我们的服务器都需要跟用户的浏览器打交道，如表单提交。</p>
<p>表单提交到服务器一般都使用 GET/POST 请求。</p>
<p>本文码云笔记将为大家介绍 Node.js GET/POST请求。</p>
<h3 id="获取GET请求内容"><a href="#获取GET请求内容" class="headerlink" title="获取GET请求内容"></a>获取GET请求内容</h3><p>由于GET请求直接被嵌入在路径中，URL是完整的请求路径，包括了<code>?</code>后面的部分，因此你可以手动解析后面的内容作为GET请求的参数。</p>
<p>node.js 中 <code>url</code> 模块中的 <code>parse</code> 函数提供了这个功能。</p>
<h4 id="实例-31"><a href="#实例-31" class="headerlink" title="实例"></a>实例</h4><p>新建一个server.js文件，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">	res.end(util.inspect(url.parse(req.url, <span class="literal">true</span>)));</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br></pre></td></tr></table></figure>

<p>使用 <strong>node</strong> 命令执行以上的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <code>http://localhost:8888/user?name=码云笔记&amp;url=www.mybj123.com</code> 然后查看返回结果:</p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201216102829575.png" alt="image-20201216102829575"></p>
<h3 id="获取-URL-的参数"><a href="#获取-URL-的参数" class="headerlink" title="获取 URL 的参数"></a>获取 URL 的参数</h3><p>我们可以使用 <code>url.parse</code> 方法来解析 <code>URL</code> 中的参数，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 解析 url 参数</span></span><br><span class="line">	<span class="keyword">var</span> params = url.parse(req.url, <span class="literal">true</span>).query;</span><br><span class="line">	res.write(<span class="string">&quot;网站名：&quot;</span> + params.name);</span><br><span class="line">	res.write(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	res.write(<span class="string">&quot;网站 URL：&quot;</span> + params.url);</span><br><span class="line">	res.end();</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br></pre></td></tr></table></figure>

<p>使用 <strong>node</strong> 命令执行以上的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <code>http://localhost:8888/user?name=码云笔记&amp;url=www.mybj123.com</code> 然后查看返回结果:</p>
<p><img src="C:\Users\52862\AppData\Roaming\Typora\typora-user-images\image-20201216103649759.png" alt="image-20201216103649759"></p>
<h2 id="获取-POST-请求内容"><a href="#获取-POST-请求内容" class="headerlink" title="获取 POST 请求内容"></a>获取 POST 请求内容</h2><p>POST 请求的内容全部的都在请求体中，<code>http.ServerRequest</code> 并没有一个属性内容为请求体，原因是等待请求体传输可能是一件耗时的工作。</p>
<p>比如上传文件，而很多时候我们可能并不需要理会请求体的内容，恶意的<code>POST</code>请求会大大消耗服务器的资源，所以 <code>node.js</code> 默认是不会解析请求体的，当你需要的时候，需要手动来做。</p>
<h4 id="基本语法结构说明"><a href="#基本语法结构说明" class="headerlink" title="基本语法结构说明"></a>基本语法结构说明</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 定义了一个post变量，用于暂存请求体的信息</span></span><br><span class="line">    <span class="keyword">const</span> post = <span class="string">&#x27;&#x27;</span>;     </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 通过req的data事件监听函数，每当接受到请求体的数据，就累加到post变量中</span></span><br><span class="line">    req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>)</span>&#123;    </span><br><span class="line">        post += chunk;</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 在end事件触发后，通过querystring.parse将post解析为真正的POST请求格式，然后向客户端返回。</span></span><br><span class="line">    req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;    </span><br><span class="line">        post = querystring.parse(post);</span><br><span class="line">        res.end(util.inspect(post));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br></pre></td></tr></table></figure>

<h4 id="实例演示"><a href="#实例演示" class="headerlink" title="实例演示"></a>实例演示</h4><p>以下实例表单通过 POST 提交并输出数据：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> postHTML = </span><br><span class="line">  <span class="string">&#x27;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;码云笔记 Node.js 实例&lt;/title&gt;&lt;/head&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;body&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;form method=&quot;post&quot;&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;网站名： &lt;input name=&quot;name&quot;&gt;&lt;br&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;网站 URL： &lt;input name=&quot;url&quot;&gt;&lt;br&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;input type=&quot;submit&quot;&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;/form&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;/body&gt;&lt;/html&gt;&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> body = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">    body += chunk;</span><br><span class="line">  &#125;);</span><br><span class="line">  req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 解析参数</span></span><br><span class="line">    body = querystring.parse(body);</span><br><span class="line">    <span class="comment">// 设置响应头部信息及编码</span></span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf8&#x27;</span>&#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(body.name &amp;&amp; body.url) &#123; <span class="comment">// 输出提交的数据</span></span><br><span class="line">        res.write(<span class="string">&quot;网站名：&quot;</span> + body.name);</span><br><span class="line">        res.write(<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        res.write(<span class="string">&quot;网站 URL：&quot;</span> + body.url);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  <span class="comment">// 输出表单</span></span><br><span class="line">        res.write(postHTML);</span><br><span class="line">    &#125;</span><br><span class="line">    res.end();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br></pre></td></tr></table></figure>

<p>使用 <strong>node</strong> 命令执行以上的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-工具模块"><a href="#Node-js-工具模块" class="headerlink" title="Node.js 工具模块"></a>Node.js 工具模块</h1><p>在 Node.js 模块库中有很多好用的模块。接下来我们为大家介绍几种常用模块的使用。</p>
<h2 id="一、Node-js-OS-模块"><a href="#一、Node-js-OS-模块" class="headerlink" title="一、Node.js OS 模块"></a>一、Node.js OS 模块</h2><p>Node.js os 模块提供了一些基本的系统操作函数。我们可以通过以下方式引入该模块：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>os.tmpdir()</strong> 返回操作系统的默认临时文件夹。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>os.endianness()</strong> 返回 CPU 的字节序，可能的是 “BE” 或 “LE”。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>os.hostname()</strong> 返回操作系统的主机名。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>os.type()</strong> 返回操作系统名</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>os.platform()</strong> 返回编译时的操作系统名</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>os.arch()</strong> 返回操作系统 CPU 架构，可能的值有 “x64″、”arm” 和 “ia32″。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>os.release()</strong> 返回操作系统的发行版本。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>os.uptime()</strong> 返回操作系统运行的时间，以秒为单位。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>os.loadavg()</strong> 返回一个包含 1、5、15 分钟平均负载的数组。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>os.totalmem()</strong> 返回系统内存总量，单位为字节。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>os.freemem()</strong> 返回操作系统空闲内存量，单位是字节。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>os.cpus()</strong> 返回一个对象数组，包含所安装的每个 CPU/内核的信息：型号、速度（单位 MHz）、时间（一个包含 user、nice、sys、idle 和 irq 所使用 CPU/内核毫秒数的对象）。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>os.networkInterfaces()</strong> 获得网络接口列表。</td>
</tr>
</tbody></table>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">属性 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>os.EOL</strong> 定义了操作系统的行尾符的常量。</td>
</tr>
</tbody></table>
<h3 id="实例-32"><a href="#实例-32" class="headerlink" title="实例"></a>实例</h3><p>创建 main.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// CPU 的字节序</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;endianness : &#x27;</span> + os.endianness());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作系统名</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;type : &#x27;</span> + os.type());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作系统名</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;platform : &#x27;</span> + os.platform());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统内存总量</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;total memory : &#x27;</span> + os.totalmem() + <span class="string">&quot; bytes.&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作系统空闲内存量</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;free memory : &#x27;</span> + os.freemem() + <span class="string">&quot; bytes.&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ node main.js </span><br><span class="line">endianness : LE</span><br><span class="line">type : Linux</span><br><span class="line">platform : linux</span><br><span class="line">total memory : 25103400960 bytes.</span><br><span class="line">free memory : 20676710400 bytes.</span><br></pre></td></tr></table></figure>

<h2 id="二、Node-js-Path-模块"><a href="#二、Node-js-Path-模块" class="headerlink" title="二、Node.js Path 模块"></a>二、Node.js Path 模块</h2><p>Node.js path 模块提供了一些用于处理文件路径的小工具，我们可以通过以下方式引入该模块：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="方法-2"><a href="#方法-2" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>path.normalize(p)</strong> 规范化路径，注意’..’ 和 ‘.’。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>path.join([path1][, path2][, …])</strong> 用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是”<code>/</code>“，Windows系统是”<code>\</code>“。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>path.resolve([from …], to)</strong> 将 <strong>to</strong> 参数解析为绝对路径，给定的路径的序列是从右往左被处理的，后面每个 <code>path</code> 被依次解析，直到构造完成一个绝对路径。 例如，给定的路径片段的序列为：<code>/foo、/bar、baz</code>，则调用 p<code>ath.resolve(&#39;/foo&#39;, &#39;/bar&#39;, &#39;baz&#39;)</code> 会返回 <code>/bar/baz</code>。<code>path.resolve(&#39;/foo/bar&#39;, &#39;./baz&#39;); // 返回: &#39;/foo/bar/baz&#39; path.resolve(&#39;/foo/bar&#39;, &#39;/tmp/file/&#39;); // 返回: &#39;/tmp/file&#39; path.resolve(&#39;wwwroot&#39;, &#39;static_files/png/&#39;, &#39;../gif/image.gif&#39;); // 如果当前工作目录为 /home/myself/node， // 则返回 &#39;/home/myself/node/wwwroot/static_files/gif/image.gif&#39;</code></td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>path.isAbsolute(path)</strong> 判断参数 <code>path</code> 是否是绝对路径。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>path.relative(from, to)</strong> 用于将绝对路径转为相对路径，返回从 from 到 to 的相对路径（基于当前工作目录）。在 Linux 上：<code>path.relative(&#39;/data/orandea/test/aaa&#39;, &#39;/data/orandea/impl/bbb&#39;); // 返回: &#39;../../impl/bbb&#39;</code>在 Windows 上：<code>path.relative(&#39;C:\\orandea\\test\\aaa&#39;, &#39;C:\\orandea\\impl\\bbb&#39;); // 返回: &#39;..\\..\\impl\\bbb&#39;</code></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>path.dirname(p)</strong> 返回路径中代表文件夹的部分，同 Unix 的<code>dirname</code> 命令类似。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>path.basename(p[, ext])</strong> 返回路径中的最后一部分。同 Unix 命令 <code>bashname</code> 类似。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>path.extname(p)</strong> 返回路径中文件的后缀名，即路径中最后一个’<code>.</code>‘之后的部分。如果一个路径中并不包含’<code>.</code>‘或该路径只包含一个’<code>.</code>‘ 且这个’<code>.</code>‘为路径的第一个字符，则此命令返回空字符串。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>path.parse(pathString)</strong> 返回路径字符串的对象。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>path.format(pathObject)</strong> 从对象中返回路径字符串，和 <code>path.parse</code> 相反。</td>
</tr>
</tbody></table>
<h3 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">属性 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>path.sep</strong> 平台的文件路径分隔符，’<code>\\</code>‘ 或 ‘<code>/</code>‘。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>path.delimiter</strong> 平台的分隔符, ; or ‘<code>:</code>‘.</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>path.posix</strong> 提供上述 path 的方法，不过总是以 posix 兼容的方式交互。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>path.win32</strong> 提供上述 path 的方法，不过总是以 win32 兼容的方式交互。</td>
</tr>
</tbody></table>
<h3 id="实例-33"><a href="#实例-33" class="headerlink" title="实例"></a>实例</h3><p>创建 main.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 格式化路径</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;normalization : &#x27;</span> + path.normalize(<span class="string">&#x27;/test/test1//2slashes/1slash/tab/..&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接路径</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;joint path : &#x27;</span> + path.join(<span class="string">&#x27;/test&#x27;</span>, <span class="string">&#x27;test1&#x27;</span>, <span class="string">&#x27;2slashes/1slash&#x27;</span>, <span class="string">&#x27;tab&#x27;</span>, <span class="string">&#x27;..&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换为绝对路径</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;resolve : &#x27;</span> + path.resolve(<span class="string">&#x27;main.js&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路径中文件的后缀名</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ext name : &#x27;</span> + path.extname(<span class="string">&#x27;main.js&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>代码执行结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ node main.js </span><br><span class="line">normalization : /test/test1/2slashes/1slash</span><br><span class="line">joint path : /test/test1/2slashes/1slash</span><br><span class="line">resolve : /web/com/1427176256_27423/main.js</span><br><span class="line">ext name : .js</span><br></pre></td></tr></table></figure>

<h2 id="三、Node-js-Net-模块"><a href="#三、Node-js-Net-模块" class="headerlink" title="三、Node.js Net 模块"></a>三、Node.js Net 模块</h2><p>Node.js Net 模块提供了一些用于底层的网络通信的小工具，包含了创建服务器/客户端的方法，我们可以通过以下方式引入该模块：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&quot;net&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="方法-3"><a href="#方法-3" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>net.createServer([options][, connectionListener])</strong> 创建一个 TCP 服务器。参数 connectionListener 自动给 ‘connection’ 事件创建监听器。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>net.connect(options[, connectionListener])</strong> 返回一个新的 ‘net.Socket’，并连接到指定的地址和端口。 当 socket 建立的时候，将会触发 ‘connect’ 事件。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>net.createConnection(options[, connectionListener])</strong> 创建一个到端口 port 和 主机 host的 TCP 连接。 host 默认为 ‘localhost’。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>net.connect(port[, host][, connectListener])</strong> 创建一个端口为 port 和主机为 host的 TCP 连接 。host 默认为 ‘localhost’。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>net.createConnection(port[, host][, connectListener])</strong> 创建一个端口为 port 和主机为 host的 TCP 连接 。host 默认为 ‘localhost’。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>net.connect(path[, connectListener])</strong> 创建连接到 path 的 unix socket 。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件上。返回 ‘net.Socket’。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>net.createConnection(path[, connectListener])</strong> 创建连接到 path 的 unix socket 。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>net.isIP(input)</strong> 检测输入的是否为 IP 地址。 IPV4 返回 4， IPV6 返回 6，其他情况返回 0。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>net.isIPv4(input)</strong> 如果输入的地址为 IPV4， 返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>net.isIPv6(input)</strong> 如果输入的地址为 IPV6， 返回 true，否则返回 false。</td>
</tr>
</tbody></table>
<hr>
<h3 id="net-Server"><a href="#net-Server" class="headerlink" title="net.Server"></a>net.Server</h3><p>net.Server通常用于创建一个 TCP 或本地服务器。</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>server.listen(port[, host][, backlog][, callback])</strong> 监听指定端口 port 和 主机 host ac连接。 默认情况下 host 接受任何 IPv4 地址(INADDR_ANY)的直接连接。端口 port 为 0 时，则会分配一个随机端口。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>server.listen(path[, callback])</strong> 通过指定 path 的连接，启动一个本地 socket 服务器。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>server.listen(handle[, callback])</strong> 通过指定句柄连接。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>server.listen(options[, callback])</strong> options 的属性：端口 port, 主机 host, 和 backlog, 以及可选参数 callback 函数, 他们在一起调用server.listen(port, [host], [backlog], [callback])。还有，参数 path 可以用来指定 UNIX socket。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>server.close([callback])</strong> 服务器停止接收新的连接，保持现有连接。这是异步函数，当所有连接结束的时候服务器会关闭，并会触发 ‘close’ 事件。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>server.address()</strong> 操作系统返回绑定的地址，协议族名和服务器端口。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>server.unref()</strong> 如果这是事件系统中唯一一个活动的服务器，调用 unref 将允许程序退出。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>server.ref()</strong> 与 unref 相反，如果这是唯一的服务器，在之前被 unref 了的服务器上调用 ref 将不会让程序退出（默认行为）。如果服务器已经被 ref，则再次调用 ref 并不会产生影响。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>server.getConnections(callback)</strong> 异步获取服务器当前活跃连接的数量。当 socket 发送给子进程后才有效；回调函数有 2 个参数 err 和 count。</td>
</tr>
</tbody></table>
<h3 id="事件-1"><a href="#事件-1" class="headerlink" title="事件"></a>事件</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">事件 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>listening</strong> 当服务器调用 server.listen 绑定后会触发。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>connection</strong> 当新连接创建后会被触发。socket 是 net.Socket实例。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>close</strong> 服务器关闭时会触发。注意，如果存在连接，这个事件不会被触发直到所有的连接关闭。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>error</strong> 发生错误时触发。’close’ 事件将被下列事件直接调用</td>
</tr>
</tbody></table>
<h3 id="net-Socket"><a href="#net-Socket" class="headerlink" title="net.Socket"></a>net.Socket</h3><p><code>net.Socket</code> 对象是 <code>TCP</code> 或 <code>UNIX Socket</code> 的抽象。<code>net.Socket</code> 实例实现了一个双工流接口。 他们可以在用户创建客户端(使用 <code>connect()</code>)时使用, 或者由 <code>Node</code> 创建它们，并通过 <code>connection</code> 服务器事件传递给用户。</p>
<h3 id="事件-2"><a href="#事件-2" class="headerlink" title="事件"></a>事件</h3><p>net.Socket 事件有：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">事件 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>lookup</strong> 在解析域名后，但在连接前，触发这个事件。对 UNIX sokcet 不适用。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>connect</strong> 成功建立 socket 连接时触发。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>data</strong> 当接收到数据时触发。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>end</strong> 当 socket 另一端发送 FIN 包时，触发该事件。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>timeout</strong> 当 socket 空闲超时时触发，仅是表明 socket 已经空闲。用户必须手动关闭连接。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>drain</strong> 当写缓存为空得时候触发。可用来控制上传。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>error</strong> 错误发生时触发。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>close</strong> 当 socket 完全关闭时触发。参数 had_error 是布尔值，它表示是否因为传输错误导致 socket 关闭。</td>
</tr>
</tbody></table>
<h3 id="属性-2"><a href="#属性-2" class="headerlink" title="属性"></a>属性</h3><p>net.Socket 提供了很多有用的属性，便于控制 socket 交互：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">属性 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>socket.bufferSize</strong> 该属性显示了要写入缓冲区的字节数。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>socket.remoteAddress</strong> 远程的 IP 地址字符串，例如：’74.125.127.100′ or ‘2001:4860:a005::68’。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>socket.remoteFamily</strong> 远程IP协议族字符串，比如 ‘IPv4’ or ‘IPv6’。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>socket.remotePort</strong> 远程端口，数字表示，例如：80 or 21。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>socket.localAddress</strong> 网络连接绑定的本地接口 远程客户端正在连接的本地 IP 地址，字符串表示。例如，如果你在监听’0.0.0.0’而客户端连接在’192.168.1.1’，这个值就会是 ‘192.168.1.1’。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>socket.localPort</strong> 本地端口地址，数字表示。例如：80 or 21。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>socket.bytesRead</strong> 接收到得字节数。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>socket.bytesWritten</strong> 发送的字节数。</td>
</tr>
</tbody></table>
<h3 id="方法-4"><a href="#方法-4" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>new net.Socket([options])</strong> 构造一个新的 socket 对象。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>socket.connect(port[, host][, connectListener])</strong> 指定端口 port 和 主机 host，创建 socket 连接 。参数 host 默认为 localhost。通常情况不需要使用 net.createConnection 打开 socket。只有你实现了自己的 socket 时才会用到。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>socket.connect(path[, connectListener])</strong> 打开指定路径的 unix socket。通常情况不需要使用 net.createConnection 打开 socket。只有你实现了自己的 socket 时才会用到。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>socket.setEncoding([encoding])</strong> 设置编码</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>socket.write(data[, encoding][, callback])</strong> 在 socket 上发送数据。第二个参数指定了字符串的编码，默认是 UTF8 编码。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>socket.end([data][, encoding])</strong> 半关闭 socket。例如，它发送一个 FIN 包。可能服务器仍在发送数据。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>socket.destroy()</strong> 确保没有 I/O 活动在这个套接字上。只有在错误发生情况下才需要。（处理错误等等）。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>socket.pause()</strong> 暂停读取数据。就是说，不会再触发 data 事件。对于控制上传非常有用。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>socket.resume()</strong> 调用 pause() 后想恢复读取数据。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>socket.setTimeout(timeout[, callback])</strong> socket 闲置时间超过 timeout 毫秒后 ，将 socket 设置为超时。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>socket.setNoDelay([noDelay])</strong> 禁用纳格（Nagle）算法。默认情况下 TCP 连接使用纳格算法，在发送前他们会缓冲数据。将 noDelay 设置为 true 将会在调用 socket.write() 时立即发送数据。noDelay 默认值为 true。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>socket.setKeepAlive([enable][, initialDelay])</strong> 禁用/启用长连接功能，并在发送第一个在闲置 socket 上的长连接 probe 之前，可选地设定初始延时。默认为 false。 设定 initialDelay （毫秒），来设定收到的最后一个数据包和第一个长连接probe之间的延时。将 initialDelay 设为0，将会保留默认（或者之前）的值。默认值为0.</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>socket.address()</strong> 操作系统返回绑定的地址，协议族名和服务器端口。返回的对象有 3 个属性，比如{ port: 12346, family: ‘IPv4’, address: ‘127.0.0.1’ }。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>socket.unref()</strong> 如果这是事件系统中唯一一个活动的服务器，调用 unref 将允许程序退出。如果服务器已被 unref，则再次调用 unref 并不会产生影响。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>socket.ref()</strong> 与 unref 相反，如果这是唯一的服务器，在之前被 unref 了的服务器上调用 ref 将不会让程序退出（默认行为）。如果服务器已经被 ref，则再次调用 ref 并不会产生影响。</td>
</tr>
</tbody></table>
<h3 id="实例-34"><a href="#实例-34" class="headerlink" title="实例"></a>实例</h3><p>创建 server.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> server = net.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">connection</span>) </span>&#123; </span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;client connected&#x27;</span>);</span><br><span class="line">   connection.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;客户端关闭连接&#x27;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">   connection.write(<span class="string">&#x27;Hello World!\r\n&#x27;</span>);</span><br><span class="line">   connection.pipe(connection);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;server is listening&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行以上服务端代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ node server.js</span><br><span class="line">server is listening   # 服务已创建并监听 8080 端口</span><br></pre></td></tr></table></figure>

<p>新开一个窗口，创建 client.js 文件，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> client = net.connect(&#123;<span class="attr">port</span>: <span class="number">8080</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;连接到服务器！&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line">client.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">   client.end();</span><br><span class="line">&#125;);</span><br><span class="line">client.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;断开与服务器的连接&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行以上客户端的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">连接到服务器！</span><br><span class="line">Hello World!</span><br><span class="line"></span><br><span class="line">断开与服务器的连接</span><br></pre></td></tr></table></figure>

<h2 id="四、Node-js-DNS-模块"><a href="#四、Node-js-DNS-模块" class="headerlink" title="四、Node.js DNS 模块"></a>四、Node.js DNS 模块</h2><p>Node.js <strong>DNS</strong> 模块用于解析域名。引入 DNS 模块语法格式如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dns = <span class="built_in">require</span>(<span class="string">&quot;dns&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="方法-5"><a href="#方法-5" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>dns.lookup(hostname[, options], callback)</strong> 将域名（比如 ‘runoob.com’）解析为第一条找到的记录 A （IPV4）或 AAAA(IPV6)。参数 options可以是一个对象或整数。如果没有提供 options，IP v4 和 v6 地址都可以。如果 options 是整数，则必须是 4 或 6。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>dns.lookupService(address, port, callback)</strong> 使用 getnameinfo 解析传入的地址和端口为域名和服务。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>dns.resolve(hostname[, rrtype], callback)</strong> 将一个域名（如 ‘runoob.com’）解析为一个 rrtype 指定记录类型的数组。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>dns.resolve4(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能查询 IPv4 (A 记录）。 addresses IPv4 地址数组 (比如，[‘74.125.79.104’, ‘74.125.79.105’, ‘74.125.79.106’]）。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>dns.resolve6(hostname, callback)</strong> 和 dns.resolve4() 类似， 仅能查询 IPv6( AAAA 查询）</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>dns.resolveMx(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能查询邮件交换(MX 记录)。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>dns.resolveTxt(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能进行文本查询 (TXT 记录）。 addresses 是 2-d 文本记录数组。(比如，[ [‘v=spf1 ip4:0.0.0.0 ‘, ‘~all’ ] ]）。 每个子数组包含一条记录的 TXT 块。根据使用情况可以连接在一起，也可单独使用。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>dns.resolveSrv(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能进行服务记录查询 (SRV 记录）。 addresses 是 hostname可用的 SRV 记录数组。 SRV 记录属性有优先级（priority），权重（weight）, 端口（port）, 和名字（name） (比如，[{‘priority’: 10, ‘weight’: 5, ‘port’: 21223, ‘name’: ‘service.example.com’}, …]）。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>dns.resolveSoa(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能查询权威记录(SOA 记录）。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>dns.resolveNs(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能进行域名服务器记录查询(NS 记录）。 addresses 是域名服务器记录数组（hostname 可以使用） (比如, [‘ns1.example.com’, ‘ns2.example.com’]）。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>dns.resolveCname(hostname, callback)</strong> 和 dns.resolve() 类似, 仅能进行别名记录查询 (CNAME记录)。addresses 是对 hostname 可用的别名记录数组 (比如，, [‘bar.example.com’]）。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>dns.reverse(ip, callback)</strong> 反向解析 IP 地址，指向该 IP 地址的域名数组。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>dns.getServers()</strong> 返回一个用于当前解析的 IP 地址数组的字符串。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>dns.setServers(servers)</strong> 指定一组 IP 地址作为解析服务器。</td>
</tr>
</tbody></table>
<h3 id="rrtypes"><a href="#rrtypes" class="headerlink" title="rrtypes"></a>rrtypes</h3><p>以下列出了 <code>dns.resolve()</code> 方法中有效的 <code>rrtypes</code>值:</p>
<ul>
<li><code>&#39;A&#39;</code> IPV4 地址, 默认</li>
<li><code>&#39;AAAA&#39;</code> IPV6 地址</li>
<li><code>&#39;MX&#39;</code> 邮件交换记录</li>
<li><code>&#39;TXT&#39;</code> text 记录</li>
<li><code>&#39;SRV&#39;</code> SRV 记录</li>
<li><code>&#39;PTR&#39;</code> 用来反向 IP 查找</li>
<li><code>&#39;NS&#39;</code> 域名服务器记录</li>
<li><code>&#39;CNAME&#39;</code> 别名记录</li>
<li><code>&#39;SOA&#39;</code> 授权记录的初始值</li>
</ul>
<h3 id="错误码"><a href="#错误码" class="headerlink" title="错误码"></a>错误码</h3><p>每次 DNS 查询都可能返回以下错误码：</p>
<ul>
<li><code>dns.NODATA</code>: 无数据响应。</li>
<li><code>dns.FORMERR</code>: 查询格式错误。</li>
<li><code>dns.SERVFAIL</code>: 常规失败。</li>
<li><code>dns.NOTFOUND</code>: 没有找到域名。</li>
<li><code>dns.NOTIMP</code>: 未实现请求的操作。</li>
<li><code>dns.REFUSED</code>: 拒绝查询。</li>
<li><code>dns.BADQUERY</code>: 查询格式错误。</li>
<li><code>dns.BADNAME</code>: 域名格式错误。</li>
<li><code>dns.BADFAMILY</code>: 地址协议不支持。</li>
<li><code>dns.BADRESP</code>: 回复格式错误。</li>
<li><code>dns.CONNREFUSED</code>: 无法连接到 DNS 服务器。</li>
<li><code>dns.TIMEOUT</code>: 连接 DNS 服务器超时。</li>
<li><code>dns.EOF</code>: 文件末端。</li>
<li><code>dns.FILE</code>: 读文件错误。</li>
<li><code>dns.NOMEM</code>: 内存溢出。</li>
<li><code>dns.DESTRUCTION</code>: 通道被摧毁。</li>
<li><code>dns.BADSTR</code>: 字符串格式错误。</li>
<li><code>dns.BADFLAGS</code>: 非法标识符。</li>
<li><code>dns.NONAME</code>: 所给主机不是数字。</li>
<li><code>dns.BADHINTS</code>: 非法HINTS标识符。</li>
<li><code>dns.NOTINITIALIZED</code>: c c-ares 库尚未初始化。</li>
<li><code>dns.LOADIPHLPAPI</code>: 加载 iphlpapi.dll 出错。</li>
<li><code>dns.ADDRGETNETWORKPARAMS</code>: 无法找到 GetNetworkParams 函数。</li>
<li><code>dns.CANCELLED</code>: 取消 DNS 查询。</li>
</ul>
<h3 id="实例-35"><a href="#实例-35" class="headerlink" title="实例"></a>实例</h3><p>创建 main.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dns = <span class="built_in">require</span>(<span class="string">&#x27;dns&#x27;</span>);</span><br><span class="line"></span><br><span class="line">dns.lookup(<span class="string">&#x27;www.github.com&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">onLookup</span>(<span class="params">err, address, family</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;ip 地址:&#x27;</span>, address);</span><br><span class="line">   dns.reverse(address, <span class="function"><span class="keyword">function</span> (<span class="params">err, hostnames</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err.stack);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;反向解析 &#x27;</span> + address + <span class="string">&#x27;: &#x27;</span> + <span class="built_in">JSON</span>.stringify(hostnames));</span><br><span class="line">&#125;);  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行以上代码，结果如下所示:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">address: 192.30.252.130</span><br><span class="line">reverse for 192.30.252.130: [&quot;github.com&quot;]</span><br></pre></td></tr></table></figure>

<h2 id="五、Node-js-Domain-模块"><a href="#五、Node-js-Domain-模块" class="headerlink" title="五、Node.js Domain 模块"></a>五、Node.js Domain 模块</h2><p>Node.js <strong>Domain(域)</strong> 简化异步代码的异常处理，可以捕捉处理<code>try...catch</code>无法捕捉的异常。引入 <code>Domain</code> 模块 语法格式如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> domain = <span class="built_in">require</span>(<span class="string">&quot;domain&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><code>domain</code>模块，把处理多个不同的<code>IO</code>的操作作为一个组。注册事件和回调到<code>domain</code>，当发生一个错误事件或抛出一个错误时，<code>domain</code>对象会被通知，不会丢失上下文环境，也不导致程序错误立即退出，与<code>process.on(&#39;uncaughtException&#39;)</code>不同。</p>
<p>Domain 模块可分为隐式绑定和显式绑定：</p>
<ul>
<li>隐式绑定: 把在<code>domain</code>上下文中定义的变量，自动绑定到<code>domain</code>对象</li>
<li>显式绑定: 把不是在<code>domain</code>上下文中定义的变量，以代码的方式绑定到<code>domain</code>对象</li>
</ul>
<h3 id="方法-6"><a href="#方法-6" class="headerlink" title="方法"></a>方法</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>domain.run(function)</strong> 在域的上下文运行提供的函数，隐式的绑定了所有的事件分发器，计时器和底层请求。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>domain.add(emitter)</strong> 显式的增加事件</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>domain.remove(emitter)</strong> 删除事件。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>domain.bind(callback)</strong> 返回的函数是一个对于所提供的回调函数的包装函数。当调用这个返回的函数时，所有被抛出的错误都会被导向到这个域的 error 事件。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>domain.intercept(callback)</strong> 和 domain.bind(callback) 类似。除了捕捉被抛出的错误外，它还会拦截 Error 对象作为参数传递到这个函数。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>domain.enter()</strong> 进入一个异步调用的上下文，绑定到domain。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>domain.exit()</strong> 退出当前的domain，切换到不同的链的异步调用的上下文中。对应domain.enter()。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>domain.dispose()</strong> 释放一个domain对象，让node进程回收这部分资源。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>domain.create()</strong> 返回一个domain对象。</td>
</tr>
</tbody></table>
<hr>
<h3 id="属性-3"><a href="#属性-3" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">属性 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>domain.members</strong> 已加入domain对象的域定时器和事件发射器的数组。</td>
</tr>
</tbody></table>
<h3 id="实例-36"><a href="#实例-36" class="headerlink" title="实例"></a>实例</h3><p>创建 main.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">&quot;events&quot;</span>).EventEmitter;</span><br><span class="line"><span class="keyword">const</span> domain = <span class="built_in">require</span>(<span class="string">&quot;domain&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emitter1 = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建域</span></span><br><span class="line"><span class="keyword">const</span> domain1 = domain.create();</span><br><span class="line"></span><br><span class="line">domain1.on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;domain1 处理这个错误 (&quot;</span>+err.message+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显式绑定</span></span><br><span class="line">domain1.add(emitter1);</span><br><span class="line"></span><br><span class="line">emitter1.on(<span class="string">&#x27;error&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;监听器处理此错误 (&quot;</span>+err.message+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter1.emit(<span class="string">&#x27;error&#x27;</span>,<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;通过监听器来处理&#x27;</span>));</span><br><span class="line"></span><br><span class="line">emitter1.removeAllListeners(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line"></span><br><span class="line">emitter1.emit(<span class="string">&#x27;error&#x27;</span>,<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;通过 domain1 处理&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> domain2 = domain.create();</span><br><span class="line"></span><br><span class="line">domain2.on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;domain2 处理这个错误 (&quot;</span>+err.message+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式绑定</span></span><br><span class="line">domain2.run(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">const</span> emitter2 = <span class="keyword">new</span> EventEmitter();</span><br><span class="line">   emitter2.emit(<span class="string">&#x27;error&#x27;</span>,<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;通过 domain2 处理&#x27;</span>));   </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">domain1.remove(emitter1);</span><br><span class="line">emitter1.emit(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;转换为异常，系统将崩溃!&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>执行以上代码，结果如下所示:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">监听器处理此错误 (通过监听器来处理)</span><br><span class="line">domain1 处理这个错误 (通过 domain1 处理)</span><br><span class="line">domain2 处理这个错误 (通过 domain2 处理)</span><br><span class="line"></span><br><span class="line">events<span class="selector-class">.js</span>:<span class="number">72</span></span><br><span class="line">        throw er; // Unhandled &#x27;error&#x27; event</span><br><span class="line">              ^</span><br><span class="line">Error: 转换为异常，系统将崩溃!</span><br><span class="line">    at Object. (/www/node/main.js:<span class="number">40</span>:<span class="number">24</span>)</span><br><span class="line">    at Module._compile (module.js:<span class="number">456</span>:<span class="number">26</span>)</span><br><span class="line">    at Object.Module._extensions..js (module.js:<span class="number">474</span>:<span class="number">10</span>)</span><br><span class="line">    at Module.load (module.js:<span class="number">356</span>:<span class="number">32</span>)</span><br><span class="line">    at Function.Module._load (module.js:<span class="number">312</span>:<span class="number">12</span>)</span><br><span class="line">    at Function.Module.runMain (module.js:<span class="number">497</span>:<span class="number">10</span>)</span><br><span class="line">    at startup (node.js:<span class="number">119</span>:<span class="number">16</span>)</span><br><span class="line">    at node.js:<span class="number">929</span>:<span class="number">3</span></span><br></pre></td></tr></table></figure>

<h1 id="Node-js-Web-模块"><a href="#Node-js-Web-模块" class="headerlink" title="Node.js Web 模块"></a>Node.js Web 模块</h1><h2 id="什么是-Web-服务器？"><a href="#什么是-Web-服务器？" class="headerlink" title="什么是 Web 服务器？"></a>什么是 Web 服务器？</h2><p>Web服务器一般指网站服务器，是指驻留于因特网上某种类型计算机的程序，Web服务器的基本功能就是提供Web信息浏览服务。它只需支持HTTP协议、HTML文档格式及URL，与客户端的网络浏览器配合。</p>
<p>大多数 web 服务器都支持服务端的脚本语言（php、python、ruby）等，并通过脚本语言从数据库获取数据，将结果返回给客户端浏览器。</p>
<p>目前最主流的三个Web服务器是Apache、Nginx、IIS。</p>
<h2 id="Web-应用架构"><a href="#Web-应用架构" class="headerlink" title="Web 应用架构"></a>Web 应用架构</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Web 应用架构"></p>
<ul>
<li><strong>Client</strong> – 客户端，一般指浏览器，浏览器可以通过 HTTP 协议向服务器请求数据。</li>
<li><strong>Server</strong> – 服务端，一般指 Web 服务器，可以接收客户端请求，并向客户端发送响应数据。</li>
<li><strong>Business</strong> – 业务层， 通过 Web 服务器处理应用程序，如与数据库交互，逻辑运算，调用外部程序等。</li>
<li><strong>Data</strong> – 数据层，一般由数据库组成。</li>
</ul>
<h2 id="使用-Node-创建-Web-服务器"><a href="#使用-Node-创建-Web-服务器" class="headerlink" title="使用 Node 创建 Web 服务器"></a>使用 Node 创建 Web 服务器</h2><p>Node.js 提供了 http 模块，http 模块主要用于搭建 HTTP 服务端和客户端，使用 HTTP 服务器或客户端功能必须调用 http 模块，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>以下是演示一个最基本的 HTTP 服务器架构(使用 8080 端口)，创建 server.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建服务器</span></span><br><span class="line">http.createServer( <span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;  </span><br><span class="line">   <span class="comment">// 解析请求，包括文件名</span></span><br><span class="line">   <span class="keyword">var</span> pathname = url.parse(request.url).pathname;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 输出请求的文件名</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;Request for &quot;</span> + pathname + <span class="string">&quot; received.&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 从文件系统中读取请求的文件内容</span></span><br><span class="line">   fs.readFile(pathname.substr(<span class="number">1</span>), <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(err);</span><br><span class="line">         <span class="comment">// HTTP 状态码: 404 : NOT FOUND</span></span><br><span class="line">         <span class="comment">// Content Type: text/html</span></span><br><span class="line">         response.writeHead(<span class="number">404</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;             </span><br><span class="line">         <span class="comment">// HTTP 状态码: 200 : OK</span></span><br><span class="line">         <span class="comment">// Content Type: text/html</span></span><br><span class="line">         response.writeHead(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;);    </span><br><span class="line">         </span><br><span class="line">         <span class="comment">// 响应文件内容</span></span><br><span class="line">         response.write(data.toString());        </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//  发送响应数据</span></span><br><span class="line">      response.end();</span><br><span class="line">   &#125;);   </span><br><span class="line">&#125;).listen(<span class="number">8080</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 控制台会输出以下信息</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Server running at http://127.0.0.1:8080/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>接下来我们在该目录下创建一个 index.html 文件，代码如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>码云笔记(mybj123.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我的第一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行 server.js 文件：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node server<span class="selector-class">.js</span></span><br><span class="line">Server running at http://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span>/</span><br></pre></td></tr></table></figure>

<p>接着我们在浏览器中打开地址：<strong><a href="http://127.0.0.1:8080/index.html">http://127.0.0.1:8080/index.html</a></strong>，显示如下图所示:</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="浏览器中显示内容"></p>
<p>执行 server.js 的控制台输出信息如下：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="执行 server.js 的控制台输出信息"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">Server running at http://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span>/</span><br><span class="line">Request for /index.html received.     #  客户端请求信息</span><br></pre></td></tr></table></figure>

<h2 id="使用-Node-创建-Web-客户端"><a href="#使用-Node-创建-Web-客户端" class="headerlink" title="使用 Node 创建 Web 客户端"></a>使用 Node 创建 Web 客户端</h2><p>Node 创建 Web 客户端需要引入 http 模块，创建 client.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 用于请求的选项</span></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">   <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">   <span class="attr">port</span>: <span class="string">&#x27;8080&#x27;</span>,</span><br><span class="line">   <span class="attr">path</span>: <span class="string">&#x27;/index.html&#x27;</span>  </span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 处理响应的回调函数</span></span><br><span class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">   <span class="comment">// 不断更新数据</span></span><br><span class="line">   <span class="keyword">var</span> body = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">   response.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">      body += data;</span><br><span class="line">   &#125;);</span><br><span class="line">   </span><br><span class="line">   response.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 数据接收完成</span></span><br><span class="line">      <span class="built_in">console</span>.log(body);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 向服务端发送请求</span></span><br><span class="line"><span class="keyword">var</span> req = http.request(options, callback);</span><br><span class="line">req.end();</span><br></pre></td></tr></table></figure>

<p><strong>新开一个终端</strong>，执行 client.js 文件，输出结果如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">node  client.js </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>码云笔记(mybj123.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我的第一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行 server.js 的控制台输出信息如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">Server running at http://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span>/</span><br><span class="line">Request for /index.html received.   # 客户端请求信息</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-Express-框架"><a href="#Node-js-Express-框架" class="headerlink" title="Node.js Express 框架"></a>Node.js Express 框架</h1><h2 id="Express-简介"><a href="#Express-简介" class="headerlink" title="Express 简介"></a>Express 简介</h2><p><code>Express</code> 是一个简洁而灵活的 <code>node.js</code> Web应用框架, 提供了一系列强大特性帮助你创建各种 <code>Web</code> 应用，和丰富的 <code>HTTP</code> 工具。</p>
<p>使用 <code>Express</code> 可以快速地搭建一个完整功能的网站。</p>
<p>Express 框架核心特性：</p>
<ul>
<li>可以设置中间件来响应 <code>HTTP</code> 请求。</li>
<li>定义了路由表用于执行不同的 <code>HTTP</code> 请求动作。</li>
<li>可以通过向模板传递参数来动态渲染 HTML 页面。</li>
</ul>
<h2 id="安装-Express"><a href="#安装-Express" class="headerlink" title="安装 Express"></a>安装 Express</h2><p>安装 <code>Express</code> 并将其保存到依赖列表中：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cnpm install express --save</span><br></pre></td></tr></table></figure>

<p>以上命令会将 Express 框架安装在当前目录的 <strong>node_modules</strong> 目录中， <strong>node_modules</strong> 目录下会自动创建 express 目录。以下几个重要的模块是需要与 express 框架一起安装的：</p>
<ul>
<li><strong>body-parser</strong> – node.js 中间件，用于处理 JSON, Raw, Text 和 URL 编码的数据。</li>
<li><strong>cookie-parser</strong> – 这就是一个解析Cookie的工具。通过req.cookies可以取到传过来的cookie，并把它们转成对象。</li>
<li><strong>multer</strong> – node.js 中间件，用于处理 enctype=”multipart/form-data”（设置表单的MIME编码）的表单数据。</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cnpm install <span class="selector-tag">body</span>-parser --save</span><br><span class="line">cnpm install cookie-parser --save</span><br><span class="line">cnpm install multer --save</span><br></pre></td></tr></table></figure>

<p>安装完后，我们可以查看下 express 使用的版本号：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">cnpm list express</span><br><span class="line">/data/www/node</span><br><span class="line">└── express<span class="keyword">@4</span>.15.2  -&gt; /Users/tianqixin/www/node/node_modules/.<span class="number">4.15</span>.<span class="number">2</span>@express</span><br></pre></td></tr></table></figure>

<h2 id="第一个-Express-框架实例"><a href="#第一个-Express-框架实例" class="headerlink" title="第一个 Express 框架实例"></a>第一个 Express 框架实例</h2><p>接下来我们使用 Express 框架来输出 “Hello World”。</p>
<p>以下实例中我们引入了 express 模块，并在客户端发起请求后，响应 “Hello World” 字符串。</p>
<p>创建 express_demo.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//express_demo.js 文件</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.send(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node express_demo.js </span><br><span class="line">应用实例，访问地址为 http://0.0.0.0:8081</span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <a href="http://127.0.0.1:8081，结果如下图所示：">http://127.0.0.1:8081，结果如下图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="浏览器中访问"></p>
<h2 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h2><p>Express 应用使用回调函数的参数： <strong>request</strong> 和 <strong>response</strong> 对象来处理请求和响应的数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// --</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>request</strong> 和 <strong>response</strong> 对象的具体介绍：</p>
<p><strong>Request 对象</strong> – <code>request</code> 对象表示 <code>HTTP</code> 请求，包含了请求查询字符串，参数，内容，<code>HTTP</code> 头部等属性。常见属性有：</p>
<ol>
<li><code>req.app</code>：当<code>callback</code>为外部文件时，用<code>req.app</code>访问express的实例</li>
<li><code>req.baseUrl</code>：获取路由当前安装的URL路径</li>
<li><code>req.body / req.cookies</code>：获得「请求主体」/ Cookies</li>
<li><code>req.fresh / req.stale</code>：判断请求是否还「新鲜」</li>
<li><code>req.hostname / req.ip</code>：获取主机名和IP地址</li>
<li><code>req.originalUrl</code>：获取原始请求URL</li>
<li><code>req.params</code>：获取路由的parameters</li>
<li><code>req.path</code>：获取请求路径</li>
<li><code>req.protocol</code>：获取协议类型</li>
<li><code>req.query</code>：获取<code>URL</code>的查询参数串</li>
<li><code>req.route</code>：获取当前匹配的路由</li>
<li><code>req.subdomains</code>：获取子域名</li>
<li><code>req.accepts()</code>：检查可接受的请求的文档类型</li>
<li><code>req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguages</code>：返回指定字符集的第一个可接受字符编码</li>
<li><code>req.get()</code>：获取指定的<code>HTTP</code>请求头</li>
<li><code>req.is()</code>：判断请求头<code>Content-Type</code>的<code>MIME</code>类型</li>
</ol>
<p><strong>Response 对象</strong> – <code>response</code> 对象表示 <code>HTTP</code> 响应，即在接收到请求时向客户端发送的 <code>HTTP</code> 响应数据。常见属性有：</p>
<ol>
<li><code>res.app</code>：同<code>req.app</code>一样</li>
<li><code>res.append()</code>：追加指定<code>HTTP</code>头</li>
<li><code>res.set()</code>在<code>res.append()</code>后将重置之前设置的头</li>
<li><code>res.cookie(name，value [，option])</code>：设置<code>Cookie</code></li>
<li><code>opition</code>: domain / expires / httpOnly / maxAge / path / secure / signed</li>
<li><code>res.clearCookie()</code>：清除Cookie</li>
<li><code>res.download()</code>：传送指定路径的文件</li>
<li><code>res.get()</code>：返回指定的HTTP头</li>
<li><code>res.json()</code>：传送JSON响应</li>
<li><code>res.jsonp()</code>：传送JSONP响应</li>
<li><code>res.location()</code>：只设置响应的<code>Location HTTP</code>头，不设置状态码或者<code>close response</code></li>
<li><code>res.redirect()</code>：设置响应的<code>Location HTTP</code>头，并且设置状态码<code>302</code></li>
<li><code>res.render(view,[locals],callback)</code>：渲染一个<code>view</code>，同时向<code>callback</code>传递渲染后的字符串，如果在渲染过程中有错误发生<code>next(err)</code>将会被自动调用。<code>callback</code>将会被传入一个可能发生的错误以及渲染后的页面，这样就不会自动输出了。</li>
<li><code>res.send()</code>：传送HTTP响应</li>
<li><code>res.sendFile(path [，options] [，fn])</code>：传送指定路径的文件 -会自动根据文件<code>extension</code>设定<code>Content-Type</code></li>
<li><code>res.set()</code>：设置<code>HTTP</code>头，传入<code>object</code>可以一次设置多个头</li>
<li><code>res.status()</code>：设置<code>HTTP</code>状态码</li>
<li><code>res.type()</code>：设置<code>Content-Type</code>的<code>MIME</code>类型</li>
</ol>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>我们已经了解了 HTTP 请求的基本应用，而路由决定了由谁(指定脚本)去响应客户端请求。</p>
<p>在HTTP请求中，我们可以通过路由提取出请求的URL以及<code>GET/POST</code>参数。</p>
<p>接下来我们扩展 Hello World，添加一些功能来处理更多类型的 HTTP 请求。</p>
<p>创建 express_demo2.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  主页输出 &quot;Hello World&quot;</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;主页 GET 请求&quot;</span>);</span><br><span class="line">   res.send(<span class="string">&#x27;Hello GET&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">//  POST 请求</span></span><br><span class="line">app.post(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;主页 POST 请求&quot;</span>);</span><br><span class="line">   res.send(<span class="string">&#x27;Hello POST&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  /del_user 页面响应</span></span><br><span class="line">app.get(<span class="string">&#x27;/del_user&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;/del_user 响应 DELETE 请求&quot;</span>);</span><br><span class="line">   res.send(<span class="string">&#x27;删除页面&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  /list_user 页面 GET 请求</span></span><br><span class="line">app.get(<span class="string">&#x27;/list_user&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;/list_user GET 请求&quot;</span>);</span><br><span class="line">   res.send(<span class="string">&#x27;用户列表页面&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 对页面 abcd, abxcd, ab123cd, 等响应 GET 请求</span></span><br><span class="line">app.get(<span class="string">&#x27;/ab*cd&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;   </span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;/ab*cd GET 请求&quot;</span>);</span><br><span class="line">   res.send(<span class="string">&#x27;正则匹配&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node express_demo2.js </span><br><span class="line">应用实例，访问地址为 http://0.0.0.0:8081</span><br></pre></td></tr></table></figure>

<p>接下来你可以尝试访问 <a href="http://127.0.0.1:8081/">http://127.0.0.1:8081</a> 不同的地址，查看效果。</p>
<p>在浏览器中访问 <a href="http://127.0.0.1:8081/list_user%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/list_user，结果如下图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="浏览器中访问 http://127.0.0.1:8081/list_user"></p>
<p>在浏览器中访问 <a href="http://127.0.0.1:8081/abcd%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/abcd，结果如下图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="浏览器中访问 http://127.0.0.1:8081/abcd"></p>
<p>在浏览器中访问 <a href="http://127.0.0.1:8081/abcdefg%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/abcdefg，结果如下图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="在浏览器中访问 http://127.0.0.1:8081/abcdefg，结果如下图所示："></p>
<h2 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h2><p>Express 提供了内置的中间件 <strong>express.static</strong> 来设置静态文件如：图片， CSS, JavaScript 等。</p>
<p>你可以使用 <strong>express.static</strong> 中间件来设置静态文件路径。例如，如果你将图片， CSS, JavaScript 文件放在 public 目录下，你可以这么写：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.use(<span class="string">&#x27;/public&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>我们可以到 public/images 目录下放些图片,如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node_modules</span><br><span class="line">server.js</span><br><span class="line">public/</span><br><span class="line">public/images</span><br><span class="line">public/images/logo.png</span><br></pre></td></tr></table></figure>

<p>让我们再修改下 “Hello World” 应用添加处理静态文件的功能。</p>
<p>创建 express_demo3.js 文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"> </span><br><span class="line">app.use(<span class="string">&#x27;/public&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.send(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node express_demo3<span class="selector-class">.js</span> </span><br><span class="line">应用实例，访问地址为 http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span></span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<p>在浏览器中访问 <a href="http://127.0.0.1:8081/public/images/logo.png%EF%BC%88%E6%9C%AC%E5%AE%9E%E4%BE%8B%E9%87%87%E7%94%A8%E4%BA%86%E7%A0%81%E4%BA%91%E7%AC%94%E8%AE%B0%E7%9A%84">http://127.0.0.1:8081/public/images/logo.png（本实例采用了码云笔记的</a> logo），结果如下图所示：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="码云笔记logo"></p>
<h2 id="GET-方法"><a href="#GET-方法" class="headerlink" title="GET 方法"></a>GET 方法</h2><p>以下实例演示了在表单中通过 GET 方法提交两个参数，我们可以使用 server.js 文件内的 <strong>process_get</strong> 路由器来处理输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://127.0.0.1:8081/process_get&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span>&gt;</span></span><br><span class="line">First Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;first_name&quot;</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">Last Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;last_name&quot;</span>&gt;</span>const</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>server.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"> </span><br><span class="line">app.use(<span class="string">&#x27;/public&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/index.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.sendFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;index.html&quot;</span> );</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/process_get&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// 输出 JSON 格式</span></span><br><span class="line">   <span class="keyword">var</span> response = &#123;</span><br><span class="line">       <span class="string">&quot;first_name&quot;</span>:req.query.first_name,</span><br><span class="line">       <span class="string">&quot;last_name&quot;</span>:req.query.last_name</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="built_in">console</span>.log(response);</span><br><span class="line">   res.end(<span class="built_in">JSON</span>.stringify(response));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">node server<span class="selector-class">.js</span> </span><br><span class="line">应用实例，访问地址为 http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span></span><br></pre></td></tr></table></figure>

<p>浏览器访问 <a href="http://127.0.0.1:8081/index.html%EF%BC%8C%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/index.html，如图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="浏览器访问 http://127.0.0.1:8081/index.html，如图所示："></p>
<p>现在你可以向表单输入数据，并提交。</p>
<h2 id="POST-方法"><a href="#POST-方法" class="headerlink" title="POST 方法"></a>POST 方法</h2><p>以下实例演示了在表单中通过 POST 方法提交两个参数，我们可以使用 server.js 文件内的 <strong>process_post</strong> 路由器来处理输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://127.0.0.1:8081/process_post&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">First Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;first_name&quot;</span>&gt;</span>  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">Last Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;last_name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>server.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建 application/x-www-form-urlencoded 编码解析</span></span><br><span class="line"><span class="keyword">var</span> urlencodedParser = bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;)</span><br><span class="line"> </span><br><span class="line">app.use(<span class="string">&#x27;/public&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/index.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.sendFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;index.html&quot;</span> );</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.post(<span class="string">&#x27;/process_post&#x27;</span>, urlencodedParser, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// 输出 JSON 格式</span></span><br><span class="line">   <span class="keyword">var</span> response = &#123;</span><br><span class="line">       <span class="string">&quot;first_name&quot;</span>:req.body.first_name,</span><br><span class="line">       <span class="string">&quot;last_name&quot;</span>:req.body.last_name</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="built_in">console</span>.log(response);</span><br><span class="line">   res.end(<span class="built_in">JSON</span>.stringify(response));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node server.js</span><br><span class="line">应用实例，访问地址为 http://0.0.0.0:8081</span><br></pre></td></tr></table></figure>

<p>浏览器访问 <a href="http://127.0.0.1:8081/index.html%EF%BC%8C%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/index.html，如图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="浏览器访问 http://127.0.0.1:8081/index.html，如图所示："></p>
<p>现在你可以向表单输入数据，并提交，如下演示：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="向表单输入数据，并提交"></p>
<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>以下我们创建一个用于上传文件的表单，使用 POST 方法，表单 enctype 属性设置为 multipart/form-data。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>文件上传表单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>文件上传：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">选择一个文件上传: <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/file_upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span> <span class="attr">size</span>=<span class="string">&quot;50&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;上传文件&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>server.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> multer  = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">app.use(<span class="string">&#x27;/public&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.use(multer(&#123; <span class="attr">dest</span>: <span class="string">&#x27;/tmp/&#x27;</span>&#125;).array(<span class="string">&#x27;image&#x27;</span>));</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/index.html&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.sendFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;index.html&quot;</span> );</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.post(<span class="string">&#x27;/file_upload&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="built_in">console</span>.log(req.files[<span class="number">0</span>]);  <span class="comment">// 上传的文件信息</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">var</span> des_file = __dirname + <span class="string">&quot;/&quot;</span> + req.files[<span class="number">0</span>].originalname;</span><br><span class="line">   fs.readFile( req.files[<span class="number">0</span>].path, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        fs.writeFile(des_file, data, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">if</span>( err )&#123;</span><br><span class="line">              <span class="built_in">console</span>.log( err );</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               response = &#123;</span><br><span class="line">                   <span class="attr">message</span>:<span class="string">&#x27;File uploaded successfully&#x27;</span>, </span><br><span class="line">                   <span class="attr">filename</span>:req.files[<span class="number">0</span>].originalname</span><br><span class="line">              &#125;;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="built_in">console</span>.log( response );</span><br><span class="line">          res.end( <span class="built_in">JSON</span>.stringify( response ) );</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node server.js </span><br><span class="line">应用实例，访问地址为 http://0.0.0.0:8081</span><br></pre></td></tr></table></figure>

<p>浏览器访问 <a href="http://127.0.0.1:8081/index.html%EF%BC%8C%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/index.html，如图所示：</a></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="文件上传页面"></p>
<p>现在你可以向表单输入数据，并提交，如下演示：</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="向表单输入数据，并提交"></p>
<h2 id="Cookie-管理"><a href="#Cookie-管理" class="headerlink" title="Cookie 管理"></a>Cookie 管理</h2><p>我们可以使用中间件向 Node.js 服务器发送 cookie 信息，以下代码输出了客户端发送的 cookie 信息：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// express_cookie.js 文件</span></span><br><span class="line"><span class="keyword">var</span> express      = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line">app.use(cookieParser())</span><br><span class="line"> </span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Cookies: &quot;</span> + util.inspect(req.cookies));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.listen(<span class="number">8081</span>)</span><br></pre></td></tr></table></figure>

<p>执行以上代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node express_cookie.js</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-RESTful-API"><a href="#Node-js-RESTful-API" class="headerlink" title="Node.js RESTful API"></a>Node.js RESTful API</h1><h2 id="什么是-REST？"><a href="#什么是-REST？" class="headerlink" title="什么是 REST？"></a>什么是 REST？</h2><p><code>REST</code>即表述性状态传递（英文：Representational State Transfer，简称REST）是Roy Fielding博士在2000年他的博士论文中提出来的一种软件架构风格。</p>
<p>表述性状态转移是一组架构约束条件和原则。满足这些约束条件和原则的应用程序或设计就是RESTful。需要注意的是，REST是设计风格而不是标准。REST通常基于使用<code>HTTP</code>，<code>URI</code>，和<code>XML</code>（标准通用标记语言下的一个子集）以及<code>HTML</code>（标准通用标记语言下的一个应用）这些现有的广泛流行的协议和标准。REST 通常使用 <code>JSON</code> 数据格式。</p>
<h3 id="HTTP-方法"><a href="#HTTP-方法" class="headerlink" title="HTTP 方法"></a>HTTP 方法</h3><p>以下为 REST 基本架构的四个方法：</p>
<ul>
<li><code>GET</code> – 用于获取数据。</li>
<li><code>PUT</code> – 用于更新或添加数据。</li>
<li><code>DELETE</code> – 用于删除数据。</li>
<li><code>POST</code> – 用于添加数据。</li>
</ul>
<h2 id="RESTful-Web-Services"><a href="#RESTful-Web-Services" class="headerlink" title="RESTful Web Services"></a>RESTful Web Services</h2><p>Web service是一个平台独立的，低耦合的，自包含的、基于可编程的web的应用程序，可使用开放的XML（标准通用标记语言下的一个子集）标准来描述、发布、发现、协调和配置这些应用程序，用于开发分布式的互操作的应用程序。</p>
<p>基于 REST 架构的 Web Services 即是 RESTful。</p>
<p>由于轻量级以及通过 HTTP 直接传输数据的特性，Web 服务的 RESTful 方法已经成为最常见的替代方法。可以使用各种语言（比如 Java 程序、Perl、Ruby、Python、PHP 和 Javascript[包括 Ajax]）实现客户端。</p>
<p>RESTful Web 服务通常可以通过自动客户端或代表用户的应用程序访问。但是，这种服务的简便性让用户能够与之直接交互，使用它们的 Web 浏览器构建一个 GET URL 并读取返回的内容。</p>
<h2 id="创建-RESTful"><a href="#创建-RESTful" class="headerlink" title="创建 RESTful"></a>创建 RESTful</h2><p>首先，创建一个 json 数据资源文件 users.json，内容如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;user1&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;mahesh&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;password1&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;profession&quot;</span> : <span class="string">&quot;teacher&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="number">1</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">&quot;user2&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;suresh&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;password2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;profession&quot;</span> : <span class="string">&quot;librarian&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="number">2</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">&quot;user3&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;ramesh&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;password3&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;profession&quot;</span> : <span class="string">&quot;clerk&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="number">3</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>基于以上数据，我们创建以下 RESTful API：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">URI</th>
<th align="left">HTTP 方法</th>
<th align="left">发送内容</th>
<th align="left">结果</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">listUsers</td>
<td align="left">GET</td>
<td align="left">空</td>
<td align="left">显示所有用户列表</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">addUser</td>
<td align="left">POST</td>
<td align="left">JSON 字符串</td>
<td align="left">添加新用户</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">deleteUser</td>
<td align="left">DELETE</td>
<td align="left">JSON 字符串</td>
<td align="left">删除用户</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">:id</td>
<td align="left">GET</td>
<td align="left">空</td>
<td align="left">显示用户详细信息</td>
</tr>
</tbody></table>
<h3 id="获取用户列表："><a href="#获取用户列表：" class="headerlink" title="获取用户列表："></a>获取用户列表：</h3><p>以下代码，我们创建了 RESTful API <strong>listUsers</strong>，用于读取用户的信息列表， server.js 文件代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/listUsers&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   fs.readFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;users.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log( data );</span><br><span class="line">       res.end( data );</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>接下来执行以下命令：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node server<span class="selector-class">.js</span> </span><br><span class="line">应用实例，访问地址为 http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span></span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <a href="http://127.0.0.1:8081/listUsers%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/listUsers，结果如下所示：</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;user1&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;mahesh&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;password1&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;profession&quot;</span> : <span class="string">&quot;teacher&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="number">1</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">&quot;user2&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;suresh&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;password2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;profession&quot;</span> : <span class="string">&quot;librarian&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="number">2</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">&quot;user3&quot;</span> : &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;ramesh&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;password&quot;</span> : <span class="string">&quot;password3&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;profession&quot;</span> : <span class="string">&quot;clerk&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="number">3</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><p>以下代码，我们创建了 RESTful API <strong>addUser</strong>， 用于添加新的用户数据，server.js 文件代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加的新用户数据</span></span><br><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">   <span class="string">&quot;user4&quot;</span> : &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span> : <span class="string">&quot;mohit&quot;</span>,</span><br><span class="line">      <span class="string">&quot;password&quot;</span> : <span class="string">&quot;password4&quot;</span>,</span><br><span class="line">      <span class="string">&quot;profession&quot;</span> : <span class="string">&quot;teacher&quot;</span>,</span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="number">4</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/addUser&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 读取已存在的数据</span></span><br><span class="line">   fs.readFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;users.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">       data = <span class="built_in">JSON</span>.parse( data );</span><br><span class="line">       data[<span class="string">&quot;user4&quot;</span>] = user[<span class="string">&quot;user4&quot;</span>];</span><br><span class="line">       <span class="built_in">console</span>.log( data );</span><br><span class="line">       res.end( <span class="built_in">JSON</span>.stringify(data));</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>接下来执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ node server.js </span><br><span class="line">应用实例，访问地址为 http://0.0.0.0:8081</span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <a href="http://127.0.0.1:8081/addUser%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/addUser，结果如下所示：</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123; user1:</span><br><span class="line">   &#123; name: &#x27;mahesh&#x27;,</span><br><span class="line">     password: &#x27;password1&#x27;,</span><br><span class="line">     profession: &#x27;teacher&#x27;,</span><br><span class="line">     id: <span class="number">1</span> &#125;,</span><br><span class="line">  user2:</span><br><span class="line">   &#123; name: &#x27;suresh&#x27;,</span><br><span class="line">     password: &#x27;password2&#x27;,</span><br><span class="line">     profession: &#x27;librarian&#x27;,</span><br><span class="line">     id: <span class="number">2</span> &#125;,</span><br><span class="line">  user3:</span><br><span class="line">   &#123; name: &#x27;ramesh&#x27;,</span><br><span class="line">     password: &#x27;password3&#x27;,</span><br><span class="line">     profession: &#x27;clerk&#x27;,</span><br><span class="line">     id: <span class="number">3</span> &#125;,</span><br><span class="line">  user4:</span><br><span class="line">   &#123; name: &#x27;mohit&#x27;,</span><br><span class="line">     password: &#x27;password4&#x27;,</span><br><span class="line">     profession: &#x27;teacher&#x27;,</span><br><span class="line">     id: <span class="number">4</span> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="显示用户详情"><a href="#显示用户详情" class="headerlink" title="显示用户详情"></a>显示用户详情</h3><p>以下代码，我们创建了 RESTful API <strong>:id（用户id）</strong>， 用于读取指定用户的详细信息，server.js 文件代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/:id&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 首先我们读取已存在的用户</span></span><br><span class="line">   fs.readFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;users.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">       data = <span class="built_in">JSON</span>.parse( data );</span><br><span class="line">       <span class="keyword">var</span> user = data[<span class="string">&quot;user&quot;</span> + req.params.id] </span><br><span class="line">       <span class="built_in">console</span>.log( user );</span><br><span class="line">       res.end( <span class="built_in">JSON</span>.stringify(user));</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>接下来执行以下命令：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node server<span class="selector-class">.js</span> </span><br><span class="line">应用实例，访问地址为 http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span></span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <a href="http://127.0.0.1:8081/2%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/2，结果如下所示：</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;suresh&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;password&quot;</span>:<span class="string">&quot;password2&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;profession&quot;</span>:<span class="string">&quot;librarian&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;id&quot;</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><p>以下代码，我们创建了 RESTful API <strong>deleteUser</strong>， 用于删除指定用户的详细信息，以下实例中，用户 id 为 2，server.js 文件代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> id = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/deleteUser&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// First read existing users.</span></span><br><span class="line">   fs.readFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;users.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">       data = <span class="built_in">JSON</span>.parse( data );</span><br><span class="line">       <span class="keyword">delete</span> data[<span class="string">&quot;user&quot;</span> + id];</span><br><span class="line">       </span><br><span class="line">       <span class="built_in">console</span>.log( data );</span><br><span class="line">       res.end( <span class="built_in">JSON</span>.stringify(data));</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.address().address</span><br><span class="line">  <span class="keyword">var</span> port = server.address().port</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;应用实例，访问地址为 http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>接下来执行以下命令：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node server<span class="selector-class">.js</span> </span><br><span class="line">应用实例，访问地址为 http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span></span><br></pre></td></tr></table></figure>

<p>在浏览器中访问 <a href="http://127.0.0.1:8081/deleteUser%EF%BC%8C%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A">http://127.0.0.1:8081/deleteUser，结果如下所示：</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123; user1:</span><br><span class="line">   &#123; name: &#x27;mahesh&#x27;,</span><br><span class="line">     password: &#x27;password1&#x27;,</span><br><span class="line">     profession: &#x27;teacher&#x27;,</span><br><span class="line">     id: <span class="number">1</span> &#125;,</span><br><span class="line">  user3:</span><br><span class="line">   &#123; name: &#x27;ramesh&#x27;,</span><br><span class="line">     password: &#x27;password3&#x27;,</span><br><span class="line">     profession: &#x27;clerk&#x27;,</span><br><span class="line">     id: <span class="number">3</span> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Node-js-多进程"><a href="#Node-js-多进程" class="headerlink" title="Node.js 多进程"></a>Node.js 多进程</h1><p>我们都知道 Node.js 是以单线程的模式运行的，但它使用的是事件驱动来处理并发，这样有助于我们在多核 <code>cpu</code> 的系统上创建多个子进程，从而提高性能。</p>
<p>每个子进程总是带有三个流对象：<code>child.stdin</code>, <code>child.stdout</code> 和<code>child.stderr</code>。他们可能会共享父进程的 <code>stdio</code> 流，或者也可以是独立的被导流的流对象。</p>
<p><code>Node</code> 提供了 <code>child_process</code> 模块来创建子进程，方法有：</p>
<ul>
<li><strong>exec</strong> – <code>child_process.exec</code> 使用子进程执行命令，缓存子进程的输出，并将子进程的输出以回调函数参数的形式返回。</li>
<li><strong>spawn</strong> – <code>child_process.spawn</code> 使用指定的命令行参数创建新进程。</li>
<li><strong>fork</strong> – <code>child_process.fork</code> 是 <code>spawn()</code>的特殊形式，用于在子进程中运行的模块，如 <code>fork(&#39;./son.js&#39;)</code> 相当于 <code>spawn(&#39;node&#39;, [&#39;./son.js&#39;])</code> 。与<code>spawn</code>方法不同的是，<code>fork</code>会在父进程与子进程之间，建立一个通信管道，用于进程之间的通信。</li>
</ul>
<h2 id="exec-方法"><a href="#exec-方法" class="headerlink" title="exec() 方法"></a>exec() 方法</h2><p><code>child_process.exec</code> 使用子进程执行命令，缓存子进程的输出，并将子进程的输出以回调函数参数的形式返回。</p>
<p>语法如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">child_process.exec(command[, options], callback)</span><br></pre></td></tr></table></figure>

<h3 id="参数-16"><a href="#参数-16" class="headerlink" title="参数"></a>参数</h3><p>参数说明如下：</p>
<p><strong>command：</strong> 字符串， 将要运行的命令，参数使用空格隔开</p>
<p><strong>options ：对象，可以是：</strong></p>
<ul>
<li>cwd ，字符串，子进程的当前工作目录</li>
<li>env，对象 环境变量键值对</li>
<li>encoding ，字符串，字符编码（默认： ‘utf8’）</li>
<li>shell ，字符串，将要执行命令的 Shell（默认: 在 UNIX 中为<code>/bin/sh</code>， 在 Windows 中为<code>cmd.exe</code>， Shell 应当能识别 <code>-c</code>开关在 UNIX 中，或 <code>/s /c</code> 在 Windows 中。 在Windows 中，命令行解析应当能兼容<code>cmd.exe</code>）</li>
<li>timeout，数字，超时时间（默认： 0）</li>
<li>maxBuffer，数字， 在 stdout 或 stderr 中允许存在的最大缓冲（二进制），如果超出那么子进程将会被杀死 （默认: 200*1024）</li>
<li>killSignal ，字符串，结束信号（默认：’SIGTERM’）</li>
<li>uid，数字，设置用户进程的 ID</li>
<li>gid，数字，设置进程组的 ID</li>
</ul>
<p><strong>callback ：</strong>回调函数，包含三个参数<code>error</code>, <code>stdout</code> 和 <code>stderr</code>。</p>
<p><code>exec()</code> 方法返回最大的缓冲区，并等待进程结束，一次性返回缓冲区的内容。</p>
<h3 id="实例-37"><a href="#实例-37" class="headerlink" title="实例"></a>实例</h3><p>让我们创建两个 js 文件 support.js 和 master.js。</p>
<p>support.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;进程 &quot;</span> + process.argv[<span class="number">2</span>] + <span class="string">&quot; 执行。&quot;</span> );</span><br></pre></td></tr></table></figure>

<p>master.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> child_process = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> workerProcess = child_process.exec(<span class="string">&#x27;node support.js &#x27;</span>+i, <span class="function"><span class="keyword">function</span> (<span class="params">error, stdout, stderr</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(error.stack);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;Error code: &#x27;</span>+error.code);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;Signal received: &#x27;</span>+error.signal);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;stdout: &#x27;</span> + stdout);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;stderr: &#x27;</span> + stderr);</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    workerProcess.on(<span class="string">&#x27;exit&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">code</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;子进程已退出，退出码 &#x27;</span>+code);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node master<span class="selector-class">.js</span> </span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">stdout: 进程 <span class="number">1</span> 执行。</span><br><span class="line"></span><br><span class="line">stderr: </span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">stdout: 进程 <span class="number">0</span> 执行。</span><br><span class="line"></span><br><span class="line">stderr: </span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">stdout: 进程 <span class="number">2</span> 执行。</span><br><span class="line"></span><br><span class="line">stderr:</span><br></pre></td></tr></table></figure>

<h2 id="spawn-方法"><a href="#spawn-方法" class="headerlink" title="spawn() 方法"></a>spawn() 方法</h2><p><code>child_process.spawn</code> 使用指定的命令行参数创建新进程，语法格式如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">child_process<span class="selector-class">.spawn</span>(command<span class="selector-attr">[, args]</span><span class="selector-attr">[, options]</span>)</span><br></pre></td></tr></table></figure>

<h3 id="参数-17"><a href="#参数-17" class="headerlink" title="参数"></a>参数</h3><p>参数说明如下：</p>
<p><strong>command：</strong> 将要运行的命令</p>
<p><strong>args：</strong> Array 字符串参数数组</p>
<p><strong>options Object</strong></p>
<ul>
<li>cwd String 子进程的当前工作目录</li>
<li>env Object 环境变量键值对</li>
<li>stdio Array|String 子进程的 <code>stdio</code> 配置</li>
<li>detached Boolean 这个子进程将会变成进程组的领导</li>
<li>uid Number 设置用户进程的 ID</li>
<li>gid Number 设置进程组的 ID</li>
</ul>
<p>spawn() 方法返回流 (stdout &amp; stderr)，在进程返回大量数据时使用。进程一旦开始执行时 spawn() 就开始接收响应。</p>
<h3 id="实例-38"><a href="#实例-38" class="headerlink" title="实例"></a>实例</h3><p>让我们创建两个 js 文件 support.js 和 master.js。</p>
<p>support.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;进程 &quot;</span> + process.argv[<span class="number">2</span>] + <span class="string">&quot; 执行。&quot;</span> );</span><br></pre></td></tr></table></figure>

<p>master.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> child_process = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">   <span class="keyword">var</span> workerProcess = child_process.spawn(<span class="string">&#x27;node&#x27;</span>, [<span class="string">&#x27;support.js&#x27;</span>, i]);</span><br><span class="line"> </span><br><span class="line">   workerProcess.stdout.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;stdout: &#x27;</span> + data);</span><br><span class="line">   &#125;);</span><br><span class="line"> </span><br><span class="line">   workerProcess.stderr.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;stderr: &#x27;</span> + data);</span><br><span class="line">   &#125;);</span><br><span class="line"> </span><br><span class="line">   workerProcess.on(<span class="string">&#x27;close&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">code</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;子进程已退出，退出码 &#x27;</span>+code);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node master<span class="selector-class">.js</span> stdout: 进程 <span class="number">0</span> 执行。</span><br><span class="line"></span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">stdout: 进程 <span class="number">1</span> 执行。</span><br><span class="line"></span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">stdout: 进程 <span class="number">2</span> 执行。</span><br><span class="line"></span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h2 id="fork-方法"><a href="#fork-方法" class="headerlink" title="fork() 方法"></a>fork() 方法</h2><p><code>child_process.fork</code> 是 <code>spawn()</code> 方法的特殊形式，用于创建进程，语法格式如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">child_process<span class="selector-class">.fork</span>(modulePath<span class="selector-attr">[, args]</span><span class="selector-attr">[, options]</span>)</span><br></pre></td></tr></table></figure>

<h3 id="参数-18"><a href="#参数-18" class="headerlink" title="参数"></a>参数</h3><p>参数说明如下：</p>
<p><strong>modulePath</strong>： String，将要在子进程中运行的模块</p>
<p><strong>args</strong>： Array 字符串参数数组</p>
<p><strong>options</strong>：Object</p>
<ul>
<li>cwd String 子进程的当前工作目录</li>
<li>env Object 环境变量键值对</li>
<li>execPath String 创建子进程的可执行文件</li>
<li>execArgv Array 子进程的可执行文件的字符串参数数组（默认： process.execArgv）</li>
<li>silent Boolean 如果为<code>true</code>，子进程的<code>stdin</code>，<code>stdout</code>和<code>stderr</code>将会被关联至父进程，否则，它们将会从父进程中继承。（默认为：<code>false</code>）</li>
<li>uid Number 设置用户进程的 ID</li>
<li>gid Number 设置进程组的 ID</li>
</ul>
<p>返回的对象除了拥有ChildProcess实例的所有方法，还有一个内建的通信信道。</p>
<h3 id="实例-39"><a href="#实例-39" class="headerlink" title="实例"></a>实例</h3><p>让我们创建两个 js 文件 support.js 和 master.js。</p>
<p>support.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;进程 &quot;</span> + process.argv[<span class="number">2</span>] + <span class="string">&quot; 执行。&quot;</span> );</span><br></pre></td></tr></table></figure>

<p>master.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> child_process = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">   <span class="keyword">var</span> worker_process = child_process.fork(<span class="string">&quot;support.js&quot;</span>, [i]);    </span><br><span class="line"> </span><br><span class="line">   worker_process.on(<span class="string">&#x27;close&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">code</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;子进程已退出，退出码 &#x27;</span> + code);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行以上代码，输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node master<span class="selector-class">.js</span> </span><br><span class="line">进程 <span class="number">0</span> 执行。</span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">进程 <span class="number">1</span> 执行。</span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br><span class="line">进程 <span class="number">2</span> 执行。</span><br><span class="line">子进程已退出，退出码 <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h1 id="Node-js-连接-MySQL"><a href="#Node-js-连接-MySQL" class="headerlink" title="Node.js 连接 MySQL"></a>Node.js 连接 MySQL</h1><p>本章节我们将为大家介绍如何使用 Node.js 来连接 MySQL，并对数据库进行操作。</p>
<p>本教程使用到的 Websites 表 SQL 文件：<a href="https://pan.baidu.com/s/1MYs4e8M6NNG30CGHpUwFZQ">websites.sql</a>  提取码：2fc4。</p>
<h2 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h2><p>本教程使用了淘宝定制的cnpm命令进行安装：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ cnpm install mysql</span><br></pre></td></tr></table></figure>

<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><p>在以下实例中根据你的实际配置修改数据库用户名、及密码及数据库名：</p>
<p>test.js 文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql      = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  <span class="attr">host</span>     : <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>     : <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span> : <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">  <span class="attr">database</span> : <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line">connection.query(<span class="string">&#x27;SELECT 1 + 1 AS solution&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;The solution is: &#x27;</span>, results[<span class="number">0</span>].solution);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node test<span class="selector-class">.js</span></span><br><span class="line">The solution is: <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h3 id="数据库连接参数说明："><a href="#数据库连接参数说明：" class="headerlink" title="数据库连接参数说明："></a>数据库连接参数说明：</h3><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">host</td>
<td align="left">主机地址 （默认：localhost）</td>
</tr>
<tr>
<td align="left">user</td>
<td align="left">用户名</td>
</tr>
<tr>
<td align="left">password</td>
<td align="left">密码</td>
</tr>
<tr>
<td align="left">port</td>
<td align="left">端口号 （默认：3306）</td>
</tr>
<tr>
<td align="left">database</td>
<td align="left">数据库名</td>
</tr>
<tr>
<td align="left">charset</td>
<td align="left">连接字符集（默认：’UTF8_GENERAL_CI’，注意字符集的字母都要大写）</td>
</tr>
<tr>
<td align="left">localAddress</td>
<td align="left">此IP用于TCP连接（可选）</td>
</tr>
<tr>
<td align="left">socketPath</td>
<td align="left">连接到unix域路径，当使用 host 和 port 时会被忽略</td>
</tr>
<tr>
<td align="left">timezone</td>
<td align="left">时区（默认：’local’）</td>
</tr>
<tr>
<td align="left">connectTimeout</td>
<td align="left">连接超时（默认：不限制；单位：毫秒）</td>
</tr>
<tr>
<td align="left">stringifyObjects</td>
<td align="left">是否序列化对象</td>
</tr>
<tr>
<td align="left">typeCast</td>
<td align="left">是否将列值转化为本地JavaScript类型值 （默认：true）</td>
</tr>
<tr>
<td align="left">queryFormat</td>
<td align="left">自定义query语句格式化方法</td>
</tr>
<tr>
<td align="left">supportBigNumbers</td>
<td align="left">数据库支持bigint或decimal类型列时，需要设此option为true （默认：false）</td>
</tr>
<tr>
<td align="left">bigNumberStrings</td>
<td align="left">supportBigNumbers和bigNumberStrings启用 强制bigint或decimal列以JavaScript字符串类型返回（默认：false）</td>
</tr>
<tr>
<td align="left">dateStrings</td>
<td align="left">强制timestamp,datetime,data类型以字符串类型返回，而不是JavaScript Date类型（默认：false）</td>
</tr>
<tr>
<td align="left">debug</td>
<td align="left">开启调试（默认：false）</td>
</tr>
<tr>
<td align="left">multipleStatements</td>
<td align="left">是否许一个query中有多个MySQL语句 （默认：false）</td>
</tr>
<tr>
<td align="left">flags</td>
<td align="left">用于修改连接标志</td>
</tr>
<tr>
<td align="left">ssl</td>
<td align="left">使用ssl参数（与crypto.createCredenitals参数格式一至）或一个包含ssl配置文件名称的字符串，目前只捆绑Amazon RDS的配置文件</td>
</tr>
</tbody></table>
<p>更多说明可参见<a href="https://github.com/mysqljs/mysql">这里</a></p>
<h2 id="数据库操作-CURD"><a href="#数据库操作-CURD" class="headerlink" title="数据库操作( CURD )"></a>数据库操作( CURD )</h2><p>在进行数据库操作前，你需要将本站提供的 Websites 表 SQL 文件websites.sql 导入到你的 MySQL 数据库中。</p>
<p>本教程测试的 MySQL 用户名为 root，密码为 123456，数据库为 test，你需要根据自己配置情况修改。</p>
<h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><p>将上面我们提供的 SQL 文件导入数据库后，执行以下代码即可查询出数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql  = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;     </span><br><span class="line">  <span class="attr">host</span>     : <span class="string">&#x27;localhost&#x27;</span>,       </span><br><span class="line">  <span class="attr">user</span>     : <span class="string">&#x27;root&#x27;</span>,              </span><br><span class="line">  <span class="attr">password</span> : <span class="string">&#x27;123456&#x27;</span>,       </span><br><span class="line">  <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span>,                   </span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;test&#x27;</span> </span><br><span class="line">&#125;); </span><br><span class="line"> </span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span>  sql = <span class="string">&#x27;SELECT * FROM websites&#x27;</span>;</span><br><span class="line"><span class="comment">//查</span></span><br><span class="line">connection.query(sql,<span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;[SELECT ERROR] - &#x27;</span>,err.message);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;--------------------------SELECT----------------------------&#x27;</span>);</span><br><span class="line">       <span class="built_in">console</span>.log(result);</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出就结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node test<span class="selector-class">.js</span></span><br><span class="line">--------------------------SELECT----------------------------</span><br><span class="line"><span class="selector-attr">[ RowDataPacket &#123;    id: 1,    name: <span class="string">&#x27;node.js教程&#x27;</span>,    url: <span class="string">&#x27;https://www.mybj123.com/qdkfnote/jsnote/nodejs/&#x27;</span>,    alexa: 1,    country: <span class="string">&#x27;USA&#x27;</span> &#125;,  RowDataPacket &#123;    id: 2,    name: <span class="string">&#x27;前端&#x27;</span>,    url: <span class="string">&#x27;https://www.mybj123.com/qdkfnote/&#x27;</span>,    alexa: 13,    country: <span class="string">&#x27;CN&#x27;</span> &#125;,  RowDataPacket &#123;    id: 3,    name: <span class="string">&#x27;码云笔记&#x27;</span>,    url: <span class="string">&#x27;https://www.mybj123.com/&#x27;</span>,    alexa: 4689,    country: <span class="string">&#x27;CN&#x27;</span> &#125;,  RowDataPacket &#123;    id: 4,    name: <span class="string">&#x27;源码&#x27;</span>,    url: <span class="string">&#x27;https://www.mybj123.com/yuancode/&#x27;</span>,    alexa: 20,    country: <span class="string">&#x27;CN&#x27;</span> &#125;,  RowDataPacket &#123;    id: 5,    name: <span class="string">&#x27;面试题&#x27;</span>,    url: <span class="string">&#x27;https://www.mybj123.com/question/&#x27;</span>,    alexa: 3,    country: <span class="string">&#x27;USA&#x27;</span> &#125; ]</span></span><br><span class="line">------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><p>我们可以向数据表 websties 插入数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql  = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;     </span><br><span class="line">  <span class="attr">host</span>     : <span class="string">&#x27;localhost&#x27;</span>,       </span><br><span class="line">  <span class="attr">user</span>     : <span class="string">&#x27;root&#x27;</span>,              </span><br><span class="line">  <span class="attr">password</span> : <span class="string">&#x27;123456&#x27;</span>,       </span><br><span class="line">  <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span>,                   </span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;test&#x27;</span> </span><br><span class="line">&#125;); </span><br><span class="line"> </span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span>  addSql = <span class="string">&#x27;INSERT INTO websites(Id,name,url,alexa,country) VALUES(0,?,?,?,?)&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span>  addSqlParams = [<span class="string">&#x27;typescript&#x27;</span>, <span class="string">&#x27;https://www.mybj123.com/qdkfnote/typescript/&#x27;</span>,<span class="string">&#x27;23453&#x27;</span>, <span class="string">&#x27;CN&#x27;</span>];</span><br><span class="line"><span class="comment">//增</span></span><br><span class="line">connection.query(addSql,addSqlParams,<span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&#x27;[INSERT ERROR] - &#x27;</span>,err.message);</span><br><span class="line">         <span class="keyword">return</span>;</span><br><span class="line">        &#125;        </span><br><span class="line"> </span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;--------------------------INSERT----------------------------&#x27;</span>);</span><br><span class="line">       <span class="comment">//console.log(&#x27;INSERT ID:&#x27;,result.insertId);        </span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;INSERT ID:&#x27;</span>,result);        </span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出就结果为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ node test<span class="selector-class">.js</span></span><br><span class="line">--------------------------INSERT----------------------------</span><br><span class="line">INSERT ID: OkPacket &#123;</span><br><span class="line">  fieldCount: <span class="number">0</span>,</span><br><span class="line">  affectedRows: <span class="number">1</span>,</span><br><span class="line">  insertId: <span class="number">6</span>,</span><br><span class="line">  serverStatus: <span class="number">2</span>,</span><br><span class="line">  warningCount: <span class="number">0</span>,</span><br><span class="line">  message: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  protocol41: true,</span><br><span class="line">  changedRows: <span class="number">0</span> &#125;</span><br><span class="line">-----------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>执行成功后，查看数据表，即可以看到添加的数据。</p>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><p>我们也可以对数据库的数据进行修改：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var mysql  = require(&#x27;mysql&#x27;);  </span><br><span class="line"> </span><br><span class="line">var connection = mysql.createConnection(&#123;     </span><br><span class="line">  host     : &#x27;localhost&#x27;,       </span><br><span class="line">  user     : &#x27;root&#x27;,              </span><br><span class="line">  password : &#x27;123456&#x27;,       </span><br><span class="line">  port: &#x27;3306&#x27;,                   </span><br><span class="line">  database: &#x27;test&#x27; </span><br><span class="line">&#125;); </span><br><span class="line"> </span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line">var modSql = &#x27;UPDATE websites SET name = ?,url = ? WHERE Id = ?&#x27;;</span><br><span class="line">var modSqlParams = [&#x27;前端问答&#x27;, &#x27;https://www.mybj123.com/qa/&#x27;,6];</span><br><span class="line">//改</span><br><span class="line">connection.query(modSql,modSqlParams,function (err, result) &#123;</span><br><span class="line">   if(err)&#123;</span><br><span class="line">         console.log(&#x27;[UPDATE ERROR] - &#x27;,err.message);</span><br><span class="line">         return;</span><br><span class="line">   &#125;        </span><br><span class="line">  console.log(&#x27;--------------------------UPDATE----------------------------&#x27;);</span><br><span class="line">  console.log(&#x27;UPDATE affectedRows&#x27;,result.affectedRows);</span><br><span class="line">  console.log(&#x27;-----------------------------------------------------------------\n\n&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出就结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--------------------------UPDATE----------------------------</span><br><span class="line">UPDATE affectedRows 1</span><br><span class="line">-----------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>执行成功后，查看数据表，即可以看到更新的数据</p>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p>我们可以使用以下代码来删除 id 为 6 的数据:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var mysql  = require(&#x27;mysql&#x27;);  </span><br><span class="line"> </span><br><span class="line">var connection = mysql.createConnection(&#123;     </span><br><span class="line">  host     : &#x27;localhost&#x27;,       </span><br><span class="line">  user     : &#x27;root&#x27;,              </span><br><span class="line">  password : &#x27;123456&#x27;,       </span><br><span class="line">  port: &#x27;3306&#x27;,                   </span><br><span class="line">  database: &#x27;test&#x27; </span><br><span class="line">&#125;); </span><br><span class="line"> </span><br><span class="line">connection.connect();</span><br><span class="line"> </span><br><span class="line">var delSql = &#x27;DELETE FROM websites where id=6&#x27;;</span><br><span class="line">//删</span><br><span class="line">connection.query(delSql,function (err, result) &#123;</span><br><span class="line">        if(err)&#123;</span><br><span class="line">          console.log(&#x27;[DELETE ERROR] - &#x27;,err.message);</span><br><span class="line">          return;</span><br><span class="line">        &#125;        </span><br><span class="line"> </span><br><span class="line">       console.log(&#x27;--------------------------DELETE----------------------------&#x27;);</span><br><span class="line">       console.log(&#x27;DELETE affectedRows&#x27;,result.affectedRows);</span><br><span class="line">       console.log(&#x27;-----------------------------------------------------------------\n\n&#x27;);  </span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出就结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--------------------------DELETE----------------------------</span><br><span class="line">DELETE affectedRows 1</span><br><span class="line">-----------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>执行成功后，查看数据表，即可以看到 id=6 的数据已被删除。</p>
<h1 id="Node-js-连接-MongoDB"><a href="#Node-js-连接-MongoDB" class="headerlink" title="Node.js 连接 MongoDB"></a>Node.js 连接 MongoDB</h1><p><code>MongoDB</code>是一种文档导向数据库管理系统，由C++撰写而成。</p>
<p>本章节我们将为大家介绍如何使用 <code>Node.js</code> 来连接 <code>MongoDB</code>，并对数据库进行操作。</p>
<h2 id="安装驱动-1"><a href="#安装驱动-1" class="headerlink" title="安装驱动"></a>安装驱动</h2><p>本教程使用了淘宝定制的<code>cnpm</code>命令进行安装：</p>
<blockquote>
<p>使用淘宝 NPM 镜像</p>
<p>大家都知道国内直接使用 <code>npm</code> 的官方镜像是非常慢的，这里推荐使用淘宝 NPM 镜像。</p>
<p>淘宝 NPM 镜像是一个完整 <code>npmjs.org</code> 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。</p>
<p>你可以使用淘宝定制的 <code>cnpm</code> (gzip 压缩支持) 命令行工具代替默认的 <code>npm</code>:</p>
<p>$ npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p>
<p>这样就可以使用 <code>cnpm</code> 命令来安装模块了：</p>
<p>$ cnpm install [name]</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cnpm install mongodb</span><br></pre></td></tr></table></figure>

<p>接下来我们来实现增删改查功能。</p>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>要在 <code>MongoDB</code> 中创建一个数据库，首先我们需要创建一个 <code>MongoClient</code> 对象，然后配置好指定的 <code>URL</code> 和 端口号。</p>
<p>如果数据库不存在，<code>MongoDB</code> 将创建数据库并建立连接。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> MongoClient = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).MongoClient;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/mybj&quot;</span>;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span> &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, db</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;数据库已创建!&quot;</span>);</span><br><span class="line">  db.close();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h2><p>我们可以使用 <code>createCollection()</code> 方法来创建集合：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> MongoClient = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).MongoClient;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;mongodb://localhost:27017/mybj&#x27;</span>;</span><br><span class="line">MongoClient.connect(url, &#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, db</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;数据库已创建&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> dbase = db.db(<span class="string">&quot;mybj&quot;</span>);</span><br><span class="line">    dbase.createCollection(<span class="string">&#x27;site&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;创建集合!&quot;</span>);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="数据库操作-CURD-1"><a href="#数据库操作-CURD-1" class="headerlink" title="数据库操作( CURD )"></a>数据库操作( CURD )</h2><p>与 <code>MySQL</code> 不同的是 <code>MongoDB</code> 会自动创建数据库和集合，所以使用前我们不需要手动去创建。</p>
<h3 id="插入数据-1"><a href="#插入数据-1" class="headerlink" title="插入数据"></a>插入数据</h3><p>以下实例我们连接数据库 <code>runoob</code> 的 <code>site</code> 表，并插入一条数据条数据，使用 <code>insertOne()</code>插入一条数据:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> MongoClient = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).MongoClient;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span> &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, db</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="keyword">var</span> dbo = db.db(<span class="string">&quot;mybj&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> myobj = &#123; <span class="attr">name</span>: <span class="string">&quot;码云笔记&quot;</span>, <span class="attr">url</span>: <span class="string">&quot;www.mybj123&quot;</span> &#125;;</span><br><span class="line">    dbo.collection(<span class="string">&quot;site&quot;</span>).insertOne(myobj, <span class="function"><span class="keyword">function</span>(<span class="params">err, res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;文档插入成功&quot;</span>);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出就结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ node test.js</span><br><span class="line">文档插入成功</span><br></pre></td></tr></table></figure>

<p>从输出结果来看，数据已插入成功。</p>
<p>我们也可以打开 <code>MongoDB</code> 的客户端查看数据，如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; show dbs</span><br><span class="line">mybj  0.000GB          # 自动创建了 mybj 数据库</span><br><span class="line">&gt; show tables</span><br><span class="line">site                     # 自动创建了 site 集合（数据表）</span><br><span class="line">&gt; db.site.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;5a794e36763eb821b24db854&quot;), &quot;name&quot; : &quot;码云笔记&quot;, &quot;url&quot; : &quot;www.mybj123&quot; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>如果要插入多条数据可以使用 <code>insertMany()</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    var myobj =  [</span><br><span class="line">        &#123; name: &#x27;node.js教程&#x27;, url: &#x27;https://www.mybj123.com/qdkfnote/jsnote/nodejs/&#x27;, type: &#x27;cn&#x27;&#125;,</span><br><span class="line">        &#123; name: &#x27;前端&#x27;, url: &#x27;https://www.mybj123.com/qdkfnote/&#x27;, type: &#x27;en&#x27;&#125;,</span><br><span class="line">        &#123; name: &#x27;javascript&#x27;, url: &#x27;https://www.mybj123.com/qdkfnote/jsnote/&#x27;, type: &#x27;en&#x27;&#125;</span><br><span class="line">       ];</span><br><span class="line">    dbo.collection(&quot;site&quot;).insertMany(myobj, function(err, res) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(&quot;插入的文档数量为: &quot; + res.insertedCount);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>res.insertedCount</code> 为插入的条数。</p>
<h3 id="查询数据-1"><a href="#查询数据-1" class="headerlink" title="查询数据"></a>查询数据</h3><p>可以使用 <code>find()</code> 来查找数据, <code>find()</code> 可以返回匹配条件的所有数据。 如果未指定条件，<code>find()</code> 返回集合中的所有数据。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    dbo.collection(&quot;site&quot;). find(&#123;&#125;).toArray(function(err, result) &#123; // 返回集合中所有数据</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(result);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以下实例检索 <code>name</code> 为 “码云笔记” 的实例：</p>
<p>查询指定条件的数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">     var whereStr = &#123;&quot;name&quot;:&#x27;码云笔记&#x27;&#125;;  // 查询条件</span><br><span class="line">    dbo.collection(&quot;site&quot;).find(whereStr).toArray(function(err, result) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(result);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行以下命令输出就结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[ &#123; _id: 5a794e36763eb821b24db854,</span><br><span class="line">    name: &#x27;码云笔记&#x27;,</span><br><span class="line">    url: &#x27;www.mybj123&#x27; &#125; ]</span><br></pre></td></tr></table></figure>

<h3 id="更新数据-1"><a href="#更新数据-1" class="headerlink" title="更新数据"></a>更新数据</h3><p>我们也可以对数据库的数据进行修改，以下实例将 <code>name</code> 为 “码云笔记” 的 url 改为 <a href="https://www.mybj123.com./">https://www.mybj123.com。</a></p>
<p>更新一条数据:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;runoob&quot;);</span><br><span class="line">    var whereStr = &#123;&quot;name&quot;:&#x27;码云笔记&#x27;&#125;;  // 查询条件</span><br><span class="line">    var updateStr = &#123;$set: &#123; &quot;url&quot; : &quot;https://www.mybj123.com&quot; &#125;&#125;;</span><br><span class="line">    dbo.collection(&quot;site&quot;).updateOne(whereStr, updateStr, function(err, res) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(&quot;文档更新成功&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行成功后，进入 mongo 管理工具查看数据已修改：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; db.site.find().pretty()</span><br><span class="line">&#123;</span><br><span class="line">    &quot;_id&quot; : ObjectId(&quot;5a794e36763eb821b24db854&quot;),</span><br><span class="line">    &quot;name&quot; : &quot;码云笔记&quot;,</span><br><span class="line">    &quot;url&quot; : &quot;https://www.mybj123.com&quot;     // 已修改为 https</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果要更新所有符合条的文档数据可以使用 <code>updateMany()</code>：</p>
<p>更新多条数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    var whereStr = &#123;&quot;type&quot;:&#x27;en&#x27;&#125;;  // 查询条件</span><br><span class="line">    var updateStr = &#123;$set: &#123; &quot;url&quot; : &quot;https://www.mybj123.com&quot; &#125;&#125;;</span><br><span class="line">    dbo.collection(&quot;site&quot;).updateMany(whereStr, updateStr, function(err, res) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">         console.log(res.result.nModified + &quot; 条文档被更新&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>result.nModified</code> 为更新的条数。</p>
<h3 id="删除数据-1"><a href="#删除数据-1" class="headerlink" title="删除数据"></a>删除数据</h3><p>以下实例将 <code>name</code> 为 “码云笔记” 的数据删除 :</p>
<p>删除一条数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    var whereStr = &#123;&quot;name&quot;:&#x27;码云笔记&#x27;&#125;;  // 查询条件</span><br><span class="line">    dbo.collection(&quot;site&quot;).deleteOne(whereStr, function(err, obj) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(&quot;文档删除成功&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行成功后，进入 mongo 管理工具查看数据已删除：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; db.site.find()</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>如果要删除多条语句可以使用 <code>deleteMany()</code> 方法</p>
<p>以下实例将 <code>type</code> 为 <code>en</code> 的所有数据删除 :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    var whereStr = &#123; type: &quot;en&quot; &#125;;  // 查询条件</span><br><span class="line">    dbo.collection(&quot;site&quot;).deleteMany(whereStr, function(err, obj) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(obj.result.n + &quot; 条文档被删除&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>obj.result.n</code> 删除的条数。</p>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>排序 使用 <code>sort()</code> 方法，该方法接受一个参数，规定是升序(1)还是降序(-1)。</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; type: 1 &#125;  // 按 type 字段升序</span><br><span class="line">&#123; type: -1 &#125; // 按 type 字段降序</span><br></pre></td></tr></table></figure>

<p>按 type 升序排列:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    var mysort = &#123; type: 1 &#125;;</span><br><span class="line">    dbo.collection(&quot;site&quot;).find().sort(mysort).toArray(function(err, result) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(result);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="查询分页"><a href="#查询分页" class="headerlink" title="查询分页"></a>查询分页</h3><p>如果要设置指定的返回条数可以使用 <code>limit()</code> 方法，该方法只接受一个参数，指定了返回的条数。</p>
<p><code>limit()</code>：读取两条数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    dbo.collection(&quot;site&quot;).find().limit(2).toArray(function(err, result) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(result);</span><br><span class="line">        db.close();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>如果要指定跳过的条数，可以使用 <code>skip()</code> 方法。</p>
<p><code>skip()</code>: 跳过前面两条数据，读取两条数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    dbo.collection(&quot;site&quot;).find().skip(2).limit(2).toArray(function(err, result) &#123;</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        console.log(result);</span><br><span class="line">        db.close();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="连接操作"><a href="#连接操作" class="headerlink" title="连接操作"></a>连接操作</h3><p>mongoDB 不是一个关系型数据库，但我们可以使用 <code>$lookup</code> 来实现左连接。</p>
<p>例如我们有两个集合数据分别为：</p>
<p>集合1：orders</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; _id: 1, product_id: 154, status: 1 &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>集合2：products</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; _id: 154, name: &#x27;笔记本电脑&#x27; &#125;,</span><br><span class="line">  &#123; _id: 155, name: &#x27;耳机&#x27; &#125;,</span><br><span class="line">  &#123; _id: 156, name: &#x27;台式电脑&#x27; &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>$lookup</code> 实现左连接:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://127.0.0.1:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">  if (err) throw err;</span><br><span class="line">  var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">  dbo.collection(&#x27;orders&#x27;).aggregate([</span><br><span class="line">    &#123; $lookup:</span><br><span class="line">       &#123;</span><br><span class="line">         from: &#x27;products&#x27;,            // 右集合</span><br><span class="line">         localField: &#x27;product_id&#x27;,    // 左集合 join 字段</span><br><span class="line">         foreignField: &#x27;_id&#x27;,         // 右集合 join 字段</span><br><span class="line">         as: &#x27;orderdetails&#x27;           // 新生成字段（类型array）</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    ]).toArray(function(err, res) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    console.log(JSON.stringify(res));</span><br><span class="line">    db.close();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="删除集合"><a href="#删除集合" class="headerlink" title="删除集合"></a>删除集合</h3><p>我们可以使用 <code>drop()</code> 方法来删除集合：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var MongoClient = require(&#x27;mongodb&#x27;).MongoClient;</span><br><span class="line">var url = &quot;mongodb://localhost:27017/&quot;;</span><br><span class="line"> </span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;, function(err, db) &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    var dbo = db.db(&quot;mybj&quot;);</span><br><span class="line">    // 删除 test 集合</span><br><span class="line">    dbo.collection(&quot;test&quot;).drop(function(err, delOK) &#123;  // 执行成功 delOK 返回 true，否则返回 false</span><br><span class="line">        if (err) throw err;</span><br><span class="line">        if (delOK) console.log(&quot;集合已删除&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="使用-Promise"><a href="#使用-Promise" class="headerlink" title="使用 Promise"></a>使用 Promise</h2><p><code>Promise</code> 是一个 ECMAScript 6 提供的类，目的是更加优雅地书写复杂的异步任务。</p>
<p>以下实例使用 <code>Promise</code> 创建集合：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const MongoClient = require(&quot;mongodb&quot;).MongoClient;</span><br><span class="line">const url = &quot;mongodb://localhost/mybj&quot;;</span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;).then((conn) =&gt; &#123;</span><br><span class="line">    console.log(&quot;数据库已连接&quot;);</span><br><span class="line">    var dbase = conn.db(&quot;mybj&quot;);</span><br><span class="line">    dbase.createCollection(&quot;site&quot;).then((res) =&gt; &#123;</span><br><span class="line">        console.log(&quot;已创建集合&quot;);</span><br><span class="line">    &#125;).catch((err) =&gt; &#123;</span><br><span class="line">        console.log(&quot;数据库操作错误&quot;);</span><br><span class="line">    &#125;).finally(() =&gt; &#123;</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).catch((err) =&gt; &#123;</span><br><span class="line">    console.log(&quot;数据库连接失败&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Promise-数据操作"><a href="#Promise-数据操作" class="headerlink" title="Promise 数据操作"></a>Promise 数据操作</h3><p>现在我们在一个程序中实现四个连续操作：增加 、查询 、更改 、删除。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const MongoClient = require(&quot;mongodb&quot;).MongoClient;</span><br><span class="line">const url = &quot;mongodb://localhost/&quot;;</span><br><span class="line">MongoClient.connect(url, &#123; useNewUrlParser: true &#125;).then((conn) =&gt; &#123;</span><br><span class="line">    console.log(&quot;数据库已连接&quot;);</span><br><span class="line">    const test = conn.db(&quot;testdb&quot;).collection(&quot;test&quot;);</span><br><span class="line">    // 增加</span><br><span class="line">    test.insertOne(&#123; &quot;site&quot;: &quot;mybj123.com&quot; &#125;).then((res) =&gt; &#123;</span><br><span class="line">        // 查询</span><br><span class="line">        return test.find().toArray().then((arr) =&gt; &#123;</span><br><span class="line">            console.log(arr);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;).then(() =&gt; &#123;</span><br><span class="line">        // 更改</span><br><span class="line">        return test.updateMany(&#123; &quot;site&quot;: &quot;mybj123.com&quot; &#125;,</span><br><span class="line">            &#123; $set: &#123; &quot;site&quot;: &quot;example.com&quot; &#125; &#125;);</span><br><span class="line">    &#125;).then((res) =&gt; &#123;</span><br><span class="line">        // 查询</span><br><span class="line">        return test.find().toArray().then((arr) =&gt; &#123;</span><br><span class="line">            console.log(arr);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;).then(() =&gt; &#123;</span><br><span class="line">        // 删除</span><br><span class="line">        return test.deleteMany(&#123; &quot;site&quot;: &quot;example.com&quot; &#125;);</span><br><span class="line">    &#125;).then((res) =&gt; &#123;</span><br><span class="line">        // 查询</span><br><span class="line">        return test.find().toArray().then((arr) =&gt; &#123;</span><br><span class="line">            console.log(arr);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;).catch((err) =&gt; &#123;</span><br><span class="line">        console.log(&quot;数据操作失败&quot; + err.message);</span><br><span class="line">    &#125;).finally(() =&gt; &#123;</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).catch((err) =&gt; &#123;</span><br><span class="line">    console.log(&quot;数据库连接失败&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数据库已连接</span><br><span class="line">[ &#123; _id: 5f1664966833e531d83d3ac6, site: &#x27;mybj123.com&#x27; &#125; ]</span><br><span class="line">[ &#123; _id: 5f1664966833e531d83d3ac6, site: &#x27;example.com&#x27; &#125; ]</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<h3 id="用异步函数实现相同的数据操作"><a href="#用异步函数实现相同的数据操作" class="headerlink" title="用异步函数实现相同的数据操作"></a>用异步函数实现相同的数据操作</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const MongoClient = require(&quot;mongodb&quot;).MongoClient;</span><br><span class="line">const url = &quot;mongodb://localhost/&quot;;</span><br><span class="line"> </span><br><span class="line">async function dataOperate() &#123;</span><br><span class="line">    var conn = null;</span><br><span class="line">    try &#123;</span><br><span class="line">        conn = await MongoClient.connect(url);</span><br><span class="line">        console.log(&quot;数据库已连接&quot;);</span><br><span class="line">        const test = conn.db(&quot;testdb&quot;).collection(&quot;test&quot;);</span><br><span class="line">        // 增加</span><br><span class="line">        await test.insertOne(&#123; &quot;site&quot;: &quot;mybj123.com&quot; &#125;);</span><br><span class="line">        // 查询</span><br><span class="line">        var arr = await test.find().toArray();</span><br><span class="line">        console.log(arr);</span><br><span class="line">        // 更改</span><br><span class="line">        await test.updateMany(&#123; &quot;site&quot;: &quot;mybj123.com&quot; &#125;,</span><br><span class="line">            &#123; $set: &#123; &quot;site&quot;: &quot;example.com&quot; &#125; &#125;);</span><br><span class="line">        // 查询</span><br><span class="line">        arr = await test.find().toArray();</span><br><span class="line">        console.log(arr);</span><br><span class="line">        // 删除</span><br><span class="line">        await test.deleteMany(&#123; &quot;site&quot;: &quot;example.com&quot; &#125;);</span><br><span class="line">        // 查询</span><br><span class="line">        arr = await test.find().toArray();</span><br><span class="line">        console.log(arr);</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">        console.log(&quot;错误：&quot; + err.message);</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        if (conn != null) conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">dataOperate();</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数据库已连接</span><br><span class="line">[ &#123; _id: 5f169006a2780f0cd4ea640b, site: &#x27;mybj123.com&#x27; &#125; ]</span><br><span class="line">[ &#123; _id: 5f169006a2780f0cd4ea640b, site: &#x27;example.com&#x27; &#125; ]</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<p>运行结果完全一样。</p>
<p>很显然，异步函数是一种非常良好的编程风格，在多次使用异步操作的时候非常实用。</p>
<p>但是请勿在低于 7.6.0 版本的 node.js 上使用异步函数。</p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo增加网站运行时间</title>
    <url>/taiaiac.gitee.io/2021/05/10/hexo/hexo%E5%A2%9E%E5%8A%A0%E7%BD%91%E7%AB%99%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4/</url>
    <content><![CDATA[<p>在主题目录 themes\next\layout_partial下的footer文件，添加以下代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;timeDate&quot;</span>&gt;</span>载入天数...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;times&quot;</span>&gt;</span>载入时分秒...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(); </span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">createtime</span>(<span class="params"></span>) </span>&#123; </span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> grt= <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;05/08/2021 18:00:00&quot;</span>);<span class="comment">//在此处修改你的建站时间，格式：月/日/年 时:分:秒</span></span></span><br><span class="line"><span class="javascript">        now.setTime(now.getTime()+<span class="number">250</span>); </span></span><br><span class="line"><span class="javascript">        days = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>; dnum = <span class="built_in">Math</span>.floor(days); </span></span><br><span class="line"><span class="javascript">        hours = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> - (<span class="number">24</span> * dnum); hnum = <span class="built_in">Math</span>.floor(hours); </span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="built_in">String</span>(hnum).length ==<span class="number">1</span> )&#123;hnum = <span class="string">&quot;0&quot;</span> + hnum;&#125; minutes = (now - grt ) / <span class="number">1000</span> /<span class="number">60</span> - (<span class="number">24</span> * <span class="number">60</span> * dnum) - (<span class="number">60</span> * hnum); </span></span><br><span class="line"><span class="javascript">        mnum = <span class="built_in">Math</span>.floor(minutes); <span class="keyword">if</span>(<span class="built_in">String</span>(mnum).length ==<span class="number">1</span> )&#123;mnum = <span class="string">&quot;0&quot;</span> + mnum;&#125; </span></span><br><span class="line"><span class="javascript">        seconds = (now - grt ) / <span class="number">1000</span> - (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * dnum) - (<span class="number">60</span> * <span class="number">60</span> * hnum) - (<span class="number">60</span> * mnum); </span></span><br><span class="line"><span class="javascript">        snum = <span class="built_in">Math</span>.round(seconds); <span class="keyword">if</span>(<span class="built_in">String</span>(snum).length ==<span class="number">1</span> )&#123;snum = <span class="string">&quot;0&quot;</span> + snum;&#125; </span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;timeDate&quot;</span>).innerHTML = <span class="string">&quot;本站已安全运行 &quot;</span>+dnum+<span class="string">&quot; 天 &quot;</span>; </span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;times&quot;</span>).innerHTML = hnum + <span class="string">&quot; 小时 &quot;</span> + mnum + <span class="string">&quot; 分 &quot;</span> + snum + <span class="string">&quot; 秒&quot;</span>; </span></span><br><span class="line"><span class="javascript">    &#125; </span></span><br><span class="line"><span class="javascript"><span class="built_in">setInterval</span>(<span class="string">&quot;createtime()&quot;</span>,<span class="number">1000</span>);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>去除html标签的纯文本</title>
    <url>/taiaiac.gitee.io/2020/12/30/utils/%E5%8E%BB%E9%99%A4html%E6%A0%87%E7%AD%BE%E7%9A%84%E7%BA%AF%E6%96%87%E6%9C%AC/</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">    <span class="function"><span class="title">startCearl</span>(<span class="params">v</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> v.replace(<span class="regexp">/&lt;\/?.+?&gt;/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">endCearl</span>(<span class="params">v</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> v.replace(<span class="regexp">/ /g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>utils</category>
      </categories>
      <tags>
        <tag>utils</tag>
      </tags>
  </entry>
  <entry>
    <title>vue打印pdf插件</title>
    <url>/taiaiac.gitee.io/2021/05/11/utils/vue%E6%89%93%E5%8D%B0pdf%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="在vue中使用v-print打印pdf"><a href="#在vue中使用v-print打印pdf" class="headerlink" title="在vue中使用v-print打印pdf"></a>在vue中使用v-print打印pdf</h2><h4 id="下载安装插件"><a href="#下载安装插件" class="headerlink" title="下载安装插件"></a>下载安装插件</h4><p><code>yarn add vue-print-nb</code></p>
<h4 id="引入注册"><a href="#引入注册" class="headerlink" title="引入注册"></a>引入注册</h4><p>在app.js或main.js中引入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//打印文件</span></span><br><span class="line"><span class="keyword">import</span> Print <span class="keyword">from</span> <span class="string">&#x27;vue-print-nb&#x27;</span></span><br><span class="line">Vue.use(Print)</span><br></pre></td></tr></table></figure>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;printID&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span>&gt;</span></span><br><span class="line">    xxx...</span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-print</span>=<span class="string">&quot;printObj&quot;</span>&gt;</span>打印<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">printObj: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;printID&quot;</span>,</span><br><span class="line">        <span class="attr">popTitle</span>: <span class="string">&quot;学生历年学习成绩单&quot;</span>,</span><br><span class="line">        <span class="attr">extraHead</span>: <span class="string">&#x27;&lt;meta http-equiv=&quot;Content-Language&quot;content=&quot;zh-cn&quot;/&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>utils</category>
      </categories>
      <tags>
        <tag>utils</tag>
      </tags>
  </entry>
  <entry>
    <title>导出</title>
    <url>/taiaiac.gitee.io/2020/12/30/utils/%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<p>事件触发函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">handleDownload</span>(<span class="params">v</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (v === <span class="string">&#x27;excel&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.exportToExcel()</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (v === <span class="string">&#x27;pdf&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.exportToPDF()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>导出 excel</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">exportToExcel</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">//1、获得当前要导出的数据源</span></span><br><span class="line">  <span class="keyword">let</span> arr = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.goodsList))</span><br><span class="line">  <span class="keyword">if</span> (!arr.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;导出数据不能为空&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//2、获得第一个元素对象</span></span><br><span class="line">  <span class="keyword">let</span> object = arr[<span class="number">0</span>]</span><br><span class="line">  <span class="comment">//3、获得object的所有属性数组</span></span><br><span class="line">  <span class="keyword">let</span> attrs = <span class="built_in">Object</span>.keys(object)</span><br><span class="line">  <span class="built_in">console</span>.log(attrs)</span><br><span class="line">  <span class="keyword">if</span> (!attrs.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;对象的属性不能为空&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//4、拼接表头单元格</span></span><br><span class="line">  <span class="keyword">let</span> str = attrs.join(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">  <span class="comment">//5、换行</span></span><br><span class="line">  str += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">  <span class="comment">//6、拼接所有元素属性的值</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> arr[i]) &#123;</span><br><span class="line">      str += <span class="string">`<span class="subst">$&#123;arr[i][key] + <span class="string">&#x27;\t&#x27;</span>&#125;</span>,`</span></span><br><span class="line">    &#125;</span><br><span class="line">    str += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  log(str)</span><br><span class="line">  <span class="comment">//7、创建a</span></span><br><span class="line">  <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  link.href = <span class="string">&#x27;data:text/csv;charset=utf-8,\ufeff&#x27;</span> + <span class="built_in">encodeURIComponent</span>(str)</span><br><span class="line">  link.download = <span class="string">&#x27;商品列表.csv&#x27;</span></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(link)</span><br><span class="line">  link.click()</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(link)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>导出 pdf</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&#x27;html2canvas&#x27;</span></span><br><span class="line"><span class="keyword">import</span> jspdf <span class="keyword">from</span> <span class="string">&#x27;jspdf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">exportToPDF</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;goodsTable&#x27;</span>)</span><br><span class="line">      <span class="comment">//let ele = this.$refs[&#x27;goodsTable&#x27;]</span></span><br><span class="line">      <span class="built_in">console</span>.log(ele)</span><br><span class="line">      ele.style.background = <span class="string">&#x27;#ffffff&#x27;</span></span><br><span class="line">      <span class="keyword">let</span> eleW = ele.offsetWidth <span class="comment">// 获得该容器的宽</span></span><br><span class="line">      <span class="keyword">let</span> eleH = ele.offsetHeight <span class="comment">// 获得该容器的高</span></span><br><span class="line">      <span class="keyword">let</span> eleOffsetTop = ele.offsetTop <span class="comment">// 获得该容器到文档顶部的距离</span></span><br><span class="line">      <span class="keyword">let</span> eleOffsetLeft = ele.offsetLeft <span class="comment">// 获得该容器到文档最左的距离</span></span><br><span class="line">      <span class="keyword">let</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">      <span class="keyword">let</span> abs = <span class="number">0</span></span><br><span class="line">      <span class="keyword">let</span> win_in = <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth <span class="comment">// 获得当前可视窗口的宽度（不包含滚动条）</span></span><br><span class="line">      <span class="keyword">let</span> win_out = <span class="built_in">window</span>.innerWidth <span class="comment">// 获得当前窗口的宽度（包含滚动条）</span></span><br><span class="line">      <span class="keyword">if</span> (win_out &gt; win_in) &#123;</span><br><span class="line">        <span class="comment">// abs = (win_o - win_i)/2;    // 获得滚动条长度的一半</span></span><br><span class="line">        abs = (win_out - win_in) / <span class="number">2</span> <span class="comment">// 获得滚动条宽度的一半</span></span><br><span class="line">        <span class="comment">// console.log(a, &#x27;新abs&#x27;);</span></span><br><span class="line">      &#125;</span><br><span class="line">      canvas.width = eleW * <span class="number">2</span> <span class="comment">// 将画布宽&amp;&amp;高放大两倍</span></span><br><span class="line">      canvas.height = eleH * <span class="number">2</span></span><br><span class="line">      <span class="keyword">let</span> context = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">      context.scale(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">      context.translate(-eleOffsetLeft - abs, -eleOffsetTop)</span><br><span class="line">      <span class="comment">// 这里默认横向没有滚动条的情况，因为offset.left(),有无滚动条的时候存在差值，因此</span></span><br><span class="line">      <span class="comment">// translate的时候，要把这个差值去掉</span></span><br><span class="line">      <span class="comment">// html2canvas(element).then( (canvas)=&gt;&#123; //报错</span></span><br><span class="line">      <span class="comment">// html2canvas(element[0]).then( (canvas)=&gt;&#123;</span></span><br><span class="line">      html2canvas(ele, &#123;</span><br><span class="line">        <span class="attr">dpi</span>: <span class="number">1080</span>,</span><br><span class="line">        <span class="comment">// allowTaint: true,  //允许 canvas 污染， allowTaint参数要去掉，否则是无法通过toDataURL导出canvas数据的</span></span><br><span class="line">        <span class="attr">useCORS</span>: <span class="literal">true</span> <span class="comment">//允许canvas画布内 可以跨域请求外部链接图片, 允许跨域请求。</span></span><br><span class="line">      &#125;).then(<span class="function"><span class="params">canvas</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> contentWidth = canvas.width</span><br><span class="line">        <span class="keyword">let</span> contentHeight = canvas.height</span><br><span class="line">        <span class="comment">//一页pdf显示html页面生成的canvas高度;</span></span><br><span class="line">        <span class="keyword">let</span> pageHeight = (contentWidth / <span class="number">592.28</span>) * <span class="number">841.89</span></span><br><span class="line">        <span class="comment">//未生成pdf的html页面高度</span></span><br><span class="line">        <span class="keyword">let</span> leftHeight = contentHeight</span><br><span class="line">        <span class="comment">//页面偏移</span></span><br><span class="line">        <span class="keyword">let</span> position = <span class="number">0</span></span><br><span class="line">        <span class="comment">//a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高</span></span><br><span class="line">        <span class="keyword">let</span> imgWidth = <span class="number">595.28</span></span><br><span class="line">        <span class="keyword">let</span> imgHeight = (<span class="number">595.28</span> / contentWidth) * contentHeight</span><br><span class="line">        <span class="keyword">let</span> pageData = canvas.toDataURL(<span class="string">&#x27;image/jpeg&#x27;</span>, <span class="number">1.0</span>)</span><br><span class="line">        <span class="keyword">let</span> pdf = <span class="keyword">new</span> jspdf(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;pt&#x27;</span>, <span class="string">&#x27;a4&#x27;</span>)</span><br><span class="line">        <span class="comment">//有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)</span></span><br><span class="line">        <span class="comment">//当内容未超过pdf一页显示的范围，无需分页</span></span><br><span class="line">        <span class="keyword">if</span> (leftHeight &lt; pageHeight) &#123;</span><br><span class="line">          <span class="comment">//在pdf.addImage(pageData, &#x27;JPEG&#x27;, 左，上，宽度，高度)设置在pdf中显示；</span></span><br><span class="line">          pdf.addImage(pageData, <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, imgWidth, imgHeight)</span><br><span class="line">          <span class="comment">//pdf.addImage(pageData, &#x27;JPEG&#x27;, 20, 40, imgWidth, imgHeight);</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 分页</span></span><br><span class="line">          <span class="keyword">while</span> (leftHeight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            pdf.addImage(pageData, <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, position, imgWidth, imgHeight)</span><br><span class="line">            leftHeight -= pageHeight</span><br><span class="line">            position -= <span class="number">841.89</span></span><br><span class="line">            <span class="comment">//避免添加空白页</span></span><br><span class="line">            <span class="keyword">if</span> (leftHeight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">              pdf.addPage()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//可动态生成</span></span><br><span class="line">        pdf.save(<span class="string">&#x27;goods.pdf&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>utils</category>
      </categories>
      <tags>
        <tag>utils</tag>
      </tags>
  </entry>
  <entry>
    <title>js-cookie中文文档</title>
    <url>/taiaiac.gitee.io/2021/01/27/utils/js-cookie%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h1 id="js-cookie中文文档"><a href="#js-cookie中文文档" class="headerlink" title="js-cookie中文文档"></a>js-cookie中文文档</h1><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>js-cookie是一个简单的，轻量级的<a href="https://www.npmjs.com/package/js-cookie">处理cookies的js API</a>。</p>
<h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建简单的cookie</span></span><br><span class="line">Cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">//创建有效期为7天的cookie</span></span><br><span class="line">Cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, &#123; <span class="attr">expires</span>: <span class="number">7</span> &#125;);</span><br><span class="line"><span class="comment">//为当前页创建有效期7天的cookie</span></span><br><span class="line">Cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, &#123; <span class="attr">expires</span>: <span class="number">7</span>, <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span> &#125;);<span class="number">123456</span></span><br></pre></td></tr></table></figure>

<h2 id="取值"><a href="#取值" class="headerlink" title="取值"></a>取值</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Cookies.get(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// =&gt; &#x27;value&#x27;</span></span><br><span class="line">Cookies.get(<span class="string">&#x27;nothing&#x27;</span>); <span class="comment">// =&gt; undefined</span></span><br><span class="line"><span class="comment">//获取所有cookie</span></span><br><span class="line">Cookies.get(); <span class="comment">// =&gt; &#123; name: &#x27;value&#x27; &#125;1234</span></span><br></pre></td></tr></table></figure>

<h2 id="删除值"><a href="#删除值" class="headerlink" title="删除值"></a>删除值</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Cookies.remove(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果值设置了路径，那么不能用简单的delete方法删除值，需要在delete时指定路径</span></span><br><span class="line">Cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br><span class="line">Cookies.remove(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// 删除失败</span></span><br><span class="line">Cookies.remove(<span class="string">&#x27;name&#x27;</span>, &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span> &#125;); <span class="comment">// 删除成功</span></span><br><span class="line"><span class="comment">//注意，删除不存在的cookie不会报错也不会有返回1234567</span></span><br></pre></td></tr></table></figure>

<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><p>如果担心不小心修改掉Cookies中的数据，可以用noConflict方法定义一个新的cookie。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> Cookies2 = Cookies.noConflict();</span><br><span class="line">Cookies2.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);<span class="number">12</span></span><br></pre></td></tr></table></figure>

<h2 id="json相关"><a href="#json相关" class="headerlink" title="json相关"></a>json相关</h2><p>js-cookie允许你向cookie中存储json信息。</p>
<p>如果你通过set方法，传入Array或类似对象，而不是简单的string，那么js-cookie会将你传入的数据用JSON.stringify转换为string保存。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Cookies.set(<span class="string">&#x27;name&#x27;</span>, &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span> &#125;);</span><br><span class="line">Cookies.get(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// =&gt; &#x27;&#123;&quot;foo&quot;:&quot;bar&quot;&#125;&#x27;</span></span><br><span class="line">Cookies.get(); <span class="comment">// =&gt; &#123; name: &#x27;&#123;&quot;foo&quot;:&quot;bar&quot;&#125;&#x27; &#125;123</span></span><br></pre></td></tr></table></figure>

<p>如果你用getJSON方法获取cookie，那么js-cookie会用JSON.parse解析string并返回。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Cookies.getJSON(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// =&gt; &#123; foo: &#x27;bar&#x27; &#125;</span></span><br><span class="line">Cookies.getJSON(); <span class="comment">// =&gt; &#123; name: &#123; foo: &#x27;bar&#x27; &#125; &#125;12</span></span><br></pre></td></tr></table></figure>

<h2 id="set方法支持的属性"><a href="#set方法支持的属性" class="headerlink" title="set方法支持的属性"></a>set方法支持的属性</h2><ol>
<li>expires<br>定义有效期。如果传入Number，那么单位为天，你也可以传入一个Date对象，表示有效期至Date指定时间。默认情况下cookie有效期截止至用户退出浏览器。</li>
<li>path<br>string，表示此cookie对哪个地址可见。默认为”/”。</li>
<li>domain<br>string，表示此cookie对哪个域名可见。设置后cookie会对所有子域名可见。默认为对创建此cookie的域名和子域名可见。</li>
<li>secure<br>true或false，表示cookie传输是否仅支持https。默认为不要求协议必须为https。</li>
</ol>
<h2 id="骚操作"><a href="#骚操作" class="headerlink" title="骚操作"></a>骚操作</h2><hr>
<p>1.read</p>
<blockquote>
<p>通过withConverter方法可以覆写默认的decode实现，并返回一个新的cookie实例。所有与decode有关的get操作，如Cookies.get()或Cookies.get(‘name’)都会先执行此方法中的代码。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;escaped=%u5317&#x27;</span>;</span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;default=%E5%8C%97&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cookies = Cookies.withConverter(<span class="function"><span class="keyword">function</span> (<span class="params">value, name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( name === <span class="string">&#x27;escaped&#x27;</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">unescape</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">cookies.get(<span class="string">&#x27;escaped&#x27;</span>); <span class="comment">// 北</span></span><br><span class="line">cookies.get(<span class="string">&#x27;default&#x27;</span>); <span class="comment">// 北</span></span><br><span class="line">cookies.get(); <span class="comment">// &#123; escaped: &#x27;北&#x27;, default: &#x27;北&#x27; &#125;12345678910</span></span><br></pre></td></tr></table></figure>

<hr>
<p>2.write</p>
<blockquote>
<p>通过withConverter方法也可以覆写默认的encode实现，并返回一个新的cookie实例。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Cookies.withConverter(&#123;</span><br><span class="line">    <span class="attr">read</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value, name</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// Read converter</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">write</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value, name</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// Write converter</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>utils</category>
      </categories>
      <tags>
        <tag>utils</tag>
      </tags>
  </entry>
  <entry>
    <title>对话框的统一封装</title>
    <url>/taiaiac.gitee.io/2021/04/26/%E7%BB%84%E4%BB%B6/%E5%AF%B9%E8%AF%9D%E6%A1%86%E7%9A%84%E7%BB%9F%E4%B8%80%E5%B0%81%E8%A3%85/</url>
    <content><![CDATA[<h2 id="话不多说都在代码里了"><a href="#话不多说都在代码里了" class="headerlink" title="话不多说都在代码里了"></a>话不多说都在代码里了</h2><blockquote>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3></blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ElMessageBox, ElMessage &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述</span></span><br><span class="line"><span class="comment"> * 一些操作拦截,强制用户行为等场景</span></span><br><span class="line"><span class="comment"> * 弹窗提示,只能点击确认键退出</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2021-04-26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>content &#x27;这是一段内容&#x27;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>btnText &#x27;按钮文字&#x27;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span>  </span>返回一个promise对象执行异步操作,需要处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isAlertBox = <span class="keyword">async</span> (content, btnText) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> ElMessageBox.alert(content, <span class="string">&#x27;提示&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: btnText,</span><br><span class="line">    <span class="attr">distinguishCancelAndClose</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">showClose</span>: <span class="literal">false</span></span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">e</span>) =&gt;</span> e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述</span></span><br><span class="line"><span class="comment"> * 删除对话框(确认删除,取消删除)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2021-04-26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span>  </span>返回一个promise对象执行异步操作,需要处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isDelConfirmBox = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="keyword">await</span> ElMessageBox.confirm(<span class="string">&#x27;此操作将永久删除, 是否继续?&#x27;</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">e</span>) =&gt;</span> e)</span><br><span class="line">  <span class="keyword">if</span> (flag === <span class="string">&#x27;confirm&#x27;</span>) &#123;</span><br><span class="line">    ElMessage.success(<span class="string">&#x27;删除成功!&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ElMessage.info(<span class="string">&#x27;已取消删除&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述</span></span><br><span class="line"><span class="comment"> * 带有输入框验证功能的弹框,返回输入状态和输入的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2021-04-26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>text  提示语</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>test  正则表达式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>msg   正则验证提示语</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span>  </span>返回一个promise对象执行异步操作,需要处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isPromptBox = <span class="keyword">async</span> (text, test, msg) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; action, value &#125; = <span class="keyword">await</span> ElMessageBox.prompt(<span class="string">`请输入<span class="subst">$&#123;text&#125;</span>`</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">    <span class="attr">inputPattern</span>: test,</span><br><span class="line">    <span class="attr">inputErrorMessage</span>: <span class="string">`<span class="subst">$&#123;msg&#125;</span>格式不正确`</span>,</span><br><span class="line">    <span class="attr">inputValue</span>: <span class="string">&#x27;初始文本&#x27;</span>,</span><br><span class="line">    <span class="attr">center</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">buttonSize</span>: <span class="string">&#x27;small&#x27;</span></span><br><span class="line">    <span class="comment">// inputPattern: /[\w!#$%&amp;&#x27;*+/=?^_`&#123;|&#125;~-]+(?:\.[\w!#$%&amp;&#x27;*+/=?^_`&#123;|&#125;~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,</span></span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">e</span>) =&gt;</span> e)</span><br><span class="line">  <span class="keyword">if</span> (action == <span class="string">&#x27;confirm&#x27;</span>) &#123;</span><br><span class="line">    ElMessage.success(<span class="string">&#x27;录入成功!&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ElMessage.info(<span class="string">&#x27;取消输入&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述</span></span><br><span class="line"><span class="comment"> * 区分取消与关闭</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date </span>2021-04-26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> <span class="variable">text</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>confirmText=&#x27;确认&#x27;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>cancelText=&#x27;取消&#x27;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span>  </span>返回一个promise对象执行异步操作,需要处理</span></span><br><span class="line"><span class="comment"> * confirm 确认操作</span></span><br><span class="line"><span class="comment"> * cancel  取消操作</span></span><br><span class="line"><span class="comment"> * close  不执行操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isConfirmBox = <span class="keyword">async</span> (</span><br><span class="line">  text,</span><br><span class="line">  confirmText = <span class="string">&#x27;确认&#x27;</span>,</span><br><span class="line">  cancelText = <span class="string">&#x27;取消&#x27;</span></span><br><span class="line">) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="keyword">await</span> ElMessageBox.confirm(text, <span class="string">&#x27;提示&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">distinguishCancelAndClose</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">confirmButtonText</span>: confirmText,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: cancelText,</span><br><span class="line">    <span class="attr">center</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">buttonSize</span>: <span class="string">&#x27;small&#x27;</span></span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">e</span>) =&gt;</span> e)</span><br><span class="line">  <span class="keyword">if</span> (flag == <span class="string">&#x27;confirm&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;右&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="string">&#x27;close&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> ElMessage.info(<span class="string">&#x27;取消操作&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;左&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3></blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-content bg-purple&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isAlert&quot;</span>&gt;</span>_isAlert<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>&lt;/el-col</span><br><span class="line">    &gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-content bg-purple&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isDelConfirm&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span>_isDelConfirm&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>&lt;/el-col</span><br><span class="line">    &gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-content bg-purple&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isPrompt&quot;</span>&gt;</span>_isPrompt<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>&lt;/el-col</span><br><span class="line">    &gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-content bg-purple&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isConfirm&quot;</span>&gt;</span>_isConfirm<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>&lt;/el-col</span><br><span class="line">    &gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="javascript">  isAlertBox,</span></span><br><span class="line"><span class="javascript">  isDelConfirmBox,</span></span><br><span class="line"><span class="javascript">  isPromptBox,</span></span><br><span class="line"><span class="javascript">  isConfirmBox</span></span><br><span class="line"><span class="javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/messageBox&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ElMessage &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> isAlert = <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">await</span> isAlertBox(<span class="string">&#x27;提示内容&#x27;</span>, <span class="string">&#x27;按钮文字&#x27;</span>)</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> isDelConfirm = <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">await</span> isDelConfirmBox()</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> isPrompt = <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> data = <span class="keyword">await</span> isPromptBox(<span class="string">&#x27;提示文字&#x27;</span>, <span class="regexp">/^[0-9]*$/</span>, <span class="string">&#x27;数字&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="javascript">    ElMessage.success(data)</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> isConfirm = <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> flag = <span class="keyword">await</span> isConfirmBox(<span class="string">&#x27;提示文字&#x27;</span>, <span class="string">&#x27;右边&#x27;</span>, <span class="string">&#x27;左边&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">if</span> (flag === <span class="string">&#x27;右&#x27;</span>) &#123;</span></span><br><span class="line"><span class="javascript">    ElMessage.success(<span class="string">&#x27;点击了右边&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag === <span class="string">&#x27;左&#x27;</span>) &#123;</span></span><br><span class="line"><span class="javascript">    ElMessage.warning(<span class="string">&#x27;点击了左边&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.el-row</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">  &amp;<span class="selector-pseudo">:last-child</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.el-col</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.bg-purple-dark</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">background</span>: <span class="number">#99a9bf</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.bg-purple</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">background</span>: <span class="number">#d3dce6</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.bg-purple-light</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">background</span>: <span class="number">#e5e9f2</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.grid-content</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">min-height</span>: <span class="number">36px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.row-bg</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">background-color</span>: <span class="number">#f9fafc</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>组件</category>
      </categories>
      <tags>
        <tag>组件</tag>
      </tags>
  </entry>
  <entry>
    <title>分页器</title>
    <url>/taiaiac.gitee.io/2021/04/10/%E7%BB%84%E4%BB%B6/%E5%88%86%E9%A1%B5%E5%99%A8/</url>
    <content><![CDATA[<h2 id="后端分页，前端请求"><a href="#后端分页，前端请求" class="headerlink" title="后端分页，前端请求"></a>后端分页，前端请求</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ul>
<li>封装element分页器到全局组件中,统一项目中分页器样式</li>
<li>像分页组件中传递分页数据,用对象包裹</li>
<li>声明子组件专用变量,修改子组件自带数据</li>
<li>通过.sync,this.$emit返回分页数据</li>
<li>父组件中监听当前页和页面条数,动态修改分页请求参数,更新页面</li>
</ul>
<blockquote>
<p> 全局全功能分页器封装</p>
</blockquote>
<ul>
<li>:current-page=”current”<ul>
<li>当前页</li>
</ul>
</li>
<li>:page-size=”size”<ul>
<li>当前页面数据条数</li>
</ul>
</li>
<li>:total=”total”<ul>
<li>数据总数</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:current-page</span>=<span class="string">&quot;current_page&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:page-size</span>=<span class="string">&quot;page_size&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:page-sizes</span>=<span class="string">&quot;[10, 50, 100, 200]&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:layout</span>=<span class="string">&quot;layout&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">prev-text</span>=<span class="string">&quot;上一页&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">next-text</span>=<span class="string">&quot;下一页&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:small</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:hide-on-single-page</span>=<span class="string">&quot;hide_page&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">layout</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="built_in">this</span>.sizes</span></span><br><span class="line"><span class="javascript">        ? <span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span></span></span><br><span class="line"><span class="javascript">        : <span class="string">&quot;total,  prev, pager, next, jumper&quot;</span>;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">current_page</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">1</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">page_size</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">10</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">total</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">0</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">sizes</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">small</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">hide_page</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleSizeChange</span>(<span class="params">val</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// console.log(`每页 $&#123;val&#125; 条`);</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$emit(<span class="string">&quot;update:page_size&quot;</span>, val);</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleCurrentChange</span>(<span class="params">val</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// console.log(`当前页: $&#123;val&#125;`);</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$emit(<span class="string">&quot;update:current_page&quot;</span>, val);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.pagination</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用mixins混入通用代码"><a href="#使用mixins混入通用代码" class="headerlink" title="使用mixins混入通用代码"></a>使用mixins混入通用代码</h3><blockquote>
<p>@/mixins/pagination.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> AllPagination <span class="keyword">from</span> <span class="string">&quot;@/components/All-pagination.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123; AllPagination &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//分页的请求参数</span></span><br><span class="line">      <span class="attr">MixinPagingQuery</span>: &#123;</span><br><span class="line">        <span class="attr">page</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">page_size</span>: <span class="number">10</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//分页设置</span></span><br><span class="line">      <span class="attr">MixinPaginationOption</span>: &#123;</span><br><span class="line">        <span class="attr">page_size</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">total</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">current_page</span>: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="string">&quot;MixinPaginationOption.current_page&quot;</span>(v) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(v)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.MixinPagingQuery.page = v;</span><br><span class="line">        <span class="built_in">this</span>.fetchData();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;MixinPaginationOption.page_size&quot;</span>(v) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(v)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.MixinPagingQuery.page_size = v;</span><br><span class="line">        <span class="built_in">this</span>.fetchData();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AllPagination</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:current_page.sync</span>=<span class="string">&quot;MixinPaginationOption.current_page&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:page_size.sync</span>=<span class="string">&quot;MixinPaginationOption.page_size&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:total</span>=<span class="string">&quot;MixinPaginationOption.total&quot;</span></span></span><br><span class="line"><span class="tag">                   /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AllPagination</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:current_page.sync</span>=<span class="string">&quot;MixinPaginationOption.current_page&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:page_size.sync</span>=<span class="string">&quot;MixinPaginationOption.page_size&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:total</span>=<span class="string">&quot;MixinPaginationOption.total&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:sizes</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:small</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">:hide_page</span>=<span class="string">&quot;true&quot;</span>   </span></span><br><span class="line"><span class="tag">                   /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> pagination <span class="keyword">from</span> <span class="string">&quot;@/mixins/pagination.js&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">mixins</span>: [pagination],</span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">async</span> <span class="function"><span class="title">fetchData</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 合并对象,携带分页参数</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 请求参数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> opt = &#123;...this.MixinPagingQuery,...this.form&#125;;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 发起请求</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> res = <span class="keyword">await</span> getExamList(opt);</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 分页数据变动</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.MixinPaginationOption.page_size = <span class="built_in">parseInt</span>(res.data.page_size);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.MixinPaginationOption.total = <span class="built_in">parseInt</span>(res.data.total);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.MixinPaginationOption.current_page = <span class="built_in">parseInt</span>(res.data.current_page);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>组件</category>
      </categories>
      <tags>
        <tag>组件</tag>
      </tags>
  </entry>
  <entry>
    <title>弹窗的组件封装</title>
    <url>/taiaiac.gitee.io/2021/04/10/%E7%BB%84%E4%BB%B6/%E5%BC%B9%E7%AA%97%E7%9A%84%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/</url>
    <content><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><blockquote>
<p>不可以直接修改父组件传过来的值</p>
<p>控制弹窗显示使用子组件内部变量</p>
</blockquote>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AuditSee</span> <span class="attr">:isSee.sync</span>=<span class="string">&quot;isSee&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isSee&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">components</span>: &#123;  AuditSee &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><blockquote>
<p>弹窗嵌套会发生有一层蒙层</p>
<p>添加:modal-append-to-body=”true”和append-to-body属性解决</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">&quot;查看&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:visible.sync</span>=<span class="string">&quot;isShow&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">close</span>=<span class="string">&quot;$emit(&#x27;update:isSee&#x27;, false)&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">before-close</span>=<span class="string">&quot;$emit(&#x27;update:isSee&#x27;, false)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:modal-append-to-body</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">append-to-body</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">isShow</span>: <span class="built_in">this</span>.isSee,</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">isSee</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Boolean</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>组件</category>
      </categories>
      <tags>
        <tag>组件</tag>
      </tags>
  </entry>
  <entry>
    <title>在vue导出文件工具集</title>
    <url>/taiaiac.gitee.io/2021/05/12/utils/%E5%9C%A8vue%E5%AF%BC%E5%87%BA%E6%96%87%E4%BB%B6%E5%B7%A5%E5%85%B7%E9%9B%86/</url>
    <content><![CDATA[<h3 id="各类导出方法的封装"><a href="#各类导出方法的封装" class="headerlink" title="各类导出方法的封装"></a>各类导出方法的封装</h3><h4 id="导出Excel文档"><a href="#导出Excel文档" class="headerlink" title="导出Excel文档"></a>导出Excel文档</h4><p>需要安装两个插件配置</p>
<blockquote>
<p>yarn add file-saver xlsx </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> FileSaver <span class="keyword">from</span> <span class="string">&#x27;file-saver&#x27;</span></span><br><span class="line"><span class="keyword">import</span> XLSX <span class="keyword">from</span> <span class="string">&#x27;xlsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// id  el元素id</span></span><br><span class="line"><span class="comment">// fileName  输出文档名</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (id = <span class="string">&#x27;&#x27;</span>, fileName = <span class="string">&#x27;&#x27;</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 从表生成工作簿对象</span></span><br><span class="line">  <span class="keyword">const</span> el = XLSX.utils.table_to_book(<span class="built_in">document</span>.querySelector(<span class="string">`#<span class="subst">$&#123;id&#125;</span>`</span>))</span><br><span class="line">  <span class="comment">// 得到二进制字符串作为输出</span></span><br><span class="line">  <span class="keyword">const</span> out = XLSX.write(el, &#123;</span><br><span class="line">    <span class="attr">bookType</span>: <span class="string">&#x27;xlsx&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;binary&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  FileSaver.saveAs(</span><br><span class="line">    <span class="keyword">new</span> Blob([s2ab(out)], &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;application/octet-stream&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;fileName&#125;</span>.xlsx`</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s2ab = <span class="function"><span class="params">s</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> cuf, i</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">ArrayBuffer</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    cuf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(s.length)</span><br><span class="line">    <span class="keyword">const</span> view = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(cuf)</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i !== s.length; i++) &#123;</span><br><span class="line">      view[i] = s.charCodeAt(i) &amp; <span class="number">0xff</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cuf</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    cuf = <span class="keyword">new</span> <span class="built_in">Array</span>(s.length)</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i !== s.length; ++i) &#123;</span><br><span class="line">      cuf[i] = s.charCodeAt(i) &amp; oxFF</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cuf</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> exportExcel <span class="keyword">from</span> <span class="string">&quot;@/utils/export-file&quot;</span>;</span><br><span class="line"></span><br><span class="line">exportExcel(<span class="string">&quot;printID&quot;</span>, <span class="string">`历年学习成绩单`</span>);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>utils</category>
      </categories>
      <tags>
        <tag>utils</tag>
      </tags>
  </entry>
  <entry>
    <title>文件上传</title>
    <url>/taiaiac.gitee.io/2020/12/30/%E7%BB%84%E4%BB%B6/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
    <content><![CDATA[<h4 id="传值"><a href="#传值" class="headerlink" title="传值"></a>传值</h4><ul>
<li>action:文件接口</li>
<li>text:按钮显示文字</li>
<li>size:按钮大小</li>
<li>backRes : 返回上传状态</li>
</ul>
<h4 id="传参"><a href="#传参" class="headerlink" title="传参"></a>传参</h4><p>name属性字段为传参字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 模板 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;upload&quot;&gt;</span><br><span class="line">    &lt;el-upload</span><br><span class="line">      :on-success=&quot;handleChange&quot;</span><br><span class="line">      :on-error=&quot;handleChange&quot;</span><br><span class="line">      :file-list=&quot;fileList&quot;</span><br><span class="line">      :headers=&quot;headersToken&quot;</span><br><span class="line">      name=&quot;file&quot;</span><br><span class="line">      :limit=&quot;1&quot;</span><br><span class="line">      :action=&quot;action&quot;</span><br><span class="line">      :show-file-list=&quot;false&quot;</span><br><span class="line">      style=&quot;margin-right: 10px&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-button :size=&quot;size&quot; type=&quot;primary&quot;&gt;&#123;&#123; text &#125;&#125;&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-upload&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getToken &#125; from &quot;@/utils/auth&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      headersToken: &#123;</span><br><span class="line">        accessToken: getToken()</span><br><span class="line">      &#125;,</span><br><span class="line">      fileList: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    action: &#123;</span><br><span class="line">      type: String</span><br><span class="line">    &#125;,</span><br><span class="line">    backRes: &#123;</span><br><span class="line">      type: Object</span><br><span class="line">    &#125;,</span><br><span class="line">    text: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;上传文件&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    size: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;mini&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange(res, file, fileList) &#123;</span><br><span class="line">      let opt = &#123; ...res, ...file, ...fileList &#125;;</span><br><span class="line">      this.$emit(&quot;update:backRes&quot;, opt);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.el-button &#123;</span><br><span class="line">  margin: 0 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><blockquote>
<p>子组件中会返回文件上传的状态,通过watch监听 backRes中的数据变化做下步页面处理,消息提示等</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AllUpload</span></span></span><br><span class="line"><span class="tag">               <span class="attr">action</span>=<span class="string">&quot;http://39.165.231.141:10005/examination/importRepairScore&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:backRes.sync</span>=<span class="string">&quot;backRes&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">text</span>=<span class="string">&quot;点击上传&quot;</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">AllUpload</span></span></span><br><span class="line"><span class="tag">               <span class="attr">action</span>=<span class="string">&quot;http://39.165.231.141:10005/examination/importRepairScore&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:backRes.sync</span>=<span class="string">&quot;backRes&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">text</span>=<span class="string">&quot;点击上传&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> AllUpload <span class="keyword">from</span> <span class="string">&quot;@/components/All-Upload.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">backRes</span>: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">backRes</span>(<span class="params">v</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (v.code == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.$notify.success(v.message);</span><br><span class="line">                <span class="built_in">this</span>.fetchData();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.$notify.info(v.message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>组件</category>
      </categories>
      <tags>
        <tag>组件</tag>
      </tags>
  </entry>
  <entry>
    <title>复杂判断的map方法</title>
    <url>/taiaiac.gitee.io/2021/04/13/ES6/JavaScript%E5%A4%8D%E6%9D%82%E5%88%A4%E6%96%AD%E7%9A%84map%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="JavaScript复杂判断的map方法"><a href="#JavaScript复杂判断的map方法" class="headerlink" title="JavaScript复杂判断的map方法"></a>JavaScript复杂判断的map方法</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, [<span class="string">&#x27;processing&#x27;</span>,<span class="string">&#x27;IndexPage&#x27;</span>]],</span><br><span class="line">  [<span class="number">2</span>, [<span class="string">&#x27;fail&#x27;</span>,<span class="string">&#x27;FailPage&#x27;</span>]],</span><br><span class="line">  [<span class="number">3</span>, [<span class="string">&#x27;fail&#x27;</span>,<span class="string">&#x27;FailPage&#x27;</span>]],</span><br><span class="line">  [<span class="number">4</span>, [<span class="string">&#x27;success&#x27;</span>,<span class="string">&#x27;SuccessPage&#x27;</span>]],</span><br><span class="line">  [<span class="number">5</span>, [<span class="string">&#x27;cancel&#x27;</span>,<span class="string">&#x27;CancelPage&#x27;</span>]],</span><br><span class="line">  [<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;other&#x27;</span>,<span class="string">&#x27;Index&#x27;</span>]]</span><br><span class="line">])</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 按钮点击事件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>status 活动状态：1 开团进行中 2 开团失败 3 商品售罄 4 开团成功 5 系统取消</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = actions.get(status) || actions.get(<span class="string">&#x27;default&#x27;</span>)</span><br><span class="line">  sendLog(action[<span class="number">0</span>])</span><br><span class="line">  jumpTo(action[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>一个对象通常都有自己的原型，所以一个对象总有一个”prototype”键。</li>
<li>一个对象的键只能是字符串或者Symbols，但一个Map的键可以是任意值。</li>
<li>你可以通过size属性很容易地得到一个Map的键值对个数，而对象的键值对个数只能手动确认。</li>
</ul>
<p>按钮点击时候只需要判断status，现在还需要判断用户的身份：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;guest_1&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;guest_2&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;guest_3&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;guest_4&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;guest_5&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;master_1&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;master_2&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;master_3&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;master_4&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;master_5&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [<span class="string">&#x27;default&#x27;</span>, <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 按钮点击事件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>identity 身份标识：guest客态 master主态</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>status 活动状态：1 开团进行中 2 开团失败 3 开团成功 4 商品售罄 5 有库存未开团</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">identity,status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = actions.get(<span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;status&#125;</span>`</span>) || actions.get(<span class="string">&#x27;default&#x27;</span>)</span><br><span class="line">  action.call(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码核心逻辑是：把两个条件拼接成字符串，并通过以条件拼接字符串作为键，以处理函数作为值的Map对象进行查找并执行，这种写法在多元条件判断时候尤其好用。</p>
<p>当然上述代码如果用Object对象来实现也是类似的：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="string">&#x27;guest_1&#x27;</span>:<span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;,</span><br><span class="line">  <span class="string">&#x27;guest_2&#x27;</span>:<span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;,</span><br><span class="line">  <span class="comment">//....</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">identity,status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = actions[<span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;status&#125;</span>`</span>] || actions[<span class="string">&#x27;default&#x27;</span>]</span><br><span class="line">  action.call(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果有些同学觉得把查询条件拼成字符串有点别扭，那还有一种方案，就是用Map对象，以Object对象作为key：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">1</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">2</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;],</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">identity,status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = [...actions].filter(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>(key.identity == identity &amp;&amp; key.status == status))</span><br><span class="line">  action.forEach(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>value.call(<span class="built_in">this</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里也看出来Map与Object的区别，Map可以用任何类型的数据作为key。</p>
<p>我们现在再将难度升级一点点，假如guest情况下，status1-4的处理逻辑都一样怎么办，最差的情况是这样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">1</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/* functionA */</span>&#125;],</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">2</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/* functionA */</span>&#125;],</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">3</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/* functionA */</span>&#125;],</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">4</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/* functionA */</span>&#125;],</span><br><span class="line">  [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">5</span>&#125;,<span class="function">()=&gt;</span>&#123;<span class="comment">/* functionB */</span>&#125;],</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<p>好一点的写法是将处理逻辑函数进行缓存：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> functionA = <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;</span><br><span class="line">  <span class="keyword">const</span> functionB = <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">1</span>&#125;,functionA],</span><br><span class="line">    [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">2</span>&#125;,functionA],</span><br><span class="line">    [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">3</span>&#125;,functionA],</span><br><span class="line">    [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">4</span>&#125;,functionA],</span><br><span class="line">    [&#123;<span class="attr">identity</span>:<span class="string">&#x27;guest&#x27;</span>,<span class="attr">status</span>:<span class="number">5</span>&#125;,functionB],</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">identity,status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = [...actions()].filter(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>(key.identity == identity &amp;&amp; key.status == status))</span><br><span class="line">  action.forEach(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>value.call(<span class="built_in">this</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样写已经能满足日常需求了，但认真一点讲，上面重写了4次functionA还是有点不爽，假如判断条件变得特别复杂，比如identity有3种状态，status有10种状态，那你需要定义30条处理逻辑，而往往这些逻辑里面很多都是相同的，这似乎也是笔者不想接受的，那可以这样实现:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> functionA = <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;</span><br><span class="line">  <span class="keyword">const</span> functionB = <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="regexp">/^guest_[1-4]$/</span>,functionA],</span><br><span class="line">    [<span class="regexp">/^guest_5$/</span>,functionB],</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">identity,status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = [...actions()].filter(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>(key.test(<span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;status&#125;</span>`</span>)))</span><br><span class="line">  action.forEach(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>value.call(<span class="built_in">this</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里Map的优势更加凸显，可以用正则类型作为key了，这样就有了无限可能，假如需求变成，凡是guest情况都要发送一个日志埋点，不同status情况也需要单独的逻辑处理，那我们可以这样写:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> functionA = <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;</span><br><span class="line">  <span class="keyword">const</span> functionB = <span class="function">()=&gt;</span>&#123;<span class="comment">/*do sth*/</span>&#125;</span><br><span class="line">  <span class="keyword">const</span> functionC = <span class="function">()=&gt;</span>&#123;<span class="comment">/*send log*/</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="regexp">/^guest_[1-4]$/</span>,functionA],</span><br><span class="line">    [<span class="regexp">/^guest_5$/</span>,functionB],</span><br><span class="line">    [<span class="regexp">/^guest_.*$/</span>,functionC],</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> onButtonClick = <span class="function">(<span class="params">identity,status</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> action = [...actions()].filter(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>(key.test(<span class="string">`<span class="subst">$&#123;identity&#125;</span>_<span class="subst">$&#123;status&#125;</span>`</span>)))</span><br><span class="line">  action.forEach(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>value.call(<span class="built_in">this</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也就是说利用数组循环的特性，符合正则条件的逻辑都会被执行，那就可以同时执行公共逻辑和单独逻辑，因为正则的存在，你可以打开想象力解锁更多的玩法，本文就不赘述了。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>本文已经教你了8种逻辑判断写法，包括：</p>
<ol>
<li>if/else</li>
<li>switch</li>
<li>一元判断时：存到Object里</li>
<li>一元判断时：存到Map里</li>
<li>多元判断时：将condition拼接成字符串存到Object里</li>
<li>多元判断时：将condition拼接成字符串存到Map里</li>
<li>多元判断时：将condition存为Object存到Map里</li>
<li>多元判断时：将condition写作正则存到Map里</li>
</ol>
]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>使用vue3语法开发微信小程序</title>
    <url>/taiaiac.gitee.io/2021/05/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E4%BD%BF%E7%94%A8vue3%E8%AF%AD%E6%B3%95%E5%BC%80%E5%8F%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
    <content><![CDATA[<h2 id="使用vue3-compositon-API开发微信小程序"><a href="#使用vue3-compositon-API开发微信小程序" class="headerlink" title="使用vue3 compositon API开发微信小程序"></a>使用vue3 compositon API开发微信小程序</h2><blockquote>
<p>框架 vue-mini</p>
<p>官方文档: <a href="https://vue-mini.gitee.io/guide/">https://vue-mini.gitee.io/guide/</a></p>
</blockquote>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>搭建本地脚手架环境</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn global add sao@beta</span><br></pre></td></tr></table></figure>

<p>命令行创建项目</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sao vue-mini/template pro-name</span><br></pre></td></tr></table></figure>

<h3 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装项目依赖</span></span><br><span class="line">yarn install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地开发</span></span><br><span class="line">yarn start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码检查</span></span><br><span class="line">yarn lint:script</span><br><span class="line">yarn lint:style</span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码检查及修复</span></span><br><span class="line">yarn lint:script --fix</span><br><span class="line">yarn lint:style --fix</span><br><span class="line"></span><br><span class="line"><span class="comment"># 类型检查</span></span><br><span class="line">yarn <span class="built_in">type</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">yarn <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生产构建</span></span><br><span class="line">yarn build</span><br></pre></td></tr></table></figure>

<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>目录结构相当于vue-cli + 小程序 </p>
<h3 id="ui组件"><a href="#ui组件" class="headerlink" title="ui组件"></a>ui组件</h3><blockquote>
<p>vant Weapp 小程序版本</p>
<p>官网 : <a href="https://vant-contrib.gitee.io/vant-weapp/#/home">https://vant-contrib.gitee.io/vant-weapp/#/home</a></p>
<p>iView Weapp 小程序组件</p>
<p><a href="https://weapp.iviewui.com/docs/guide/start">https://weapp.iviewui.com/docs/guide/start</a></p>
</blockquote>
<p>将ui项目中dist文件拷贝到src目录下即可使用</p>
<h4 id="vant组件使用"><a href="#vant组件使用" class="headerlink" title="vant组件使用"></a>vant组件使用</h4><blockquote>
<p>index.json</p>
<p>引入全部组件</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;van-button&quot;</span>: <span class="string">&quot;../../vant/button/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-cell&quot;</span>: <span class="string">&quot;../../vant/cell/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-cell-group&quot;</span>: <span class="string">&quot;../../vant/cell-group/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-icon&quot;</span>: <span class="string">&quot;../../vant/icon/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-image&quot;</span>: <span class="string">&quot;../../vant/image/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-row&quot;</span>: <span class="string">&quot;../../vant/row/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-col&quot;</span>: <span class="string">&quot;../../vant/col/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-popup&quot;</span>: <span class="string">&quot;../../vant/popup/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-toast&quot;</span>: <span class="string">&quot;../../vant/toast/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-transition&quot;</span>: <span class="string">&quot;../../vant/transition/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-calendar&quot;</span>: <span class="string">&quot;../../vant/calendar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-checkbox&quot;</span>: <span class="string">&quot;../../vant/checkbox/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-checkbox-group&quot;</span>: <span class="string">&quot;../../vant/checkbox-group/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-datetime-picker&quot;</span>: <span class="string">&quot;../../vant/datetime-picker/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-field&quot;</span>: <span class="string">&quot;../../vant/field/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-picker&quot;</span>: <span class="string">&quot;../../vant/picker/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-radio&quot;</span>: <span class="string">&quot;../../vant/radio/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-search&quot;</span>: <span class="string">&quot;../../vant/search/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-slider&quot;</span>: <span class="string">&quot;../../vant/slider/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-stepper&quot;</span>: <span class="string">&quot;../../vant/stepper/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-switch&quot;</span>: <span class="string">&quot;../../vant/switch/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-uploader&quot;</span>: <span class="string">&quot;../../vant/uploader/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-action-sheet&quot;</span>: <span class="string">&quot;../../vant/action-sheet/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-dialog&quot;</span>: <span class="string">&quot;../../vant/dialog/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-dropdown-menu&quot;</span>: <span class="string">&quot;../../vant/dropdown-menu/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-dropdown-item&quot;</span>: <span class="string">&quot;../../vant/dropdown-item/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-loading&quot;</span>: <span class="string">&quot;../../vant/loading/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-notify&quot;</span>: <span class="string">&quot;../../vant/notify/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-overlay&quot;</span>: <span class="string">&quot;../../vant/overlay/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-share-sheet&quot;</span>: <span class="string">&quot;../../vant/share-sheet/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-swipe-cell&quot;</span>: <span class="string">&quot;../../vant/swipe-cell/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-circle&quot;</span>: <span class="string">&quot;../../vant/circle/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-collapse&quot;</span>: <span class="string">&quot;../../vant/collapse/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-collapse-item&quot;</span>: <span class="string">&quot;../../vant/collapse-item/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-count-down&quot;</span>: <span class="string">&quot;../../vant/count-down/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-divider&quot;</span>: <span class="string">&quot;../../vant/divider/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-empty&quot;</span>: <span class="string">&quot;../../vant/empty/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-notice-bar&quot;</span>: <span class="string">&quot;../../vant/notice-bar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-progress&quot;</span>: <span class="string">&quot;../../vant/progress/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-skeleton&quot;</span>: <span class="string">&quot;../../vant/skeleton/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-steps&quot;</span>: <span class="string">&quot;../../vant/steps/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-sticky&quot;</span>: <span class="string">&quot;../../vant/sticky/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-tag&quot;</span>: <span class="string">&quot;../../vant/tag/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-grid&quot;</span>: <span class="string">&quot;../../vant/grid/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-grid-item&quot;</span>: <span class="string">&quot;../../vant/grid-item/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-index-bar&quot;</span>: <span class="string">&quot;../../vant/index-bar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-index-anchor&quot;</span>: <span class="string">&quot;../../vant/index-anchor/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-nav-bar&quot;</span>: <span class="string">&quot;../../vant/nav-bar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-sidebar&quot;</span>: <span class="string">&quot;../../vant/sidebar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-sidebar-item&quot;</span>: <span class="string">&quot;../../vant/sidebar-item/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-tab&quot;</span>: <span class="string">&quot;../../vant/tab/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-tabs&quot;</span>: <span class="string">&quot;../../vant/tabs/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-tabbar&quot;</span>: <span class="string">&quot;../../vant/tabbar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-tabbar-item&quot;</span>: <span class="string">&quot;../../vant/tabbar-item/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-tree-select&quot;</span>: <span class="string">&quot;../../vant/tree-select/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-area&quot;</span>: <span class="string">&quot;../../vant/area/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-card&quot;</span>: <span class="string">&quot;../../vant/card/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-submit-bar&quot;</span>: <span class="string">&quot;../../vant/submit-bar/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-goods-action&quot;</span>: <span class="string">&quot;../../vant/goods-action/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-goods-action-icon&quot;</span>: <span class="string">&quot;../../vant/goods-action-icon/index&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;van-goods-action-button&quot;</span>: <span class="string">&quot;../../vant/goods-action-button/index&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>依赖引入完毕按照官方文档使用即可</p>
<p>有个小坑,设置某属性为true和false的时候,直接写属性会无效化,如:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// 无效</span><br><span class="line"><span class="tag">&lt;<span class="name">van-search</span>  <span class="attr">use-action-slot</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// 有效</span><br><span class="line"><span class="tag">&lt;<span class="name">van-search</span>  <span class="attr">use-action-slot</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>弹窗提示功能的组件还需要在js中导入</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-notify</span> <span class="attr">id</span>=<span class="string">&quot;van-notify&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-toast</span> <span class="attr">id</span>=<span class="string">&quot;van-toast&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> notify <span class="keyword">from</span> <span class="string">&#x27;../../vant/notify/notify.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> toast <span class="keyword">from</span> <span class="string">&#x27;../../vant/toast/toast.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="public资源问题"><a href="#public资源问题" class="headerlink" title="public资源问题"></a>public资源问题</h3><p><em>本地资源图片无法通过 WXSS 获取，可以使用网络图片，或者 base64，或者使用<image/>标签打包后资源存放地址</em></p>
<blockquote>
<p>index.less</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/vue-mini.png&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在.wxss文件中使用background背景图时,引用的本地图片资源在打包后会自动生成网站加路径的外部链接形式,实现背景图功能.</p>
<blockquote>
<p>build.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 本地开发资源访问路径</span></span><br><span class="line"><span class="keyword">const</span> localPath = <span class="string">`http://<span class="subst">$&#123;getLocalIP()&#125;</span>:5000/`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 本地资源图片无法通过 WXSS 获取，可以使用网络图片，或者 base64，或者使用&lt;image/&gt;标签打包后资源存放地址</span></span><br><span class="line"><span class="keyword">const</span> publicPath = <span class="string">&#x27;https://your.static.server/&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>打包后生成的背景图片地址为</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">	<span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://your.static.server/images/vue-mini.png&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据实际生产环境设置背景图片地址</p>
<p>src/images目录不会被打包到生产文件中</p>
<p>assets文件中的会打包到生产文件中</p>
]]></content>
      <categories>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>uniapp中封装request</title>
    <url>/taiaiac.gitee.io/2021/03/13/ajax/uniapp%E4%B8%AD%E5%B0%81%E8%A3%85request/</url>
    <content><![CDATA[<blockquote>
<h2 id="全局request文件"><a href="#全局request文件" class="headerlink" title="全局request文件"></a>全局request文件</h2></blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">	getToken</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./cookies.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BASE_URL = <span class="string">&#x27;http://127.0.0.1:4000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">myRequest</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		uni.request(&#123;</span><br><span class="line">			<span class="attr">url</span>: BASE_URL + options.url,</span><br><span class="line">			<span class="attr">method</span>: options.method || <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">			<span class="attr">data</span>: options.data || &#123;&#125;,</span><br><span class="line">			<span class="attr">timeout</span>: <span class="number">30000</span>,</span><br><span class="line">			<span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(res)</span><br><span class="line">				<span class="keyword">let</span> &#123;</span><br><span class="line">					data</span><br><span class="line">				&#125; = res</span><br><span class="line">				<span class="comment">// 状态码判断处理操作在这里写</span></span><br><span class="line">				<span class="keyword">if</span> (data.code != <span class="number">200</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> uni.showToast(&#123;</span><br><span class="line">						<span class="attr">title</span>: data.msg</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					uni.showToast(&#123;</span><br><span class="line">						<span class="attr">title</span>: data.msg</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;</span><br><span class="line">				resolve(res)</span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">				uni.showToast(&#123;</span><br><span class="line">					<span class="attr">title</span>: <span class="string">&quot;请求接口失败&quot;</span></span><br><span class="line">				&#125;)</span><br><span class="line">				reject(err)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">onLogin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">await</span> login(<span class="built_in">this</span>.options);</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    uni.setStorage(&#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&#x27;token&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: data.token,</span><br><span class="line">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;token保存成功&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    uni.switchTab(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span></span><br><span class="line">        <span class="comment">// success(res) &#123;</span></span><br><span class="line">        <span class="comment">// 	console.log(&#x27;res&#x27;);</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// fail() &#123;</span></span><br><span class="line">        <span class="comment">// 	console.log(&#x27;跳转失败了&#x27;);</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序中封装request</title>
    <url>/taiaiac.gitee.io/2021/03/13/ajax/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%B0%81%E8%A3%85request/</url>
    <content><![CDATA[<blockquote>
<h2 id="全局request文件"><a href="#全局request文件" class="headerlink" title="全局request文件"></a>全局request文件</h2></blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> URL = <span class="string">&#x27;https://v1.hitokoto.cn&#x27;</span></span><br><span class="line"><span class="keyword">const</span> header = header || &#123;</span><br><span class="line">  <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;accessToken&#x27;</span>: getApp().globalData.token</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">data, path, method</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      <span class="attr">url</span>: URL + path,</span><br><span class="line">      header,</span><br><span class="line">      data,</span><br><span class="line">      method,</span><br><span class="line">      <span class="comment">// 状态码处理</span></span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">          resolve(res)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (res) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&#x27;状态码&#x27;</span>:</span><br><span class="line">            resolve(res)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">          <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> reject(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="function">(<span class="params">data, path = <span class="string">&#x27;&#x27;</span></span>) =&gt;</span> request(data, path, <span class="string">&#x27;GET&#x27;</span>),</span><br><span class="line">  <span class="attr">post</span>: <span class="function">(<span class="params">data, path = <span class="string">&#x27;&#x27;</span></span>) =&gt;</span> request(data, path, <span class="string">&#x27;POST&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="存放token"><a href="#存放token" class="headerlink" title="存放token"></a>存放token</h4><p>app.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">App(&#123;</span><br><span class="line">  <span class="attr">globalData</span>:&#123;</span><br><span class="line">    <span class="attr">token</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="获取token"><a href="#获取token" class="headerlink" title="获取token"></a>获取token</h4><p>其他文件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> token = getApp().globalData.token</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用request请求</p>
<p>其他文件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request.js&#x27;</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">from</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">onClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> options = &#123;</span><br><span class="line">      <span class="attr">c</span>:<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">      <span class="attr">encode</span>:<span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">      <span class="attr">charset</span>:<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">      data</span><br><span class="line">    &#125; = <span class="keyword">await</span> request.get(options)</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      <span class="attr">text</span>: data.hitokoto,</span><br><span class="line">      <span class="attr">from</span>: data.from</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>vue中封装request</title>
    <url>/taiaiac.gitee.io/2021/03/13/ajax/vue%E4%B8%AD%E5%B0%81%E8%A3%85request/</url>
    <content><![CDATA[<blockquote>
<h2 id="全局request文件"><a href="#全局request文件" class="headerlink" title="全局request文件"></a>全局request文件</h2></blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @/utils/request.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Toast, Dialog &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://192.168.0.123:8098&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器，在请求头中添加token</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">    <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        config.headers[<span class="string">&#x27;accessToken&#x27;</span>] = getToken()</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios响应拦截器</span></span><br><span class="line">request.interceptors.response.use(</span><br><span class="line">    <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.data</span><br><span class="line">        <span class="keyword">switch</span> (res.code + <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> res</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">                Dialog.confirm(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;确认登出？&#x27;</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;你已经登出, 你可以取消登录页面, 或者重新登录&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                    .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(err)</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                Toast(&#123;</span><br><span class="line">                    <span class="attr">message</span>: res.msg || <span class="string">&#x27;错误&#x27;</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(res.msg || <span class="string">&#x27;错误&#x27;</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;err&#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">        Toast(&#123;</span><br><span class="line">            <span class="attr">message</span>: error || <span class="string">&#x27;请求超时&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure>



<blockquote>
<p>使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @/api/login.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">loginPost</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/api/recruit/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">loginPost</span>(<span class="params">paras</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/api/recruit/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    paras</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>axios学习</title>
    <url>/taiaiac.gitee.io/2021/03/02/ajax/axios%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="axios简介"><a href="#axios简介" class="headerlink" title="axios简介"></a>axios简介</h1><p>Axios是一个基于promise的HTTP库，可以在浏览器和nodejs（服务端）运行。</p>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li>从浏览器中创建 <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequesAts</a></li>
<li>从 node.js 创建 <a href="http://nodejs.org/api/http.html">http</a> 请求</li>
<li>支持 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> API</li>
<li>拦截请求和响应</li>
<li>转换请求数据和响应数据</li>
<li>取消请求</li>
<li>自动转换 JSON 数据</li>
<li>客户端支持防御 <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">XSRF</a></li>
</ul>
<h2 id="执行-GET-请求"><a href="#执行-GET-请求" class="headerlink" title="执行 GET 请求"></a>执行 GET 请求</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 为给定 ID 的 user 创建请求</span></span><br><span class="line">axios</span><br><span class="line">  .get(<span class="string">&#x27;/user?ID=12345&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面的请求也可以这样做</span></span><br><span class="line">axios</span><br><span class="line">  .get(<span class="string">&#x27;/user&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">ID</span>: <span class="number">12345</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="执行-POST-请求"><a href="#执行-POST-请求" class="headerlink" title="执行 POST 请求"></a>执行 POST 请求</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios</span><br><span class="line">  .post(<span class="string">&#x27;/user&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Flintstone&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="执行多个并发请求"><a href="#执行多个并发请求" class="headerlink" title="执行多个并发请求"></a>执行多个并发请求</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserAccount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">&#x27;/user/12345&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserPermissions</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">&#x27;/user/12345/permissions&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()]).then(</span><br><span class="line">  axios.spread(<span class="function"><span class="keyword">function</span> (<span class="params">acct, perms</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 两个请求现在都执行完成</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="axios-API"><a href="#axios-API" class="headerlink" title="axios API"></a>axios API</h2><ul>
<li><p>可以通过向 <code>axios</code> 传递相关配置来创建请求</p>
</li>
<li><h5 id="axios-config"><a href="#axios-config" class="headerlink" title="axios(config)"></a><code>axios(config)</code></h5></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 发送 POST 请求</span></span><br><span class="line">axios(&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/user/12345&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Flintstone&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 获取远端图片</span></span><br><span class="line">axios(&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;http://bit.ly/2mTM3nY&#x27;</span>,</span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;stream&#x27;</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">  response.data.pipe(fs.createWriteStream(<span class="string">&#x27;ada_lovelace.jpg&#x27;</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><h5 id="axios-url-config"><a href="#axios-url-config" class="headerlink" title="axios(url[, config])"></a><code>axios(url[, config])</code></h5></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 发送 GET 请求（默认的方法）</span></span><br><span class="line">axios(<span class="string">&#x27;/user/12345&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="请求方法的别名"><a href="#请求方法的别名" class="headerlink" title="请求方法的别名"></a>请求方法的别名</h3><p>为方便起见，为所有支持的请求方法提供了别名</p>
<p>axios.request(config)</p>
<p>axios.get(url[, config])</p>
<p>axios.delete(url[, config])</p>
<p>axios.head(url[, config])</p>
<p>axios.options(url[, config])</p>
<p>axios.post(url[, data[, config]])</p>
<p>axios.put(url[, data[, config]])</p>
<p>axios.patch(url[, data[, config]])</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>在使用别名方法时， <code>url</code>、<code>method</code>、<code>data</code> 这些属性都不必在配置中指定。</p>
<h3 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h3><p>处理并发请求的助手函数</p>
<ul>
<li><p>axios.all(iterable)</p>
</li>
<li><p>axios.spread(callback)</p>
</li>
</ul>
<h3 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h3><p>可以使用自定义配置新建一个 axios 实例</p>
<h5 id="axios-create-config"><a href="#axios-create-config" class="headerlink" title="axios.create([config])"></a>axios.create([config])</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://some-domain.com/api/&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;foobar&#x27;</span> &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><p>以下是可用的实例方法。指定的配置将与实例的配置合并。</p>
<p>axios#request(config)</p>
<p>axios#get(url[, config])</p>
<p>axios#delete(url[, config])</p>
<p>axios#head(url[, config])</p>
<p>axios#options(url[, config])</p>
<p>axios#post(url[, data[, config]])</p>
<p>axios#put(url[, data[, config]])</p>
<p>axios#patch(url[, data[, config]])</p>
<h2 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h2><p>这些是创建请求时可以用的配置选项。只有 <code>url</code> 是必需的。如果没有指定 <code>method</code>，请求将默认使用 <code>get</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="comment">// `url` 是用于请求的服务器 URL</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `method` 是创建请求时使用的方法</span></span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。</span></span><br><span class="line">  <span class="comment">// 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://some-domain.com/api/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformRequest` 允许在向服务器发送前，修改请求数据</span></span><br><span class="line">  <span class="comment">// 只能用在 &#x27;PUT&#x27;, &#x27;POST&#x27; 和 &#x27;PATCH&#x27; 这几个请求方法</span></span><br><span class="line">  <span class="comment">// 后面数组中的函数必须返回一个字符串，或 ArrayBuffer，或 Stream</span></span><br><span class="line">  <span class="attr">transformRequest</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data, headers</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对 data 进行任意转换处理</span></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformResponse` 在传递给 then/catch 前，允许修改响应数据</span></span><br><span class="line">  <span class="attr">transformResponse</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对 data 进行任意转换处理</span></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `headers` 是即将被发送的自定义请求头</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;<span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `params` 是即将与请求一起发送的 URL 参数</span></span><br><span class="line">  <span class="comment">// 必须是一个无格式对象(plain object)或 URLSearchParams 对象</span></span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `paramsSerializer` 是一个负责 `params` 序列化的函数</span></span><br><span class="line">  <span class="comment">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span></span><br><span class="line">  <span class="attr">paramsSerializer</span>: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Qs.stringify(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">&#x27;brackets&#x27;</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `data` 是作为请求主体被发送的数据</span></span><br><span class="line">  <span class="comment">// 只适用于这些请求方法 &#x27;PUT&#x27;, &#x27;POST&#x27;, 和 &#x27;PATCH&#x27;</span></span><br><span class="line">  <span class="comment">// 在没有设置 `transformRequest` 时，必须是以下类型之一：</span></span><br><span class="line">  <span class="comment">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span></span><br><span class="line">  <span class="comment">// - 浏览器专属：FormData, File, Blob</span></span><br><span class="line">  <span class="comment">// - Node 专属： Stream</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `timeout` 指定请求超时的毫秒数(0 表示无超时时间)</span></span><br><span class="line">  <span class="comment">// 如果请求话费了超过 `timeout` 的时间，请求将被中断</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `withCredentials` 表示跨域请求时是否需要使用凭证</span></span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">false</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `adapter` 允许自定义处理请求，以使测试更轻松</span></span><br><span class="line">  <span class="comment">// 返回一个 promise 并应用一个有效的响应 (查阅 [response docs](#response-api)).</span></span><br><span class="line">  <span class="attr">adapter</span>: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> <span class="comment">// `auth` 表示应该使用 HTTP 基础验证，并提供凭据</span></span><br><span class="line">  <span class="comment">// 这将设置一个 `Authorization` 头，覆写掉现有的任意使用 `headers` 设置的自定义 `Authorization`头</span></span><br><span class="line">  <span class="attr">auth</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;janedoe&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;s00pers3cret&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `responseType` 表示服务器响应的数据类型，可以是 &#x27;arraybuffer&#x27;, &#x27;blob&#x27;, &#x27;document&#x27;, &#x27;json&#x27;, &#x27;text&#x27;, &#x27;stream&#x27;</span></span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `responseEncoding` indicates encoding to use for decoding responses</span></span><br><span class="line">  <span class="comment">// Note: Ignored for `responseType` of &#x27;stream&#x27; or client-side requests</span></span><br><span class="line">  <span class="attr">responseEncoding</span>: <span class="string">&#x27;utf8&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// `xsrfCookieName` 是用作 xsrf token 的值的cookie的名称</span></span><br><span class="line">  <span class="attr">xsrfCookieName</span>: <span class="string">&#x27;XSRF-TOKEN&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span></span><br><span class="line">  <span class="attr">xsrfHeaderName</span>: <span class="string">&#x27;X-XSRF-TOKEN&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// `onUploadProgress` 允许为上传处理进度事件</span></span><br><span class="line">  <span class="attr">onUploadProgress</span>: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Do whatever you want with the native progress event</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `onDownloadProgress` 允许为下载处理进度事件</span></span><br><span class="line">  <span class="attr">onDownloadProgress</span>: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对原生进度事件的处理</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `maxContentLength` 定义允许的响应内容的最大尺寸</span></span><br><span class="line">  <span class="attr">maxContentLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `validateStatus` 定义对于给定的HTTP 响应状态码是 resolve 或 reject  promise 。如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，promise 将被 resolve; 否则，promise 将被 rejecte</span></span><br><span class="line">  <span class="attr">validateStatus</span>: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// default</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxRedirects` 定义在 node.js 中 follow 的最大重定向数目</span></span><br><span class="line">  <span class="comment">// 如果设置为0，将不会 follow 任何重定向</span></span><br><span class="line">  <span class="attr">maxRedirects</span>: <span class="number">5</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `socketPath` defines a UNIX Socket to be used in node.js.</span></span><br><span class="line">  <span class="comment">// e.g. &#x27;/var/run/docker.sock&#x27; to send requests to the docker daemon.</span></span><br><span class="line">  <span class="comment">// Only either `socketPath` or `proxy` can be specified.</span></span><br><span class="line">  <span class="comment">// If both are specified, `socketPath` is used.</span></span><br><span class="line">  <span class="attr">socketPath</span>: <span class="literal">null</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `httpAgent` 和 `httpsAgent` 分别在 node.js 中用于定义在执行 http 和 https 时使用的自定义代理。允许像这样配置选项：</span></span><br><span class="line">  <span class="comment">// `keepAlive` 默认没有启用</span></span><br><span class="line">  <span class="attr">httpAgent</span>: <span class="keyword">new</span> http.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">  <span class="attr">httpsAgent</span>: <span class="keyword">new</span> https.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x27;proxy&#x27; 定义代理服务器的主机名称和端口</span></span><br><span class="line">  <span class="comment">// `auth` 表示 HTTP 基础验证应当用于连接代理，并提供凭据</span></span><br><span class="line">  <span class="comment">// 这将会设置一个 `Proxy-Authorization` 头，覆写掉已有的通过使用 `header` 设置的自定义 `Proxy-Authorization` 头。</span></span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">    <span class="attr">auth</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;mikeymike&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;rapunz3l&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `cancelToken` 指定用于取消请求的 cancel token</span></span><br><span class="line">  <span class="comment">// （查看后面的 Cancellation 这节了解更多）</span></span><br><span class="line">  <span class="attr">cancelToken</span>: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> (<span class="params">cancel</span>) </span>&#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="响应结构"><a href="#响应结构" class="headerlink" title="响应结构"></a>响应结构</h2><p>某个请求的响应包含以下信息</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// `data` 由服务器提供的响应</span></span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `status` 来自服务器响应的 HTTP 状态码</span></span><br><span class="line">  <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `statusText` 来自服务器响应的 HTTP 状态信息</span></span><br><span class="line">  <span class="attr">statusText</span>: <span class="string">&#x27;OK&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `headers` 服务器响应的头</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `config` 是为请求提供的配置信息</span></span><br><span class="line">  <span class="attr">config</span>: &#123;&#125;,</span><br><span class="line"> <span class="comment">// &#x27;request&#x27;</span></span><br><span class="line">  <span class="comment">// `request` is the request that generated this response</span></span><br><span class="line">  <span class="comment">// It is the last ClientRequest instance in node.js (in redirects)</span></span><br><span class="line">  <span class="comment">// and an XMLHttpRequest instance the browser</span></span><br><span class="line">  <span class="attr">request</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 <code>then</code> 时，你将接收下面这样的响应 :</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/user/12345&#x27;</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(response.data)</span><br><span class="line">  <span class="built_in">console</span>.log(response.status)</span><br><span class="line">  <span class="built_in">console</span>.log(response.statusText)</span><br><span class="line">  <span class="built_in">console</span>.log(response.headers)</span><br><span class="line">  <span class="built_in">console</span>.log(response.config)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在使用 <code>catch</code> 时，或传递 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then">rejection callback</a> 作为 <code>then</code> 的第二个参数时，响应可以通过 <code>error</code> 对象可被使用，正如在<a href="https://www.kancloud.cn/yunye/axios/234845#handling-errors">错误处理</a>这一节所讲。</p>
<h2 id="配置默认值"><a href="#配置默认值" class="headerlink" title="配置默认值"></a>配置默认值</h2><p>你可以指定将被用在各个请求的配置默认值</p>
<h3 id="全局的-axios-默认值"><a href="#全局的-axios-默认值" class="headerlink" title="全局的 axios 默认值"></a>全局的 axios 默认值</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.defaults.baseURL = <span class="string">&#x27;https://api.example.com&#x27;</span></span><br><span class="line">axios.defaults.headers.common[<span class="string">&#x27;Authorization&#x27;</span>] = AUTH_TOKEN</span><br><span class="line">axios.defaults.headers.post[<span class="string">&#x27;Content-Type&#x27;</span>] =</span><br><span class="line">  <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="自定义实例默认值"><a href="#自定义实例默认值" class="headerlink" title="自定义实例默认值"></a>自定义实例默认值</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Set config defaults when creating the instance</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.example.com&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Alter defaults after instance has been created</span></span><br><span class="line">instance.defaults.headers.common[<span class="string">&#x27;Authorization&#x27;</span>] = AUTH_TOKEN</span><br></pre></td></tr></table></figure>

<h3 id="配置的优先顺序"><a href="#配置的优先顺序" class="headerlink" title="配置的优先顺序"></a>配置的优先顺序</h3><p>配置会以一个优先顺序进行合并。这个顺序是：在 <code>lib/defaults.js</code> 找到的库的默认值，然后是实例的 <code>defaults</code> 属性，最后是请求的 <code>config</code> 参数。后者将优先于前者。这里是一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用由库提供的配置的默认值来创建实例</span></span><br><span class="line"><span class="comment">// 此时超时配置的默认值是 `0`</span></span><br><span class="line"><span class="keyword">var</span> instance = axios.create()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 覆写库的超时默认值</span></span><br><span class="line"><span class="comment">// 现在，在超时前，所有请求都会等待 2.5 秒</span></span><br><span class="line">instance.defaults.timeout = <span class="number">2500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 为已知需要花费很长时间的请求覆写超时设置</span></span><br><span class="line">instance.get(<span class="string">&#x27;/longRequest&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>在请求或响应被 <code>then</code> 或 <code>catch</code> 处理前拦截它们。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>如果你想在稍后移除拦截器，可以这样：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myInterceptor = axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;)</span><br><span class="line">axios.interceptors.request.eject(myInterceptor)</span><br></pre></td></tr></table></figure>

<p>可以为自定义 axios 实例添加拦截器</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = axios.create()</span><br><span class="line">instance.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/user/12345&#x27;</span>).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error.response) &#123;</span><br><span class="line">    <span class="comment">// The request was made and the server responded with a status code</span></span><br><span class="line">    <span class="comment">// that falls out of the range of 2xx</span></span><br><span class="line">    <span class="built_in">console</span>.log(error.response.data)</span><br><span class="line">    <span class="built_in">console</span>.log(error.response.status)</span><br><span class="line">    <span class="built_in">console</span>.log(error.response.headers)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.request) &#123;</span><br><span class="line">    <span class="comment">// The request was made but no response was received</span></span><br><span class="line">    <span class="comment">// `error.request` is an instance of XMLHttpRequest in the browser and an instance of</span></span><br><span class="line">    <span class="comment">// http.ClientRequest in node.js</span></span><br><span class="line">    <span class="built_in">console</span>.log(error.request)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Something happened in setting up the request that triggered an Error</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Error&#x27;</span>, error.message)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(error.config)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Y 可以使用 <code>validateStatus</code> 配置选项定义一个自定义 HTTP 状态码的错误范围。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/user/12345&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">validateStatus</span>: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> status &lt; <span class="number">500</span> <span class="comment">// Reject only if the status code is greater than or equal to 500</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="取消"><a href="#取消" class="headerlink" title="取消"></a>取消</h2><p>使用 <em>cancel token</em> 取消请求</p>
<blockquote>
<p>Axios 的 cancel token API 基于<a href="https://github.com/tc39/proposal-cancelable-promises">cancelable promises proposal</a>，它还处于第一阶段。</p>
</blockquote>
<p>可以使用 <code>CancelToken.source</code> 工厂方法创建 cancel token，像这样：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> CancelToken = axios.CancelToken</span><br><span class="line"><span class="keyword">const</span> source = CancelToken.source()</span><br><span class="line"></span><br><span class="line">axios</span><br><span class="line">  .get(<span class="string">&#x27;/user/12345&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">cancelToken</span>: source.token,</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">thrown</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (axios.isCancel(thrown)) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Request canceled&#x27;</span>, thrown.message)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 处理错误</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">axios.post(</span><br><span class="line">  <span class="string">&#x27;/user/12345&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;new name&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">cancelToken</span>: source.token,</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消请求（message 参数是可选的）</span></span><br><span class="line">source.cancel(<span class="string">&#x27;Operation canceled by the user.&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>还可以通过传递一个 executor 函数到 <code>CancelToken</code> 的构造函数来创建 cancel token：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> CancelToken = axios.CancelToken</span><br><span class="line"><span class="keyword">let</span> cancel</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">&#x27;/user/12345&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">cancelToken</span>: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> <span class="title">executor</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// executor 函数接收一个 cancel 函数作为参数</span></span><br><span class="line">    cancel = c</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// cancel the request</span></span><br><span class="line">cancel()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: 可以使用同一个 cancel token 取消多个请求</p>
</blockquote>
<h2 id="使用-application-x-www-form-urlencoded-format"><a href="#使用-application-x-www-form-urlencoded-format" class="headerlink" title="使用 application/x-www-form-urlencoded format"></a>使用 application/x-www-form-urlencoded format</h2><p>默认情况下，axios 将 JavaScript 对象序列化为 JSON。 要以 application / x-www-form-urlencoded 格式发送数据，您可以使用以下选项之一。</p>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3><p>在浏览器中，您可以使用 URLSearchParams API，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> URLSearchParams()</span><br><span class="line">params.append(<span class="string">&#x27;param1&#x27;</span>, <span class="string">&#x27;value1&#x27;</span>)</span><br><span class="line">params.append(<span class="string">&#x27;param2&#x27;</span>, <span class="string">&#x27;value2&#x27;</span>)</span><br><span class="line">axios.post(<span class="string">&#x27;/foo&#x27;</span>, params)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>请注意，所有浏览器都不支持 URLSearchParams（请参阅 caniuse.com），但可以使用 polyfill（确保填充全局环境）。</p>
</blockquote>
<p>或者，您可以使用 qs 库编码数据：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;qs&#x27;</span>)</span><br><span class="line">axios.post(<span class="string">&#x27;/foo&#x27;</span>, qs.stringify(&#123; <span class="attr">bar</span>: <span class="number">123</span> &#125;))</span><br></pre></td></tr></table></figure>

<p>或者以另一种方式（ES6），</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span></span><br><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">bar</span>: <span class="number">123</span> &#125;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">data</span>: qs.stringify(data),</span><br><span class="line">  url,</span><br><span class="line">&#125;</span><br><span class="line">axios(options)</span><br></pre></td></tr></table></figure>

<h3 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h3><p>在 node.js 中，您可以使用 querystring 模块，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>)</span><br><span class="line">axios.post(<span class="string">&#x27;http://something.com/&#x27;</span>, querystring.stringify(&#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span> &#125;))</span><br></pre></td></tr></table></figure>

<p>您也可以使用 qs 库。</p>
<h2 id="Semver"><a href="#Semver" class="headerlink" title="Semver"></a>Semver</h2><p>在 axios 达到 1.0 版本之前，破坏性更改将以新的次要版本发布。 例如 0.5.1 和 0.5.4 将具有相同的 API，但 0.6.0 将具有重大变化。</p>
<h2 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h2><p>axios 依赖原生的 ES6 Promise 实现而<a href="http://caniuse.com/promises">被支持</a>. 如果你的环境不支持 ES6 Promise，你可以使用 <a href="https://github.com/jakearchibald/es6-promise">polyfill</a>.</p>
<h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><p>axios 包括 TypeScript 定义。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">axios.get(<span class="string">&#x27;/user?ID=12345&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Ajax</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>react基础</title>
    <url>/taiaiac.gitee.io/2021/05/15/react/react%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h2><blockquote>
<p>官方文档</p>
<p><a href="https://reactjs.bootcss.com/">https://reactjs.bootcss.com/</a></p>
</blockquote>
<blockquote>
<p>移动端</p>
<p><a href="https://reactnative.cn/">https://reactnative.cn/</a></p>
</blockquote>
<blockquote>
<p>服务端渲染</p>
<p><a href="https://www.nextjs.cn/">https://www.nextjs.cn/</a></p>
</blockquote>
<blockquote>
<p>React 的轻量级替代方案</p>
<p><a href="https://www.preactjs.com.cn/">https://www.preactjs.com.cn/</a></p>
</blockquote>
<blockquote>
<p>配套ui : Ant Design of React</p>
<p><a href="https://ant-design.gitee.io/docs/react/introduce-cn">https://ant-design.gitee.io/docs/react/introduce-cn</a></p>
<p>ProComponents</p>
<p><a href="https://procomponents.ant.design/">https://procomponents.ant.design/</a></p>
<p>Ant Design Charts</p>
<p><a href="https://charts.ant.design/zh-CN/">https://charts.ant.design/zh-CN/</a></p>
</blockquote>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
</search>
