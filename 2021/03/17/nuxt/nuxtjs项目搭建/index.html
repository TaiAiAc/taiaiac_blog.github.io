<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/taiaiac.gitee.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/taiaiac.gitee.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/taiaiac.gitee.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/taiaiac.gitee.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/taiaiac.gitee.io/css/main.css">


<link rel="stylesheet" href="/taiaiac.gitee.io/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gitee.com","root":"/taiaiac.gitee.io/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="1.命令行创建项目 npx create-nuxt-app &lt;项目名&gt; yarn create nuxt-app &lt;项目名&gt;  2.选项配置">
<meta property="og:type" content="article">
<meta property="og:title" content="nuxtjs项目搭建">
<meta property="og:url" content="https://gitee.com/aidemin/taiaiac.gitee.io.git/2021/03/17/nuxt/nuxtjs%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/index.html">
<meta property="og:site_name" content="Z. A. M.’s Blog">
<meta property="og:description" content="1.命令行创建项目 npx create-nuxt-app &lt;项目名&gt; yarn create nuxt-app &lt;项目名&gt;  2.选项配置">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-17T05:51:50.000Z">
<meta property="article:modified_time" content="2021-03-23T01:43:39.810Z">
<meta property="article:author" content="Z.A.M.">
<meta property="article:tag" content="nuxtjs">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://gitee.com/aidemin/taiaiac.gitee.io.git/2021/03/17/nuxt/nuxtjs%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>nuxtjs项目搭建 | Z. A. M.’s Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?926d1ac4f837ede8bead2fd3007162d6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/taiaiac.gitee.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Z. A. M.’s Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/taiaiac.gitee.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/taiaiac.gitee.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/taiaiac.gitee.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/taiaiac.gitee.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gitee.com/aidemin/taiaiac.gitee.io.git/2021/03/17/nuxt/nuxtjs%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/%E5%A4%B4%E5%83%8F/header.jpg">
      <meta itemprop="name" content="Z.A.M.">
      <meta itemprop="description" content="所有不利,都是 能力不足 导致的. <br> By <东京喰种>.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Z. A. M.’s Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          nuxtjs项目搭建
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-17 13:51:50" itemprop="dateCreated datePublished" datetime="2021-03-17T13:51:50+08:00">2021-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-03-23 09:43:39" itemprop="dateModified" datetime="2021-03-23T09:43:39+08:00">2021-03-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/taiaiac.gitee.io/categories/nuxtjs/" itemprop="url" rel="index"><span itemprop="name">nuxtjs</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-命令行创建项目"><a href="#1-命令行创建项目" class="headerlink" title="1.命令行创建项目"></a>1.命令行创建项目</h2><ul>
<li><code>npx create-nuxt-app &lt;项目名&gt;</code></li>
<li><code>yarn create nuxt-app &lt;项目名&gt;</code></li>
</ul>
<h2 id="2-选项配置"><a href="#2-选项配置" class="headerlink" title="2.选项配置"></a>2.选项配置</h2><p>项目配置：</p>
<ul>
<li><p>语言: JavaScript</p>
</li>
<li><p>包管理 : yarn</p>
</li>
<li><p>UI框架：Element</p>
</li>
<li><p>使用集成的 :  Axios -  Promise based HTTP client</p>
</li>
<li><p>代码检测 : Prettier</p>
</li>
<li><p>测试框架：None</p>
</li>
<li><p>Nuxt模式：Universal (服务端渲染)</p>
</li>
<li><p>部署目标 :  服务器 or 静态托管</p>
</li>
<li><p>开发工具 : jsconfig.json(vs code)</p>
</li>
<li><p>版本控制 : git</p>
</li>
</ul>
<h2 id="3-项目目录"><a href="#3-项目目录" class="headerlink" title="3.项目目录"></a>3.项目目录</h2><h4 id="重要目录"><a href="#重要目录" class="headerlink" title="重要目录"></a>重要目录</h4><ul>
<li>.nuxt<ul>
<li>打包后的文件,如查看router生成后的文件</li>
</ul>
</li>
<li>assets<ul>
<li>全局文件目录css,js,img…..</li>
</ul>
</li>
<li>components<ul>
<li>全局组件</li>
</ul>
</li>
<li>layouts<ul>
<li>default.vue为全局默认布局</li>
<li>其他布局,和组件调用方式一致</li>
</ul>
</li>
<li>middleware<ul>
<li>中间件目录</li>
<li>auth.js一般作为全局路由使用</li>
</ul>
</li>
<li>pages<ul>
<li>项目目录即是路由视图</li>
<li>约定式路由,自动生成路由视图</li>
</ul>
</li>
<li>plugins<ul>
<li>插件目录</li>
<li>全局资源配置</li>
</ul>
</li>
<li>static<ul>
<li>静态资源目录</li>
<li>无需打包的文件存放地</li>
</ul>
</li>
<li>store<ul>
<li>vuex状态树</li>
<li>保存状态,记录操作….</li>
</ul>
</li>
<li>utils<ul>
<li>工具</li>
<li>一些封装的拿来即用的方法函数</li>
</ul>
</li>
<li>nuxt.config.js<ul>
<li>项目配置目录</li>
<li>很重要</li>
</ul>
</li>
<li>dist<ul>
<li><code>yarn generate</code>命令生成静态部署包</li>
<li>客户端渲染的包</li>
</ul>
</li>
</ul>
<h2 id="4-环境搭建"><a href="#4-环境搭建" class="headerlink" title="4.环境搭建"></a>4.环境搭建</h2><h3 id="安装项目必备的插件"><a href="#安装项目必备的插件" class="headerlink" title="安装项目必备的插件"></a>安装项目必备的插件</h3><ul>
<li><code>yarn add  @nuxtjs/axios @nuxtjs/proxy  cookie-universal-nuxt </code><ul>
<li>axios,配置代理,cookie工具</li>
</ul>
</li>
<li><code>yarn add  node-sass sass-loader  scss-loader</code><ul>
<li>css预处理器</li>
</ul>
</li>
<li><code>@nuxtjs/style-resources</code><ul>
<li>sass,less变量全局使用插件,无需引入</li>
</ul>
</li>
</ul>
<h3 id="nuxt-config-js配置"><a href="#nuxt-config-js配置" class="headerlink" title="nuxt.config.js配置"></a>nuxt.config.js配置</h3><ul>
<li>server<ul>
<li>port 端口</li>
<li>host  地址</li>
</ul>
</li>
<li>head<ul>
<li>全局head标签内容</li>
</ul>
</li>
<li>css<ul>
<li>全局css的引入</li>
</ul>
</li>
<li>router<ul>
<li>middleware 全局中间件</li>
<li>路由配置</li>
</ul>
</li>
<li>plugins<ul>
<li>全局插件注入,注意前后顺序</li>
<li>引入plugins目录的插件</li>
</ul>
</li>
<li>loading<ul>
<li>定义系统默认loading效果,或者指定loading组件</li>
<li><code>loading: &#123; color: &#39;#007fff&#39;, height: &#39;50px&#39; &#125;</code></li>
<li><code>loading: &#39;~/components/loading.vue&#39;</code></li>
</ul>
</li>
<li>modules<ul>
<li>模块</li>
<li><code>modules: [&#39;@nuxtjs/axios&#39;, &#39;cookie-universal-nuxt&#39;, &#39;@nuxtjs/style-resources&#39;]</code></li>
</ul>
</li>
<li>axios<ul>
<li>axios相关配置</li>
</ul>
</li>
<li>proxy<ul>
<li>配置代理</li>
</ul>
</li>
<li>components<ul>
<li><code>components: true</code></li>
<li>开启全局组件,无需引用直接使用</li>
</ul>
</li>
<li>styleResources<ul>
<li>全局样式变量</li>
<li><code>scss: [&#39;~/assets/scss/variable.scss&#39;]</code></li>
</ul>
</li>
</ul>
<h2 id="5-路由"><a href="#5-路由" class="headerlink" title="5.路由"></a>5.路由</h2><ul>
<li><p><code>layouts/default.vue</code>中<code>&lt;nuxt /&gt;</code>下的为一级路由视图</p>
</li>
<li><p>一级路由即<code>pages</code>目录下的<code>.vue</code>文件</p>
</li>
<li><p>二级路由视图标签为<code>&lt;NuxtChild /&gt;</code></p>
</li>
<li><p>约定式路由中实现重定向</p>
<ul>
<li><code>index.vue</code>为默认展示页,也就是重定向</li>
<li>重定向需要与父路由名相同的文件目录下的<code>index.vue</code></li>
<li>也就是<code>pages/home.vue</code>中的<code>&lt;NuxtChild /&gt;</code>默认显示的页面为<code>pages/home/index.vue</code></li>
<li>同一目录下跳转为同级路由跳转,会按照父路由展示点展示</li>
</ul>
</li>
<li><p>动态路由</p>
<ul>
<li>动态路由的页面必须在文件名前加<code>_</code></li>
<li>如给<code>_id.vue</code>动态传参</li>
<li>字符串方式<ul>
<li><code>home/see/1?a=1&amp;b=2</code>       <code>home/see/2?a=11&amp;b=22</code></li>
</ul>
</li>
<li>对象方式(params对等文件名,传递的是id)<ul>
<li><code>&#123;name:&#39;home-id&#39;,params:3,query:&#123;a:111,b:222&#125;&#125;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>路由传值</p>
<ul>
<li>使用asyncData接受到的值可以直接使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">asyncData</span>(<span class="params">&#123; params, query &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      params,</span><br><span class="line">      query</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="路由切换动态效果"><a href="#路由切换动态效果" class="headerlink" title="路由切换动态效果"></a>路由切换动态效果</h3><blockquote>
<p> 配置全局路由切换动效</p>
<p><code>assets\css\transition.css</code></p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 路由统一动效 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* page前缀为全局样式无需引入 */</span></span><br><span class="line"><span class="comment">/* 动画形式 */</span></span><br><span class="line"><span class="selector-class">.page-enter-active</span>,</span><br><span class="line"><span class="selector-class">.page-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 入 退 */</span></span><br><span class="line"><span class="selector-class">.page-enter</span>,</span><br><span class="line"><span class="selector-class">.page-leave</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 需要引入 transition: &#x27;test&#x27;, */</span></span><br><span class="line"><span class="comment">/* 单路由 */</span></span><br><span class="line"><span class="selector-class">.test-enter-active</span>,</span><br><span class="line"><span class="selector-class">.test-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> ease all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test-enter</span>,</span><br><span class="line"><span class="selector-class">.test-leave</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 在全局配置中css选项引入</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">css: [<span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>, <span class="string">&#x27;assets/css/global.css&#x27;</span>, <span class="string">&#x27;assets/css/transition.css&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h3><blockquote>
<p>多种选择,取其几种</p>
</blockquote>
<h4 id="1-使用中间件"><a href="#1-使用中间件" class="headerlink" title="1.使用中间件"></a>1.使用中间件</h4><blockquote>
<p>nuxt.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> defalut&#123;</span><br><span class="line">    <span class="attr">router</span>: &#123;</span><br><span class="line">    	<span class="attr">middleware</span>: <span class="string">&#x27;auth&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>middleware\auth.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; $cookies, redirect, route, params, query, req, res, $message &#125;) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 全局中间件业务,每次跳转都经过这里</span></span><br><span class="line">  <span class="comment">// context 服务端上下文</span></span><br><span class="line">  <span class="comment">// store 状态树信息</span></span><br><span class="line">  <span class="comment">// route 一条目标路由的信息</span></span><br><span class="line">  <span class="comment">// redirect  强制跳转</span></span><br><span class="line">  <span class="comment">//  params,query 校验参数合理性</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;middleware&#x27;);</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;path&#x27;, route.path)</span></span><br><span class="line">  <span class="keyword">if</span> (route.path !== <span class="string">&#x27;/&#x27;</span> || route.path !== <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> cookieToken = $cookies.get(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!cookieToken) &#123;</span><br><span class="line">      redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-路由守卫-全局"><a href="#2-路由守卫-全局" class="headerlink" title="2.路由守卫(全局)"></a>2.路由守卫(全局)</h4><blockquote>
<p>nuxt.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> defalut&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/router&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>plugins\router.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; app, $cookies, $alert &#125;) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 前置</span></span><br><span class="line">  app.router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">&#x27;/&#x27;</span> || to.path === <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> next()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断用户是否登录，没有登录就到登录界面，否则放行</span></span><br><span class="line">    <span class="keyword">const</span> token = $cookies.get(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">      $alert(<span class="string">&#x27;即将跳转登录页面,请重新登录&#x27;</span>, <span class="string">&#x27;登录状态失效&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span><br><span class="line">        <span class="attr">callback</span>: <span class="function">() =&gt;</span> next(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    next()</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 后置</span></span><br><span class="line">  <span class="comment">// app.router.afterEach((to, from) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   next()</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-路由守卫-页面级"><a href="#3-路由守卫-页面级" class="headerlink" title="3.路由守卫(页面级)"></a>3.路由守卫(页面级)</h4><blockquote>
<p>页面中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 指向全局的middleware</span></span><br><span class="line">  <span class="comment">// middleware:&#x27;auth&#x27;</span></span><br><span class="line">  <span class="comment">// 页面内部的middleware</span></span><br><span class="line">  <span class="function"><span class="title">middleware</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;页面级别的middleware&#x27;)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-插件工具整理和封装注入"><a href="#6-插件工具整理和封装注入" class="headerlink" title="6.插件工具整理和封装注入"></a>6.插件工具整理和封装注入</h2><blockquote>
<p>element-ui</p>
<p>nuxt.config.js</p>
</blockquote>
<p>直接在全局配置中注入即可全面使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">css</span>: [<span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/element-ui&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>plugins\element-ui.js</p>
<p>按需引入</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> locale <span class="keyword">from</span> <span class="string">&#x27;element-ui/lib/locale/lang/en&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//按需引入elment-ui的组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Button,</span><br><span class="line">  Message,</span><br><span class="line">  MessageBox,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载组件</span></span><br><span class="line">Vue.use(Button)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过inject添加原型链,通过$ + utils 访问</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (context, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;message&#x27;</span>, Message)</span><br><span class="line">  inject(<span class="string">&#x27;alert&#x27;</span>, MessageBox.alert)</span><br><span class="line">  inject(<span class="string">&#x27;confirm&#x27;</span>, MessageBox.confirm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="7-引入-挂载-注入"><a href="#7-引入-挂载-注入" class="headerlink" title="7.引入,挂载,注入"></a>7.引入,挂载,注入</h2><blockquote>
<p> context 是从 Nuxt 额外提供的对象,全局方法和属性都会挂载到 context 上</p>
</blockquote>
<h3 id="封装请求"><a href="#封装请求" class="headerlink" title="封装请求"></a>封装请求</h3><ul>
<li>全局配置</li>
<li>拦截器</li>
<li>请求方法</li>
<li>挂载注入api</li>
</ul>
<blockquote>
<p>全局配置</p>
<p>nuxt.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="comment">// 注入插件的顺序有前后需求,注意引用关系</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/axios&#x27;</span> &#125;, <span class="comment">// 1</span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/request&#x27;</span> &#125;, <span class="comment">// 2 </span></span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;@/plugins/api&#x27;</span> &#125; <span class="comment">// 3</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">modules</span>: [<span class="string">&#x27;@nuxtjs/axios&#x27;</span>, <span class="string">&#x27;cookie-universal-nuxt&#x27;</span>, <span class="string">&#x27;@nuxtjs/style-resources&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>拦截器</p>
<p>plugins\axios.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">&#123; app: &#123; $axios, $cookies, $message &#125;, redirect &#125;</span>) </span>&#123;</span><br><span class="line">  $axios.defaults.baseURL = <span class="string">&#x27;http://152.136.105.192:3000/api/private/v1/&#x27;</span></span><br><span class="line">  $axios.defaults.timeout = <span class="number">30000</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 请求拦截器，在请求头中添加token</span></span><br><span class="line">  $axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 头部带上验证信息</span></span><br><span class="line">    config.headers[<span class="string">&#x27;Authorization&#x27;</span>] = $cookies.get(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 响应拦截器</span></span><br><span class="line">  $axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(res, &#x27;来自响应拦截器&#x27;)</span></span><br><span class="line">    <span class="keyword">let</span> status = res.data.meta.status</span><br><span class="line">    <span class="keyword">let</span> msg = res.data.meta.msg</span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">        $message.success(<span class="string">`状态码:<span class="subst">$&#123;status&#125;</span>,提示:<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span> res.data.data</span><br><span class="line">      <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">        $message.error(<span class="string">`状态码:<span class="subst">$&#123;status&#125;</span>,提示:<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        $message.warning(<span class="string">`状态码:<span class="subst">$&#123;status&#125;</span>,提示:<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>请求方法封装</p>
<p>注入$request</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; <span class="attr">app</span>: &#123; $axios &#125; &#125;, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;request&#x27;</span>, &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">url, params</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        params</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">post</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">put</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">delete</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $axios(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        url,</span><br><span class="line">        data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>挂载注入api</p>
<p>将所有api集中管理注入到</p>
<p>plugins\api.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; $request &#125;, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;api&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">// 登录验证</span></span><br><span class="line">    <span class="function"><span class="title">login</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $request.post(<span class="string">&#x27;login&#x27;</span>, data)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 请求列表</span></span><br><span class="line">    <span class="function"><span class="title">getMenuList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $request.get(<span class="string">&#x27;menus&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">     <span class="comment">// 后续还可以继续加</span></span><br><span class="line">  &#125;)</span><br><span class="line">  inject(<span class="string">&#x27;user&#x27;</span>, user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>页面中使用时直接可以访问实例下的<code>$api.login</code>使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.$api.login(<span class="built_in">this</span>.loginForm)</span><br></pre></td></tr></table></figure>

<h2 id="8-全局组件的引入"><a href="#8-全局组件的引入" class="headerlink" title="8.全局组件的引入"></a>8.全局组件的引入</h2><blockquote>
<p>plugins目录下的文件都需要注册到nuxt.config.js中的plugins选项中</p>
</blockquote>
<blockquote>
<p>plugins\vue-global.js(相当于vue中的main.js)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入树形表格组件 tree-table</span></span><br><span class="line"><span class="keyword">import</span> ZkTable <span class="keyword">from</span> <span class="string">&#x27;vue-table-with-tree-grid&#x27;</span></span><br><span class="line"><span class="comment">//Vue.use(ZkTable)注册组件</span></span><br><span class="line"><span class="comment">// 引入工具</span></span><br><span class="line"><span class="keyword">import</span> utils <span class="keyword">from</span> <span class="string">&#x27;~/utils/utils&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 挂载</span></span><br><span class="line">Vue.use(utils)</span><br><span class="line"><span class="comment">// 注册为全局组件</span></span><br><span class="line">Vue.component(<span class="string">&#x27;tree-table&#x27;</span>, ZkTable)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过inject添加原型链,通过$ + utils 访问</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (ctx, inject) =&gt; &#123;</span><br><span class="line">  inject(<span class="string">&#x27;utils&#x27;</span>, utils)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要使用上下文和注入必须通过nuxt.config.js的注册</p>
<p>而不需要访问上下文的插件utils可以放在utils目录下,只需导出即可</p>
<p>通过vue-global.js注入utils</p>
<p>utils\utils.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&#x27;html2canvas&#x27;</span></span><br><span class="line"><span class="keyword">import</span> jspdf <span class="keyword">from</span> <span class="string">&#x27;jspdf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置登录验证信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述   导出excel</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>fileName 文件名</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>List 表格数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">exportToExcel</span>(<span class="params">fileName, List</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//1、获得当前要导出的数据源</span></span><br><span class="line">    <span class="keyword">let</span> arr = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(List))</span><br><span class="line">    <span class="keyword">if</span> (!arr.length) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;导出数据不能为空&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2、获得第一个元素对象</span></span><br><span class="line">    <span class="keyword">let</span> object = arr[<span class="number">0</span>]</span><br><span class="line">    <span class="comment">//3、获得object的所有属性数组</span></span><br><span class="line">    <span class="keyword">let</span> attrs = <span class="built_in">Object</span>.keys(object)</span><br><span class="line">    <span class="comment">// console.log(attrs)</span></span><br><span class="line">    <span class="keyword">if</span> (!attrs.length) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;对象的属性不能为空&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4、拼接表头单元格</span></span><br><span class="line">    <span class="keyword">let</span> str = attrs.join(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    <span class="comment">//5、换行</span></span><br><span class="line">    str += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    <span class="comment">//6、拼接所有元素属性的值</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> arr[i]) &#123;</span><br><span class="line">        str += <span class="string">`<span class="subst">$&#123;arr[i][key] + <span class="string">&#x27;\t&#x27;</span>&#125;</span>,`</span></span><br><span class="line">      &#125;</span><br><span class="line">      str += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(str)</span><br><span class="line">    <span class="comment">//7、创建a</span></span><br><span class="line">    <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    link.href = <span class="string">&#x27;data:text/csv;charset=utf-8,\ufeff&#x27;</span> + <span class="built_in">encodeURIComponent</span>(str)</span><br><span class="line">    link.download = fileName + <span class="string">&#x27;.csv&#x27;</span></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(link)</span><br><span class="line">    link.click()</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(link)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述   导出pdf</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>fileName 文件名</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>id 元素id名</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">exportToPDF</span>(<span class="params">fileName, id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> ele = <span class="built_in">document</span>.getElementById(id)</span><br><span class="line">    <span class="comment">//let ele = this.$refs[&#x27;goodsTable&#x27;]</span></span><br><span class="line">    <span class="comment">// console.log(ele)</span></span><br><span class="line">    ele.style.background = <span class="string">&#x27;#ffffff&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> eleW = ele.offsetWidth <span class="comment">// 获得该容器的宽</span></span><br><span class="line">    <span class="keyword">let</span> eleH = ele.offsetHeight <span class="comment">// 获得该容器的高</span></span><br><span class="line">    <span class="keyword">let</span> eleOffsetTop = ele.offsetTop <span class="comment">// 获得该容器到文档顶部的距离</span></span><br><span class="line">    <span class="keyword">let</span> eleOffsetLeft = ele.offsetLeft <span class="comment">// 获得该容器到文档最左的距离</span></span><br><span class="line">    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> abs = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> win_in = <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth <span class="comment">// 获得当前可视窗口的宽度（不包含滚动条）</span></span><br><span class="line">    <span class="keyword">let</span> win_out = <span class="built_in">window</span>.innerWidth <span class="comment">// 获得当前窗口的宽度（包含滚动条）</span></span><br><span class="line">    <span class="keyword">if</span> (win_out &gt; win_in) &#123;</span><br><span class="line">      <span class="comment">// abs = (win_o - win_i)/2;    // 获得滚动条长度的一半</span></span><br><span class="line">      abs = (win_out - win_in) / <span class="number">2</span> <span class="comment">// 获得滚动条宽度的一半</span></span><br><span class="line">      <span class="comment">// console.log(a, &#x27;新abs&#x27;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    canvas.width = eleW * <span class="number">2</span> <span class="comment">// 将画布宽&amp;&amp;高放大两倍</span></span><br><span class="line">    canvas.height = eleH * <span class="number">2</span></span><br><span class="line">    <span class="keyword">let</span> context = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">    context.scale(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">    context.translate(-eleOffsetLeft - abs, -eleOffsetTop)</span><br><span class="line">    <span class="comment">// 这里默认横向没有滚动条的情况，因为offset.left(),有无滚动条的时候存在差值，因此</span></span><br><span class="line">    <span class="comment">// translate的时候，要把这个差值去掉</span></span><br><span class="line">    <span class="comment">// html2canvas(element).then( (canvas)=&gt;&#123; //报错</span></span><br><span class="line">    <span class="comment">// html2canvas(element[0]).then( (canvas)=&gt;&#123;</span></span><br><span class="line">    html2canvas(ele, &#123;</span><br><span class="line">      <span class="attr">dpi</span>: <span class="number">1080</span>,</span><br><span class="line">      <span class="comment">// allowTaint: true,  //允许 canvas 污染， allowTaint参数要去掉，否则是无法通过toDataURL导出canvas数据的</span></span><br><span class="line">      <span class="attr">useCORS</span>: <span class="literal">true</span> <span class="comment">//允许canvas画布内 可以跨域请求外部链接图片, 允许跨域请求。</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">canvas</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> contentWidth = canvas.width</span><br><span class="line">      <span class="keyword">let</span> contentHeight = canvas.height</span><br><span class="line">      <span class="comment">//一页pdf显示html页面生成的canvas高度;</span></span><br><span class="line">      <span class="keyword">let</span> pageHeight = (contentWidth / <span class="number">592.28</span>) * <span class="number">841.89</span></span><br><span class="line">      <span class="comment">//未生成pdf的html页面高度</span></span><br><span class="line">      <span class="keyword">let</span> leftHeight = contentHeight</span><br><span class="line">      <span class="comment">//页面偏移</span></span><br><span class="line">      <span class="keyword">let</span> position = <span class="number">0</span></span><br><span class="line">      <span class="comment">//a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高</span></span><br><span class="line">      <span class="keyword">let</span> imgWidth = <span class="number">595.28</span></span><br><span class="line">      <span class="keyword">let</span> imgHeight = (<span class="number">595.28</span> / contentWidth) * contentHeight</span><br><span class="line">      <span class="keyword">let</span> pageData = canvas.toDataURL(<span class="string">&#x27;image/jpeg&#x27;</span>, <span class="number">1.0</span>)</span><br><span class="line">      <span class="keyword">let</span> pdf = <span class="keyword">new</span> jspdf(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;pt&#x27;</span>, <span class="string">&#x27;a4&#x27;</span>)</span><br><span class="line">      <span class="comment">//有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)</span></span><br><span class="line">      <span class="comment">//当内容未超过pdf一页显示的范围，无需分页</span></span><br><span class="line">      <span class="keyword">if</span> (leftHeight &lt; pageHeight) &#123;</span><br><span class="line">        <span class="comment">//在pdf.addImage(pageData, &#x27;JPEG&#x27;, 左，上，宽度，高度)设置在pdf中显示；</span></span><br><span class="line">        pdf.addImage(pageData, <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, imgWidth, imgHeight)</span><br><span class="line">        <span class="comment">//pdf.addImage(pageData, &#x27;JPEG&#x27;, 20, 40, imgWidth, imgHeight);</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 分页</span></span><br><span class="line">        <span class="keyword">while</span> (leftHeight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          pdf.addImage(pageData, <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, position, imgWidth, imgHeight)</span><br><span class="line">          leftHeight -= pageHeight</span><br><span class="line">          position -= <span class="number">841.89</span></span><br><span class="line">          <span class="comment">//避免添加空白页</span></span><br><span class="line">          <span class="keyword">if</span> (leftHeight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            pdf.addPage()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//可动态生成</span></span><br><span class="line">      pdf.save(<span class="string">`<span class="subst">$&#123;fileName&#125;</span>.pdf`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述  保存数据到cookies</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>ctx  上下文</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>res  数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">setCookies</span>(<span class="params">ctx, res</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cookies</span><br><span class="line">    <span class="keyword">if</span> (process.client) &#123;</span><br><span class="line">      cookies = ctx.$cookies</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.server) &#123;</span><br><span class="line">      cookies = ctx.app.$cookies</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cookies) &#123;</span><br><span class="line">      cookies.set(<span class="string">&#x27;email&#x27;</span>, res.email)</span><br><span class="line">      cookies.set(<span class="string">&#x27;id&#x27;</span>, res.id)</span><br><span class="line">      cookies.set(<span class="string">&#x27;mobile&#x27;</span>, res.mobile)</span><br><span class="line">      cookies.set(<span class="string">&#x27;rid&#x27;</span>, res.rid)</span><br><span class="line">      cookies.set(<span class="string">&#x27;token&#x27;</span>, res.token)</span><br><span class="line">      cookies.set(<span class="string">&#x27;username&#x27;</span>, res.username)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;储存token完成&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 描述 移除登录验证信息</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>ctx 上下文</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">removeCookies</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> $cookies</span><br><span class="line">    <span class="comment">// 客户端</span></span><br><span class="line">    <span class="keyword">if</span> (process.client) &#123;</span><br><span class="line">      $cookies = ctx.$cookies</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 服务端</span></span><br><span class="line">    <span class="keyword">if</span> (process.server) &#123;</span><br><span class="line">      $cookies = ctx.app.$cookies</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($cookies) &#123;</span><br><span class="line">      $cookies.removeAll(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-重要的api"><a href="#9-重要的api" class="headerlink" title="9.重要的api"></a>9.重要的api</h2><blockquote>
<p> 可访问到context的文件中,第一个参数为上下文,第二个为inject注入函数.</p>
</blockquote>
<h3 id="context"><a href="#context" class="headerlink" title="context"></a>context</h3><table>
<thead>
<tr>
<th>属性字段</th>
<th>类型</th>
<th>可用</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>app</code></td>
<td>Vue 根实例</td>
<td>客户端 &amp; 服务端</td>
<td>包含所有插件的 Vue 根实例。例如：在使用 <code>axios</code> 的时候，你想获取 <code>$axios</code> 可以直接通过 <code>context.app.$axios</code> 来获取</td>
</tr>
<tr>
<td><code>isClient</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否来自客户端渲染（废弃。请使用 <code>process.client</code> ）</td>
</tr>
<tr>
<td><code>isServer</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否来自服务端渲染（废弃。请使用 <code>process.server</code> ）</td>
</tr>
<tr>
<td><code>isStatic</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否来自 <code>nuxt generate</code> 静态化（预渲染）（废弃。请使用 <code>process.static</code> ）</td>
</tr>
<tr>
<td><code>isDev</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否是开发 dev 模式，在生产环境的数据缓存中用到</td>
</tr>
<tr>
<td><code>isHMR</code></td>
<td><code>Boolean</code></td>
<td>客户端 &amp; 服务端</td>
<td>是否是通过模块热替换 <code>webpack hot module replacement</code> (<em>仅在客户端以 dev 模式</em>)</td>
</tr>
<tr>
<td><code>route</code></td>
<td><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/api/#%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7">Vue Router 路由</a></td>
<td>客户端 &amp; 服务端</td>
<td>Vue Router 路由实例</td>
</tr>
<tr>
<td><code>store</code></td>
<td><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/api/">Vuex 数据</a></td>
<td>客户端 &amp; 服务端</td>
<td><code>Vuex.Store</code> 实例。<strong>只有<a target="_blank" rel="noopener" href="https://www.nuxtjs.cn/guide/vuex-store">vuex 数据流</a>存在相关配置时可用</strong></td>
</tr>
<tr>
<td><code>env</code></td>
<td><code>Object</code></td>
<td>客户端 &amp; 服务端</td>
<td><code>nuxt.config.js</code> 中配置的环境变量，见 <a target="_blank" rel="noopener" href="https://www.nuxtjs.cn/api/configuration-env">环境变量 api</a></td>
</tr>
<tr>
<td><code>params</code></td>
<td><code>Object</code></td>
<td>客户端 &amp; 服务端</td>
<td><code>route.params</code> 的别名</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>Object</code></td>
<td>客户端 &amp; 服务端</td>
<td><code>route.query</code> 的别名</td>
</tr>
<tr>
<td><code>req</code></td>
<td><a target="_blank" rel="noopener" href="https://nodejs.org/api/http.html#http_class_http_incomingmessage"><code>http.Request</code></a></td>
<td>服务端</td>
<td>Node.js API 的 Request 对象。如果 Nuxt 以中间件形式使用的话，这个对象就根据你所使用的框架而定。*<code>nuxt generate</code> 不可用*</td>
</tr>
<tr>
<td><code>res</code></td>
<td><a target="_blank" rel="noopener" href="https://nodejs.org/api/http.html#http_class_http_serverresponse"><code>http.Response</code></a></td>
<td>服务端</td>
<td>Node.js API 的 Response 对象。如果 Nuxt 以中间件形式使用的话，这个对象就根据你所使用的框架而定。*<code>nuxt generate</code> 不可用*</td>
</tr>
<tr>
<td><code>redirect</code></td>
<td><code>Function</code></td>
<td>客户端 &amp; 服务端</td>
<td>用这个方法重定向用户请求到另一个路由。状态码在服务端被使用，默认 302 <code>redirect([status,] path [, query])</code></td>
</tr>
<tr>
<td><code>error</code></td>
<td><code>Function</code></td>
<td>客户端 &amp; 服务端</td>
<td>用这个方法展示错误页：<code>error(params)</code> 。<code>params</code> 参数应该包含 <code>statusCode</code> 和 <code>message</code> 字段</td>
</tr>
<tr>
<td><code>nuxtState</code></td>
<td><code>Object</code></td>
<td>客户端</td>
<td>Nuxt 状态，在使用 <code>beforeNuxtRender</code> 之前，用于客户端获取 Nuxt 状态，仅在 <code>universal</code> 模式下可用</td>
</tr>
<tr>
<td><code>beforeNuxtRender(fn)</code></td>
<td><code>Function</code></td>
<td>服务端</td>
<td>使用此方法更新 <code>__NUXT__</code> 在客户端呈现的变量，<code>fn</code> 调用 (可以是异步) <code>&#123; Components, nuxtState &#125;</code> ，参考 <a target="_blank" rel="noopener" href="https://github.com/nuxt/nuxt.js/blob/cf6b0df45f678c5ac35535d49710c606ab34787d/test/fixtures/basic/pages/special-state.vue">示例</a></td>
</tr>
</tbody></table>
<h3 id="asyncData-方法"><a href="#asyncData-方法" class="headerlink" title="asyncData 方法"></a>asyncData 方法</h3><blockquote>
<p>你可能想要在服务器端获取并渲染数据。Nuxt.js 添加了<code>asyncData</code>方法使得你能够在渲染组件之前异步获取数据。</p>
</blockquote>
<ul>
<li><strong>类型：</strong> <code>Function</code></li>
</ul>
<p><code>asyncData</code>方法会在组件（<strong>限于页面组件</strong>）每次加载之前被调用。它可以在服务端或路由更新之前被调用。在这个方法被调用的时候，第一个参数被设定为当前页面的<strong>上下文对象</strong>，你可以利用 <code>asyncData</code>方法来获取数据并返回给当前组件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">project</span>: <span class="string">&#x27;default&#x27;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">asyncData</span>(<span class="params">context</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">project</span>: <span class="string">&#x27;nuxt&#x27;</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 注意：由于<code>asyncData</code>方法是在组件 <strong>初始化</strong> 前被调用的，所以在方法内是没有办法通过 <code>this</code> 来引用组件</p>
</blockquote>
<h3 id="middleware"><a href="#middleware" class="headerlink" title="middleware"></a>middleware</h3><blockquote>
<p>在应用中的特定页面设置中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">middleware</span>: <span class="string">&#x27;auth&#x27;</span></span><br><span class="line">    <span class="comment">// 指使用middleware/auth.js中间件方法</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>自定义页面级中间件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  &#123;</span><br><span class="line">    <span class="attr">middleware</span>: (&#123; store, redirect &#125;) &#123;</span><br><span class="line">    <span class="comment">// If the user is not authenticated</span></span><br><span class="line">    <span class="keyword">if</span> (!store.state.authenticated) &#123;</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><blockquote>
<p>写入vuex状态树</p>
<p><em>fetch 方法用于在渲染页面前填充应用的状态树（store）数据， 与 asyncData 方法类似，不同的是它不会设置组件的数据。</em></p>
</blockquote>
<h3 id="validate-方法"><a href="#validate-方法" class="headerlink" title="validate 方法"></a>validate 方法</h3><blockquote>
<p>Nuxt.js 可以让你在动态路由对应的页面组件中配置一个校验方法用于校验动态路由参数的有效性。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">validate</span>(<span class="params">&#123; params, query &#125;</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// 如果参数有效</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// 参数无效，Nuxt.js 停止渲染当前页面并显示错误页面</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果校验方法返回的值不为 <code>true</code>， Nuxt.js 将自动加载显示 404 错误页面。</p>
</blockquote>
<h2 id="10-错误页面"><a href="#10-错误页面" class="headerlink" title="10.错误页面"></a>10.错误页面</h2><blockquote>
<p>自定义错误页面可以在<code>layouts</code>目录下创建<code>error.vue</code>页面</p>
<p>通过prop属性接受错误信息,后续处理并展示</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error-page&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;where-is-panfish&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem bg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/bg.1f516b3.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem panfish&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/panfish.9be67f5.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem sea&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/sea.892cf5d.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;elem spray&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://b-gold-cdn.xitu.io/v3/static/img/spray.bc638d2.png&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; statusCode &#125;&#125; - &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">nuxt-link</span> <span class="attr">class</span>=<span class="string">&quot;error-link&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>回到首页<span class="tag">&lt;/<span class="name">nuxt-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">error</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">default</span>: <span class="literal">null</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">statusCode</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> (<span class="built_in">this</span>.error &amp;&amp; <span class="built_in">this</span>.error.statusCode) || <span class="number">500</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">message</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> <span class="built_in">this</span>.error.message || <span class="string">&#x27;Error&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.error-page</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">background</span>: <span class="number">#f7f8fb</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">color</span>: <span class="number">#47494e</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">flex-direction</span>: column;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-family</span>: sans-serif;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-weight</span>: <span class="number">100</span> <span class="meta">!important</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -ms-text-size-adjust: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -webkit-text-size-adjust: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.error</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">flex-direction</span>: column;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">960px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.title</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">color</span>: <span class="number">#ed556a</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.error-link</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">display</span>: block;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">margin-top</span>: <span class="number">24px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding</span>: <span class="number">14px</span> <span class="number">24px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">background-color</span>: <span class="number">#007fff</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.where-is-panfish</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">width</span>: <span class="number">624px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">max-width</span>: <span class="number">70%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding-top</span>: <span class="number">48%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.elem</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">top</span>: <span class="number">35%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">left</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.bg</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">77.724%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.panfish</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">20.994%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">32%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">animation</span>: panfish <span class="number">2s</span> ease-in-out infinite alternate;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.sea</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">99.199%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">75.3%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">opacity</span>: <span class="number">0.7</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.spray</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">40.545%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">162%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">opacity</span>: <span class="number">0.4</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="keyword">@keyframes</span> panfish &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="number">0%</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">30%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="number">100%</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">55%</span>, <span class="number">36%</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/taiaiac.gitee.io/tags/nuxtjs/" rel="tag"># nuxtjs</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/taiaiac.gitee.io/2021/03/16/nuxt/nuxtjs%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" rel="prev" title="nuxtjs基础">
      <i class="fa fa-chevron-left"></i> nuxtjs基础
    </a></div>
      <div class="post-nav-item">
    <a href="/taiaiac.gitee.io/2021/03/24/nuxt/nuxt%E9%83%A8%E7%BD%B2/" rel="next" title="nuxt部署">
      nuxt部署 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
<script
      type="text/javascript"
      color="0,205,205"
      opacity="0.7"
      zIndex="-2"
      count="99"
      src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"
    ></script>
        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.</span> <span class="nav-text">1.命令行创建项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%80%89%E9%A1%B9%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">2.选项配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95"><span class="nav-number">3.</span> <span class="nav-text">3.项目目录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E8%A6%81%E7%9B%AE%E5%BD%95"><span class="nav-number">3.0.1.</span> <span class="nav-text">重要目录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">4.</span> <span class="nav-text">4.环境搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%A1%B9%E7%9B%AE%E5%BF%85%E5%A4%87%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="nav-number">4.1.</span> <span class="nav-text">安装项目必备的插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nuxt-config-js%E9%85%8D%E7%BD%AE"><span class="nav-number">4.2.</span> <span class="nav-text">nuxt.config.js配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%B7%AF%E7%94%B1"><span class="nav-number">5.</span> <span class="nav-text">5.路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%88%87%E6%8D%A2%E5%8A%A8%E6%80%81%E6%95%88%E6%9E%9C"><span class="nav-number">5.1.</span> <span class="nav-text">路由切换动态效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="nav-number">5.2.</span> <span class="nav-text">路由守卫</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">5.2.1.</span> <span class="nav-text">1.使用中间件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB-%E5%85%A8%E5%B1%80"><span class="nav-number">5.2.2.</span> <span class="nav-text">2.路由守卫(全局)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB-%E9%A1%B5%E9%9D%A2%E7%BA%A7"><span class="nav-number">5.2.3.</span> <span class="nav-text">3.路由守卫(页面级)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E6%8F%92%E4%BB%B6%E5%B7%A5%E5%85%B7%E6%95%B4%E7%90%86%E5%92%8C%E5%B0%81%E8%A3%85%E6%B3%A8%E5%85%A5"><span class="nav-number">6.</span> <span class="nav-text">6.插件工具整理和封装注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E5%BC%95%E5%85%A5-%E6%8C%82%E8%BD%BD-%E6%B3%A8%E5%85%A5"><span class="nav-number">7.</span> <span class="nav-text">7.引入,挂载,注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82"><span class="nav-number">7.1.</span> <span class="nav-text">封装请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6%E7%9A%84%E5%BC%95%E5%85%A5"><span class="nav-number">8.</span> <span class="nav-text">8.全局组件的引入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E9%87%8D%E8%A6%81%E7%9A%84api"><span class="nav-number">9.</span> <span class="nav-text">9.重要的api</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#context"><span class="nav-number">9.1.</span> <span class="nav-text">context</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#asyncData-%E6%96%B9%E6%B3%95"><span class="nav-number">9.2.</span> <span class="nav-text">asyncData 方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#middleware"><span class="nav-number">9.3.</span> <span class="nav-text">middleware</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fetch"><span class="nav-number">9.4.</span> <span class="nav-text">fetch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#validate-%E6%96%B9%E6%B3%95"><span class="nav-number">9.5.</span> <span class="nav-text">validate 方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2"><span class="nav-number">10.</span> <span class="nav-text">10.错误页面</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Z.A.M."
      src="http://aimin-img.oss-cn-hangzhou.aliyuncs.com/%E5%A4%B4%E5%83%8F/header.jpg">
  <p class="site-author-name" itemprop="name">Z.A.M.</p>
  <div class="site-description" itemprop="description">所有不利,都是 能力不足 导致的. <br> By <东京喰种>.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/taiaiac.gitee.io/archives/">
        
          <span class="site-state-item-count">152</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/taiaiac.gitee.io/categories/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/taiaiac.gitee.io/tags/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Z.A.M.</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

<div>
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
</div>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("12/01/2020 18:00:00");//在此处修改你的建站时间，格式：月/日/年 时:分:秒
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",1000);
</script>
        








      </div>
    </footer>
  </div>

  
  <script src="/taiaiac.gitee.io/lib/anime.min.js"></script>
  <script src="/taiaiac.gitee.io/lib/velocity/velocity.min.js"></script>
  <script src="/taiaiac.gitee.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/taiaiac.gitee.io/js/utils.js"></script>

<script src="/taiaiac.gitee.io/js/motion.js"></script>


<script src="/taiaiac.gitee.io/js/schemes/pisces.js"></script>


<script src="/taiaiac.gitee.io/js/next-boot.js"></script>




  




  
<script src="/taiaiac.gitee.io/js/local-search.js"></script>













  

  

<script src="/taiaiac.gitee.io/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/taiaiac.gitee.io/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":200,"height":434},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
