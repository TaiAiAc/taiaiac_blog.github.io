<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Z.A.M.">
  <!-- Open Graph Data -->
  <meta property="og:title" content="ESlint使用简介"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="Z. A. M. 的个人博客"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://gitee.com/aidemin/taiaiac.gitee.io.git"/>
  
  
    <link rel="icon" href="/favicon.ico">
  

  <!-- Site Title -->
  <title>Z. A. M. 的个人博客</title>

  <!-- Bootstrap CSS -->
  
<link rel="stylesheet" href="/taiaiac.gitee.io/css/bootstrap.min.css">

  <!-- Custom CSS -->
  
  
<link rel="stylesheet" href="/taiaiac.gitee.io/css/style.light.css">


  <!-- Google Analytics -->
  

<meta name="generator" content="Hexo 5.3.0"></head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/taiaiac.gitee.io//img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">ESlint使用简介</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/taiaiac.gitee.io/">
                  
                  文档
                  
                </a>
              </li>
            
              <li>
                <a href="/taiaiac.gitee.io/archives">
                  
                  分类
                  
                </a>
              </li>
            
              <li>
                <a href="https://gitee.com/aidemin">
                  
                  码云
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Z.A.M.</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2020-12-30</span>
            <span class="time">15:28:20</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/taiaiac.gitee.io/categories/vue/">vue</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/taiaiac.gitee.io/tags/vue/">#vue</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="ESLint-使用简介"><a href="#ESLint-使用简介" class="headerlink" title="ESLint 使用简介"></a>ESLint 使用简介</h1><h5 id="一、JSLint-JSHint-ESLint"><a href="#一、JSLint-JSHint-ESLint" class="headerlink" title="一、JSLint JSHint ESLint"></a>一、JSLint JSHint ESLint</h5><p>参考<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32297243">前端工具考 - ESLint 篇</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34656263">JS Linter 进化史</a></p>
<blockquote>
<p>C 语言诞生之初，程序员编写的代码风格各异，在移植时会出现一些因为不严谨的代码段导致无法被编译器执行的问题。于是在 1979 年，一款叫 lint[1] 的程序被开发出来，能够通过扫描源代码检测潜在的错误。此后 lint 的功能不断完善，类似的工具相继出现。不仅可以检测代码中的潜在 Bug，还能做一些类型检查。</p>
</blockquote>
<h6 id="1、JavaScript-为什么需要-lint"><a href="#1、JavaScript-为什么需要-lint" class="headerlink" title="1、JavaScript 为什么需要 lint"></a>1、JavaScript 为什么需要 lint</h6><p>起初 JavaScript 被开发出来的目的只是用在 Web 页面里实现一些简单的交互（例如表单提交）。随着互联网发展，网站需要展示的内容更加丰富，交互也变得复杂，前端项目也越来越庞大；2009 年，NodeJS 的诞生使得 JavaScript 可以跑在服务端，更是让其地位更加突出。在 2017 年 GitHub 开发语言排行榜中，JavaScript 毫无疑问排在第一位。[2]</p>
<p>再加上 JavaScript 本身设计上存在许多缺陷[3]，代码不严谨也可能就会触发神奇的错误。例如 == 和 === 的混用，可能会产生类型不一致引起的 Bug，经验不足的开发者很难察觉出异常。</p>
<p>2002 年，Douglas Crockford （译注:《JavaScript 语言精粹》的作者）开发了可能是第一款针对 JavaScript 的语法检测工具 —— JSLint[4]，并于 2010 年开源。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-57e6e752521ae444.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/387/format/webp" alt="img"></p>
<p>image.png</p>
<h6 id="2、JSLint-和-JSHint"><a href="#2、JSLint-和-JSHint" class="headerlink" title="2、JSLint 和 JSHint"></a>2、JSLint 和 JSHint</h6><p>JSLint 面市后，确实帮助许多 JavaScript 开发者节省了不少排查代码错误的时间。但是 JSLint 的问题也很明显——几乎不可配置，所有的代码风格和规则都是内置好的；再加上 Douglas Crockford 老爷子推崇道系「爱用不用」的优良传统，不会向开发者妥协开放配置或者修改他觉得是对的规则。于是 Anton Kovalyov 吐槽：「JSLint 是让你的代码风格更像 Douglas Crockford 的而已」[5]，并且在 2011 年 Fork 原项目开发了 JSHint。</p>
<p>JSHint 的特点就是可配置，同时文档也相对完善，而且对开发者友好。很快大家就从 JSLint 转向了 JSHint。</p>
<h6 id="3、ESLint-的诞生"><a href="#3、ESLint-的诞生" class="headerlink" title="3、ESLint 的诞生"></a>3、ESLint 的诞生</h6><p><img src="https://upload-images.jianshu.io/upload_images/2354823-ee5208b37e75b186.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/594/format/webp" alt="img"></p>
<p>image.png</p>
<p>起初几年，JSHint 一直是前端代码检测工具的首选，包括 Nicholas C. Zakas （《JavaScript 高级程序设计》作者）也是 JSHint 的用户。但在 2013 年，Zakas 大佬发现 JSHint 已经无法满足自己定制化规则的需求，而且和 Anton 讨论后达成共识这根本在不可能在 JSHint 上实现。同时 Zakas 还设想发明一个基于 AST 的 lint，可以动态执行额外的规则，同时可以很方便的扩展规则。[6]</p>
<p>2013 年的 6 月份，Zakas 发布了全新的 lint 工具——ESLint[7]。</p>
<p>几乎同一时间，另一款和 ESLint 实现机制类似的代码风格检测工具——JSCS[8]——也诞生了。</p>
<h6 id="4、可扩展性的胜利"><a href="#4、可扩展性的胜利" class="headerlink" title="4、可扩展性的胜利"></a>4、可扩展性的胜利</h6><p>ESLint 的出现并没有撼动 JSHint 的霸主地位。由于前者是利用 AST 处理规则，用 Esprima 解析代码，执行速度要比只需要一步搞定的 JSHint 慢很多；其次当时已经有许多编辑器对 JSHint 支持完善，生态足够强大。真正让 ESLint 逆袭的是 ECMAScript 6 的出现。</p>
<p>2015 年 6 月，ES2015 规范正式发布。但是发布后，市面上浏览器对最新标准的支持情况极其有限。如果想要提前体验最新标准的语法，就得靠 Babel 之类的工具将代码编译成 ES5 甚至更低的版本，同时一些实验性的特性也能靠 Babel 转换。这时 JSHint 就略尴尬，ES2015 变化很大，短期内无法完全支持。ESLint 可扩展的优势一下就体现出来了，不仅可以扩展规则，甚至连解析器也能替换。Babel 团队就为 ESLint 开发了 babel-eslint[9] 替换默认解析器，让 ESLint 率先支持 ES2015 语法。</p>
<p>也是在 2015 年，React 的应用越来越广泛，诞生不久的 JSX 也愈加流行。ESLint 本身也不支持 JSX 语法。还是因为可扩展性，eslint-plugin-react[10] 的出现让 ESLint 也能支持当时 React 特有的规则。</p>
<p>2016 年，JSCS 开发团队认为 ESLint 和 JSCS 实现原理太过相似，而且需要解决的问题也都一致，最终选择合并到 ESLint，并停止 JSCS 的维护。[11]</p>
<p>至此，ESLint 完美躺赢，替代 JSHint 成为前端主流工具。[12]</p>
<h5 id="二、ESLint-入门"><a href="#二、ESLint-入门" class="headerlink" title="二、ESLint 入门"></a>二、ESLint 入门</h5><p>参考<br><a target="_blank" rel="noopener" href="https://morning.work/page/maintainable-nodejs/getting-started-with-eslint.html">利用 ESLint 检查代码质量</a><br><a target="_blank" rel="noopener" href="https://cn.eslint.org/">ESLint 中文网</a> 1.安装<br><code>npm install -g eslint</code> 2.准备一个 js 文件来测试一下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ret = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="built_in">arguments</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">arguments</span>[i]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j <span class="keyword">in</span> m) ret[j] = m[j]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(merge(&#123; <span class="attr">a</span>: <span class="number">123</span> &#125;, &#123; <span class="attr">b</span>: <span class="number">456</span> &#125;))</span><br></pre></td></tr></table></figure>
<p>3.执行<code>eslint merge.js</code><br>这时是没有输出结果的，原因是没有指定配置文件。现在添加一个.eslintrc.js，使用内置配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>重新执行 eslint merge.js 可以看到输出了 2 个错误：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/example/merge.js</span><br><span class="line">  <span class="number">10</span>:<span class="number">1</span>  error  Unexpected <span class="built_in">console</span> statement  no-<span class="built_in">console</span></span><br><span class="line">  <span class="number">10</span>:<span class="number">1</span>  error  <span class="string">&#x27;console&#x27;</span> is not defined      no-undef</span><br><span class="line"></span><br><span class="line">✖ <span class="number">2</span> problem (<span class="number">2</span> error, <span class="number">0</span> warnings)</span><br></pre></td></tr></table></figure>
<p>这两条提示信息还是足够我们搞清楚是怎么回事的：</p>
<ul>
<li>Unexpected console statement no-console - 不能使用 console</li>
<li>‘console’ is not defined no-undef - console 变量未定义，不能使用未定义的变量</li>
</ul>
<p>针对第 1 条提示，我们可以禁用 no-console 规则。将配置文件.eslintrc.js 改为这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>说明：配置规则写在 rules 对象里面，key 表示规则名称，value 表示规则的配置。每条规则有 3 个等级：off、warn 和 error。off 表示禁用这条规则，warn 表示仅给出警告，并不会导致检查不通过，而 error 则会导致检查不通过。可以参考<a target="_blank" rel="noopener" href="https://cn.eslint.org/docs/rules/">规则说明文档</a></p>
<p>重新执行检查还是提示 no-undef：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/example/merge.js</span><br><span class="line">  <span class="number">10</span><span class="symbol">:</span><span class="number">1</span>  error  <span class="string">&#x27;console&#x27;</span> is <span class="keyword">not</span> <span class="keyword">defined</span>  no-<span class="keyword">undef</span></span><br><span class="line"></span><br><span class="line">✖ <span class="number">1</span> problem (<span class="number">1</span> error, <span class="number">0</span> warnings)</span><br></pre></td></tr></table></figure>
<p>这是因为 JavaScript 有很多种运行环境，比如常见的有浏览器和 Node.js，另外还有很多软件系统使用 JavaScript 作为其脚本引擎，比如 PostgreSQL 就支持使用 JavaScript 来编写存储引擎，而这些运行环境可能并不存在 console 这个对象。另外在浏览器环境下会有 window 对象，而 Node.js 下没有；在 Node.js 下会有 process 对象，而浏览器环境下没有。</p>
<p>所以在配置文件中我们还需要指定程序的目标环境：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="keyword">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>再重新执行检查时，已经没有任何提示输出了，说明 merge.js 已经完全通过了检查。</p>
<p>4.使用共享的配置文件<br>上文我们以 eslint:recommended 为基础配置，然后在此之上修改 no-console 这条规则。而在大多数时候，我们可能会根据自己个人或团队的习惯，定制更多的规则，比如<strong>限定缩进是 2 个空格和使用单引号的字符串</strong>等。而如果每一个项目都要这样写到.eslintrc.js 文件上，管理起来会比较麻烦。</p>
<p>我们可以将定义好规则的.eslintrc.js 文件存储到一个公共的位置，比如 public-eslintrc.js：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="keyword">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;indent&#x27;</span>: [ <span class="string">&#x27;error&#x27;</span>, <span class="number">2</span> ],</span><br><span class="line">    <span class="string">&#x27;quotes&#x27;</span>: [ <span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;single&#x27;</span> ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>然后将原来的.eslintrc.js 文件改成这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">  extends: <span class="string">&#x27;./public-eslintrc.js&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>为了验证这样的修改是否生效，将 merge.js 中的 var ret = {};这一行前面多加一个空格，再执行 ESLint 检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;example&#x2F;merge.js</span><br><span class="line">  2:4  error  Expected indentation of 2 space characters but found 3  indent</span><br><span class="line"></span><br><span class="line">✖ 1 problem (1 error, 0 warnings)</span><br></pre></td></tr></table></figure>
<p>这时候提示的是缩进只能为 2 个空格，而文件的第 2 行却发现了 3 个空格，说明公共配置文件 public-eslintrc.js 已经生效了。</p>
<p>5.代码格式化<br>在<a target="_blank" rel="noopener" href="https://cn.eslint.org/docs/rules/">规则说明文档</a>中有如下说明</p>
<blockquote>
<p>为了让你对规则有个更好的理解，ESLint 对其进行了分门别类。<br>所有的规则默认都是禁用的。在配置文件中，使用 “extends”: “eslint:recommended” 来启用推荐的规则，报告一些常见的问题，在下文中这些推荐的规则都带有一个对勾标记。<br>命令行的 –fix 选项用来自动修复规则所报告的问题（目前，大部分是对空白的修复），在下文中会有一个扳手的图标。</p>
</blockquote>
<p>使用上述配置，将 merge.js 中的 var ret = {};这一行前面多加一个空格。然后执行<code>eslint merge.js --fix</code>，可以发现 merge.js 文件被修改了，新添加的空格被去除了。我们可以利用这个特性来自动格式化项目代码，这样就可以保证代码书写风格的统一。</p>
<p>5.例外情况<br>尽管我们在编码时怀着<strong>严格遵守规则</strong>的美好愿景，而<strong>凡事总有例外</strong>。定立 ESLint 规则的初衷是为了避免自己犯错，但是我们也要避免不顾实际情况而将其搞得太过于形式化，本末倒置。</p>
<p>ESLint 提供了多种临时禁用规则的方式，比如我们可以通过一条<code>eslint-disable-next-line</code>备注来使得下一行可以跳过检查：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint-disable-next-line</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">456</span>;</span><br></pre></td></tr></table></figure>
<p>在上面的示例代码中，<code>var a = 123</code>不会受到检查，而<code>var b = 456</code>则右恢复检查，在上文我们使用的<code>eslint-config-lei</code>的配置规则下，由于不允许使用<code>var</code>声明变量，则<code>var b</code>这一行会报告一个<code>error</code>。</p>
<p>我们还可以通过成对的<code>eslint-enable</code>和<code>eslint-disable</code>备注来禁用对某一段代码的检查，但是稍不小心少写了一个<code>eslint-disable</code>就可能会导致后面所有文件的检查都被禁用，所以我并不推荐使用。</p>
<p>详细使用方法可以参考文档：<a target="_blank" rel="noopener" href="http://cn.eslint.org/docs/user-guide/configuring#disabling-rules-with-inline-comments">Disabling Rules with Inline Comments - 使用行内注释禁用规则</a></p>
<p>6.总结<br>刚开始接触 ESLint 时觉得太难，是因为过太过于迷信权威。比如 Airbnb 公司的 JavaScript 风格，在 GitHub 上受到了很大的好评，其实我自己也非常认可这样的编码风格。但每个团队都会根据自己的的实际情况来定制不同的东西，我们并不能随便照搬过来。所以当使用 eslint-config-airbnb 这个配置进行 ESLint 检查时，满屏都是 error 和 warning，从而觉得这东西根本没啥卵用。</p>
<p>另外我也犯了「大忌」：直接使用 eslint-config-airbnb 这种某个公司高度定制化的配置，而不是 eslint:recommended 这样保守的。而且是直接用来检查整个项目好几十个 JS 文件，可想而知那是怎样的画面（本文最后版本的 merge.js 文件使用 airbnb 的配置，总共 12 行的代码就提示了 8 个问题：✖ 8 problems (7 errors, 1 warning)）。</p>
<p>本文的目的是让读者以一个比较低的姿态开始接触 ESLint，先学会简单地配置规则，如果要更深入地定制自己的规则，建议阅读<br><a target="_blank" rel="noopener" href="https://cn.eslint.org/docs/rules/">规则说明文档</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25271435">ESLint 规则详解（一）</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26910986">ESLint 规则详解（二）</a></p>
<h5 id="三、其它问题"><a href="#三、其它问题" class="headerlink" title="三、其它问题"></a>三、其它问题</h5><p>1.eslint –init<br>在第二部分入门示例时，是手动创建的.eslintrc.js。其实也可以使用 eslint –init 来创建<br>可以选个模板，也可以自己回答问题</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PS</span> <span class="type">E</span>:\eslint<span class="operator">&gt;</span> eslint <span class="operator">--</span><span class="keyword">init</span></span><br><span class="line"><span class="operator">?</span> <span class="type">How</span> would you like to configure <span class="type">ESLint</span>? <span class="type">Use</span> a popular style guide</span><br><span class="line"><span class="operator">?</span> <span class="type">Which</span> style guide <span class="keyword">do</span> you want to follow<span class="operator">?</span> (<span class="type">Use</span> arrow keys)</span><br><span class="line"><span class="operator">&gt;</span> <span class="type">Airbnb</span> (https:<span class="comment">//github.com/airbnb/javascript)</span></span><br><span class="line">  <span class="type">Standard</span> (https:<span class="comment">//github.com/standard/standard)</span></span><br><span class="line">  <span class="type">Google</span> (https:<span class="comment">//github.com/google/eslint-config-google)</span></span><br></pre></td></tr></table></figure>
<p>比如选 airbnb</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;airbnb&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>也可以自己回答问题来创建</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&gt; eslint --init</span><br><span class="line"></span><br><span class="line">? How would you like to configure ESLint? Answer questions about your style</span><br><span class="line"><span class="comment">// 是否校验 Es6 语法</span></span><br><span class="line">? Are you using ECMAScript <span class="number">6</span> features? Yes</span><br><span class="line"><span class="comment">// 是否校验 Es6 模块语法</span></span><br><span class="line">? Are you using ES6 modules? Yes</span><br><span class="line"><span class="comment">// 代码运行环境，Browser 指浏览器</span></span><br><span class="line">? Where will your code run? Browser</span><br><span class="line"><span class="comment">// 是否校验 CommonJs 语法</span></span><br><span class="line">? Do you <span class="keyword">use</span> CommonJS? Yes</span><br><span class="line"><span class="comment">// 是否校验 JSX 语法</span></span><br><span class="line">? Do you <span class="keyword">use</span> JSX? Yes</span><br><span class="line"><span class="comment">// 是否校验 React 语法</span></span><br><span class="line">? Do you <span class="keyword">use</span> React? Yes</span><br><span class="line"><span class="comment">// 首行空白选择 Tab 键还是 Space</span></span><br><span class="line">? What style of indentation <span class="keyword">do</span> you <span class="keyword">use</span>? Tabs</span><br><span class="line"><span class="comment">// 字符串使用单引号 &#x27;string&#x27; 还是双引号 &quot;string&quot;</span></span><br><span class="line">? What quotes <span class="keyword">do</span> you <span class="keyword">use</span> <span class="keyword">for</span> strings? Double</span><br><span class="line"><span class="comment">// 操作系统</span></span><br><span class="line">? What line endings <span class="keyword">do</span> you <span class="keyword">use</span>? Windows</span><br><span class="line"><span class="comment">// 每行代码结尾是否校验加分号 ;</span></span><br><span class="line">? Do you require semicolons? Yes</span><br><span class="line"><span class="comment">// 以 .js 格式生成配置文件</span></span><br><span class="line">? What format <span class="keyword">do</span> you want your config file to be <span class="keyword">in</span>? JavaScript</span><br><span class="line"><span class="comment">// 因为要校验 Reac 语法，所以这里需要下载一个 React 语法规则的包</span></span><br><span class="line">Installing eslint-plugin-react@latest</span><br></pre></td></tr></table></figure>
<p>2.”extends”: “eslint:recommended”<br>值为 “eslint:recommended” 的 extends 属性启用一系列核心规则，这些规则是经过前人验证的最佳实践（所谓最佳实践，就是大家伙都觉得应该遵循的编码规范），想知道最佳实践具体有哪些编码规范，可以在 eslint 规则表 中查看被标记为 √ 的规则项。</p>
<p>如果觉得官方提供的默认规则不好用，可以自定义规则配置文件，然后发布成 Npm 包，eslint-config-airbnb 就是别人自定义的编码规范，使用 npm 安装后，在我们自己的 .eslintrc.js 中进行配置 “extends”: “airbnb”，eslint-config 这个前缀可以省略不写，这样我们就使用了 eslint-config-airbnb 中的规则，而不是官方的规则 “extends”: “eslint:recommended” 了。关于如何创建自定义规则配置并共享可以参考： 如何自定义规则配置</p>
<p><strong>关于 “airbnb” 编码规范说两句，在接触到大多数开源项目中，大多数的作者都会使用 “airbnb” 编码规范而不是 官方的”extends”: “eslint:recommended” 编码规范。如果我们觉得 eslint-config-airbnb 规则配置中个别规则并不符合当前项目的要求，可以直接在 .eslintrc.js 配置 rules 属性，优先级高于共享规则 airbnb。</strong></p>
<p>3.rules<br>ESLint 附带有大量的规则，修改规则应遵循如下要求：</p>
<ul>
<li>“off” 或 0 - 关闭规则</li>
<li>“warn” 或 1 - 开启规则，使用警告级别的错误：warn (不会导致程序退出)</li>
<li>“error” 或 2 - 开启规则，使用错误级别的错误：error (当被触发的时候，程序会退出)</li>
</ul>
<p>有的规则没有属性，只需控制是开启还是关闭，像这样：”eqeqeq”: “off”，有的规则有自己的属性，使用起来像这样：”quotes”: [“error”, “double”]</p>
<p>4.【文件配置】<br>ESLint 支持几种格式的配置文件</p>
<ul>
<li>JavaScript - 使用 .eslintrc.js 然后输出一个配置对象。</li>
<li>YAML - 使用 .eslintrc.yaml 或 .eslintrc.yml 去定义配置的结构。</li>
<li>JSON - 使用 .eslintrc.json 去定义配置的结构，ESLint 的 JSON 文件允许 JavaScript 风格的注释。</li>
<li>(弃用) - 使用 .eslintrc，可以使 JSON 也可以是 YAML。</li>
<li>package.json - 在 package.json 里创建一个 eslintConfig 属性，在那里定义配置。</li>
</ul>
<p>如果同一个目录下有多个配置文件，ESLint 只会使用一个。优先级顺序如下</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 <span class="selector-class">.eslintrc</span><span class="selector-class">.js</span></span><br><span class="line">2 <span class="selector-class">.eslintrc</span><span class="selector-class">.yaml</span></span><br><span class="line">3 <span class="selector-class">.eslintrc</span><span class="selector-class">.yml</span></span><br><span class="line">4 <span class="selector-class">.eslintrc</span><span class="selector-class">.json</span></span><br><span class="line">5 <span class="selector-class">.eslintrc</span></span><br><span class="line">6  <span class="selector-tag">package</span><span class="selector-class">.json</span></span><br></pre></td></tr></table></figure>
<p>除了配置一个独立的 .eslintrc.* 文件，也可以直接在 package.json 文件里的 eslintConfig 字段指定配置，ESLint 将自动在要检测的文件目录里寻找它们，紧接着是父级目录，一直到文件系统的根目录</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;mypackage&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.0.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="四、gulp-eslint"><a href="#四、gulp-eslint" class="headerlink" title="四、gulp-eslint"></a>四、<a target="_blank" rel="noopener" href="https://github.com/adametry/gulp-eslint">gulp-eslint</a></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-eslint --save</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const eslint &#x3D; require(&#39;gulp-eslint&#39;)</span><br><span class="line"></span><br><span class="line">task(&#39;default&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    src([&#39;scripts&#x2F;*.js&#39;])</span><br><span class="line">      &#x2F;&#x2F; eslint() attaches the lint output to the &quot;eslint&quot; property</span><br><span class="line">      &#x2F;&#x2F; of the file object so it can be used by other modules.</span><br><span class="line">      .pipe(eslint())</span><br><span class="line">      &#x2F;&#x2F; eslint.format() outputs the lint results to the console.</span><br><span class="line">      &#x2F;&#x2F; Alternatively use eslint.formatEach() (see Docs).</span><br><span class="line">      .pipe(eslint.format())</span><br><span class="line">      &#x2F;&#x2F; To have the process exit with an error code (1) on</span><br><span class="line">      &#x2F;&#x2F; lint error, return the stream and pipe to failAfterError last.</span><br><span class="line">      .pipe(eslint.failAfterError())</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>比如，针对上面的例子，可以写一个 gulpfile.js</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>),</span><br><span class="line">  eslint = <span class="built_in">require</span>(<span class="string">&#x27;gulp-eslint&#x27;</span>)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;lint&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src([<span class="string">&#x27;merge.js&#x27;</span>]).pipe(eslint()).pipe(eslint.format())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;lint&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;suc&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>执行结果</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PS E:\eslint&gt; gulp <span class="literal">default</span></span><br><span class="line">[<span class="meta">16:10:52</span>] Using gulpfile E:\eslint\gulpfile.js</span><br><span class="line">[<span class="meta">16:10:52</span>] Starting <span class="string">&#x27;lint&#x27;</span>...</span><br><span class="line">[<span class="meta">16:10:53</span>]</span><br><span class="line">E:\eslint\merge.js</span><br><span class="line">   <span class="number">4</span>:<span class="number">3</span>  error  Unexpected console statement  no-console</span><br><span class="line">  <span class="number">12</span>:<span class="number">1</span>  error  Unexpected console statement  no-console</span><br><span class="line"></span><br><span class="line">✖ <span class="number">2</span> problems (<span class="number">0</span> errors, <span class="number">2</span> warnings)</span><br><span class="line"></span><br><span class="line">[<span class="meta">16:10:53</span>] Finished <span class="string">&#x27;lint&#x27;</span> after <span class="number">495</span> ms</span><br><span class="line">[<span class="meta">16:10:53</span>] Starting <span class="string">&#x27;default&#x27;</span>...</span><br><span class="line">suc</span><br><span class="line">[<span class="meta">16:10:53</span>] Finished <span class="string">&#x27;default&#x27;</span> after</span><br></pre></td></tr></table></figure>
<p>这里明明报错了，还是执行到 console.log(“suc”)了。原来是 gulpfile.js 还要再加一行</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;lint&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src([<span class="string">&#x27;merge.js&#x27;</span>])</span><br><span class="line">    .pipe(eslint())</span><br><span class="line">    .pipe(eslint.format())</span><br><span class="line">    .pipe(eslint.failAfterError())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这下子就过不去了</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">✖ <span class="number">2</span> problems (<span class="number">2</span> errors, <span class="number">0</span> warnings)</span><br><span class="line"></span><br><span class="line">[<span class="meta">16:21:13</span>] <span class="string">&#x27;lint&#x27;</span> errored after <span class="number">503</span> ms</span><br><span class="line">[<span class="meta">16:21:13</span>] ESLintError <span class="keyword">in</span> plugin <span class="string">&quot;gulp-eslint&quot;</span></span><br><span class="line">Message:</span><br><span class="line">    Failed <span class="keyword">with</span> <span class="number">2</span> errors</span><br></pre></td></tr></table></figure>
<p>这里其实可以通过一个 bool 变量来控制：<code>.pipe(exit ? eslint.failAfterError() : eslint.result(function () &#123;&#125;));</code></p>
<h5 id="五、在-vscode-中使用-eslint"><a href="#五、在-vscode-中使用-eslint" class="headerlink" title="五、在 vscode 中使用 eslint"></a>五、在 vscode 中使用 eslint</h5><p>参考<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009077086">使用 VSCode + ESLint 实践前端编码规范</a></p>
<p>1.首先，打开 VSCode 扩展面板并搜索 ESLint 扩展，然后点击安装</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-1ad62e9111828bcc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/362/format/webp" alt="img"></p>
<p>image.png</p>
<p>安装完成之后，点击重新加载，或者重启 vscode</p>
<p>2.依次点击 vscode 中的 文件 &gt; 首选项 &gt; 设置 打开 VSCode 配置文件</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-53217148ee8d2abd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/946/format/webp" alt="img"></p>
<p>image.png</p>
<p>可以看到已经启用 eslint 了</p>
<p>3.打开 merge.js 可以看到报错，和上面命令行中的相同：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2354823-cf9a4ce4ac2becdf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/527/format/webp" alt="img"></p>
<p>image.png</p>
<p>4.注意，我们已经安装过全局的 eslint 并且生成 eslintrc.js 了。如果没有这些操作，也是不行的。</p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->

<script src="/taiaiac.gitee.io/js/highlight.pack.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

